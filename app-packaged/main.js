!function i(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./data"),s=e("./sui"),l=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.openJavaScript=t.openJavaScript.bind(t),t.showLanguagePicker=t.showLanguagePicker.bind(t),t.toggleHighContrast=t.toggleHighContrast.bind(t),t.goHome=t.goHome.bind(t),t}return o(e,n),e.prototype.openJavaScript=function(){pxt.tickEvent("accmenu.editor.openJS",void 0,{interactiveConsent:!0}),this.props.parent.openJavaScript()},e.prototype.showLanguagePicker=function(){pxt.tickEvent("accmenu.editor.importdialog",void 0,{interactiveConsent:!0}),this.props.parent.showLanguagePicker()},e.prototype.toggleHighContrast=function(){pxt.tickEvent("accmenu.editor.togglecontrast",void 0,{interactiveConsent:!0}),this.props.parent.toggleHighContrast()},e.prototype.goHome=function(){pxt.tickEvent("accmenu.editor.home",void 0,{interactiveConsent:!0}),this.props.parent.showExitAndSaveDialog()},e.prototype.componentWillReceiveProps=function(e){var t={};null!=e.highContrast&&(t.highContrast=e.highContrast),0<Object.keys(t).length&&this.setState(t)},e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.highContrast!=t.highContrast},e.prototype.renderCore=function(){var e=this.props.parent.state.highContrast,t=pxt.appTarget.appTheme,n=!pxt.shell.isControllerMode();return i.createElement("div",{className:"ui accessibleMenu borderless fixed menu",role:"menubar"},i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",icon:"xicon js",text:lf("Skip to JavaScript editor"),onClick:this.openJavaScript}),t.selectLanguage?i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",icon:"xicon globe",text:lf("Select Language"),onClick:this.showLanguagePicker}):void 0,t.highContrast?i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",text:e?lf("High Contrast Off"):lf("High Contrast On"),onClick:this.toggleHighContrast}):void 0,n?i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",icon:"home",text:lf("Go Home"),onClick:this.goHome}):void 0)},e}(a.Component);n.EditorAccessibilityMenu=l;var c=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.newProject=t.newProject.bind(t),t.importProjectDialog=t.importProjectDialog.bind(t),t.showLanguagePicker=t.showLanguagePicker.bind(t),t.toggleHighContrast=t.toggleHighContrast.bind(t),t}return o(e,n),e.prototype.newProject=function(){pxt.tickEvent("accmenu.home.new",void 0,{interactiveConsent:!0}),this.props.parent.newProject()},e.prototype.importProjectDialog=function(){pxt.tickEvent("accmenu.home.importdialog",void 0,{interactiveConsent:!0}),this.props.parent.importProjectDialog()},e.prototype.showLanguagePicker=function(){pxt.tickEvent("accmenu.home.langpicker"),this.props.parent.showLanguagePicker()},e.prototype.toggleHighContrast=function(){pxt.tickEvent("accmenu.home.togglecontrast",void 0,{interactiveConsent:!0}),this.props.parent.toggleHighContrast()},e.prototype.componentWillReceiveProps=function(e){var t={};null!=e.highContrast&&(t.highContrast=e.highContrast),0<Object.keys(t).length&&this.setState(t)},e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.highContrast!=t.highContrast},e.prototype.renderCore=function(){var e=this.state.highContrast,t=pxt.appTarget.appTheme;return i.createElement("div",{className:"ui accessibleMenu borderless fixed menu",role:"menubar"},i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",icon:"add circle",text:lf("New Project"),onClick:this.newProject}),i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",icon:"upload",text:lf("Import Project"),onClick:this.importProjectDialog}),t.selectLanguage?i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",icon:"xicon globe",text:lf("Select Language"),onClick:this.showLanguagePicker}):void 0,t.highContrast?i.createElement(s.Item,{className:(t.invertedMenu?"inverted":"")+" menu",role:"menuitem",text:e?lf("High Contrast Off"):lf("High Contrast On"),onClick:this.toggleHighContrast}):void 0)},e}(a.Component);n.HomeAccessibilityMenu=c},{"./data":15,"./sui":48,react:157}],2:[function(c,e,t){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var S,T=c("react"),u=c("react-dom"),d=c("./workspace"),a=c("./data"),p=c("./package"),f=c("./core"),N=c("./sui"),h=c("./simulator"),m=c("./compiler"),A=c("./cmds"),g=c("./appcache"),v=c("./screenshot"),y=c("./hidbridge"),P=c("./share"),O=c("./lang"),I=c("./accessibility"),R=c("./tutorial"),D=c("./editortoolbar"),j=c("./simtoolbar"),i=c("./dialogs"),F=c("./debugger"),M=c("./filelist"),L=c("./container"),U=c("./scriptsearch"),B=c("./projects"),H=c("./extensions"),s=c("./sounds"),l=c("./make"),b=c("./blocksSnippets"),_=c("./monacoSnippets"),q=c("./greenscreen"),w=c("./monaco"),k=c("./pxtjson"),x=c("./serial"),E=c("./blocks"),z=c("./serialindicator"),C=c("./draganddrop"),W=c("./notification"),V=c("./electron"),K=pxt.Cloud,$=pxt.Util;pxsim.util.injectPolyphils();var X=function(o){function e(e){var i=o.call(this,e)||this;i.allEditors=[],i.autoRunBlocksSimulator=pxtc.Util.debounce(function(){$.now()-i.lastChangeTime<1e3||i.state.active&&i.runSimulator({debug:!!i.state.debugging,background:!0})},1e3,!0),i.autoRunSimulator=pxtc.Util.debounce(function(){$.now()-i.lastChangeTime<1e3||i.state.active&&i.runSimulator({debug:!!i.state.debugging,background:!0})},2e3,!0),i._slowTypeCheck=0,i.typecheck=pxtc.Util.debounce(function(){if(!i.editor.isIncomplete()){var r=$.now(),o=i.editor.snapshotState();m.typecheckAsync().done(function(e){var t=$.now();if(!pxt.options.light&&1e4<t-r&&1<i._slowTypeCheck++&&(pxt.tickEvent("light.typecheck"),pxt.options.light=!0),i.editor.setDiagnostics(i.editorFile,o),a.invalidate("open-pkg-meta:"+p.mainEditorPkg().getPkgId()),pxt.appTarget.simulator&&pxt.appTarget.simulator.autoRun){var n=p.mainEditorPkg().outputPkg.files["output.txt"];!n||n.numDiagnosticsOverride||h.driver.state!=pxsim.SimulatorState.Running&&h.driver.state!=pxsim.SimulatorState.Paused&&h.driver.state!=pxsim.SimulatorState.Unloaded||(i.editor==i.blocksEditor?i.autoRunBlocksSimulator():i.autoRunSimulator())}})}},1e3,!1),i.markdownChangeHandler=$.debounce(function(){i.state.currFile&&/\.md$/i.test(i.state.currFile.name)&&i.setSideMarkdown(i.editor.getCurrentSource())},4e3,!1),i.editorChangeHandler=$.debounce(function(){i.editor.isIncomplete()||(i.saveFileAsync().done(),i.typecheck()),i.markdownChangeHandler()},500,!1),i.updatingEditorFile=!1,i.hexFileImporters=[{id:"default",canImport:function(e){return e.meta.cloudId=="ks/"+pxt.appTarget.id||e.meta.cloudId==pxt.CLOUD_ID+pxt.appTarget.id||$.startsWith(e.meta.cloudId,pxt.CLOUD_ID+pxt.appTarget.id)},importAsync:function(e,t){var n={target:pxt.appTarget.id,targetVersion:t.meta.targetVersions?t.meta.targetVersions.target:void 0,editor:t.meta.editor,name:t.meta.name,meta:{},pubId:"",pubCurrent:!1},r=JSON.parse(t.source);return d.installAsync(n,r).then(function(e){return i.loadHeaderAsync(e,null)})}}],i.resourceImporters=[new x.ResourceImporter],i.closeOnEscape=function(e){f.keyCodeFromEvent(e)===f.ESC_KEY&&(e.preventDefault(),i.toggleSimulatorFullscreen())},i.debouncedSaveProjectName=$.debounce(function(){i.saveProjectNameAsync().done()},2e3,!1),i.handleHomeRef=function(e){i.home=e},i.handleScriptSearchRef=function(e){i.scriptSearch=e},i.handleExtensionRef=function(e){i.extensions=e},i.handleImportDialogRef=function(e){i.importDialog=e},i.handleExitAndSaveDialogRef=function(e){i.exitAndSaveDialog=e},i.handleShareEditorRef=function(e){i.shareEditor=e},i.handleLanguagePickerRef=function(e){i.languagePicker=e},document.title=pxt.appTarget.title||pxt.appTarget.name,i.reload=!1,i.settings=JSON.parse(pxt.storage.getLocal("editorSettings")||"{}");var t=i.shouldShowHomeScreen(),n=pxt.shell.isSandboxMode()||pxt.shell.isReadOnly(),r=/hc=(\w+)/.test(window.location.href);return r&&f.setHighContrast(!0),i.state={showFiles:!1,home:t,active:"visible"==document.visibilityState,collapseEditorTools:pxt.appTarget.simulator.headless||!n&&pxt.BrowserUtils.isMobile(),highContrast:r},i.settings.editorFontSize||(i.settings.editorFontSize=/mobile/i.test(navigator.userAgent)?15:19),i.settings.fileHistory||(i.settings.fileHistory=[]),t&&i.homeLoaded(),i.hwDebug=i.hwDebug.bind(i),i.hideLightbox=i.hideLightbox.bind(i),i.openSimSerial=i.openSimSerial.bind(i),i.openDeviceSerial=i.openDeviceSerial.bind(i),i.toggleGreenScreen=i.toggleGreenScreen.bind(i),i}return n(e,o),e.prototype.shouldShowHomeScreen=function(){var e=J(),t=pxt.shell.isSandboxMode()||pxt.shell.isReadOnly(),n=pxt.appTarget.appTheme.allowParentController||pxt.shell.isControllerMode()||"#editor"==window.location.hash;return!t&&!n&&!Y(e)},e.prototype.updateVisibility=function(){var e=this,t="visible"==document.visibilityState;if(pxt.debug("page visibility: "+t),this.setState({active:t}),t)if(d.isSessionOutdated()){pxt.debug("workspace changed, reloading...");var n=this.state.header?this.state.header.id:"";d.initAsync().done(function(){return!e.state.home&&n?e.loadHeaderAsync(d.getHeader(n),e.state.editorState):Promise.resolve()})}else this.state.resumeOnVisibility&&!this.state.running&&(this.setState({resumeOnVisibility:!1}),this.runSimulator());else this.state.running&&(this.stopSimulator(),this.setState({resumeOnVisibility:!0})),this.saveFileAsync().done()},e.prototype.saveSettings=function(){var e=this.settings;if(!this.reload){var t=this.editorFile;if(t&&t.epkg.getTopHeader()&&this.editor.hasHistory()){var n={id:t.epkg.getTopHeader().id,name:t.getName(),pos:this.editor.getViewState()};for(e.fileHistory=e.fileHistory.filter(function(e){return e.id!=n.id||e.name!=n.name});100<e.fileHistory.length;)e.fileHistory.pop();e.fileHistory.unshift(n)}pxt.storage.setLocal("editorSettings",JSON.stringify(this.settings))}},e.prototype.componentDidUpdate=function(){this.saveSettings(),this.editor.domUpdate(),h.setState(this.state.header?this.state.header.editor:"",this.state.tutorialOptions&&!!this.state.tutorialOptions.tutorial),this.editor.resize(),this.editor&&this.editor.isReady&&this.updateEditorFile()},e.prototype.fireResize=function(){if(document.createEvent){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)}else document.fireEvent("onresize")},e.prototype.updateEditorLogo=function(e,t){if(pxt.appTarget.appTheme.hideMenuBar){var n=document.getElementById("editorlogo");n&&(n.style.left=e+"px",n.style.display="block",n.style.background=t||"")}},e.prototype.saveFileAsync=function(){var t=this;return this.editorFile?this.saveTypeScriptAsync().then(function(){var e=t.editor.getCurrentSource();return e!=t.editorFile.content&&h.makeDirty(),t.editor.isIncomplete()?Promise.resolve():t.editorFile.setContentAsync(e)}):Promise.resolve()},e.prototype.isEmbedSimActive=function(){return this.state.embedSimView},e.prototype.isBlocksActive=function(){return!this.state.embedSimView&&this.editor==this.blocksEditor&&this.editorFile&&"main.blocks"==this.editorFile.name},e.prototype.isJavaScriptActive=function(){return!this.state.embedSimView&&this.editor==this.textEditor&&this.editorFile&&"main.ts"==this.editorFile.name},e.prototype.isAnyEditeableJavaScriptOrPackageActive=function(){return this.editor==this.textEditor&&this.editorFile&&!this.editorFile.isReadonly()&&/(\.ts|pxt.json)$/.test(this.editorFile.name)},e.prototype.openJavaScript=function(e){if(void 0===e&&(e=!0),this.isJavaScriptActive())return this.state.embedSimView&&this.setState({embedSimView:!1}),void(e&&this.textEditor.editor.focus());this.textEditor&&(this.textEditor.giveFocusOnLoading=e),this.isBlocksActive()?this.blocksEditor.openTypeScript():this.setFile(p.mainEditorPkg().files["main.ts"])},e.prototype.openBlocks=function(){var t=this;this.isBlocksActive()?this.state.embedSimView&&this.setState({embedSimView:!1}):(this.isJavaScriptActive()||this.shouldTryDecompile&&!this.state.embedSimView?this.textEditor.openBlocks():this.isAnyEditeableJavaScriptOrPackageActive()?this.saveFileAsync().then(function(){return m.newProject(),m.getBlocksAsync()}).done(function(e){pxt.blocks.initializeAndInject(e),t.blocksEditor.updateBlocksInfo(e),t.setFile(p.mainEditorPkg().files["main.blocks"])}):this.setFile(p.mainEditorPkg().files["main.blocks"]),this.shouldTryDecompile=!1)},e.prototype.openSettings=function(){this.setFile(p.mainEditorPkg().lookupFile("this/pxt.json"))},e.prototype.openSimSerial=function(){this.openSerial(!0)},e.prototype.openDeviceSerial=function(){this.openSerial(!1)},e.prototype.openSerial=function(e){if(pxt.appTarget.serial&&pxt.appTarget.serial.useEditor&&(this.editor!=this.serialEditor||this.serialEditor.isSim!=e)){var t=p.mainEditorPkg();if(t){t.lookupFile("this/"+pxt.SERIAL_EDITOR_FILE)||t.setFile(pxt.SERIAL_EDITOR_FILE,"serial\n"),this.serialEditor.setSim(e);var n="serial."+(e?"simulator":"device")+"EditorOpened";pxt.tickEvent(n),this.setFile(t.lookupFile("this/"+pxt.SERIAL_EDITOR_FILE))}}},e.prototype.openPreviousEditor=function(){"monacoEditor"==this.prevEditorId?this.openJavaScript(!1):this.openBlocks()},e.prototype.openTypeScriptAsync=function(){var t=this;return this.saveTypeScriptAsync(!0).then(function(){var e=t.state.header;e&&(e.editor=pxt.JAVASCRIPT_PROJECT_NAME,e.pubCurrent=!1)})},e.prototype.openSimView=function(){this.state.embedSimView?this.startStopSimulator():(this.setState({embedSimView:!0}),this.startSimulator())},e.prototype.typecheckNow=function(){this.saveFileAsync().done(),this.typecheck()},e.prototype.initEditors=function(){var e=this;this.textEditor=new w.Editor(this),this.pxtJsonEditor=new k.Editor(this),this.serialEditor=new x.Editor(this),this.blocksEditor=new E.Editor(this);var t=function(){e.editorFile&&(e.editorFile.inSyncWithEditor&&pxt.tickActivity("edit","edit."+e.editor.getId().replace(/Editor$/,"")),e.editorFile.markDirty()),e.lastChangeTime=$.now(),e.state.running&&pxt.appTarget.simulator&&pxt.appTarget.simulator.stopOnChange&&e.stopSimulator(),e.editorChangeHandler()};this.allEditors=[this.pxtJsonEditor,this.blocksEditor,this.serialEditor,this.textEditor],this.allEditors.forEach(function(e){return e.changeCallback=t}),this.editor=this.allEditors[this.allEditors.length-1]},e.prototype.componentWillMount=function(){this.initEditors(),this.initDragAndDrop()},e.prototype.componentDidMount=function(){var n=this;this.allEditors.forEach(function(e){return e.prepare()}),h.init(document.getElementById("boardview"),{orphanException:function(e){f.warningNotification(lf("Program Error: {0}",e.exceptionMessage))},highlightStatement:function(e,t){return!!n.editor&&n.editor.highlightStatement(e,t)},restartSimulator:function(){f.hideDialog(),n.runSimulator()},onStateChanged:function(e){e==pxsim.SimulatorState.Paused?n.setState({running:!1}):e==pxsim.SimulatorState.Running&&n.setState({running:!0})},editor:this.state.header?this.state.header.editor:""}),(pxt.appTarget.appTheme.allowParentController||pxt.appTarget.appTheme.allowPackageExtensions||pxt.appTarget.appTheme.allowSimulatorTelemetry||pxt.shell.isControllerMode())&&pxt.editor.bindEditorMessages(this),this.forceUpdate()},e.prototype.componentDidCatch=function(e,t){try{f.killLoadingQueue(),pxsim.U.remove(document.getElementById("loading")),this.setState({hasError:!0}),pxt.tickEvent("pxt.criticalerror",{error:e,info:t});var n=pxt.storage.getLocal("lastcriticalerror")?Date.parse(pxt.storage.getLocal("lastcriticalerror")):Date.now();(!n||!isNaN(n)&&6e4<Date.now()-n)&&(pxt.storage.setLocal("lastcriticalerror",(new Date).toISOString()),setTimeout(function(){location.reload()},2e3))}catch(e){}},e.prototype.pickEditorFor=function(t){return this.allEditors.filter(function(e){return e.acceptsFile(t)})[0]},e.prototype.updateEditorFile=function(t){var n=this;if(void 0===t&&(t=null),this.state.active&&(this.state.currFile!=this.editorFile||t)&&!this.updatingEditorFile){this.updatingEditorFile=!0,this.saveSettings();var e=this.state.highContrast;return this.saveFileAsync().then(function(){n.editorFile=n.state.currFile;var e=n.editor;return n.prevEditorId=e.getId(),n.editor=t||n.pickEditorFor(n.editorFile),n.allEditors.forEach(function(e){return e.setVisible(e==n.editor)}),e?e.unloadFileAsync():Promise.resolve()}).then(function(){return n.editor.loadFileAsync(n.editorFile,e)}).then(function(){n.saveFileAsync().done(),n.editor!=n.textEditor&&n.editor!=n.blocksEditor||n.typecheck();var e=n.settings.fileHistory.filter(function(e){return e.id==n.state.header.id&&e.name==n.editorFile.getName()})[0];e&&n.editor.setViewState(e.pos),L.SideDocs.notify({type:"fileloaded",name:n.editorFile.getName(),locale:pxt.Util.localeInfo()}),n.state.showBlocks&&n.editor==n.textEditor&&n.textEditor.openBlocks()}).finally(function(){n.forceUpdate(),n.updatingEditorFile=!1})}},e.prototype.setFile=function(e){e&&("main.ts"===e.name&&(this.shouldTryDecompile=!0),this.setState({currFile:e,showBlocks:!1,embedSimView:!1}))},e.prototype.setSideFile=function(n){var r=this,e=this.state.header;e&&(e.editor=this.getPreferredEditor(),e.pubCurrent=!1);var t=n.name,o=this.state.currFile.name;if(t!=o&&p.File.blocksFileNameRx.test(t)){pxt.tickEvent("sidebar.showBlocks");var i=n.getVirtualFileName(),a=p.mainEditorPkg().lookupFile("this/"+i);o==i?this.textEditor.openBlocks():a&&this.textEditor.decompileAsync(a.name).then(function(e){if(e.success)r.setFile(n);else{r.setFile(a);var t=!1;e.diagnostics.forEach(function(e){return t=t||9266===e.code}),r.textEditor.showConversionFailedDialog(n.name,t)}})}else(this.isTextEditor()||this.isPxtJsonEditor())&&(this.textEditor.giveFocusOnLoading=!1),this.setFile(n)},e.prototype.removeFile=function(e,t){var n=this;void 0===t&&(t=!1);var r=function(){p.mainEditorPkg().removeFileAsync(e.name).then(function(){return p.mainEditorPkg().saveFilesAsync(!0)}).then(function(){return n.reloadHeaderAsync()}).done()};t?r():f.confirmAsync({header:lf("Remove {0}",e.name),body:lf("You are about to remove a file from your project. You can't undo this. Are you sure?"),agreeClass:"red",agreeIcon:"trash",agreeLbl:lf("Remove it")}).done(function(e){e&&r()})},e.prototype.updateFileAsync=function(t,e,n){var r=this,o=p.mainEditorPkg();return o.setFile(t,e),o.updateConfigAsync(function(e){return e.files.indexOf(t)<0?e.files.push(t):0}).then(function(){return n&&r.setFile(o.lookupFile("this/"+t)),o.savePkgAsync()}).then(function(){return r.reloadHeaderAsync()})},e.prototype.setSideMarkdown=function(e){var t=this.refs.sidedoc;t&&t.setMarkdown(e)},e.prototype.setSideDoc=function(e,t){void 0===t&&(t=!0);var n=this.refs.sidedoc;n&&(e?n.setPath(e,t):n.collapse())},e.prototype.setTutorialStep=function(e){this.typecheckNow();var t=this.refs.tutorialcard;if(t&&-1<e){t.setPopout();var n=this.state.tutorialOptions;n.tutorialStep=e,this.setState({tutorialOptions:n}),n.tutorialStepInfo[e].fullscreen?this.showTutorialHint():this.showLightbox()}},e.prototype.handleMessage=function(e){var t=this;switch(e.type){case"popoutcomplete":this.setState({sideDocsCollapsed:!0,sideDocsLoadUrl:""});break;case"tutorial":switch(e.subtype){case"loaded":var n=e;n.toolboxSubset&&0<Object.keys(n.toolboxSubset).length&&(this.setState({editorState:{searchBar:!1,filters:{blocks:n.toolboxSubset,defaultState:pxt.editor.FilterState.Hidden}}}),this.editor.filterToolbox(n.toolboxSubset,n.showCategories));var r=this.state.tutorialOptions;r.tutorialReady=!0,r.tutorialStepInfo=n.stepInfo,this.setState({tutorialOptions:r}),r.tutorialStepInfo[0].fullscreen?this.showTutorialHint():this.showLightbox(),f.hideLoading("tutorial");break;case"error":var o=e;pxt.reportException(o.message),f.errorNotification(lf("We're having trouble loading this tutorial, please try again later.")),this.setState({tutorialOptions:void 0});var i=p.mainEditorPkg().header;i.isDeleted=!0,d.saveAsync(i,{}).then(function(){t.openHome()}).finally(function(){f.hideLoading("tutorial")})}}},e.prototype.reloadHeaderAsync=function(){return this.loadHeaderAsync(this.state.header,this.state.editorState)},e.prototype.loadHeaderAsync=function(i,a,s){var l=this;if(!i)return Promise.resolve();pxt.debug("loading "+i.id+" (pxt v"+i.targetVersion+")"),this.stopSimulator(!0),this.clearSerial();var e=i.targetVersion||"0.0.0";if(pxt.semver.majorCmp(e,pxt.appTarget.versions.target)<0&&pxt.tickEvent("patch.load.legacy",{targetVersion:e}),0<pxt.semver.majorCmp(e,pxt.appTarget.versions.target)){pxt.tickEvent("patch.load.future",{targetVersion:e});var t=[];return pxt.appTarget&&pxt.appTarget.appTheme&&pxt.appTarget.appTheme.homeUrl&&t.push({label:lf("Get latest"),icon:"external alternate",url:pxt.appTarget.appTheme.homeUrl}),f.dialogAsync({header:lf("Oops, this project is too new!"),body:lf("This project was created in a newer version of this editor. Please try again in that editor."),disagreeLbl:lf("Ok"),buttons:t}).then(function(){return l.openHome()})}return $.jsonMergeFrom(a||{},this.state.editorState||{}),p.loadPkgAsync(i.id).then(function(){h.makeDirty(),m.newProject();var e=l.settings.fileHistory.filter(function(e){return e.id==i.id})[0],t=p.getEditorPkg(p.mainPkg),n=t.getMainFile();e&&(n=t.lookupFile(e.name)||n),e||i.editor!=pxt.JAVASCRIPT_PROJECT_NAME||p.File.tsFileNameRx.test(n.getName())||!n.getVirtualFileName()||(n=t.lookupFile("this/"+n.getVirtualFileName())||n),p.File.blocksFileNameRx.test(n.getName())&&n.getVirtualFileName()&&(n.content||(n=t.lookupFile("this/"+n.getVirtualFileName())||n)),"main.ts"===n.name&&(l.shouldTryDecompile=!0),l.setState({home:!1,showFiles:!1,editorState:a,tutorialOptions:s?l.state.tutorialOptions:void 0,header:i,projectName:i.name,currFile:n,sideDocsLoadUrl:"",debugging:!1}),p.getEditorPkg(p.mainPkg).onupdate=function(){l.loadHeaderAsync(i,l.state.editorState).done()},p.mainPkg.getCompileOptionsAsync().catch(function(e){if(e instanceof pxt.cpp.PkgConflictError){var t=e,n=function(e){return{label:lf("Remove {0}",e.id),class:"pink",icon:"trash",onclick:function(){f.showLoading("removedep",lf("Removing {0}...",e.id)),p.mainEditorPkg().removeDepAsync(e.id).then(function(){return l.reloadHeaderAsync()}).done(function(){return f.hideLoading("removedep")})}}};f.dialogAsync({hideCancel:!0,buttons:[n(t.pkg1),n(t.pkg0)],header:lf("Packages cannot be used together"),body:lf("Packages '{0}' and '{1}' cannot be used together, because they use incompatible settings ({2}).",t.pkg1.id,t.pkg0.id,t.settingName)})}}).done();var r=l.pickEditorFor(n),o=t.lookupFile("this/README.md");o&&o.content&&o.content.trim()?l.setSideMarkdown(o.content):p.mainPkg&&p.mainPkg.config&&p.mainPkg.config.documentation&&l.setSideDoc(p.mainPkg.config.documentation,r==l.blocksEditor)}).finally(function(){pxt.BrowserUtils.changeHash("#editor",!0),document.getElementById("root").focus(),l.editorLoaded()})},e.prototype.removeProject=function(){var t=this;p.mainEditorPkg().header&&f.confirmDelete(p.mainEditorPkg().header.name,function(){var e=p.mainEditorPkg().header;return e.isDeleted=!0,d.saveAsync(e,{}).then(function(){return t.openHome()})})},e.prototype.isHexFile=function(e){return/\.(hex|uf2)$/i.test(e)},e.prototype.isBlocksFile=function(e){return/\.blocks$/i.test(e)},e.prototype.isTypescriptFile=function(e){return/\.ts$/i.test(e)},e.prototype.isProjectFile=function(e){return/\.(pxt|mkcd)$/i.test(e)},e.prototype.isPNGFile=function(e){return pxt.appTarget.compile.saveAsPNG&&/\.png$/i.test(e)},e.prototype.isAssetFile=function(e){var t=pxt.appTarget.runtime?pxt.appTarget.runtime.assetExtensions:null;if(t){var n=e.replace(/.*\./,"").toLowerCase();return 0<=t.indexOf(n)}return!1},e.prototype.importProjectCoreAsync=function(e){var n=this;return pxt.lzmaDecompressAsync(e).then(function(e){var t=JSON.parse(e);n.importHex(t)}).catch(function(e){f.warningNotification(lf("Sorry, we could not import this project.")),n.openHome()})},e.prototype.importHexFile=function(e){var t=this;e&&pxt.cpp.unpackSourceFromHexFileAsync(e).done(function(e){return t.importHex(e)})},e.prototype.importBlocksFiles=function(t){var n=this;t&&ts.pxtc.Util.fileReadAsTextAsync(t).done(function(e){n.newProject({filesOverride:{"main.blocks":e,"main.ts":"  "},name:t.name.replace(/\.blocks$/i,"")||lf("Untitled")})})},e.prototype.importTypescriptFile=function(t){var n=this;t&&ts.pxtc.Util.fileReadAsTextAsync(t).done(function(e){n.newProject({filesOverride:{"main.blocks":"","main.ts":e||"  "},name:t.name.replace(/\.ts$/i,"")||lf("Untitled")})})},e.prototype.importProjectFile=function(e){var t=this;e&&ts.pxtc.Util.fileReadAsBufferAsync(e).then(function(e){return t.importProjectCoreAsync(e)})},e.prototype.importPNGFile=function(e){var t=this;e&&ts.pxtc.Util.fileReadAsBufferAsync(e).then(function(e){return v.decodeBlobAsync("data:image/png;base64,"+btoa(pxt.Util.uint8ArrayToString(e)))}).then(function(e){return t.importProjectCoreAsync(e)})},e.prototype.importAssetFile=function(n){ts.pxtc.Util.fileReadAsBufferAsync(n).then(function(e){var t=n.name.replace(/.*[\/\\]/,"");return p.mainEditorPkg().saveAssetAsync(t,e)}).done()},e.prototype.importHex=function(t,n){var r=this;void 0===n&&(n=!1);pxt.appTarget.id;if(!t||!t.meta)return f.warningNotification(lf("Sorry, we could not recognize this file.")),void(n&&this.openHome());var o=this.hexFileImporters.filter(function(e){return e.canImport(t)})[0];o?(pxt.tickEvent("import."+o.id),f.showLoading("importhex",lf("loading project...")),o.importAsync(this,t).done(function(){return f.hideLoading("importhex")},function(e){pxt.reportException(e,{importer:o.id}),f.hideLoading("importhex"),f.errorNotification(lf("Oops, something went wrong when importing your project")),n&&r.openHome()})):(f.warningNotification(lf("Sorry, we could not import this project.")),pxt.tickEvent("warning.importfailed"),n&&this.openHome())},e.prototype.importProjectAsync=function(e,t){var n=this,r=e.header;return r||(r={target:pxt.appTarget.id,targetVersion:void 0,editor:pxt.BLOCKS_PROJECT_NAME,name:lf("Untitled"),meta:{},pubId:"",pubCurrent:!1}),d.installAsync(r,e.text).then(function(e){return n.loadHeaderAsync(e,t)})},e.prototype.initDragAndDrop=function(){var t=this;C.setupDragAndDrop(document.body,function(e){return e.size<1e6&&t.isHexFile(e.name)||t.isBlocksFile(e.name)},function(e){e&&(pxt.tickEvent("dragandrop.open"),t.importFile(e[0]))})},e.prototype.importFile=function(t){if(t&&!pxt.shell.isReadOnly())if(this.isHexFile(t.name))this.importHexFile(t);else if(this.isBlocksFile(t.name))this.importBlocksFiles(t);else if(this.isTypescriptFile(t.name))this.importTypescriptFile(t);else if(this.isProjectFile(t.name))this.importProjectFile(t);else if(this.isAssetFile(t.name))this.importAssetFile(t);else if(this.isPNGFile(t.name))this.importPNGFile(t);else{var e=this.resourceImporters.filter(function(e){return e.canImport(t)})[0];e?e.importAsync(this,t).done():f.warningNotification(lf("Oops, don't know how to load this file!"))}},e.prototype.importProjectFromFileAsync=function(e){var n=this;return pxt.lzmaDecompressAsync(e).then(function(e){var t=JSON.parse(e);return n.importHex(t)}).catch(function(){return n.newProject()})},e.prototype.exportProjectToFileAsync=function(){return p.mainPkg.compressToFileAsync(this.getPreferredEditor())},e.prototype.exportAsync=function(){return pxt.debug("exporting project"),this.exportProjectToFileAsync().then(function(e){return ts.pxtc.encodeBase64($.uint8ArrayToString(e))})},e.prototype.saveProjectAsPNG=function(){var n=this;return h.driver.postMessage({type:"screenshot",title:this.state.header.name}),new Promise(function(e,t){n.screenshotHandler=function(t){n.screenshotHandler=null,e(n.exportProjectToFileAsync().then(function(e){return v.encodeBlobAsync(t,e)}).then(function(e){var t=p.genFileName(".png");pxt.BrowserUtils.browserDownloadDataUri(e,t)}))}})},e.prototype.saveProjectToFileAsync=function(){p.mainPkg;return pxt.commands.saveProjectAsync?(f.infoNotification(lf("Saving...")),p.mainPkg.saveToJsonAsync(this.getPreferredEditor()).then(function(e){return pxt.commands.saveProjectAsync(e)})):pxt.appTarget.compile.saveAsPNG?this.saveProjectAsPNG():this.exportProjectToFileAsync().then(function(e){var t=p.genFileName(".mkcd");pxt.BrowserUtils.browserDownloadUInt8Array(e,t,"application/octet-stream")})},e.prototype.openHome=function(){!pxt.shell.isControllerMode()&&(this.stopSimulator(),this.editor&&this.editor.unloadFileAsync(),pxt.BrowserUtils.changeHash("",!0),this.setState({home:!0,tracing:void 0,fullscreen:void 0,tutorialOptions:void 0,editorState:void 0}),this.allEditors.forEach(function(e){return e.setVisible(!1)}),this.homeLoaded())},e.prototype.homeLoaded=function(){pxt.tickEvent("app.home")},e.prototype.editorLoaded=function(){pxt.tickEvent("app.editor")},e.prototype.reloadEditor=function(){this.state.home&&(location.hash="#reload"),location.reload()},e.prototype.getPreferredEditor=function(){return this.editor==this.blocksEditor?pxt.BLOCKS_PROJECT_NAME:pxt.JAVASCRIPT_PROJECT_NAME},e.prototype.openExtension=function(e,t,n){pxt.tickEvent("app.openextension",{extension:e}),this.extensions.showExtension(e,t,n)},e.prototype.handleExtensionRequest=function(e){this.extensions.handleExtensionRequest(e)},e.prototype.newEmptyProject=function(e,t){this.newProject({filesOverride:{"main.blocks":'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>'},name:e,documentation:t})},e.prototype.newProject=function(e){void 0===e&&(e={}),pxt.tickEvent("app.newproject"),f.showLoading("newproject",lf("creating new project...")),this.createProjectAsync(e).then(function(){return Promise.delay(500)}).done(function(){return f.hideLoading("newproject")})},e.prototype.createProjectAsync=function(t){var n=this;this.setSideDoc(void 0),t.prj||(t.prj=pxt.appTarget.blocksprj);var e=pxt.U.clone(t.prj.config);e.name=t.name||lf("Untitled"),e.documentation=t.documentation;var r=$.clone(t.prj.files);return t.filesOverride&&$.jsonCopyFrom(r,t.filesOverride),t.dependencies&&$.jsonMergeFrom(e.dependencies,t.dependencies),t.tsOnly&&(e.files=e.files.filter(function(e){return"main.blocks"!=e}),delete r["main.blocks"]),r["pxt.json"]=JSON.stringify(e,null,4)+"\n",d.installAsync({name:e.name,meta:{},editor:t.prj.id,pubId:"",pubCurrent:!1,target:pxt.appTarget.id,targetVersion:pxt.appTarget.versions.target,temporary:t.temporary},r).then(function(e){return n.loadHeaderAsync(e,{filters:t.filters},t.inTutorial)})},e.prototype.switchTypeScript=function(){var e=p.mainEditorPkg(),t=this.editorFile.getVirtualFileName(),n=e.files[t];this.setFile(n)},e.prototype.saveBlocksToTypeScriptAsync=function(){return this.blocksEditor.saveToTypeScript()},e.prototype.saveTypeScriptAsync=function(r){var o=this;if(void 0===r&&(r=!1),!this.editor||!this.state.currFile||this.editorFile.epkg!=p.mainEditorPkg()||this.reload)return Promise.resolve();var e=Promise.resolve().then(function(){return r?o.textEditor.loadMonacoAsync():Promise.resolve()}).then(function(){return o.editor.saveToTypeScript().then(function(e){if(!e)return Promise.resolve();var t=p.mainEditorPkg(),n=o.editorFile.getVirtualFileName();return $.assert(n!=o.editorFile.name),t.setContentAsync(n,e).then(function(){if(r){var e=t.files[n];o.setFile(e)}})})});return r?f.showLoadingAsync("switchtojs",lf("switching to JavaScript..."),e,0):e},e.prototype.resetWorkspace=function(){var e=this;return this.reload=!0,d.resetAsync().done(function(){return e.reloadEditor()},function(){return e.reloadEditor()})},e.prototype.pair=function(){pxt.usb.pairAsync().then(function(){f.infoNotification(lf("Device paired! Try downloading now."))},function(e){f.errorNotification(lf("Failed to pair the device: {0}",e.message))})},e.prototype.saveAndCompile=function(){var e=this;if(this.state.header)return this.setState({isSaving:!0}),(this.state.projectName!==lf("Untitled")?Promise.resolve(!0):this.showRenameProjectDialogAsync()).then(function(){return e.saveProjectNameAsync()}).then(function(){return e.saveFileAsync()}).then(function(){!pxt.appTarget.compile.hasHex||pxt.appTarget.compile.useMkcd||pxt.appTarget.compile.saveAsPNG?e.saveProjectToFileAsync().finally(function(){e.setState({isSaving:!1})}).done():e.compile(!0)})},e.prototype.beforeCompile=function(){},e.prototype.compile=function(n){var r=this;if(void 0===n&&(n=!1),pxt.tickEvent("compile"),pxt.debug("compiling..."),pxt.appTarget.compile.saveAsPNG)this.saveAndCompile();else{this.beforeCompile();var o=void 0;if(pxt.appTarget.compile.useModulator||!pxt.BrowserUtils.isBrowserDownloadInSameWindow()||pxt.BrowserUtils.isBrowserDownloadWithinUserContext()||(o=window.open("")),this.state.compiling)pxt.tickEvent("compile.double");else{var e=this.state.running;this.setState({compiling:!0}),this.clearSerial(),this.editor.beforeCompile(),e&&this.stopSimulator();var i=this.editor.snapshotState();m.compileAsync({native:!0,forceEmit:!0,preferredEditor:this.getPreferredEditor()}).then(function(e){r.editor.setDiagnostics(r.editorFile,i);var t=pxt.outputName();return e.outfiles[t]?(e.saveOnly=n,e.userContextWindow=o,e.downloadFileBaseName=p.genFileName(""),e.confirmAsync=f.confirmAsync,n?pxt.commands.saveOnlyAsync(e):pxt.commands.deployCoreAsync(e).catch(function(e){if(e.notifyUser)f.warningNotification(e.message);else{var t=pxt.appTarget.appTheme.useUploadMessage?lf("Upload failed, please try again."):lf("Download failed, please try again.");f.warningNotification(t)}if(pxt.reportException(e),o)try{o.close()}catch(e){}})):(pxt.tickEvent("compile.noemit"),f.warningNotification(lf("Compilation failed, please check your code for errors.")),Promise.resolve())}).catch(function(e){if(pxt.reportException(e),f.errorNotification(lf("Compilation failed, please contact support.")),o)try{o.close()}catch(e){}}).finally(function(){r.setState({compiling:!1,isSaving:!1}),e&&r.runSimulator()}).done()}}},e.prototype.overrideTypescriptFile=function(e){this.textEditor&&this.textEditor.overrideFile(e)},e.prototype.overrideBlocksFile=function(e){this.blocksEditor&&this.blocksEditor.overrideFile(e)},e.prototype.startStopSimulator=function(){this.state.running?this.stopSimulator():this.startSimulator()},e.prototype.restartSimulator=function(e){this.stopSimulator(),this.startSimulator(e)},e.prototype.toggleTrace=function(e){this.state.tracing?(this.editor.clearHighlightedStatements(),h.setTraceInterval(0)):h.setTraceInterval(null!=e?e:h.SLOW_TRACE_INTERVAL),this.setState({tracing:!this.state.tracing}),this.restartSimulator()},e.prototype.startSimulator=function(e){var t=this;pxt.tickEvent("simulator.start"),this.saveFileAsync().then(function(){return t.runSimulator(e?{debug:!0}:{})})},e.prototype.stopSimulator=function(e){pxt.tickEvent("simulator.stop"),h.stop(e),this.setState({running:!1})},e.prototype.proxySimulatorMessage=function(e){h.proxy({type:"custom",content:e})},e.prototype.toggleSimulatorCollapse=function(){var e=this.state;!e.running&&e.collapseEditorTools&&this.startStopSimulator(),e.collapseEditorTools?this.expandSimulator():this.collapseSimulator()},e.prototype.expandSimulator=function(){pxt.appTarget.simulator.headless?h.unhide():this.startSimulator(),this.setState({collapseEditorTools:!1})},e.prototype.collapseSimulator=function(){var e=this;h.hide(function(){e.setState({collapseEditorTools:!0})})},e.prototype.toggleSimulatorFullscreen=function(){this.state.fullscreen?document.removeEventListener("keydown",this.closeOnEscape):document.addEventListener("keydown",this.closeOnEscape),this.closeFlyout(),this.setState({fullscreen:!this.state.fullscreen})},e.prototype.closeFlyout=function(){this.editor.closeFlyout()},e.prototype.toggleMute=function(){h.mute(!this.state.mute),this.setState({mute:!this.state.mute})},e.prototype.openInstructions=function(){var e=this,t=this.state.running;t&&this.stopSimulator(),l.makeAsync().finally(function(){t&&e.startSimulator()})},e.prototype.printCode=function(){var e=p.mainEditorPkg().getAllFiles(),t=pxt.webConfig.docsUrl||"/--docs";window.localStorage.printjob=JSON.stringify(e);var n=t+"#print:job:blocks:"+pxt.Util.localeInfo();f.dialogAsync({header:lf("Print Code"),disagreeLbl:lf("Close"),size:"large",jsx:T.createElement("div",{className:"ui container"},T.createElement("div",{id:"printcontainer",style:{position:"relative",height:0,"padding-bottom":"40%",overflow:"hidden"}},T.createElement("iframe",{frameBorder:"0",sandbox:"allow-popups allow-forms allow-scripts allow-same-origin allow-modals",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:n})))}).done(function(e){})},e.prototype.clearSerial=function(){this.serialEditor.clear();var e=this.refs.simIndicator,t=this.refs.devIndicator;e&&e.clear(),t&&t.clear()},e.prototype.runSimulator=function(t){var n=this;void 0===t&&(t={});var e=this.editor?this.editor.getId().replace(/Editor$/,""):"unknown";t.background?pxt.tickActivity("autorun","autorun."+e):pxt.tickEvent(t.debug?"debug":"run",{editor:e}),t.background||this.editor.beforeCompile(),this.state.tracing&&(t.trace=!0),this.stopSimulator();var r=this.editor.snapshotState();return m.compileAsync(t).then(function(e){n.clearSerial(),n.editor.setDiagnostics(n.editorFile,r),e.outfiles[pxtc.BINARY_JS]?(h.run(p.mainPkg,t.debug,e,n.state.mute,n.state.highContrast,pxt.options.light),n.setState({running:!0,showParts:0<h.driver.runOptions.parts.length})):t.background||f.warningNotification(lf("Oops, we could not run this project. Please check your code for errors."))})},e.prototype.simDebug=function(){pxt.tickEvent("menu.debug.sim"),this.stopSimulator(),this.runSimulator({debug:!0})},e.prototype.hwDebug=function(){pxt.tickEvent("menu.debug.hw");var e=Promise.resolve();return this.state.running&&h.driver.runOptions.debug||(e=this.runSimulator({debug:!0})),e.then(function(){return h.driver.setHwDebugger({postMessage:function(e){pxt.HWDBG.handleMessage(e)}}),pxt.HWDBG.postMessage=function(e){return h.driver.handleHwDebuggerMsg(e)},Promise.join(m.compileAsync({debug:!0,native:!0}),y.initAsync()).then(function(e){return pxt.HWDBG.startDebugAsync(e[0],e[1])})})},e.prototype.toggleDebugging=function(){var e=!this.state.debugging;this.setState({debugging:e,tracing:!1}),this.restartSimulator(e)},e.prototype.dbgPauseResume=function(){h.dbgPauseResume()},e.prototype.dbgStepOver=function(){h.dbgStepOver()},e.prototype.dbgStepInto=function(){h.dbgStepInto()},e.prototype.dbgInsertBreakpoint=function(){this.editor.insertBreakpoint()},e.prototype.editText=function(){var e=this;this.editor!=this.textEditor&&(this.updateEditorFile(this.textEditor).then(function(){e.textEditor.editor.focus()}),this.forceUpdate())},e.prototype.importProjectDialog=function(){this.importDialog.show()},e.prototype.renderBlocksAsync=function(t){return m.getBlocksAsync().then(function(e){return m.decompileSnippetAsync(t.ts,e)}).then(function(e){var t=pxt.blocks.render(e,{snippetMode:!0,layout:pxt.blocks.BlockLayout.Align}),n=t.getAttribute("viewBox").split(/\s+/).map(function(e){return parseInt(e)});return{svg:t,xml:pxt.blocks.layout.blocklyToSvgAsync(t,n[0],n[1],n[2],n[3])}})},e.prototype.launchFullEditor=function(){$.assert(pxt.shell.isSandboxMode());var t=pxt.appTarget.appTheme.embedUrl;/\/$/.test(t)||(t+="/");var e=p.mainPkg,n=p.getEditorPkg(e);pxt.shell.isReadOnly()?(n.header.pubId,t+="#pub:"+n.header.pubId,window.open(t,"_blank")):this.exportAsync().done(function(e){pxt.tickEvent("sandbox.openfulleditor"),t+="#project:"+e,window.open(t,"_blank")})},e.prototype.anonymousPublishAsync=function(){var r=this;pxt.tickEvent("publish"),this.setState({publishing:!0});var o=p.mainPkg,i=p.getEditorPkg(o);return this.saveProjectNameAsync().then(function(){return r.saveFileAsync()}).then(function(){return o.filesToBePublishedAsync(!0)}).then(function(e){if(i.header.pubCurrent)return Promise.resolve(i.header.pubId);var t={description:o.config.description},n=r.blocksEditor.contentSize();return n&&(t.blocksHeight=n.height,t.blocksWidth=n.width),d.anonymousPublishAsync(i.header,e,t).then(function(e){return e.id})}).finally(function(){r.setState({publishing:!1})}).catch(function(e){throw f.errorNotification(e.message),e})},e.prototype.updateHeaderName=function(e){this.setState({projectName:e}),this.debouncedSaveProjectName()},e.prototype.saveProjectNameAsync=function(){if(!this.state.projectName||!this.state.header)return Promise.resolve();try{return this.updateHeaderNameAsync(this.state.projectName)}catch(e){return pxt.reportException(e),Promise.resolve()}},e.prototype.updateHeaderNameAsync=function(e){var t=this;if(p.mainPkg.config.name==e)return Promise.resolve();p.mainPkg.config.name=e,pxt.debug("saving project name to "+e);var n=p.mainEditorPkg().lookupFile("this/"+pxt.CONFIG_NAME),r=JSON.parse(n.content);return r.name=e,n.setContentAsync(JSON.stringify(r,null,4)+"\n").then(function(){t.state.header&&t.setState({projectName:e})})},e.prototype.isTextEditor=function(){return this.editor==this.textEditor},e.prototype.isPxtJsonEditor=function(){return this.editor==this.pxtJsonEditor},e.prototype.isBlocksEditor=function(){return this.editor==this.blocksEditor},e.prototype.loadBlocklyAsync=function(){return this.blocksEditor.loadBlocklyAsync()},e.prototype.showReportAbuse=function(){var e=this.state.header&&this.state.header.pubCurrent&&this.state.header.pubId;i.showReportAbuseAsync(e)},e.prototype.showAboutDialog=function(){i.showAboutDialogAsync()},e.prototype.showShareDialog=function(){var e=this.state.header;this.shareEditor.show(e)},e.prototype.showLanguagePicker=function(){this.languagePicker.show()},e.prototype.showImportUrlDialog=function(){i.showImportUrlDialogAsync().done(function(e){e?Z(e):f.errorNotification(lf("Sorry, the project url looks invalid."))})},e.prototype.showImportFileDialog=function(){var t=this;i.showImportFileDialogAsync().done(function(e){e&&(pxt.tickEvent("app.open.file"),t.importFile(e))})},e.prototype.showResetDialog=function(){var t=this;i.showResetDialogAsync().done(function(e){return e?Promise.resolve().then(function(){return pxt.winrt.releaseAllDevicesAsync()}).then(function(){return t.resetWorkspace()}):Promise.resolve()})},e.prototype.showExitAndSaveDialog=function(){this.state.projectName!==lf("Untitled")?this.openHome():this.exitAndSaveDialog.show()},e.prototype.showPackageDialog=function(){this.scriptSearch.showAddPackages()},e.prototype.showRenameProjectDialogAsync=function(){var n=this;if(!this.state.header)return Promise.resolve(!1);var r={header:lf("Rename your project"),agreeLbl:lf("Save"),agreeClass:"green",input:lf("Enter your project name here")};return f.confirmAsync(r).then(function(e){return e&&r.inputValue?new Promise(function(e,t){n.setState({projectName:r.inputValue},function(){return e()})}).then(function(){return n.saveProjectNameAsync()}).then(function(){return!0}):Promise.resolve(!1)})},e.prototype.startTutorial=function(e,t){pxt.tickEvent("tutorial.start"),pxt.Cloud.isNavigatorOnline()?(f.showLoading("tutorial",lf("starting tutorial...")),this.startTutorialAsync(e,t)):f.errorNotification(lf("No Internet access, please connect and try again."))},e.prototype.startTutorialAsync=function(r,e){var o=this,i=e||r.split("/").reverse()[0].replace("-"," ");return s.initTutorial(),Promise.resolve().then(function(){return o.createProjectAsync({name:i,inTutorial:!0})}).then(function(){o.setState({tutorialOptions:{tutorial:r,tutorialName:i},tracing:void 0})}).then(function(){return pxt.Cloud.downloadMarkdownAsync(r)}).then(function(e){var n=pxt.tutorial.parseTutorialSteps(r,e);return R.getUsedBlocksAsync(r,e).then(function(e){var t={searchBar:!1};e&&0<Object.keys(e).length&&(t.filters={blocks:e,defaultState:pxt.editor.FilterState.Hidden}),o.setState({editorState:t,tutorialOptions:{tutorial:r,tutorialName:i,tutorialStep:0,tutorialReady:!0,tutorialStepInfo:n}}),o.editor.filterToolbox(e,!0),n[0].fullscreen?o.showTutorialHint():o.showLightbox()}).catch(function(e){pxt.tickEvent("tutorial.faileddecompile",{tutorialId:r}),f.errorNotification(lf("Oops, an error occured as we were loading the tutorial.")),o.exitTutorial(!0)})}).catch(function(e){f.handleNetworkError(e)}).finally(function(){f.hideLoading("tutorial")})},e.prototype.completeTutorial=function(){var t=this;pxt.tickEvent("tutorial.complete"),f.showLoading("leavingtutorial",lf("leaving tutorial...")),this.exitTutorialAsync().then(function(){var e=p.mainEditorPkg().header;return t.loadHeaderAsync(e)}).done(function(){f.hideLoading("leavingtutorial")})},e.prototype.exitTutorial=function(e){var t=this;pxt.tickEvent("tutorial.exit"),f.showLoading("leavingtutorial",lf("leaving tutorial...")),this.exitTutorialAsync(e).done(function(){f.hideLoading("leavingtutorial"),t.openHome()})},e.prototype.exitTutorialAsync=function(e){var t=this,n=p.mainEditorPkg().header;n.isDeleted=e;var r=p.mainEditorPkg().getAllFiles();return d.saveAsync(n,r).then(function(){return Promise.delay(500)}).finally(function(){t.setState({tutorialOptions:void 0,tracing:void 0,editorState:void 0}),f.resetFocus()})},e.prototype.showTutorialHint=function(){this.refs.tutorialhint.showHint();var e=this.state.tutorialOptions;pxt.tickEvent("tutorial.showhint",{tutorial:e.tutorial,step:e.tutorialStep})},e.prototype.toggleHighContrast=function(){var e=this,t=!this.state.highContrast;pxt.tickEvent("app.highcontrast",{on:t?1:0}),this.setState({highContrast:t},function(){e.state.header&&e.restartSimulator()}),f.setHighContrast(t),this.editor&&this.editor.isReady&&this.editor.setHighContrast(t)},e.prototype.toggleGreenScreen=function(){var e=!this.state.greenScreen;pxt.tickEvent("app.greenscreen",{on:e?1:0}),this.setState({greenScreen:e})},e.prototype.setBannerVisible=function(e){this.setState({bannerVisible:e})},e.prototype.hideLightbox=function(){this.setState({lightbox:!1})},e.prototype.showLightbox=function(){this.setState({lightbox:!0})},e.prototype.renderCore=function(){S=this;var e=pxt.appTarget.appTheme,t=pxt.appTarget.simulator,n=pxt.appTarget.cloud&&pxt.appTarget.cloud.sharing&&!pxt.shell.isControllerMode(),r=pxt.shell.isSandboxMode(),o=!this.editor.isVisible||this.getPreferredEditor()==pxt.BLOCKS_PROJECT_NAME,i=!(r||e.hideSideDocs),a=this.state.tutorialOptions,s=!!a&&!!a.tutorial,l=this.state.home&&!r,c=!!this.state.header,u=this.state,d=u.lightbox,p=u.greenScreen,f=t&&!t.enableTrace||pxt.options.debug,h=e.hideMenuBar,m=e.hideEditorToolbar,g=t&&t.headless,v=e.selectLanguage,y=c&&!m&&this.editor.hasEditorToolbar(),b=pxt.appTarget.serial&&!!pxt.appTarget.serial.useEditor,_=i&&this.state.sideDocsLoadUrl&&!this.state.sideDocsCollapsed,w=(this.state.hideEditorFloats||this.state.collapseEditorTools)&&(!s||g),k=this.state.collapseEditorTools&&(!s||g),x=A.isNativeHost()||pxt.winrt.isWinRT()||V.isElectron,E=["ui",d?"dimmable dimmed":"dimmable",w?" hideEditorFloats":"",k?" collapsedEditorTools":"",this.state.fullscreen?"fullscreensim":"",this.state.highContrast?"hc":"",_?"sideDocs":"",pxt.shell.layoutTypeClass(),l?"inHome":"",s?"tutorial":"",pxt.options.light?"light":"",pxt.BrowserUtils.isTouchEnabled()?"has-touch":"",h?"hideMenuBar":"",y?"":"hideEditorToolbar",this.state.bannerVisible?"notificationBannerVisible":"",this.state.debugging?"debugging":"",r&&this.isEmbedSimActive()?"simView":"",x?"app":"",p?"greenscreen":"","full-abs"],C=N.cx(E);return this.state.hasError?T.createElement("div",{id:"root",className:"ui middle aligned center aligned grid",style:{height:"100%",alignItems:"center"}},T.createElement("div",{className:"ui raised segment inverted purple"},T.createElement("h2",null,lf("Oops")),lf("We detected a problem and we will reload the editor in a few seconds.."))):T.createElement("div",{id:"root",className:C},p?T.createElement(q.WebCam,{close:this.toggleGreenScreen}):void 0,h?void 0:T.createElement("header",{className:"menubar",role:"banner"},c?T.createElement(I.EditorAccessibilityMenu,{parent:this,highContrast:this.state.highContrast}):void 0,T.createElement(W.NotificationBanner,{parent:this}),T.createElement(L.MainMenu,{parent:this})),s?T.createElement("div",{id:"maineditor",className:r?"sandbox":"",role:"main"},T.createElement(R.TutorialCard,{ref:"tutorialcard",parent:this})):void 0,T.createElement("div",{id:"simulator"},f?T.createElement(F.DebuggerToolbar,{parent:this}):void 0,T.createElement("aside",{id:"filelist",className:"ui items"},T.createElement("label",{htmlFor:"boardview",id:"boardviewLabel",className:"accessible-hidden","aria-hidden":"true"},lf("Simulator")),T.createElement("div",{id:"boardview",className:"ui vertical editorFloat",role:"region","aria-labelledby":"boardviewLabel"}),T.createElement(j.SimulatorToolbar,{parent:this}),T.createElement("div",{className:"ui item portrait hide hidefullscreen"},pxt.options.debug?T.createElement(N.Button,{key:"hwdebugbtn",className:"teal",icon:"xicon chip",text:"Dev Debug",onClick:this.hwDebug}):""),b?T.createElement("div",{id:"serialPreview",className:"ui editorFloat portrait hide hidefullscreen"},T.createElement(z.SerialIndicator,{ref:"simIndicator",isSim:!0,onClick:this.openSimSerial}),T.createElement(z.SerialIndicator,{ref:"devIndicator",isSim:!1,onClick:this.openDeviceSerial})):void 0,r||o||this.editor==this.serialEditor?void 0:T.createElement(M.FileList,{parent:this}))),T.createElement("div",{id:"maineditor",className:r?"sandbox":"",role:"main"},this.allEditors.map(function(e){return e.displayOuter()})),l?T.createElement("div",{id:"homescreen",className:"full-abs",role:"main"},T.createElement("div",{className:"ui home projectsdialog"},T.createElement("div",{className:"menubar",role:"banner"},T.createElement(I.HomeAccessibilityMenu,{parent:this,highContrast:this.state.highContrast})," }",T.createElement(B.ProjectsMenu,{parent:this})),T.createElement(B.Projects,{parent:this,ref:this.handleHomeRef}))):void 0,s?T.createElement(R.TutorialHint,{ref:"tutorialhint",parent:this}):void 0,y?T.createElement("div",{id:"editortools",role:"complementary","aria-label":lf("Editor toolbar")},T.createElement(D.EditorToolbar,{ref:"editortools",parent:this})):void 0,i?T.createElement(L.SideDocs,{ref:"sidedoc",parent:this,sideDocsCollapsed:this.state.sideDocsCollapsed,docsUrl:this.state.sideDocsLoadUrl}):void 0,r?void 0:T.createElement(U.ScriptSearch,{parent:this,ref:this.handleScriptSearchRef}),r?void 0:T.createElement(H.Extensions,{parent:this,ref:this.handleExtensionRef}),l?T.createElement(B.ImportDialog,{parent:this,ref:this.handleImportDialogRef}):void 0,r?void 0:T.createElement(B.ExitAndSaveDialog,{parent:this,ref:this.handleExitAndSaveDialogRef}),r||!n?void 0:T.createElement(P.ShareEditor,{parent:this,ref:this.handleShareEditorRef}),v?T.createElement(O.LanguagePicker,{parent:this,ref:this.handleLanguagePickerRef}):void 0,r?T.createElement(L.SandboxFooter,{parent:this}):void 0,h?T.createElement("div",{id:"editorlogo"},T.createElement("a",{className:"poweredbylogo"})):void 0,d?T.createElement(N.Dimmer,{isOpen:!0,active:d,portalClassName:"tutorial",className:"ui modal",shouldFocusAfterRender:!1,closable:!0,onClose:this.hideLightbox}):void 0)},e}(a.Component);function o(){return S}t.ProjectView=X;var G={workspace:d,require:c,core:f,getEditor:o,monaco:w,blocks:E,compiler:m,pkg:p,getsrc:function(){pxt.log(S.editor.getCurrentSource())},sim:h,apiAsync:f.apiAsync,showIcons:function(){f.confirmAsync({header:"Icons",htmlBody:["cancel","certificate","checkmark","cloud","cloud upload","copy","disk outline","download","dropdown","edit","file outline","find","folder","folder open","help circle","keyboard","lock","play","puzzle","search","setting","settings","share alternate","sign in","sign out","square","stop","translate","trash","undo","upload","user","wizard","configure","align left"].map(function(e){return"<i style='font-size:2em' class=\"ui icon "+e+'"></i>&nbsp;'+e+"&nbsp; "}).join("\n")})},assembleCurrent:function(){m.compileAsync({native:!0}).then(function(){return m.assembleAsync(o().editorFile.content)}).then(function(e){var t=e.words;pxt.debug("["+t.map(function(e){return"0x"+e.toString(16)}).join(",")+"]")})},log:function(e){console.log(e)}};function J(){var e=/^#(\w+)(:([\/\-\+\=\w]+))?$/.exec(window.location.hash);return e?{cmd:e[1],arg:e[3]||""}:{cmd:"",arg:""}}function Q(e,t){if(!e)return!1;var n=S;if(!n)return!1;switch(Y(e)&&n.setState({home:!1}),e.cmd){case"doc":pxt.tickEvent("hash.doc"),n.setSideDoc(e.arg,n==this.blockEditor);break;case"follow":return pxt.tickEvent("hash.follow"),n.newEmptyProject(void 0,e.arg),!0;case"newproject":return pxt.tickEvent("hash.newproject"),n.newProject(),pxt.BrowserUtils.changeHash(""),!0;case"newjavascript":return pxt.tickEvent("hash.newjavascript"),n.newProject({prj:pxt.appTarget.blocksprj,filesOverride:{"main.blocks":""}}),pxt.BrowserUtils.changeHash(""),!0;case"gettingstarted":return pxt.tickEvent("hash.gettingstarted"),n.newProject(),pxt.BrowserUtils.changeHash(""),!0;case"tutorial":return pxt.tickEvent("hash.tutorial"),n.startTutorial(e.arg),pxt.BrowserUtils.changeHash(""),!0;case"home":return pxt.tickEvent("hash.home"),n.openHome(),pxt.BrowserUtils.changeHash(""),!0;case"sandbox":case"pub":case"edit":return pxt.tickEvent("hash."+e.cmd),pxt.BrowserUtils.changeHash(""),Z(e.arg),!0;case"sandboxproject":case"project":pxt.tickEvent("hash."+e.cmd);var r=$.stringToUint8Array(atob(e.arg));return pxt.BrowserUtils.changeHash(""),f.showLoading("loadingproject",lf("loading project...")),n.importProjectFromFileAsync(r).done(function(){return f.hideLoading("loadingproject")}),!0;case"reload":return t&&pxt.BrowserUtils.changeHash(""),!1}return!1}function Y(e){if(!e)return!1;switch(e.cmd){case"follow":case"newproject":case"newjavascript":case"tutorial":case"projects":case"sandbox":case"pub":case"edit":case"sandboxproject":case"project":return!0;default:return!1}}function Z(t){var e=d.getHeaders().filter(function(e){return e.pubCurrent&&e.pubId==t})[0];f.showLoading("loadingheader",lf("loading project...")),(e?S.loadHeaderAsync(e,null):d.installByIdAsync(t).then(function(e){return S.loadHeaderAsync(e,null)})).catch(f.handleNetworkError).finally(function(){return f.hideLoading("loadingheader")})}window.E=G,pxt.winrt.captureInitialActivation(),document.addEventListener("DOMContentLoaded",function(){pxt.setupWebConfig(window.pxtConfig);var o=pxt.webConfig;pxt.options.debug=/dbg=1/i.test(window.location.href),pxt.options.light=/light=1/i.test(window.location.href)||pxt.BrowserUtils.isARM()||pxt.BrowserUtils.isIE(),pxt.options.light&&pxsim.U.addClass(document.body,"light");var e=/wsport=(\d+)/i.exec(window.location.href);if(e?(pxt.options.wsPort=parseInt(e[1])||3233,pxt.BrowserUtils.changeHash(window.location.hash.replace(e[0],""))):pxt.options.wsPort=3233,p.setupAppTarget(window.pxtTargetBundle),function(){pxt.analytics.enable(),pxt.editor.enableControllerAnalytics();var e={};if("undefined"!=typeof window){var t=window.screen;e["screen.width"]=t.width,e["screen.height"]=t.height,e["screen.availwidth"]=t.availWidth,e["screen.availheight"]=t.availHeight,e["screen.innerWidth"]=window.innerWidth,e["screen.innerHeight"]=window.innerHeight,e["screen.devicepixelratio"]=pxt.BrowserUtils.devicePixelRatio()}pxt.tickEvent("editor.loaded",e)}(),!pxt.BrowserUtils.isBrowserSupported()&&!/skipbrowsercheck=1/i.exec(window.location.href))return pxt.tickEvent("unsupported"),window.location.href="/browsers",void f.showLoading("browsernotsupported",lf("Sorry, this browser is not supported."));!function(){var e;if((e=f.parseQueryString((location.hash||"#").slice(1).replace(/%23access_token/,"access_token"))).access_token){var t=pxt.storage.getLocal("oauthState");t&&t==e.state&&(pxt.storage.setLocal("access_token",e.access_token),pxt.storage.removeLocal("oauthState")),location.hash=location.hash.replace(/(%23)?[\#\&\?]*access_token.*/,"")}K.accessToken=pxt.storage.getLocal("access_token")||"",(e=f.parseQueryString((location.hash||"#").slice(1).replace(/%local_token/,"local_token"))).local_token&&(pxt.storage.setLocal("local_token",e.local_token),location.hash=location.hash.replace(/(%23)?[\#\&\?]*local_token.*/,"")),K.localToken=pxt.storage.getLocal("local_token")||""}();var r=J();g.init(function(){try{!pxt.BrowserUtils.isIFrame()||"pub"!==r.cmd&&"sandbox"!==r.cmd?S&&!S.home.state.visible&&S.state&&S.state.header&&!S.state.header.isDeleted&&(location.hash="#reload"):location.hash="#"+r.cmd+":"+r.arg,location.reload()}catch(e){pxt.reportException(e),location.reload()}}),pxt.hex.showLoading=function(e){return f.showLoading("hexcloudcompiler",e)},pxt.hex.hideLoading=function(){return f.hideLoading("hexcloudcompiler")},pxt.docs.requireMarked=function(){return c("marked")};var t=function(e,t){return void 0===t&&(t=!1),S.importHex(e,t)},n=/^(https:\/\/[^/]+)/.exec(window.location.href);n&&(K.apiRoot=n[1]+"/api/");var i=/ws=(\w+)/.exec(window.location.href),a=pxt.shell.isSandboxMode()||pxt.shell.isReadOnly(),s=pxt.shell.isControllerMode();i?d.setupWorkspace(i[1]):pxt.appTarget.appTheme.allowParentController||s?d.setupWorkspace("iframe"):a?d.setupWorkspace("mem"):pxt.winrt.isWinRT()?d.setupWorkspace("uwp"):(K.isLocalHost()||V.isPxtElectron)&&d.setupWorkspace("fs"),Promise.resolve().then(function(){var e=/(live)?(force)?lang=([a-z]{2,}(-[A-Z]+)?)/i.exec(window.location.href);e&&0<=window.location.hash.indexOf(e[0])&&pxt.BrowserUtils.changeHash(window.location.hash.replace(e[0],""));var t=e?e[3]:O.getCookieLang()||pxt.appTarget.appTheme.defaultLocale||navigator.userLanguage||navigator.language,n=!pxt.appTarget.appTheme.disableLiveTranslations||e&&!!e[1],r=!!e&&!!e[2];return $.updateLocalizationAsync(pxt.appTarget.id,!1,o.commitCdnUrl,t,pxt.appTarget.versions.pxtCrowdinBranch,pxt.appTarget.versions.targetCrowdinBranch,n,r).then(function(){return pxt.Util.isLocaleEnabled(t)?O.setCookieLang(t):pxt.tickEvent("unavailablelocale."+t+(r?".force":"")),pxt.tickEvent("locale."+pxt.Util.userLanguage()+(n?".live":"")),$.downloadSimulatorLocalizationAsync(pxt.appTarget.id,o.commitCdnUrl,t,pxt.appTarget.versions.pxtCrowdinBranch,pxt.appTarget.versions.targetCrowdinBranch,n,r)}).then(function(e){e&&h.setTranslations(e)})}).then(function(){return pxt.BrowserUtils.initTheme()}).then(function(){return A.initCommandsAsync()}).then(function(){return d.initAsync()}).then(function(){return u.render(T.createElement(X,null),N.appElement),d.syncAsync()}).then(function(e){return e&&S.setState({editorState:e}),function(){if(pxt.appTarget.serial&&(pxt.winrt.isWinRT()||K.isLocalHost()&&K.localToken))if(y.shouldUse())y.configureHidSerial(function(e,t){var n=$.fromUTF8($.uint8ArrayToString(e));window.postMessage({type:"serial",id:"n/a",data:n},"*")});else{pxt.debug("initializing serial pipe");var e=new WebSocket("ws://localhost:"+pxt.options.wsPort+"/"+K.localToken+"/serial"),n={};e.onopen=function(e){pxt.debug("serial: socket opened")},e.onclose=function(e){pxt.debug("serial: socket closed")},e.onerror=function(e){pxt.debug("serial: error")},e.onmessage=function(t){try{var e=JSON.parse(t.data);e&&"serial"==e.type&&pxt.Util.bufferSerial(n,e.data,e.id)}catch(e){pxt.debug("unknown message: "+t.data)}}}}(),window.addEventListener("message",function(e){var t=e.data;if(t&&"screenshot"==t.type){pxt.tickEvent("sim.screenshot");var n=t;pxt.debug("received screenshot"),S.screenshotHandler?S.screenshotHandler(n.data):v.saveAsync(S.state.header,n.data).done(function(){pxt.debug("screenshot saved")})}},!1),window.addEventListener("hashchange",function(e){Q(J(),!1)}),function(){if(!pxt.appTarget.appTheme||!pxt.appTarget.appTheme.extendEditor)return Promise.resolve();pxt.debug("loading editor extensions...");var e={blocklyToolbox:b.getToolboxDefinition(),monacoToolbox:_.getToolboxDefinition()};return pxt.BrowserUtils.loadScriptAsync("editor.js").then(function(){return pxt.editor.initExtensionsAsync(e)}).then(function(e){e.hexFileImporters&&e.hexFileImporters.forEach(function(e){pxt.debug("\tadded hex importer "+e.id),S.hexFileImporters.push(e)}),e.resourceImporters&&e.resourceImporters.forEach(function(e){pxt.debug("\tadded resource importer "+e.id),S.resourceImporters.push(e)}),e.deployCoreAsync&&(pxt.debug("\tadded custom deploy core async"),pxt.commands.deployCoreAsync=e.deployCoreAsync),e.saveOnlyAsync&&(pxt.debug("\tadded custom save only async"),pxt.commands.saveOnlyAsync=e.saveOnlyAsync),e.saveProjectAsync&&(pxt.debug("\tadded custom save project async"),pxt.commands.saveProjectAsync=e.saveProjectAsync),e.showUploadInstructionsAsync&&(pxt.debug("\tadded custom upload instructions async"),pxt.commands.showUploadInstructionsAsync=e.showUploadInstructionsAsync),e.beforeCompile&&(S.beforeCompile=e.beforeCompile),e.toolboxOptions&&(e.toolboxOptions.blocklyToolbox&&b.overrideToolbox(e.toolboxOptions.blocklyToolbox),e.toolboxOptions.monacoToolbox&&_.overrideToolbox(e.toolboxOptions.monacoToolbox)),e.blocklyPatch&&(pxt.blocks.extensionBlocklyPatch=e.blocklyPatch)})}()}).then(function(){return V.initElectron(S),pxt.winrt.initAsync(t)}).then(function(){return pxt.winrt.hasActivationProjectAsync()}).then(function(e){var t=S.settings.fileHistory.filter(function(e){return!!d.getHeader(e.id)})[0],n=d.getHeaders()[0];return t&&(n=d.getHeader(t.id)),S.shouldShowHomeScreen()&&!e?Promise.resolve():(S.setState({home:!1}),r.cmd&&Q(r,!0)?Promise.resolve():e?pxt.winrt.loadActivationProject():n?S.loadHeaderAsync(n,S.state.editorState):(S.newProject(),Promise.resolve()))}).then(function(){return pxsim.U.remove(document.getElementById("loading")),d.loadedAsync()}).done(function(){window.requestIdleCallback&&window.requestIdleCallback(function(){S&&S.loadBlocklyAsync().done()})}),document.addEventListener("visibilitychange",function(e){S&&S.updateVisibility()}),window.addEventListener("unload",function(e){S&&S.saveSettings()}),window.addEventListener("resize",function(e){S&&S.editor&&S.editor.resize(e)},!1);var l=window.ipcRenderer;l&&l.on("responseFromApp",function(e,t){try{h.driver.postMessage(JSON.parse(t))}catch(e){}}),window.addEventListener("message",function(e){var t=e.data;if(t)if("parent"!=e.data.__proxy)if("tutorial"!=t.type&&"popoutcomplete"!=t.type)if("sidedocready"===t.type&&K.isLocalHost()&&K.localToken)L.SideDocs.notify({type:"localtoken",localToken:K.localToken});else if("importfile"!=t.type);else{var n=t;S&&S.importFile(new File(n.parts,n.filename))}else S&&S.editor&&S.handleMessage(t);else{pxt.debug("received parent proxy message"+e.data),delete e.data.__proxy;var r=window.ipcRenderer;r?r.sendToHost("sendToApp",e.data):window.parent&&window!=window.parent&&window.parent.postMessage(e.data,"*")}},!1)})},{"./accessibility":1,"./appcache":3,"./blocks":5,"./blocksSnippets":6,"./cmds":9,"./compiler":11,"./container":12,"./core":13,"./data":15,"./debugger":17,"./dialogs":18,"./draganddrop":19,"./editortoolbar":20,"./electron":21,"./extensions":23,"./filelist":24,"./greenscreen":26,"./hidbridge":27,"./lang":29,"./make":30,"./monaco":33,"./monacoSnippets":34,"./notification":35,"./package":36,"./projects":37,"./pxtjson":38,"./screenshot":39,"./scriptsearch":40,"./serial":41,"./serialindicator":42,"./share":43,"./simtoolbar":44,"./simulator":45,"./sounds":46,"./sui":48,"./tutorial":51,"./workspace":52,marked:110,react:157,"react-dom":145}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./core");n.init=function(e){var t=window.applicationCache;function n(){console.log("app cache update ready ("+t.status+")"),t.status===window.applicationCache.UPDATEREADY&&(r.infoNotification(lf("Update download complete. Reloading... ")),setTimeout(function(){pxt.tickEvent("appcache.updated"),e()},3e3))}pxt.appTarget.appTheme&&pxt.appTarget.appTheme.noReloadOnUpdate||(t.status===window.applicationCache.UPDATEREADY?n():t.addEventListener("updateready",function(){n()},!1))}},{"./core":13}],4:[function(e,t,n){"use strict";var r;function i(){return r||(r=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}return}()),r}Object.defineProperty(n,"__esModule",{value:!0}),n.play=function(e,t){if(void 0===t&&(t=1),e){var n=i();if(n){var r=n.createBufferSource();r.buffer=e;var o=n.createGain();o.gain.value=t,r.connect(o),o.connect(n.destination),r.start(0)}}},n.loadAsync=function(n){var r=i();return new Promise(function(t,e){r.decodeAudioData(n,function(e){return t(e)},function(){t(void 0)})})}},{}],5:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("react-dom"),s=e("./package"),l=e("./core"),c=e("./toolboxeditor"),u=e("./compiler"),d=e("./debugger"),p=e("./toolbox"),y=e("./blocksSnippets"),b=pxt.Util,f=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.isFirstBlocklyLoad=!0,t.showCategories=!0,t.markIncomplete=!1,t.handleToolboxRef=function(e){t.toolbox=e},t.handleDebuggerVariablesRef=function(e){t.debugVariables=e},t.flyoutBlockXmlCache={},t.flyoutXmlList=[],t}return o(e,r),e.prototype.setVisible=function(e){r.prototype.setVisible.call(this,e),this.isVisible=e;var t="#blocksEditor .blocklyToolboxDiv, #blocksEditor .blocklyWidgetDiv, #blocksEditor .blocklyToolboxDiv";this.isVisible?(pxt.Util.toArray(document.querySelectorAll(t)).forEach(function(e){return e.style.display=""}),this.parent.fireResize()):(pxt.Util.toArray(document.querySelectorAll(t)).forEach(function(e){return e.style.display="none"}),this.editor&&Blockly.hideChaff())},e.prototype.saveToTypeScript=function(){var t=this;if(!this.typeScriptSaveable)return Promise.resolve("");this.clearHighlightedStatements();try{return pxt.blocks.compileAsync(this.editor,this.blockInfo).then(function(e){return t.compilationResult=e,pxt.tickActivity("blocks.compile"),t.compilationResult.source})}catch(e){return pxt.reportException(e),l.errorNotification(lf("Sorry, we were not able to convert this program.")),Promise.resolve("")}},e.prototype.updateBlocksInfo=function(e){this.blockInfo=e,this.refreshToolbox()},e.prototype.domUpdate=function(){var n=this;if(this.delayLoadXml){if(this.loadingXml)return;pxt.debug("loading blockly"),this.loadingXml=!0;var e=document.createElement("div");e.className="ui active dimmer";var t=document.createElement("div");t.className="ui text loader",t.appendChild(document.createTextNode(lf("Loading blocks..."))),e.appendChild(t);var r=document.getElementById("blocksEditor");r.appendChild(e),this.loadingXmlPromise=this.loadBlocklyAsync().then(function(){return u.getBlocksAsync()}).then(function(e){n.blockInfo=e,pxt.blocks.initialize(n.blockInfo),n.nsMap=n.partitionBlocks(),n.refreshToolbox(),pxt.debug("loading block workspace");var t=n.delayLoadXml;n.delayLoadXml=void 0,n.loadBlockly(t),n.resize(),Blockly.svgResize(n.editor),n.isFirstBlocklyLoad=!1}).finally(function(){n.loadingXml=!1;try{r.removeChild(e)}catch(e){}}),this.loadingXmlPromise.done(),this.loadingXmlPromise=null}},e.prototype.saveBlockly=function(){return this.delayLoadXml?this.delayLoadXml:this.serializeBlocks()},e.prototype.serializeBlocks=function(e){var t=pxt.blocks.saveWorkspaceXml(this.editor);return e&&(t=t.replace(/(x|y|id)="[^"]*"/g,"")),pxt.debug(t),t},e.prototype.loadBlockly=function(e){if(this.serializeBlocks()==e)return this.typeScriptSaveable=!0,pxt.debug("blocks already loaded..."),!1;this.typeScriptSaveable=!1,this.editor.clear();try{var t=pxt.blocks.importXml(s.mainPkg.targetVersion(),e||'<block type="'+ts.pxtc.ON_START_TYPE+'"></block>',this.blockInfo,!0),n=Blockly.Xml.textToDom(t);Blockly.Xml.domToWorkspace(n,this.editor),this.initLayout(),this.editor.clearUndo(),this.reportDeprecatedBlocks(),this.typeScriptSaveable=!0}catch(e){return pxt.log(e),this.editor.clear(),this.switchToTypeScript(),this.changeCallback(),!1}return this.changeCallback(),!0},e.prototype.initLayout=function(){var n,r,o=!1,e=!this.editor.toolbox_&&this.editor.flyout_;this.editor.getTopComments(!1).forEach(function(e){var t=e.getBoundingRectangle().topLeft;(void 0===n||t.x<n)&&(n=t.x),(void 0===r||t.y<r)&&(r=t.y),o=o||10==t.x&&10==t.y}),this.editor.getTopBlocks(!1).forEach(function(e){var t=e.getBoundingRectangle().topLeft;(void 0===n||t.x<n)&&(n=t.x),(void 0===r||t.y<r)&&(r=t.y),o=o||e.type!=ts.pxtc.ON_START_TYPE&&10==t.x&&10==t.y}),o&&!e?pxt.blocks.layout.flow(this.editor,{useViewWidth:!0}):(this.editor.getTopComments(!1).forEach(function(e){return e.moveBy(-n,-r)}),this.editor.getTopBlocks(!1).forEach(function(e){return e.moveBy(-n,-r)}),this.editor.scrollX=e?this.editor.flyout_.width_+10:10,this.editor.scrollY=10,this.editor.resizeContents())},e.prototype.initPrompts=function(){Blockly.alert=function(e,t){return l.confirmAsync({hideCancel:!0,header:lf("Alert"),agreeLbl:lf("Ok"),agreeClass:"positive",agreeIcon:"checkmark",body:e,size:"tiny"}).then(function(){t&&t()})},Blockly.confirm=function(e,t){return l.confirmAsync({header:lf("Confirm"),body:e,agreeLbl:lf("Yes"),agreeClass:"positive",agreeIcon:"checkmark",disagreeLbl:lf("No"),disagreeClass:"cancel",disagreeIcon:"cancel",size:"tiny"}).then(function(e){t(1==e)})},Blockly.prompt=function(e,t,n){return l.promptAsync({header:e,defaultValue:t,agreeLbl:lf("Ok"),disagreeLbl:lf("Cancel"),size:"tiny"}).then(function(e){n(e)})}},e.prototype.initBlocklyToolbox=function(){var e=this,t=Blockly.Toolbox.prototype.position;Blockly.Toolbox.prototype.position=function(){t.call(this),e.resizeToolbox()};var n=this;Blockly.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.flyout_&&n.toolbox.refreshSelection()};var r=Blockly.hideChaff;Blockly.hideChaff=function(e){r(e),e||n.hideFlyout()}},e.prototype.initWorkspaceSounds=function(){var n=this,r=Blockly.WorkspaceAudio.prototype.play;Blockly.WorkspaceAudio.prototype.play=function(e,t){n&&n.parent.state.mute&&(t=0),r.call(this,e,t)}},e.prototype.reportDeprecatedBlocks=function(){var t={},n=!1;for(var e in this.blockInfo.blocks.forEach(function(e){e.attributes.deprecated&&(t[e.attributes.blockId]=0)}),this.editor.getAllBlocks().forEach(function(e){0<=t[e.type]&&(t[e.type]++,n=!0)}),t)0===t[e]&&delete t[e];n&&pxt.tickEvent("blocks.usingDeprecated",t)},e.prototype.contentSize=function(){return this.editor?pxt.blocks.blocksMetrics(this.editor):void 0},e.prototype.isIncomplete=function(){var e=!!this.editor&&(this.editor.isDragging()||Blockly.WidgetDiv.isVisible()||Blockly.DropDownDiv.isVisible());return e&&(this.markIncomplete=!0),e},e.prototype.prepare=function(){this.isReady=!0},e.prototype.prepareBlockly=function(e){var r=this,t=document.getElementById("blocksEditor");pxsim.U.clear(t),this.editor=Blockly.inject(t,this.getBlocklyOptions(e));var n=Blockly.Colours;b.jsonMergeFrom(n,pxt.appTarget.appTheme.blocklyColors||{}),Blockly.Colours=n,this.editor.addChangeListener(function(e){if(Blockly.Events.disableOrphans(e),("ui"!=e.type||r.markIncomplete)&&(r.changeCallback(),r.markIncomplete=!1),"create"==e.type){var t=e.xml.getAttribute("type");pxt.tickActivity("blocks.create","blocks.create."+t),"SHADOW"==e.xml.tagName&&r.cleanUpShadowBlocks(),r.parent.setState({hideEditorFloats:!1})}if("ui"==e.type&&"category"==e.element){var n=!!e.newValue;n&&pxt.analytics.enableCookies(),r.parent.setState({hideEditorFloats:n})}}),this.shouldShowCategories()&&this.renderToolbox(),this.hideFlyout(),this.initPrompts(),this.initBlocklyToolbox(),this.initWorkspaceSounds(),this.resize()},e.prototype.resize=function(e){var t=this.getBlocksAreaDiv();if(t){var n=this.getBlocksEditorDiv();n&&this.editor&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",Blockly.svgResize(this.editor),this.resizeToolbox())}},e.prototype.resizeToolbox=function(){var e=this.getBlocksEditorDiv();if(e){var t=this.getBlocklyToolboxDiv();if(t){this.parent.updateEditorLogo(t.offsetWidth);var n=this.getBlocklyOptions(this.showCategories),r=e.offsetHeight;n.horizontalLayout||(t.style.height=r+"px")}}},e.prototype.hasUndo=function(){return!!this.editor&&0!=this.editor.undoStack_.length},e.prototype.undo=function(){this.editor&&(this.editor.undo(),this.parent.forceUpdate())},e.prototype.hasRedo=function(){return!!this.editor&&0!=this.editor.redoStack_.length},e.prototype.redo=function(){this.editor&&(this.editor.undo(!0),this.parent.forceUpdate())},e.prototype.zoomIn=function(){this.editor&&this.editor.zoomCenter(2)},e.prototype.zoomOut=function(){this.editor&&this.editor.zoomCenter(-2)},e.prototype.setScale=function(e){this.editor&&e!=this.editor.scale&&this.editor.setScale(e)},e.prototype.closeFlyout=function(){this.editor&&(this.hideFlyout(),Blockly.hideChaff())},e.prototype.getId=function(){return"blocksArea"},e.prototype.display=function(){return i.createElement("div",null,i.createElement("div",{id:"blocksEditor"}),i.createElement(p.ToolboxTrashIcon,null),this.parent.state.debugging?i.createElement(d.DebuggerVariables,{ref:this.handleDebuggerVariablesRef,parent:this.parent}):void 0)},e.prototype.getBlocksAreaDiv=function(){return document.getElementById("blocksArea")},e.prototype.getBlocksEditorDiv=function(){return this.getBlocksAreaDiv()?document.getElementById("blocksEditor"):void 0},e.prototype.getBlocklyToolboxDiv=function(){var e=this.getBlocksAreaDiv();return e?e.getElementsByClassName("blocklyToolboxDiv")[0]:void 0},e.prototype.renderToolbox=function(e){if(!pxt.shell.isReadOnly()){var t=this.getBlocklyToolboxDiv(),n=i.createElement(p.Toolbox,{ref:this.handleToolboxRef,editorname:"blocks",parent:this});b.assert(!!t),a.render(n,t),e||this.toolbox.showLoading()}},e.prototype.showPackageDialog=function(){pxt.tickEvent("blocks.addpackage"),this.editor.toolbox_&&this.editor.toolbox_.clearSelection(),this.parent.showPackageDialog()},e.prototype.showVariablesFlyout=function(){this.showFlyoutInternal_(Blockly.Variables.flyoutCategory(this.editor))},e.prototype.showFunctionsFlyout=function(){this.showFlyoutInternal_(Blockly.Procedures.flyoutCategory(this.editor))},e.prototype.getViewState=function(){return{}},e.prototype.setViewState=function(e){},e.prototype.getCurrentSource=function(){return this.editor&&!this.delayLoadXml?this.saveBlockly():this.currSource},e.prototype.acceptsFile=function(e){return"blocks"==e.getExtension()},e.prototype.overrideFile=function(e){this.delayLoadXml?(this.delayLoadXml=e,this.currSource=e):this.loadBlockly(e)},e.prototype.insertBreakpoint=function(){if(this.editor){var e=this.editor.newBlock(pxtc.TS_DEBUGGER_TYPE),t=this.editor.getMetrics();e.moveBy(t.viewWidth/2,t.viewHeight/3),e.initSvg(),e.render()}},e.prototype.loadBlocklyAsync=function(){var r=this;return this._loadBlocklyPromise||(this._loadBlocklyPromise=pxt.BrowserUtils.loadBlocklyAsync().then(function(){pxt.blocks.openHelpUrl=function(e){pxt.tickEvent("blocks.help",{url:e},{interactiveConsent:!0});var t=/^\/pkg\/([^#]+)#(.+)$/.exec(e);if(t){var n=s.mainPkg.deps[t[1]];if(n&&"github"==n.verProtocol())return e="/pkg/"+n.verArgument().replace(/#.*$/,"")+"#"+t[2],void window.open(e,t[1])}/^\//.test(e)?r.parent.setSideDoc(e):window.open(e,"docs")},r.prepareBlockly()}).then(function(){return pxt.appTarget.appTheme&&pxt.appTarget.appTheme.extendFieldEditors?pxt.BrowserUtils.loadScriptAsync("fieldeditors.js").then(function(){return pxt.editor.initFieldExtensionsAsync({})}).then(function(e){e.fieldEditors&&e.fieldEditors.forEach(function(e){pxt.blocks.registerFieldEditor(e.selector,e.editor,e.validator)})}):Promise.resolve()})),this._loadBlocklyPromise},e.prototype.loadFileAsync=function(t){var n=this;return b.assert(!this.delayLoadXml),b.assert(!this.loadingXmlPromise),this.loadBlocklyAsync().then(function(){pxt.blocks.cleanBlocks(),n.toolbox&&n.toolbox.showLoading(),n.blockInfo=void 0,n.currSource=t.content,n.typeScriptSaveable=!1,n.setDiagnostics(t),n.delayLoadXml=t.content,n.editor.clear(),n.editor.clearUndo(),n.closeFlyout(),n.currFile&&n.currFile!=t&&n.filterToolbox(null),n.parent.state.editorState&&n.parent.state.editorState.filters?n.filterToolbox(n.parent.state.editorState.filters):n.filters=null,n.parent.state.editorState&&null!=n.parent.state.editorState.searchBar?n.showSearch=n.parent.state.editorState.searchBar:n.showSearch=!0,n.parent.state.editorState&&null!=n.parent.state.editorState.hasCategories?n.showCategories=n.parent.state.editorState.hasCategories:n.showCategories=!0,n.currFile=t;var e=document.getElementById("blocklySearchInputField");e&&e.value&&(e.value=""),n.extensions=s.allEditorPkgs().map(function(e){return e.getKsPkg()}).map(function(e){return!!e&&e.config}).filter(function(e){return!!e&&!!e.extension&&/^(file:|github:)/.test(e.installedVersion)})})},e.prototype.unloadFileAsync=function(){return this.delayLoadXml=void 0,this.toolbox&&this.toolbox.clearSearch(),Promise.resolve()},e.prototype.switchToTypeScript=function(){pxt.tickEvent("blocks.switchjavascript"),this.parent.closeFlyout(),this.parent.switchTypeScript()},e.prototype.setDiagnostics=function(e){var o=this;if(b.assert(null!=this.editor),this.compilationResult&&!this.delayLoadXml&&!this.loadingXml){this.editor.getAllBlocks().filter(function(e){return!e.disabled}).forEach(function(e){e.setWarningText(null),e.setHighlightWarning(!1)});var t=e.epkg.files[e.getVirtualFileName()];if(t&&t.diagnostics){var n=t.diagnostics.filter(function(e){return e.category==ts.pxtc.DiagnosticCategory.Error}),i=this.compilationResult.sourceMap;n.filter(function(e){return e.category==ts.pxtc.DiagnosticCategory.Error}).forEach(function(e){var t=pxt.blocks.findBlockId(i,{start:e.line,length:0});if(t){var n=o.editor.getBlockById(t);if(n){var r=ts.pxtc.flattenDiagnosticMessageText(e.messageText,"\n");n.setWarningText(r),n.setHighlightWarning(!0)}}})}}},e.prototype.highlightStatement=function(e,t){if(!this.compilationResult||this.delayLoadXml||this.loadingXml)return!1;if(this.updateDebuggerVariables(t?t.globals:void 0),!e)return this.editor.highlightBlock(null),!1;var n=pxt.blocks.findBlockId(this.compilationResult.sourceMap,{start:e.line,length:e.endLine-e.line});if(n){if(this.editor.highlightBlock(n),t){var r=this.editor.getBlockById(n);r.setWarningText(t?t.exceptionMessage:void 0);var o=r.getRelativeToSurfaceXY(),i=r.getHeightWidth(),a=this.editor.scale,s=this.editor.getMetrics();(o.x*a<s.viewLeft+4||(o.x+i.width)*a>s.viewLeft+s.viewWidth-4||o.y*a<s.viewTop+4||(o.y+i.height)*a>s.viewTop+s.viewHeight-4)&&this.editor.centerOnBlock(n)}return!0}return!1},e.prototype.clearDebuggerVariables=function(){this.debugVariables&&this.debugVariables.clear()},e.prototype.updateDebuggerVariables=function(o){if(this.parent.state.debugging)if(o){var e=this.editor.getAllVariables().map(function(e){return e.name});if(e.length){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=a(r);this.debugVariables&&this.debugVariables.set(r,i)}this.debugVariables&&this.debugVariables.update()}else this.debugVariables&&this.debugVariables.clear()}else this.debugVariables&&this.debugVariables.update(!0);function a(e){for(var t=0,n=Object.keys(o);t<n.length;t++){var r=n[t];if(e===r.replace(/___\d+$/,""))return o[r]}}},e.prototype.clearHighlightedStatements=function(){this.editor.highlightBlock(null),this.clearDebuggerVariables()},e.prototype.openTypeScript=function(){pxt.tickEvent("blocks.showjavascript"),this.parent.closeFlyout(),this.parent.openTypeScriptAsync().done()},e.prototype.cleanUpShadowBlocks=function(){this.editor.getTopBlocks(!1).filter(function(e){return e.isShadow_}).forEach(function(e){return e.dispose(!1)})},e.prototype.getBlocklyOptions=function(e){var t=this.getDefaultOptions();b.jsonMergeFrom(t,pxt.appTarget.appTheme.blocklyOptions||{});var n=null!=e?e:null!=t.hasCategories?t.hasCategories:this.showCategories;(t.hasCategories=n)||(this.showCategories=!1);var r=n?document.getElementById("blocklyToolboxDefinitionCategory"):document.getElementById("blocklyToolboxDefinitionFlyout");return t.toolbox=null!=t.toolbox?t.toolbox:t.readOnly?void 0:r,t},e.prototype.getDefaultOptions=function(){if(this.blocklyOptionsCache)return this.blocklyOptionsCache;var e=pxt.shell.isReadOnly(),t={scrollbars:!0,media:pxt.webConfig.commitCdnUrl+"blockly/media/",sound:!0,trashcan:!1,collapse:!1,comments:!0,disable:!1,readOnly:e,toolboxOptions:{colour:pxt.appTarget.appTheme.coloredToolbox,inverted:pxt.appTarget.appTheme.invertedToolbox},zoom:{enabled:!1,controls:!1,wheel:!0,maxScale:2.5,minScale:.2,scaleSpeed:1.05,startScale:pxt.BrowserUtils.isMobile()?.7:.8},rtl:b.isUserLanguageRtl()};return this.blocklyOptionsCache=t},e.prototype.refreshToolbox=function(){if(this.blockInfo&&!pxt.shell.isReadOnly()&&(null==this.parent.state.tutorialOptions||this.parent.state.tutorialOptions.tutorialReady)){this.clearCaches();var e=this.shouldShowCategories();this.editor.toolbox_&&e||this.editor.flyout_&&!e?e?this.toolbox.setState({loading:!1,categories:this.getAllCategories(),showSearchBox:this.shouldShowSearch()}):this.showFlyoutOnlyToolbox():(e||a.unmountComponentAtNode(this.getBlocklyToolboxDiv()),this.delayLoadXml=this.getCurrentSource(),this.editor=void 0,this.loadingXml=!1,this.loadingXmlPromise&&(this.loadingXmlPromise.cancel(),this.loadingXmlPromise=null),this.prepareBlockly(e),this.domUpdate(),this.editor.scrollCenter(),e&&(this.toolbox||this.renderToolbox(!0)))}},e.prototype.filterToolbox=function(e,t){this.filters=e,this.showCategories=t,this.refreshToolbox()},e.prototype.openExtension=function(t){var i=this,a=this.extensions.filter(function(e){return e.name==t})[0],s=pxt.github.parseRepoId(a.installedVersion);pxt.packagesConfigAsync().then(function(e){var t=pxt.github.repoStatus(s,e),n=s.fullName.substr(s.fullName.indexOf("/")+1),r=pxt.Cloud.isLocalHost()&&/^file:/.test(a.installedVersion)&&a.extension.localUrl,o=pxt.Cloud.isLocalHost()&&/debugExtensions/i.test(window.location.href)?"http://localhost:3232/extension.html":r?a.extension.localUrl:"https://"+s.owner+".github.io/"+n+"/";i.parent.openExtension(a.name,o,0==t)})},e.prototype.partitionBlocks=function(){var r={},n=this;function o(e,t){n.subcategoryMap[e]||(n.subcategoryMap[e]={}),n.subcategoryMap[e][t]=!0}return pxt.blocks.injectBlocks(this.blockInfo).forEach(function(e){var t=(e.attributes.blockNamespace||e.namespace).split(".")[0];t=t.toLowerCase(),r[t]||(r[t]=[]),r[t].push(e);var n=e.attributes.subcategory;e.attributes.advanced?o(t,"more"):n&&o(t,n)}),r},e.prototype.hideFlyout=function(){this.editor.toolbox_&&this.editor.toolbox_.flyout_.hide(),this.toolbox&&this.toolbox.clear()},e.prototype.clearCaches=function(){r.prototype.clearCaches.call(this),this.flyoutBlockXmlCache={},y.clearBuiltinBlockCache()},e.prototype.shouldShowSearch=function(){return!this.parent.state.editorState||null==this.parent.state.editorState.searchBar||this.parent.state.editorState.searchBar},e.prototype.shouldShowCategories=function(){return this.parent.state.editorState&&null!=this.parent.state.editorState.hasCategories?this.parent.state.editorState.hasCategories:this.getBlocklyOptions().hasCategories},e.prototype.getBuiltinCategory=function(e){return y.getBuiltinCategory(e)},e.prototype.isBuiltIn=function(e){return y.isBuiltin(e)},e.prototype.getNamespaceAttrs=function(e){var t=y.getBuiltinCategory(e);return t?(t.attributes.color=pxt.toolbox.getNamespaceColor(t.nameid),t.attributes):this.blockInfo?r.prototype.getNamespaceAttrs.call(this,e):void 0},e.prototype.getNamespaces=function(){var t=this,e=Object.keys(this.nsMap).filter(function(e){return!y.isBuiltin(e)&&!!t.getNamespaceAttrs(e)}),n=pxt.appTarget.runtime||{};return n.loopsBlocks&&!y.loops.removed&&e.push(y.loops.nameid),n.logicBlocks&&!y.logic.removed&&e.push(y.logic.nameid),n.variablesBlocks&&!y.variables.removed&&e.push(y.variables.nameid),n.mathBlocks&&!y.maths.removed&&e.push(y.maths.nameid),n.functionBlocks&&!y.functions.removed&&e.push(y.functions.nameid),n.listsBlocks&&!y.arrays.removed&&e.push(y.arrays.nameid),n.textBlocks&&!y.text.removed&&e.push(y.text.nameid),pxt.appTarget.cloud&&pxt.appTarget.cloud.packages&&e.push(y.extensions.nameid),e.concat(r.prototype.getNamespaces.call(this))},e.prototype.getBlocksForCategory=function(e,t){return y.isBuiltin(e)?this.getBuiltInBlocks(e,t).concat(this.getExtraBlocks(e,t)):this.getNonBuiltInBlocks(e,t).concat(this.getExtraBlocks(e,t))},e.prototype.filterBlocks=function(t,e){return e.filter(function(e){return!(e.attributes.blockHidden||e.attributes.deprecated)&&(!t&&!e.attributes.subcategory&&!e.attributes.advanced||t&&(e.attributes.advanced&&"more"==t||e.attributes.subcategory&&t==e.attributes.subcategory))})},e.prototype.getBuiltInBlocks=function(e,t){var n=y.getBuiltinCategory(e),r=n.blocks||[];return r.forEach(function(e){e.noNamespace=!0}),!n.custom&&this.nsMap[e.toLowerCase()]&&(r=this.filterBlocks(t,r.concat(this.nsMap[e.toLowerCase()]))),r},e.prototype.getNonBuiltInBlocks=function(e,t){return this.filterBlocks(t,this.nsMap[e])||[]},e.prototype.getExtraBlocks=function(r,e){var o=this;if(e)return[];var i=[],t=pxt.appTarget.runtime.onStartNamespace||"loops";r==t&&i.push({name:ts.pxtc.ON_START_TYPE,attributes:{blockId:ts.pxtc.ON_START_TYPE,weight:pxt.appTarget.runtime.onStartWeight||10},blockXml:'<block type="pxt-on-start"></block>',noNamespace:!0});var n=y.getPauseUntil();return n&&r==n.attributes.blockNamespace&&i.push(n),e||this.extensions.forEach(function(e){var t=e.name,n=e.extension.namespace||t;r==n&&i.push({name:"EXT"+t+"_BUTTON",type:"button",attributes:{blockId:"EXT"+t+"_BUTTON",label:e.extension.label?b.rlf(e.extension.label):b.lf("Editor"),weight:101},callback:function(){o.openExtension(t)}})}),i},e.prototype.showFlyout=function(e){var t=e.nameid,n=e.subns;if("search"!=t){if(this.flyoutXmlList=[],this.flyoutBlockXmlCache[t+n])return pxt.debug("showing flyout with blocks from flyout blocks xml cache"),this.flyoutXmlList=this.flyoutBlockXmlCache[t+n],void this.showFlyoutInternal_(this.flyoutXmlList);this.abstractShowFlyout(e)&&(this.flyoutBlockXmlCache[t+n]=this.flyoutXmlList,this.showFlyoutInternal_(this.flyoutXmlList))}else this.showSearchFlyout()},e.prototype.showFlyoutHeadingLabel=function(e,t,n,r){var o=name||(t?b.capitalize(e)+" > "+b.capitalize(t):b.capitalize(e)),i=("blocklyTreeIcon"+(n?e.toLowerCase():"Default")).replace(/\s/g,""),a=pxt.blocks.createFlyoutHeadingLabel(o,r,n,i);this.flyoutXmlList.push(a)},e.prototype.showFlyoutGroupLabel=function(e,t,n){var r=pxt.blocks.createFlyoutGroupLabel(pxt.Util.rlf("{id:group}"+e),t,n);this.flyoutXmlList.push(r)},e.prototype.showFlyoutBlocks=function(e,t,n){var r=this,o=this.parent.state.editorState?this.parent.state.editorState.filters:void 0;o&&(o.namespaces&&null!=o.namespaces[e]?o.namespaces[e]:o.defaultState);n.sort(function(e,t){return(null!=t.attributes.weight?t.attributes.weight:50)-(null!=e.attributes.weight?e.attributes.weight:50)}).forEach(function(e){var t;(t="button"==e.type?r.getButtonXml(e):r.getBlockXml(e))&&(r.flyoutXmlList=r.flyoutXmlList.concat(t))})},e.prototype.showSearchFlyout=function(){var n=this;if(this.flyoutXmlList=[],this.toolbox.getSearchBlocks().forEach(function(e){var t=n.getBlockXml(e);t&&(n.flyoutXmlList=n.flyoutXmlList.concat(t))}),0==this.flyoutXmlList.length){var e=goog.dom.createDom("label");e.setAttribute("text",lf("No search results...")),this.flyoutXmlList.push(e)}this.showFlyoutInternal_(this.flyoutXmlList)},e.prototype.showFlyoutInternal_=function(e){this.editor.toolbox_?(this.editor.toolbox_.flyout_.show(e),this.editor.toolbox_.flyout_.scrollToStart()):this.editor.flyout_&&(this.editor.flyout_.show(e),this.editor.flyout_.scrollToStart())},e.prototype.showFlyoutOnlyToolbox=function(){var n=this,e=this.getAllCategories(),r=[];e.forEach(function(e){var t=e.blocks;r=r.concat(t),e.subcategories&&e.subcategories.forEach(function(e){var t=e.blocks;r=r.concat(t)})});var o=[];r.forEach(function(e){var t=n.getBlockXml(e);t&&(o=o.concat(t))}),this.showFlyoutInternal_(o)},e.prototype.getBlockXml=function(e,n){var r,i=this,o=this;if(!e.attributes.blockBuiltin){if(e.builtinBlock){var t=y.allBuiltinBlocks()[e.attributes.blockId];if(t&&t.blockXml&&e.builtinField&&2==e.builtinField.length){var a=e.builtinField[0],s=e.builtinField[1],l=new RegExp('<field name="'+a+'">(.*)</field>',"i");t.blockXml=t.blockXml.replace(l,function(){return'<field name="'+a+'">'+s+"</field>"})}return t?this.getBlockXml(t):void 0}if(e.blockXml)r=Blockly.Xml.textToDom(e.blockXml);else{var c=pxt.blocks.blockSymbol(e.attributes.blockId);if(c){if(!function(e){if(e.attributes.debug&&!pxt.options.debug)return!1;if(!n&&(e.attributes.deprecated||e.attributes.blockHidden))return!1;var t=(e.attributes.blockNamespace||e.namespace).split(".")[0];return o.shouldShowBlock(e.attributes.blockId,t)}(c))return;var u=pxt.blocks.compileInfo(c);if(r=pxt.blocks.createToolboxBlock(this.blockInfo,c,u),c.attributes.optionalVariableArgs&&c.attributes.toolboxVariableArgs){var d=u.handlerArgs;(p=c.attributes.toolboxVariableArgs.split(";").map(function(e){return parseInt(e)}).filter(function(e){return e<=d.length&&0<=e})).forEach(function(e){var t=document.createElement("mutation");t.setAttribute("numargs",e.toString());for(var n=0;n<e;n++)t.setAttribute("arg"+n,d[n].name);r.appendChild(t)})}else if(u.handlerArgs.length&&!c.attributes.optionalVariableArgs)u.handlerArgs.forEach(function(e){var t=Blockly.Xml.textToDom('\n    <value name="HANDLER_'+e.name+'">\n    <shadow type="variables_get_reporter">\n    <field name="VAR" variabletype="">'+e.name+"</field>\n    </shadow>\n    </value>");r.appendChild(t)});else{if(c.attributes.mutateDefaults){var p=c.attributes.mutateDefaults.split(";"),f=[];return p.forEach(function(e){var t=r.cloneNode(!0);pxt.blocks.mutateToolboxBlock(t,c.attributes.mutate,e),f.push(t)}),f}if(null!=c.attributes.blockSetVariable&&c.retType){var h=c.attributes.blockSetVariable,m=void 0;m=!h||pxt.blocks.isReservedWord(h)?b.htmlEscape(c.retType.toLowerCase()):b.htmlEscape(h);var g=Blockly.Xml.textToDom('\n<block type="variables_set" gap="'+b.htmlEscape((c.attributes.blockGap||8)+"")+'">\n<field name="VAR" variabletype="">'+m+"</field>\n</block>"),v=document.createElement("value");v.setAttribute("name","VALUE"),v.appendChild(r),v.appendChild(pxt.blocks.mkFieldBlock("math_number","NUM","0",!0)),g.appendChild(v),r=g}}}else pxt.log("Couldn't find block for: "+e.attributes.blockId),pxt.log(e)}return r&&pxt.Util.toArray(r.querySelectorAll("shadow")).filter(function(e){return!e.innerHTML}).forEach(function(e,t){var n=e.getAttribute("type"),r=y.allBuiltinBlocks()[n],o=i.getBlockXml(r||{name:n,attributes:{blockId:n}},!0);o&&0<o.length&&o[0]&&(e.innerHTML=o[0].innerHTML)}),[r]}pxt.log("ignoring built in block: "+e.attributes.blockId)},e.prototype.getButtonXml=function(t){return this.editor.registerButtonCallback(t.attributes.blockId,function(e){t.callback()}),[pxt.blocks.createFlyoutButton(t.attributes.blockId,t.attributes.label)]},e}(c.ToolboxEditor);n.Editor=f},{"./blocksSnippets":6,"./compiler":11,"./core":13,"./debugger":17,"./package":36,"./toolbox":49,"./toolboxeditor":50,react:157,"react-dom":145}],6:[function(e,t,n){"use strict";var r,o;function i(e){switch(e){case n.loops.nameid:return n.loops;case n.logic.nameid:return n.logic;case n.variables.nameid:return n.variables;case n.maths.nameid:return n.maths;case n.text.nameid:return n.text;case n.arrays.nameid:return n.arrays;case n.functions.nameid:return n.functions;case n.extensions.nameid:return n.extensions}}function a(e,t){var n=i(e);if(t&&n&&(0===Object.keys(t).length&&(n.removed=!0),t.name&&(n.name=t.name),t.icon&&(n.attributes.icon=t.icon),void 0!==t.weight&&(n.attributes.weight=t.weight),void 0!==t.advanced&&(n.attributes.advanced=t.advanced),null!=t.groups&&(n.groups=t.groups),t.blocks)){var o=100;n.blocks=t.blocks.map(function(e,t){return e.weight?o=e.weight:o--,r=o,{name:(n=e).name,snippet:n.snippet,snippetName:n.snippetName,snippetOnly:n.snippetOnly,attributes:{blockId:n.blockId,weight:r||n.weight,advanced:n.advanced,jsDoc:n.jsDoc,group:n.group},noNamespace:!0,retType:n.retType,blockXml:n.blockXml};var n,r})}}function s(e){return{name:e.name,icon:e.attributes.icon,color:e.attributes.color,weight:e.attributes.weight,advanced:e.attributes.advanced,blocks:e.blocks?e.blocks.map(function(e){return{name:(t=e).name,snippet:t.snippet,snippetName:t.snippetName,snippetOnly:t.snippetOnly,retType:t.retType,weight:t.attributes.weight,advanced:t.attributes.advanced,jsDoc:t.attributes.jsDoc,group:t.attributes.group,blockXml:t.blockXml,blockId:t.attributes.blockId};var t}):[]}}Object.defineProperty(n,"__esModule",{value:!0}),n.loops={name:lf("{id:category}Loops"),nameid:"loops",blocks:[{name:"controls_repeat_ext",attributes:{blockId:"controls_repeat_ext",weight:49},blockXml:'<block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_whole_number">\n                    <field name="NUM">4</field>\n                </shadow>\n            </value>\n        </block>'},{name:"device_while",attributes:{blockId:"device_while",weight:48},blockXml:'<block type="device_while">\n            <value name="COND">\n                <shadow type="logic_boolean"></shadow>\n            </value>\n        </block>'},{name:"pxt_controls_for",attributes:{blockId:"pxt_controls_for",weight:47},blockXml:'<block type="pxt_controls_for">\n            <value name="VAR">\n                <shadow type="variables_get_reporter">\n                    <field name="VAR">'+lf("{id:var}index")+'</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_whole_number">\n                    <field name="NUM">4</field>\n                </shadow>\n            </value>\n        </block>'},{name:"pxt_controls_for_of",attributes:{blockId:"pxt_controls_for_of",weight:46},blockXml:'<block type="pxt_controls_for_of">\n            <value name="VAR">\n                <shadow type="variables_get_reporter">\n                    <field name="VAR">'+lf("{id:var}value")+'</field>\n                </shadow>\n            </value>\n            <value name="LIST">\n                <shadow type="variables_get">\n                    <field name="VAR">list</field>\n                </shadow>\n            </value>\n        </block>'}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,icon:"loops",weight:50.09,paramDefl:{}}},n.logic={name:lf("{id:category}Logic"),nameid:"logic",groups:[lf("Conditionals"),lf("Comparison"),lf("Boolean"),"other"],blocks:[{name:"controls_if",attributes:{blockId:"controls_if",group:lf("Conditionals"),weight:49},blockXml:'<block type="controls_if" gap="8">\n            <value name="IF0">\n                <shadow type="logic_boolean">\n                    <field name="BOOL">TRUE</field>\n                </shadow>\n            </value>\n        </block>'},{name:"controls_if_else",attributes:{blockId:"controls_if",group:lf("Conditionals"),weight:48},blockXml:'<block type="controls_if" gap="8">\n            <mutation else="1"></mutation>\n            <value name="IF0">\n                <shadow type="logic_boolean">\n                    <field name="BOOL">TRUE</field>\n                </shadow>\n            </value>\n        </block>'},{name:"logic_compare_eq",attributes:{blockId:"logic_compare",group:lf("Comparison"),weight:47},blockXml:'<block type="logic_compare" gap="8">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>'},{name:"logic_compare_lt",attributes:{blockId:"logic_compare",group:lf("Comparison"),weight:46},blockXml:'<block type="logic_compare">\n            <field name="OP">LT</field>\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>'},{name:"logic_operation_and",attributes:{blockId:"logic_operation",group:lf("Boolean"),weight:45},blockXml:'<block type="logic_operation" gap="8">\n            <field name="OP">AND</field>\n        </block>'},{name:"logic_operation_or",attributes:{blockId:"logic_operation",group:lf("Boolean"),weight:44},blockXml:'<block type="logic_operation" gap="8">\n            <field name="OP">OR</field>\n        </block>'},{name:"logic_negate",attributes:{blockId:"logic_negate",group:lf("Boolean"),weight:43},blockXml:'<block type="logic_negate"></block>'},{name:"logic_boolean_true",attributes:{blockId:"logic_boolean",group:lf("Boolean"),weight:42},blockXml:'<block type="logic_boolean" gap="8">\n            <field name="BOOL">TRUE</field>\n        </block>'},{name:"logic_boolean_false",attributes:{blockId:"logic_boolean",group:lf("Boolean"),weight:41},blockXml:'<block type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </block>'}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,weight:50.08,icon:"logic",paramDefl:{}}},n.variables={name:lf("{id:category}Variables"),nameid:"variables",blocks:void 0,custom:!0,customClick:function(e){return e.showVariablesFlyout(),!1},attributes:{weight:50.07,icon:"variables",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.maths={name:lf("{id:category}Math"),nameid:"math",blocks:[{name:"math_arithmetic_ADD",attributes:{blockId:"math_arithmetic",weight:90},blockXml:'<block type="math_arithmetic" gap="8">\n                <value name="A">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="B">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <field name="OP">ADD</field>\n            </block>'},{name:"math_arithmetic_MINUS",attributes:{blockId:"math_arithmetic",weight:89},blockXml:'<block type="math_arithmetic" gap="8">\n                <value name="A">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="B">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <field name="OP">MINUS</field>\n            </block>'},{name:"math_arithmetic_TIMES",attributes:{blockId:"math_arithmetic",weight:88},blockXml:'<block type="math_arithmetic" gap="8">\n                <value name="A">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="B">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <field name="OP">MULTIPLY</field>\n            </block>'},{name:"math_arithmetic_DIVIDE",attributes:{blockId:"math_arithmetic",weight:87},blockXml:'<block type="math_arithmetic" gap="8">\n                <value name="A">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="B">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <field name="OP">DIVIDE</field>\n            </block>'},{name:"math_number",attributes:{blockId:"math_number",weight:86},blockXml:'<block type="math_number" gap="8">\n                <field name="NUM">0</field>\n            </block>'},{name:"math_modulo",attributes:{blockId:"math_modulo",weight:85},blockXml:'<block type="math_modulo">\n                <value name="DIVIDEND">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="DIVISOR">\n                    <shadow type="math_number">\n                        <field name="NUM">1</field>\n                    </shadow>\n                </value>\n            </block>'},{name:"math_op2_min",attributes:{blockId:"math_op2",weight:84},blockXml:'<block type="math_op2" gap="8">\n                <value name="x">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="y">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <field name="op">min</field>\n            </block>'},{name:"math_op2_max",attributes:{blockId:"math_op2",weight:83},blockXml:'<block type="math_op2" gap="8">\n                <value name="x">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="y">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <field name="op">max</field>\n            </block>'},{name:"math_op3",attributes:{blockId:"math_op3",weight:82},blockXml:'<block type="math_op3">\n                <value name="x">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n            </block>'},{name:"math_js_op",attributes:{blockId:"math_js_op",weight:81},blockXml:'<block type="math_js_op">\n                <field name="OP">sqrt</field>\n                <value name="ARG0">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n            </block>'}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,weight:50.06,icon:"math",paramDefl:{}}},n.functions={name:lf("{id:category}Functions"),nameid:"functions",blocks:[],custom:!0,customClick:function(e){return e.showFunctionsFlyout(),!1},attributes:{advanced:!0,weight:50.08,callingConvention:ts.pxtc.ir.CallingConvention.Plain,icon:"functions",paramDefl:{}}},n.arrays={name:lf("{id:category}Arrays"),nameid:"arrays",blocks:[{name:"lists_create_with",attributes:{blockId:"lists_create_with",weight:90},blockXml:'<block type="variables_set" gap="8">\n                <field name="VAR" variabletype="">'+lf("{id:var}list")+'</field>\n                <value name="VALUE">\n                    <block type="lists_create_with">\n                        <mutation items="2"></mutation>\n                        <value name="ADD0">\n                            <shadow type="math_number">\n                                <field name="NUM">1</field>\n                            </shadow>\n                        </value>\n                        <value name="ADD1">\n                            <shadow type="math_number">\n                                <field name="NUM">2</field>\n                            </shadow>\n                        </value>\n                    </block>\n                </value>\n            </block>'},{name:"lists_create_with",attributes:{blockId:"lists_create_with",weight:89},blockXml:'<block type="variables_set">\n                <field name="VAR" variabletype="">'+lf("{id:var}text list")+'</field>\n                <value name="VALUE">\n                    <block type="lists_create_with">\n                        <mutation items="3"></mutation>\n                        <value name="ADD0">\n                            <shadow type="text">\n                                <field name="TEXT">'+lf("a")+'</field>\n                            </shadow>\n                        </value>\n                        <value name="ADD1">\n                            <shadow type="text">\n                                <field name="TEXT">'+lf("b")+'</field>\n                            </shadow>\n                        </value>\n                        <value name="ADD2">\n                            <shadow type="text">\n                                <field name="TEXT">'+lf("c")+"</field>\n                            </shadow>\n                        </value>\n                    </block>\n                </value>\n            </block>"},{name:"lists_index_get",attributes:{blockId:"lists_index_get",weight:87},blockXml:'<block type="lists_index_get">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">'+lf("{id:var}list")+'</field>\n                    </block>\n                </value>\n                <value name="INDEX">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n            </block>'},{name:"lists_index_set",attributes:{blockId:"lists_index_set",weight:86},blockXml:'<block type="lists_index_set">\n                <value name="INDEX">\n                    <shadow type="math_number">\n                        <field name="NUM">0</field>\n                    </shadow>\n                </value>\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">'+lf("{id:var}list")+"</field>\n                    </block>\n                </value>\n            </block>"},{name:"lists_length",attributes:{blockId:"lists_length",weight:88},blockXml:'<block type="lists_length">\n                <value name="VALUE">\n                    <block type="variables_get">\n                        <field name="VAR">'+lf("{id:var}list")+"</field>\n                    </block>\n                </value>\n            </block>"}],attributes:{advanced:!0,weight:50.07,icon:"arrays",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.text={name:lf("{id:category}Text"),nameid:"text",blocks:[{name:"text",attributes:{blockId:"text",weight:90},blockXml:'<block type="text"></block>'},{name:"text_length",attributes:{blockId:"text_length",weight:89},blockXml:'<block type="text_length">\n                <value name="VALUE">\n                    <shadow type="text">\n                        <field name="TEXT">'+lf("Hello")+"</field>\n                    </shadow>\n                </value>\n            </block>"},{name:"text_join",attributes:{blockId:"text_join",weight:88},blockXml:'<block type="text_join">\n                <mutation items="2"></mutation>\n                <value name="ADD0">\n                    <shadow type="text">\n                        <field name="TEXT">'+lf("Hello")+'</field>\n                    </shadow>\n                </value>\n                <value name="ADD1">\n                    <shadow type="text">\n                        <field name="TEXT">'+lf("World")+"</field>\n                    </shadow>\n                </value>\n            </block>"}],attributes:{advanced:!0,weight:50.06,icon:"text",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.extensions={name:pxt.toolbox.addPackageTitle(),nameid:"addpackage",blocks:[],custom:!0,customClick:function(e){return e.closeFlyout(),e.showPackageDialog(),!0},attributes:{advanced:!0,weight:-1,icon:"addpackage",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.getPauseUntil=function(){if(r)return r;var e=pxt.appTarget.runtime&&pxt.appTarget.runtime.pauseUntilBlock;return e&&(r={name:pxtc.PAUSE_UNTIL_TYPE,attributes:{blockId:pxtc.PAUSE_UNTIL_TYPE,blockNamespace:e.category||"loops",weight:null==e.weight?0:e.weight},blockXml:Blockly.Xml.domToText(pxt.blocks.mkPredicateBlock(pxtc.PAUSE_UNTIL_TYPE)),noNamespace:!0}),r},n.getBuiltinCategory=i,n.isBuiltin=function(e){switch(e){case n.loops.nameid:case n.logic.nameid:case n.variables.nameid:case n.maths.nameid:case n.text.nameid:case n.arrays.nameid:case n.functions.nameid:case n.extensions.nameid:return!0}return!1},n.allBuiltinBlocks=function(){o||(o={},[n.loops,n.logic,n.maths,n.text,n.arrays].forEach(function(e){e.blocks.forEach(function(e){e.attributes.blockId&&!o[e.attributes.blockId]&&(o[e.attributes.blockId]=e)})})),o[ts.pxtc.ON_START_TYPE]={name:ts.pxtc.ON_START_TYPE,attributes:{blockId:ts.pxtc.ON_START_TYPE,weight:pxt.appTarget.runtime.onStartWeight||10},blockXml:'<block type="pxt-on-start"></block>',noNamespace:!0};var e=this.getPauseUntil();return e&&(o[pxtc.PAUSE_UNTIL_TYPE]=e),o},n.clearBuiltinBlockCache=function(){o=void 0},n.overrideCategory=a,n.overrideToolbox=function(e){a(n.loops.nameid,e.loops),a(n.logic.nameid,e.logic),a(n.variables.nameid,e.variables),a(n.maths.nameid,e.maths),a(n.text.nameid,e.text),a(n.arrays.nameid,e.arrays),a(n.functions.nameid,e.functions)},n.getToolboxDefinition=function(){return{loops:s(i(n.loops.nameid)),logic:s(i(n.logic.nameid)),variables:s(i(n.variables.nameid)),maths:s(i(n.maths.nameid)),text:s(i(n.text.nameid)),arrays:s(i(n.arrays.nameid)),functions:s(i(n.functions.nameid))}}},{}],7:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./sui"),s=e("./data"),l=function(n){function e(e){var t=n.call(this,e)||this;return t.arrows=[],t.isDragging=!1,t.definitelyDragging=!1,t.currentOffset=0,t.index=0,t.childrenElements=[],t.handleContainerRef=function(e){t.container=e},t.handleDragSurfaceRef=function(e){t.dragSurface=e},t.handleArrowRefs=function(e){t.arrows.push(e)},t.handleChildRefs=function(e){e&&t.childrenElements.push(e)},t.state={},t.childrenElements=[],t.arrows=[],t.onLeftArrowClick=t.onLeftArrowClick.bind(t),t.onRightArrowClick=t.onRightArrowClick.bind(t),t}return o(e,n),e.prototype.componentWillReceiveProps=function(e){null!=e.selectedIndex&&this.setIndex(e.selectedIndex)},e.prototype.renderCore=function(){var n=this,e=this.state,t=e.rightDisabled,r=e.leftDisabled;return i.createElement("div",{className:"ui carouselouter"},i.createElement("span",{role:"button",className:"carouselarrow left aligned"+(r?" arrowdisabled":""),tabIndex:r?-1:0,onClick:this.onLeftArrowClick,onKeyDown:a.fireClickOnEnter,ref:this.handleArrowRefs},i.createElement(a.Icon,{icon:"circle angle left"})),i.createElement("div",{className:"carouselcontainer",ref:this.handleContainerRef},i.createElement("div",{className:"carouselbody",ref:this.handleDragSurfaceRef},i.Children.map(this.props.children,function(e,t){return e?i.createElement("div",{className:"carouselitem "+(n.props.selectedIndex==t?"selected":""),ref:n.handleChildRefs},i.cloneElement(e,{tabIndex:n.isVisible(t)?0:-1})):void 0}))),i.createElement("span",{role:"button",className:"carouselarrow right aligned"+(t?" arrowdisabled":""),tabIndex:t?-1:0,onClick:this.onRightArrowClick,onKeyDown:a.fireClickOnEnter,ref:this.handleArrowRefs},i.createElement(a.Icon,{icon:"circle angle right"})))},e.prototype.onLeftArrowClick=function(){this.onArrowClick(!0)},e.prototype.onRightArrowClick=function(){this.onArrowClick(!1)},e.prototype.onArrowClick=function(e){var t=this.index;if(this.setIndex(e?this.index-this.actualPageLength:this.index+this.actualPageLength),e){var n=this.index+this.actualPageLength<t?this.index+this.actualPageLength:t-1;this.childrenElements[n]&&this.childrenElements[n].firstChild.focus()}else{var r=this.index>t+this.actualPageLength?this.index:t+this.actualPageLength;this.childrenElements[r]&&this.childrenElements[r].firstChild.focus()}},e.prototype.componentDidMount=function(){var t=this;this.initDragSurface(),this.updateDimensions(),window.addEventListener("resize",function(e){t.updateDimensions()})},e.prototype.componentDidUpdate=function(){this.updateDimensions()},e.prototype.updateDimensions=function(){if(this.container){var e=!1;if(this.containerWidth=this.container.getBoundingClientRect().width,this.getArrowWidth(),this.childrenElements.length){var t=this.childrenElements[0].getBoundingClientRect().width;t!==this.childWidth&&(this.childWidth=t,e=!0),this.actualPageLength=Math.floor(this.containerWidth/this.childWidth)}this.dragSurface.style.width=this.totalLength()+"px",this.updateArrows(),this.index>=this.maxIndex()&&(e=!0,this.index=this.maxIndex()),e&&this.setPosition(this.indexToOffset(this.index))}},e.prototype.initDragSurface=function(){var n=this,e=function(e){n.definitelyDragging=!1,n.dragStart(u(e))},t=function(e){n.isDragging&&(n.dragEnd(),n.definitelyDragging&&(e.preventDefault(),e.stopPropagation()))},r=function(e){n.isDragging&&n.dragEnd()},o=function(e){if(n.isDragging){var t=u(e);3<Math.abs(t-n.dragStartX)&&(n.definitelyDragging=!0),e.stopPropagation(),e.preventDefault(),window.requestAnimationFrame(function(){n.dragMove(t)})}};this.dragSurface.addEventListener("click",function(e){n.definitelyDragging&&(e.stopPropagation(),e.preventDefault())}),window.PointerEvent?(this.dragSurface.addEventListener("pointerdown",e),this.dragSurface.addEventListener("pointerup",t),this.dragSurface.addEventListener("pointerleave",r),this.dragSurface.addEventListener("pointermove",o)):(this.dragSurface.addEventListener("mousedown",e),this.dragSurface.addEventListener("mouseup",t),this.dragSurface.addEventListener("mouseleave",r),this.dragSurface.addEventListener("mousemove",o),pxt.BrowserUtils.isTouchEnabled()&&(this.dragSurface.addEventListener("touchstart",e),this.dragSurface.addEventListener("touchend",t),this.dragSurface.addEventListener("touchcancel",r),this.dragSurface.addEventListener("touchmove",o)))},e.prototype.dragStart=function(e){this.isDragging=!0,this.dragStartX=e,this.dragStartOffset=this.currentOffset,this.animationId&&(window.cancelAnimationFrame(this.animationId),this.animationId=0)},e.prototype.dragEnd=function(){this.isDragging=!1,this.calculateIndex()},e.prototype.dragMove=function(e){this.dragOffset=e-this.dragStartX;var t=this.dragStartOffset+this.dragOffset;this.setPosition(t)},e.prototype.setPosition=function(e){this.dragSurface&&(e=Math.max(Math.min(e,300),this.maxScrollOffset()),this.currentOffset=e,this.dragSurface.style.marginLeft=e+"px")},e.prototype.calculateIndex=function(){if(this.dragSurface){var e=Math.abs(Math.floor(this.currentOffset/this.childWidth)),t=void 0;t=this.currentOffset<this.dragStartOffset?e:e-1,this.setIndex(t,100)}},e.prototype.setIndex=function(e,t){var n=Math.max(Math.min(e,this.maxIndex()),0);t||(t=100*Math.abs(n-this.index)),this.index=n,this.updateArrows(),this.animation=new c(this.currentOffset,this.indexToOffset(this.index),t),this.animationId||(this.animationId=window.requestAnimationFrame(this.easeTowardsIndex.bind(this)))},e.prototype.isVisible=function(e){return e>=this.index&&e<this.index+(this.actualPageLength||4)},e.prototype.easeTowardsIndex=function(e){this.dragSurface&&(this.setPosition(this.animation.getPosition(e)),this.animation.isComplete?(this.animation=void 0,this.animationId=0):this.animationId=window.requestAnimationFrame(this.easeTowardsIndex.bind(this)))},e.prototype.indexToOffset=function(e){return e<=0?0:e===this.maxIndex()?-1*(this.totalLength()-this.containerWidth-300+2*this.arrowWidth):-1*(e*this.childWidth-this.childWidth*this.props.bleedPercent/100)},e.prototype.totalLength=function(){return i.Children.count(this.props.children)*this.childWidth+300},e.prototype.getArrowWidth=function(){var t=this;this.arrows.length&&(this.arrowWidth=0,this.arrows.forEach(function(e){e&&(t.arrowWidth=Math.max(e.getBoundingClientRect().width,t.arrowWidth))}))},e.prototype.maxScrollOffset=function(){return Math.min(-1*(this.totalLength()-this.actualPageLength*this.childWidth+300),0)},e.prototype.maxIndex=function(){return Math.max(this.childrenElements.length-this.actualPageLength,0)},e.prototype.updateArrows=function(){var e=this.state||{},t=e.rightDisabled,n=e.leftDisabled,r=this.index===this.maxIndex(),o=0===this.index;r===t&&o===n||this.setState({leftDisabled:o,rightDisabled:r})},e}(s.Component);n.Carousel=l;var c=function(){function e(e,t,n){this.start=e,this.end=t,this.millis=n,this.isComplete=!1,this.slope=(t-e)/n}return e.prototype.getPosition=function(e){if(this.isComplete)return this.end;if(void 0===this.startTime)return this.startTime=e,this.start;var t=e-this.startTime;return t>this.millis?(this.isComplete=!0,this.end):this.start+Math.floor(this.slope*t)},e}();function u(e){return"screenX"in e?e.screenX:e.changedTouches[0].screenX}},{"./data":15,"./sui":48,react:157}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./db"),f=e("./core"),o=e("./package"),i=e("./data"),a=e("./workspace"),h=new r.Table("header"),m=new r.Table("text"),g=pxt.Util,v=pxt.Cloud,y=g.lf,b=[];function _(t){return b.filter(function(e){return e.id==t})[0]}function s(t){return m.getAsync(t.id).then(function(e){return t.text||(t.text=a.fixupFileNames(e.files)),t.textRev=e._rev,t.text})}var w=new g.PromiseQueue;function l(e){var t=_(e);return t?t.text?Promise.resolve(t.text):w.enqueue(e,function(){return s(t)}):Promise.resolve(null)}function k(e){return e.textRev?Promise.resolve():s(e).then(function(){},function(e){})}function x(t,n){if(t.temporary)return Promise.resolve();var r=_(t.id);return g.assert(r.header===t),n&&(t.saveId=null,r.textNeedsSave=!0,r.text=n),w.enqueue(t.id,function(){return(n?k(r).then(function(){return r.textNeedsSave=!1,m.setAsync({id:r.id,files:r.text,_rev:r.textRev}).then(function(e){r.textRev=e})}):Promise.resolve()).then(function(){return h.setAsync(r.header)}).then(function(e){t._rev=e,i.invalidate("header:"+t.id),i.invalidate("header:*"),n&&(i.invalidate("text:"+t.id),t.saveId=null)})})}function E(e){return/prj$/.test(e.editor)}function C(r){var o={},i=_(r.id);return l(r.id).then(function(){var e="",t=i.text;e=E(r)?JSON.stringify(t):t[Object.keys(t)[0]]||"";var n={guid:r.id,name:r.name,scriptId:r.pubId,scriptVersion:{time:r.modificationTime,baseSnapshot:"*"},meta:JSON.stringify(r.meta),status:r.pubCurrent?"published":"unpublished",recentUse:r.recentUse,editor:r.editor,script:e,target:pxt.appTarget.id};return pxt.debug("sync up "+r.id+"; "+n.script.length+" chars"),r.saveId=o,v.privatePostAsync("me/installed",{bodies:[n]})}).then(function(e){var t=e.headers[0];return r.blobId=t.scriptVersion.baseSnapshot,r.saveId===o&&(r.blobCurrent=!0),x(r)})}n.provider={getHeaders:function(){return b.map(function(e){return e.header})},getHeader:function(e){var t=_(e);return t&&!t.header.isDeleted?t.header:null},getTextAsync:l,initAsync:function(e,t){return h.getAllAsync().then(function(e){b=e.filter(function(e){return e.target||(e.target="microbit"),e.target==pxt.appTarget.id}).map(function(e){return{id:e.id,header:e,text:null}})})},saveAsync:function(e,t){return x(e,t)},installAsync:function(e,t){var n=e;n.id=ts.pxtc.Util.guidGen(),n.recentUse=g.nowSeconds(),n.modificationTime=n.recentUse;var r={id:n.id,header:n,text:t};return b.push(r),x(n,t).then(function(){return n})},saveToCloudAsync:function(e){return v.isLoggedIn()?C(e):Promise.resolve()},syncAsync:function(){var n=0,a=0,s="",l={};if(!v.hasAccessToken())return Promise.resolve(void 0);function c(e){pxt.debug("uninstall local "+e.id);var t=_(e.id),n=b.indexOf(t);return g.assert(0<=n),b.splice(n,1),e.isDeleted=!0,w.enqueue(e.id,function(){return h.deleteAsync(e).then(function(){return k(t)}).then(function(){return m.deleteAsync({id:e.id,_rev:t.textRev})})})}function u(n,r){if("deleted"==r.status)return n?c(n):Promise.resolve();var o=n;o||(o={id:r.guid}),a++,g.assert(o.id==r.guid);var i=r.scriptVersion.baseSnapshot;return pxt.debug("sync down "+o.id+" - "+i),g.httpGetJsonAsync(s+i).catch(f.handleNetworkError).then(function(e){g.assert(e.guid==o.id),o.blobCurrent=!0,o.blobId=i,o.modificationTime=r.scriptVersion.time,o.editor=e.editor,o.name=e.name;var t={_default_:e.script};return E(o)&&(t=JSON.parse(e.script)),o.recentUse=r.recentUse,delete o.isDeleted,o.pubId=e.scriptId,o.pubCurrent="published"==e.status,o.saveId=null,o.target=e.target,n||b.push({header:o,text:null,id:o.id}),l[o.id]=1,x(o,t)}).then(function(){return d(--a)})}function r(e){f.infoNotification(e)}function d(e){var t="";0==a&&0==n?t=y("All synced"):(t=y("Syncing")+" (",a&&(t+=y("{0} down",a)),n&&(t+=(a?", ":"")+y("{0} up",n)),t+=")"),r(t)}function p(e){return n++,C(e).then(function(){return d(--n)})}return v.privateGetAsync("me/installed?format=short").then(function(e){s=e.blobcontainer;var i=g.toDictionary(e.headers,function(e){return e.guid}),t=g.toDictionary(b,function(e){return e.id}),n=b.map(function(e){var t,n,r=e.header;if(i.hasOwnProperty(r.id)){var o=i[r.id];return r.isDeleted?(n={guid:(t=r).id,status:"deleted",scriptVersion:{time:g.nowSeconds(),baseSnapshot:"*"}},v.privatePostAsync("me/installed",{bodies:[n]}).then(function(){return c(t)})):o.scriptVersion.baseSnapshot==r.blobId?r.blobCurrent?r.recentUse!=o.recentUse?(r.recentUse=o.recentUse,x(r)):Promise.resolve():p(r):r.blobCurrent?u(r,o):p(r)}return r.blobId?c(r):p(r)});return n=n.concat(e.headers.filter(function(e){return!t[e.guid]}).map(function(e){return u(null,e)})),d(),Promise.all(n)}).then(function(){return r(y("Syncing done"))}).then(function(){return o.notifySyncDone(l)}).then(function(){}).catch(f.handleNetworkError)},resetAsync:function(){return r.destroyAsync().then(function(){pxt.storage.clearLocal(),i.clearCache()})},loadedAsync:function(){return Promise.resolve()}}},{"./core":13,"./data":15,"./db":16,"./package":36,"./workspace":52}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./core"),s=e("./package"),r=e("./hidbridge"),o=pxt.Cloud;function i(e,t,n){return pxt.BrowserUtils.browserDownloadBinText(e,t,n,void 0,function(e){return a.errorNotification(lf("saving file failed..."))}),Promise.resolve()}function l(e){var t="",n=pxt.outputName().replace(/[^.]*/,""),r=e.outfiles[pxt.outputName()],o=s.genFileName(n),i=pxt.BrowserUtils.isBrowserDownloadWithinUserContext();return i?t=pxt.BrowserUtils.toDownloadDataUri(pxt.isOutputText()?ts.pxtc.encodeBase64(r):r,pxt.appTarget.compile.hexMimeType):pxt.isOutputText()?(pxt.debug("saving "+o),t=pxt.BrowserUtils.browserDownloadBinText(r,o,pxt.appTarget.compile.hexMimeType,e.userContextWindow,function(e){return a.errorNotification(lf("saving file failed..."))})):(pxt.debug("saving "+o),t=pxt.BrowserUtils.browserDownloadBase64(r,o,"application/x-uf2",e.userContextWindow,function(e){return a.errorNotification(lf("saving file failed..."))})),e.success?e.saveOnly&&i?pxt.commands.showUploadInstructionsAsync(o,t,a.confirmAsync):e.saveOnly||pxt.BrowserUtils.isBrowserDownloadInSameWindow()&&!i?Promise.resolve():pxt.commands.showUploadInstructionsAsync(o,t,a.confirmAsync):a.confirmAsync({header:lf("Compilation failed"),body:lf("Ooops, looks like there are errors in your program."),hideAgree:!0,disagreeLbl:lf("Close")}).then(function(){})}function c(e,t,n){var r=pxt.appTarget.appTheme.boardName||lf("device"),o=pxt.appTarget.appTheme.driveDisplayName||pxt.appTarget.compile.driveName||"???",i=pxt.BrowserUtils.isBrowserDownloadWithinUserContext(),a=!pxt.BrowserUtils.isIE()&&!pxt.BrowserUtils.isEdge(),s=pxt.appTarget.appTheme.usbDocs,l=pxt.BrowserUtils.hasSaveAs(),c=pxt.appTarget.compile.useUF2?".uf2":".hex",u=i?lf("Click 'Download' to open the {0} app.",pxt.appTarget.appTheme.boardName):l?lf("Click 'Save As' and save the {0} file to the {1} drive to transfer the code into your {2}.",c,o,r):lf("Move the {0} file to the {1} drive to transfer the code into your {2}.",c,o,r),d=pxt.BrowserUtils.isBrowserDownloadWithinUserContext()?0:1e4;return n({header:i?lf("Download ready..."):lf("Download completed..."),body:u,hasCloseIcon:!0,hideCancel:!0,hideAgree:!0,buttons:[a?{label:i?lf("Download"):e,icon:"download",class:i?"primary":"lightgrey",url:t,fileName:e}:void 0,s?{label:lf("Help"),icon:"help",class:"lightgrey",url:s}:void 0],timeout:d}).then(function(){})}function u(){var t=window.webkit;if(t&&t.messageHandlers&&t.messageHandlers.host&&t.messageHandlers.host.postMessage)return function(e){return t.messageHandlers.host.postMessage(e)};var n=window.android;return n&&n.postMessage?function(e){return n.postMessage(JSON.stringify(e))}:void 0}function d(){return!!u()}function p(e){pxt.debug("native deploy"),a.infoNotification(lf("Flashing device..."));var t=e.outfiles[pxt.outputName()];return u()({name:e.downloadFileBaseName,download:t}),Promise.resolve()}function f(e){pxt.debug("native save"),a.infoNotification(lf("Flashing device..."));var t=e.outfiles[pxt.outputName()];return u()({name:e.downloadFileBaseName,save:t}),Promise.resolve()}function h(e){if(pxt.tickEvent("hid.deploy"),!e.success)return l(e);a.infoNotification(lf("Downloading..."));var t=e.outfiles[pxtc.BINARY_UF2],n=pxtc.UF2.parseFile(pxt.Util.stringToUint8Array(atob(t)));return r.initAsync().then(function(e){return e.reflashAsync(n)})}n.browserDownloadDeployCoreAsync=l,n.nativeHostPostMessageFunction=u,n.isNativeHost=d;var m=0;function g(t){if(pxt.tickEvent("webusb.askpair"),3<++m)return pxt.tickEvent("webusb.askpaircancel"),l(t);var e=pxt.appTarget.appTheme.boardName||lf("device");return a.confirmAsync({header:lf("No device detected..."),htmlBody:"\n<p><strong>"+lf("Do you want to pair your {0} to the editor?",e)+"</strong>\n"+lf("You will get instant downloads and data logging.")+'</p>\n<p class="ui font small">The pairing experience is a one-time process.</p>\n        '}).then(function(e){return e?(i=t,pxt.targetConfigAsync().then(function(e){var t=(e.firmwareUrls||{})[pxt.appTarget.simulator.boardDefinition.id];if(!t)return v(i);pxt.tickEvent("webusb.upgradefirmware");var n=pxt.appTarget.appTheme.boardName||lf("device"),r=pxt.appTarget.appTheme.driveDisplayName||"DRIVE",o='\n    <div class="ui three column grid stackable">\n        <div class="column">\n            <div class="ui">\n                <div class="content">\n                    <div class="description">\n                        <span class="ui yellow circular label">1</span>\n                        <strong>'+lf("Connect {0} to computer with USB cable",n)+'</strong>\n                        <br/>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="column">\n            <div class="ui">\n                <div class="content">\n                    <div class="description">\n                        <span class="ui blue circular label">2</span>\n                        <strong>'+lf("Download the latest firmware")+'</strong>\n                        <br/>\n                        <a href="'+t+'" target="_blank">'+lf("Click here to update to latest firmware")+'</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="column">\n            <div class="ui">\n                <div class="content">\n                    <div class="description">\n                        <span class="ui blue circular label">3</span>\n                        '+lf("Move the .uf2 file to your board")+"\n                        <br/>\n                        "+lf("Locate the downloaded .uf2 file and drag it to the {0} drive",r)+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>";return a.confirmAsync({header:lf("Upgrade firmware"),htmlBody:o,agreeLbl:lf("Upgraded!")}).then(function(e){return e?v(i):l(i)})})):l(t);var i})}function v(t){pxt.tickEvent("webusb.pair");var e=pxt.appTarget.appTheme.boardName||lf("device"),n='\n    <div class="ui three column grid stackable">\n        <div class="column">\n            <div class="ui">\n                <div class="content">\n                    <div class="description">\n                        <span class="ui yellow circular label">1</span>\n                        <strong>'+lf("Connect {0} to computer with USB cable",e)+'</strong>\n                        <br/>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="column">\n            <div class="ui">\n                <div class="content">\n                    <div class="description">\n                        <span class="ui blue circular label">2</span>\n                        '+lf("Select the device in the pairing dialog")+'\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="column">\n            <div class="ui">\n                <div class="content">\n                    <div class="description">\n                        <span class="ui blue circular label">3</span>\n                        '+lf('Press "Connect"')+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>";return a.confirmAsync({header:lf("Pair your {0}",e),agreeLbl:lf("Let's pair it!"),htmlBody:n}).then(function(e){pxt.usb.pairAsync().then(function(){return pxt.tickEvent("webusb.pair.success"),h(t)}).catch(function(e){return l(t)})})}function y(t){return pxt.tickEvent("webusb.deploy"),h(t).catch(function(e){return g(t)})}function b(e){pxt.debug("local deployment..."),a.infoNotification(lf("Uploading .hex file..."));return pxt.Util.requestAsync({url:"/api/deploy",headers:{Authorization:o.localToken},method:"POST",data:e,allowHttpErrors:!0}).then(function(e){200!==e.statusCode?a.errorNotification(lf("There was a problem, please try again")):0===e.json.boardCount&&a.warningNotification(lf("Please connect your {0} to your computer and try again",pxt.appTarget.appTheme.boardName))})}n.initCommandsAsync=function(){pxt.commands.browserDownloadAsync=i,pxt.commands.saveOnlyAsync=l,pxt.commands.showUploadInstructionsAsync=c;var e=/forceHexDownload/i.test(window.location.href);return pxt.usb.isAvailable()&&(pxt.appTarget.compile.webUSB||/webusb=1/i.test(window.location.href))&&(pxt.log("enabled webusb"),pxt.usb.setEnabled(!0),pxt.HF2.mkPacketIOAsync=pxt.usb.mkPacketIOAsync),d()?(pxt.debug("deploy/save using webkit host"),pxt.commands.deployCoreAsync=p,pxt.commands.saveOnlyAsync=f):pxt.usb.isEnabled&&pxt.appTarget.compile.useUF2?pxt.commands.deployCoreAsync=y:pxt.winrt.isWinRT()?(pxt.appTarget.serial&&pxt.appTarget.serial.useHF2?(pxt.winrt.initWinrtHid(function(){return r.initAsync(!0).then(function(){})},function(){return r.disconnectWrapperAsync()}),pxt.HF2.mkPacketIOAsync=pxt.winrt.mkPacketIOAsync,pxt.commands.deployCoreAsync=h):(pxt.winrt.initWinrtHid(null,null),pxt.appTarget.serial&&pxt.appTarget.serial.rawHID&&(pxt.HF2.mkPacketIOAsync=pxt.winrt.mkPacketIOAsync),pxt.commands.deployCoreAsync=pxt.winrt.driveDeployCoreAsync),pxt.commands.browserDownloadAsync=pxt.winrt.browserDownloadAsync,pxt.commands.saveOnlyAsync=function(e){return pxt.winrt.saveOnlyAsync(e).then(function(e){e&&a.infoNotification(lf("file saved!"))}).catch(function(){return a.errorNotification(lf("saving file failed..."))})}):!r.shouldUse()||pxt.appTarget.serial.noDeploy||e?o.isLocalHost()&&o.localToken&&!e?pxt.commands.deployCoreAsync=b:pxt.commands.deployCoreAsync=l:pxt.commands.deployCoreAsync=h,Promise.resolve()}},{"./core":13,"./hidbridge":27,"./package":36}],10:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var c=e("react"),u=e("./sui"),i=e("./data"),d=pxt.Util.repeatMap,a=function(n){function r(e){var t=n.call(this,e)||this;return t.state={},t}return o(r,n),r.setupIntersectionObserver=function(){var r=this;if(!this.observer){this.observer=new IntersectionObserver(function(e){e.forEach(function(e){var t,n;0<e.intersectionRatio&&(r.observer.unobserve(e.target),t=e.target,n=t.getAttribute("data-src"),t.style.backgroundImage="url("+n+")")})},{rootMargin:"50px 0px",threshold:.01})}},r.prototype.componentDidMount=function(){var e=this.refs.lazyimage;if(e)if("IntersectionObserver"in window)r.setupIntersectionObserver(),r.observer.observe(e);else{var t=e.getAttribute("data-src");e.style.backgroundImage="url("+t+")"}},r.prototype.renderCore=function(){var t=this.props,e=t.color||"";e||(t.hardware&&!t.software?e="black":t.software&&!t.hardware&&(e="teal"));var n=t.url?/^[^:]+:\/\//.test(t.url)?t.url:"/"+t.url.replace(/^\.?\/?/,""):void 0,r=n&&/^\//.test(n)?"#doc:"+n:n,o=t.className,i=t.cardType,a=t.onClick?function(e){pxt.analytics.enableCookies(),t.onClick(e)}:void 0,s=t.imageUrl||(t.youTubeId?"https://img.youtube.com/vi/"+t.youTubeId+"/0.jpg":void 0),l=c.createElement("div",{className:"ui card "+e+" "+(t.onClick?"link":"")+" "+(o||""),role:t.role,"aria-selected":"option"===t.role?"true":void 0,"aria-label":t.ariaLabel||t.title,title:t.title,onClick:a,tabIndex:t.onClick?t.tabIndex||0:null,onKeyDown:t.onClick?u.fireClickOnEnter:null},t.header||t.blocks||t.javascript||t.hardware||t.software||t.any?c.createElement("div",{key:"header",className:"ui content "+(t.responsive?" tall desktop only":"")},c.createElement("div",{className:"right floated meta"},t.any?c.createElement(u.Icon,{key:"costany",icon:"ui grey circular label tiny"},0<t.any?t.any:null," "):null,d(t.blocks,function(e){return c.createElement(u.Icon,{key:"costblocks"+e,icon:"puzzle orange"})}),d(t.javascript,function(e){return c.createElement(u.Icon,{key:"costjs"+e,icon:"align left blue"})}),d(t.hardware,function(e){return c.createElement(u.Icon,{key:"costhardware"+e,icon:"certificate black"})}),d(t.software,function(e){return c.createElement(u.Icon,{key:"costsoftware"+e,icon:"square teal"})})),t.header):null,t.label||t.blocksXml||t.typeScript||s||"file"==i?c.createElement("div",{className:"ui image"},t.label?c.createElement("label",{className:"ui "+(t.labelClass?t.labelClass:"orange right ribbon")+" label"},t.label):void 0,t.typeScript?c.createElement("pre",{key:"promots"},t.typeScript):void 0,s?c.createElement("div",{className:"ui imagewrapper"},c.createElement("div",{className:"ui cardimage","data-src":s,ref:"lazyimage"})):void 0,"file"==t.cardType?c.createElement("div",{className:"ui fileimage"}):void 0):void 0,t.icon||t.iconContent?c.createElement("div",{className:"ui imagewrapper"},c.createElement("div",{className:"ui button massive fluid "+t.iconColor+" "+(t.iconContent?"iconcontent":"")},t.icon?c.createElement(u.Icon,{icon:"icon "+t.icon}):void 0,t.iconContent||void 0)):void 0,t.shortName||t.name||t.description?c.createElement("div",{className:"content"},t.shortName||t.name?c.createElement("div",{className:"header"},t.shortName||t.name):null,t.description?c.createElement("div",{className:"description tall"},t.description.replace(/`/g,"")):null):void 0,t.time?c.createElement("div",{className:"meta"},t.time?c.createElement("span",{key:"date",className:"date"},pxt.Util.timeSince(t.time)):null):void 0,t.extracontent?c.createElement("div",{className:"extra content"}," ",t.extracontent," "):void 0);return!t.onClick&&n?c.createElement("div",null,c.createElement("a",{href:n,target:"docs",className:"ui widedesktop hide"},l),c.createElement("a",{href:r,className:"ui widedesktop only"},l)):l},r}(i.Component);n.CodeCardView=a},{"./data":15,"./sui":48,react:157}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("./package"),r=e("./core"),s=pxt.Util;function i(e){var r=a.mainEditorPkg();r.forEachFile(function(e){return e.diagnostics=[]});for(var o="",t=function(t){if(t.fileName){o+=(t.category==ts.pxtc.DiagnosticCategory.Error?lf("error"):t.category==ts.pxtc.DiagnosticCategory.Warning?lf("warning"):lf("message"))+": "+t.fileName+"("+(t.line+1)+","+(t.column+1)+"): ";var e=r.filterFiles(function(e){return e.getTypeScriptName()==t.fileName})[0];e&&e.diagnostics.push(t)}var n=ts.pxtc.DiagnosticCategory[t.category].toLowerCase();o+=n+" TS"+t.code+": "+ts.pxtc.flattenDiagnosticMessageText(t.messageText,"\n")+"\n"},n=0,i=e;n<i.length;n++){t(i[n])}o||(o=s.lf("Everything seems fine!\n")),r.outputPkg.setFile("output.txt",o).numDiagnosticsOverride=e.filter(function(e){return e.category==ts.pxtc.DiagnosticCategory.Error}).length}var o,l,c,u=new Promise(function(){});function d(t){return function(e){return e.isUserError?(r.errorNotification(e.message),a.mainEditorPkg().outputPkg.setFile("output.txt",e.message).numDiagnosticsOverride=1,t):Promise.reject(e)}}function p(e){return m("assemble",{fileContent:e})}function f(e){return m("compile",{options:e})}function h(e,t){return m("decompile",{options:e,fileName:t})}function m(e,t){return pxt.worker.getWorker(pxt.webConfig.workerjs).opAsync(e,t)}n.compileAsync=function(t){void 0===t&&(t={});var e=a.mainPkg.getTargetOptions();return e.isNative=t.native,e.preferredEditor=t.preferredEditor,a.mainPkg.getCompileOptionsAsync(e).then(function(e){return t.debug&&(e.breakpoints=!0,e.justMyCode=!0),t.trace&&(e.breakpoints=!0,e.justMyCode=!0,e.trace=!0),e.computeUsedSymbols=!0,t.forceEmit&&(e.forceEmit=!0),/test=1/i.test(window.location.href)&&(e.testMode=!0),e}).then(f).then(function(r){var e=a.mainEditorPkg().outputPkg.files[pxtc.BINARY_ASM];return e&&!r.outfiles[pxtc.BINARY_ASM]&&(r.outfiles[pxtc.BINARY_ASM]=e.content),a.mainEditorPkg().outputPkg.setFiles(r.outfiles),i(r.diagnostics),v().then(function(){if(!r.usedSymbols||!l)return r;for(var e=0,t=Object.keys(r.usedSymbols);e<t.length;e++){var n=t[e];r.usedSymbols[n]=s.lookup(l.byQName,n)}return r})}).catch(d(u))},n.assembleAsync=function(e){var n=536887296;return p(".startaddr 536887040\n"+e).then(function(t){return p(".startaddr "+(n-4*(t.words.length+1))+"\n"+e).then(function(e){return s.assert(e.words.length==t.words.length),e})})},n.decompileAsync=function(t,n,r,o){var e=a.mainPkg.getTargetOptions();return a.mainPkg.getCompileOptionsAsync(e).then(function(e){return e.ast=!0,e.testMode=!0,e.alwaysDecompileOnStart=pxt.appTarget.runtime&&pxt.appTarget.runtime.onStartUnDeletable,h(e,t)}).then(function(e){if(e.success&&n&&r&&o){var t=pxt.blocks.layout.patchBlocksFromOldWorkspace(n,r,e.outfiles[o]);e.outfiles[o]=t}return a.mainEditorPkg().outputPkg.setFiles(e.outfiles),i(e.diagnostics),e})},n.decompileSnippetAsync=function(t,e){var n="___snippet.ts",r="___snippet.blocks",o=a.mainPkg.getTargetOptions();return a.mainPkg.getCompileOptionsAsync(o).then(function(e){return e.fileSystem[n]=t,e.fileSystem[r]="",e.sourceFiles.push(n),e.sourceFiles.push(r),e.ast=!0,h(e,n)}).then(function(e){return e.outfiles[r]})},n.workerOpAsync=m;var g=!1;function v(){return g||!l?m("apiInfo",{}).then(function(e){if(0!==Object.keys(e).length)return g=!1,ts.pxtc.localizeApisAsync(e,a.mainPkg)}).then(function(e){l=e}):Promise.resolve()}function y(){var e=a.mainPkg.getCompileOptionsAsync().then(function(e){return e.testMode=!0,m("setOptions",{options:e})}).then(function(){return m("allDiags",{})}).then(i).then(v).catch(d(null));return o||(o=e),e}function b(){return(o||y()).then(function(){return l})}n.apiSearchAsync=function(e){return v().then(function(){return e.localizedApis=l,e.localizedStrings=pxt.Util.getLocalizedStrings(),m("apiSearch",{search:e})})},n.formatAsync=function(e,t){return m("format",{format:{input:e,pos:t}})},n.typecheckAsync=y,n.getApisInfoAsync=b,n.getBlocksAsync=function(){return c?Promise.resolve(c):b().then(function(e){return c=pxtc.getBlocksInfo(e)})},n.newProject=function(){c=l=o=null,m("reset",{}).done()}},{"./core":13,"./package":36}],12:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var k=e("react"),s=e("./data"),x=e("./sui"),E=e("./tutorial"),C=e("./container"),l=e("./greenscreen");function c(e,t){pxt.tickEvent("docs",{path:t},{interactiveConsent:!0}),e.startTutorial(t)}function u(e,t){pxt.tickEvent("docs",{path:t},{interactiveConsent:!0}),e.setSideDoc(t)}function d(t,n){return pxt.appTarget.appTheme.docMenu.map(function(e){return e.tutorial?k.createElement(f,{key:"docsmenututorial"+e.path,role:"menuitem",ariaLabel:pxt.Util.rlf(e.name),text:pxt.Util.rlf(e.name),className:"ui "+n,parent:t,path:e.path,onItemClick:c}):/^\//.test(e.path)?k.createElement(f,{key:"docsmenu"+e.path,role:"menuitem",ariaLabel:pxt.Util.rlf(e.name),text:pxt.Util.rlf(e.name),className:"ui "+n,parent:t,path:e.path,onItemClick:u}):k.createElement("a",{key:"docsmenulink"+e.path,role:"menuitem","aria-label":e.name,title:e.name,className:"ui item link "+n,href:e.path,target:"docs"},pxt.Util.rlf(e.name))})}var p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.lookUpByPath=function(e){var t=this;this.docMenuCache||(this.docMenuCache={},pxt.appTarget.appTheme.docMenu.forEach(function(e){t.docMenuCache[e.path]=e}));return this.docMenuCache[e]},e.prototype.doDocEntryAction=function(e,t){return t.tutorial?function(){c(e,t.path)}:/^\//.test(t.path)?function(){u(e,t.path)}:function(){window.open(t.path,"docs")}},e.prototype.renderCore=function(){var t=this,n=this.props.parent;pxt.appTarget.appTheme.docMenu.map(function(e){return{key:"docsmenu"+e.path,content:pxt.Util.rlf(e.name),role:"menuitem","aria-label":pxt.Util.rlf(e.name),onClick:t.doDocEntryAction(n,e),value:e.path,onKeyDown:function(){console.log("Key DOWN")}}});return k.createElement(x.DropdownMenu,{role:"menuitem",icon:"help circle large",className:"item mobile hide help-dropdown-menuitem",textClass:"landscape only",title:lf("Help")},d(this.props.parent,""))},e}(s.PureComponent);n.DocsMenu=p;var f=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){var e=this.props;(0,e.onItemClick)(e.parent,e.path)},e.prototype.renderCore=function(){var e=this.props,t=(e.onClick,e.onItemClick,e.parent,e.path,a(e,["onClick","onItemClick","parent","path"]));return k.createElement(x.Item,i({},t,{onClick:this.handleClick}))},e}(x.StatelessUIElement),h=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.openSettings=t.openSettings.bind(t),t.showPackageDialog=t.showPackageDialog.bind(t),t.removeProject=t.removeProject.bind(t),t.showReportAbuse=t.showReportAbuse.bind(t),t.showLanguagePicker=t.showLanguagePicker.bind(t),t.toggleHighContrast=t.toggleHighContrast.bind(t),t.toggleGreenScreen=t.toggleGreenScreen.bind(t),t.showResetDialog=t.showResetDialog.bind(t),t.pair=t.pair.bind(t),t.showAboutDialog=t.showAboutDialog.bind(t),t.print=t.print.bind(t),t}return o(e,n),e.prototype.openSettings=function(){pxt.tickEvent("menu.settings",void 0,{interactiveConsent:!0}),this.props.parent.openSettings()},e.prototype.showPackageDialog=function(){pxt.tickEvent("menu.addpackage",void 0,{interactiveConsent:!0}),this.props.parent.showPackageDialog()},e.prototype.removeProject=function(){pxt.tickEvent("menu.removeproject",void 0,{interactiveConsent:!0}),this.props.parent.removeProject()},e.prototype.showReportAbuse=function(){pxt.tickEvent("menu.reportabuse",void 0,{interactiveConsent:!0}),this.props.parent.showReportAbuse()},e.prototype.showLanguagePicker=function(){pxt.tickEvent("menu.langpicker",void 0,{interactiveConsent:!0}),this.props.parent.showLanguagePicker()},e.prototype.toggleHighContrast=function(){pxt.tickEvent("menu.togglecontrast",void 0,{interactiveConsent:!0}),this.props.parent.toggleHighContrast()},e.prototype.toggleGreenScreen=function(){pxt.tickEvent("menu.togglegreenscreen",void 0,{interactiveConsent:!0}),this.props.parent.toggleGreenScreen()},e.prototype.showResetDialog=function(){pxt.tickEvent("menu.reset",void 0,{interactiveConsent:!0}),pxt.tickEvent("reset"),this.props.parent.showResetDialog()},e.prototype.pair=function(){pxt.tickEvent("menu.pair"),this.props.parent.pair()},e.prototype.showAboutDialog=function(){pxt.tickEvent("menu.about"),this.props.parent.showAboutDialog()},e.prototype.print=function(){this.props.parent.printCode()},e.prototype.componentWillReceiveProps=function(e){var t={};null!=e.highContrast&&(t.highContrast=e.highContrast),void 0!==e.greenScreen&&(t.greenScreen=e.greenScreen),0<Object.keys(t).length&&this.setState(t)},e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.highContrast!=t.highContrast||this.state.greenScreen!=t.greenScreen},e.prototype.renderCore=function(){var e=this.state,t=e.highContrast,n=e.greenScreen,r=pxt.appTarget.appTheme,o=pxt.appTarget.cloud&&pxt.appTarget.cloud.packages,i=pxt.appTarget.cloud&&pxt.appTarget.cloud.sharing&&pxt.appTarget.cloud.importing,a=pxt.shell.isControllerMode();return k.createElement(x.DropdownMenu,{role:"menuitem",icon:"setting large",title:lf("More..."),className:"item icon more-dropdown-menuitem"},k.createElement(x.Item,{role:"menuitem",icon:"options",text:lf("Project Settings"),onClick:this.openSettings,tabIndex:-1}),o?k.createElement(x.Item,{role:"menuitem",icon:"disk outline",text:lf("Extensions"),onClick:this.showPackageDialog,tabIndex:-1}):void 0,k.createElement(x.Item,{role:"menuitem",icon:"print",text:lf("Print..."),onClick:this.print,tabIndex:-1}),a?void 0:k.createElement(x.Item,{role:"menuitem",icon:"trash",text:lf("Delete Project"),onClick:this.removeProject,tabIndex:-1}),i?k.createElement(x.Item,{role:"menuitem",icon:"warning circle",text:lf("Report Abuse..."),onClick:this.showReportAbuse,tabIndex:-1}):void 0,k.createElement("div",{className:"ui divider"}),r.selectLanguage?k.createElement(x.Item,{icon:"xicon globe",role:"menuitem",text:lf("Language"),onClick:this.showLanguagePicker,tabIndex:-1}):void 0,r.highContrast?k.createElement(x.Item,{role:"menuitem",text:t?lf("High Contrast Off"):lf("High Contrast On"),onClick:this.toggleHighContrast,tabIndex:-1}):void 0,r.greenScreen&&l.isSupported()?k.createElement(x.Item,{role:"menuitem",text:n?lf("Green Screen Off"):lf("Green Screen On"),onClick:this.toggleGreenScreen,tabIndex:-1}):void 0,a?void 0:k.createElement(x.Item,{role:"menuitem",icon:"sign out",text:lf("Reset"),onClick:this.showResetDialog,tabIndex:-1}),pxt.usb.isEnabled?k.createElement(x.Item,{role:"menuitem",icon:"usb",text:lf("Pair device"),onClick:this.pair,tabIndex:-1}):void 0,k.createElement("div",{className:"ui mobile only divider"}),d(this.props.parent,"mobile only"),k.createElement("div",{className:"ui divider"}),k.createElement(x.Item,{role:"menuitem",text:lf("About..."),onClick:this.showAboutDialog,tabIndex:-1}),r.feedbackUrl?k.createElement("div",{className:"ui divider"}):void 0,r.feedbackUrl?k.createElement("a",{className:"ui item",href:r.feedbackUrl,role:"menuitem",title:lf("Give Feedback"),target:"_blank",rel:"noopener noreferrer",tabIndex:-1},lf("Give Feedback")):void 0)},e}(s.Component);n.SettingsMenu=h;var m=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.brandIconClick=t.brandIconClick.bind(t),t.orgIconClick=t.orgIconClick.bind(t),t.goHome=t.goHome.bind(t),t.showShareDialog=t.showShareDialog.bind(t),t.launchFullEditor=t.launchFullEditor.bind(t),t.openSimView=t.openSimView.bind(t),t.openBlocks=t.openBlocks.bind(t),t.openJavaScript=t.openJavaScript.bind(t),t.exitTutorial=t.exitTutorial.bind(t),t}return o(e,n),e.prototype.brandIconClick=function(){!pxt.shell.isControllerMode()&&(pxt.tickEvent("menu.brand",void 0,{interactiveConsent:!0}),this.props.parent.showExitAndSaveDialog())},e.prototype.orgIconClick=function(){pxt.tickEvent("menu.org",void 0,{interactiveConsent:!0})},e.prototype.goHome=function(){pxt.tickEvent("menu.home",void 0,{interactiveConsent:!0}),this.props.parent.showExitAndSaveDialog()},e.prototype.showShareDialog=function(){pxt.tickEvent("menu.share",void 0,{interactiveConsent:!0}),this.props.parent.showShareDialog()},e.prototype.launchFullEditor=function(){pxt.tickEvent("sandbox.openfulleditor",void 0,{interactiveConsent:!0}),this.props.parent.launchFullEditor()},e.prototype.openSimView=function(){pxt.tickEvent("menu.simView",void 0,{interactiveConsent:!0}),this.props.parent.openSimView()},e.prototype.openBlocks=function(){pxt.tickEvent("menu.blocks",void 0,{interactiveConsent:!0}),this.props.parent.openBlocks()},e.prototype.openJavaScript=function(){pxt.tickEvent("menu.javascript",void 0,{interactiveConsent:!0}),this.props.parent.openJavaScript()},e.prototype.exitTutorial=function(){pxt.tickEvent("menu.exitTutorial",void 0,{interactiveConsent:!0}),this.props.parent.exitTutorial()},e.prototype.renderCore=function(){var e=this.props.parent.state,t=e.home,n=e.header,r=e.highContrast,o=e.greenScreen;if(t)return k.createElement("div",null);var i=pxt.appTarget.appTheme,a=pxt.shell.isControllerMode(),s=!a,l=pxt.appTarget.cloud&&pxt.appTarget.cloud.sharing&&!a,c=pxt.shell.isSandboxMode(),u=this.props.parent.state.tutorialOptions,d=!!u&&!!u.tutorial,p=i.docMenu&&i.docMenu.length&&!c&&!d,f=this.props.parent.state.running,h=!!this.props.parent.state.highContrast,m=(h?i.highContrastLogo:void 0)||i.logo,g=(h?i.highContrastPortraitLogo:void 0)||i.portraitLogo,v=c?i.portraitLogo:i.rightLogo,y=this.props.parent.isEmbedSimActive(),b=this.props.parent.isBlocksActive(),_=this.props.parent.isJavaScriptActive(),w=f?lf("Stop the simulator"):lf("Start the simulator");return k.createElement("div",{id:"mainmenu",className:"ui borderless fixed "+(i.invertedMenu?"inverted":"")+" menu",role:"menubar","aria-label":lf("Main menu")},c?k.createElement("div",{className:"left menu"},k.createElement("span",{id:"logo",className:"ui item logo"},k.createElement("img",{className:"ui mini image",src:v,tabIndex:0,onClick:this.launchFullEditor,onKeyDown:x.fireClickOnEnter,alt:i.boardName+" Logo"}))):k.createElement("div",{className:"left menu"},k.createElement("a",{href:a?i.logoUrl:void 0,"aria-label":lf("{0} Logo",i.boardName),role:"menuitem",target:"blank",rel:"noopener",className:"ui item logo brand",tabIndex:0,onClick:this.brandIconClick,onKeyDown:x.fireClickOnEnter},m||g?k.createElement("img",{className:"ui logo "+(m?" portrait hide":""),src:m||g,alt:lf("{0} Logo",i.boardName)}):k.createElement("span",{className:"name"},i.boardName),g?k.createElement("img",{className:"ui mini image portrait only",src:g,alt:lf("{0} Logo",i.boardName)}):null),i.betaUrl?k.createElement("a",{href:""+i.betaUrl,className:"ui red mini corner top left attached label betalabel",role:"menuitem"},lf("Beta")):void 0,!d&&s?k.createElement(x.Item,{className:"icon openproject",role:"menuitem",textClass:"landscape only",icon:"home large",ariaLabel:lf("Home screen"),text:lf("Home"),onClick:this.goHome}):null,!d&&n&&l?k.createElement(x.Item,{className:"icon shareproject",role:"menuitem",textClass:"widedesktop only",ariaLabel:lf("Share Project"),text:lf("Share"),icon:"share alternate large",onClick:this.showShareDialog}):null,d?k.createElement(x.Item,{className:"tutorialname",tabIndex:-1,textClass:"landscape only",text:u.tutorialName}):null),d||i.blocksOnly?void 0:k.createElement("div",{className:"ui item link editor-menuitem"},k.createElement("div",{className:"ui grid padded"},c?k.createElement(x.Item,{className:"sim-menuitem thin portrait only",role:"menuitem",textClass:"landscape only",text:lf("Simulator"),icon:y&&f?"stop":"play",active:y,onClick:this.openSimView,title:y?w:lf("Show Simulator")}):void 0,k.createElement(x.Item,{className:"blocks-menuitem",role:"menuitem",textClass:"landscape only",text:lf("Blocks"),icon:"xicon blocks",active:b,onClick:this.openBlocks,title:lf("Convert code to Blocks")}),k.createElement(x.Item,{className:"javascript-menuitem",role:"menuitem",textClass:"landscape only",text:lf("JavaScript"),icon:"xicon js",active:_,onClick:this.openJavaScript,title:lf("Convert code to JavaScript")}),k.createElement("div",{className:"ui item toggle"}))),d?k.createElement(E.TutorialMenuItem,{parent:this.props.parent}):void 0,k.createElement("div",{className:"right menu"},p?k.createElement(C.DocsMenu,{parent:this.props.parent}):void 0,c||d?void 0:k.createElement(C.SettingsMenu,{parent:this.props.parent,highContrast:r,greenScreen:o}),c&&!i.hideEmbedEdit?k.createElement(x.Item,{role:"menuitem",icon:"external",textClass:"mobile hide",text:lf("Edit"),onClick:this.launchFullEditor}):void 0,d?k.createElement(x.ButtonMenuItem,{className:"exit-tutorial-btn",role:"menuitem",icon:"external",text:lf("Exit tutorial"),textClass:"landscape only",onClick:this.exitTutorial}):void 0,c?void 0:k.createElement("a",{href:i.organizationUrl,"aria-label":lf("{0} Logo",i.organization),role:"menuitem",target:"blank",rel:"noopener",className:"ui item logo organization",onClick:this.orgIconClick},i.organizationWideLogo||i.organizationLogo?k.createElement("img",{className:"ui logo "+(i.organizationWideLogo?" portrait hide":""),src:i.organizationWideLogo||i.organizationLogo,alt:lf("{0} Logo",i.organization)}):k.createElement("span",{className:"name"},i.organization),i.organizationLogo?k.createElement("img",{className:"ui mini image portrait only",src:i.organizationLogo,alt:lf("{0} Logo",i.organization)}):null)))},e}(s.Component);n.MainMenu=m;var g=function(n){function e(e){var t=n.call(this,e)||this;return t.openingSideDoc=!1,t.state={},t.toggleVisibility=t.toggleVisibility.bind(t),t.popOut=t.popOut.bind(t),t}return o(e,n),e.notify=function(e){var t=document.getElementById("sidedocsframe");t&&t.contentWindow&&t.contentWindow.postMessage(e,"*")},e.prototype.setPath=function(e,t){this.openingSideDoc=!0;var n=(pxt.webConfig.docsUrl||"/--docs")+"#doc:"+e+":"+(t?"blocks":"js")+":"+pxt.Util.localeInfo();this.setUrl(n)},e.prototype.setMarkdown=function(e){var t=pxt.webConfig.docsUrl||"/--docs",n=this.props.parent.isBlocksEditor()?"blocks":"js",r=t+"#md:"+encodeURIComponent(e)+":"+n+":"+pxt.Util.localeInfo();this.setUrl(r)},e.prototype.setUrl=function(e){var t=document.getElementById("sidedocsframe");t?t.src=e:this.props.parent.setState({sideDocsLoadUrl:e,sideDocsCollapsed:!1})},e.prototype.collapse=function(){this.props.parent.setState({sideDocsCollapsed:!0})},e.prototype.popOut=function(){e.notify({type:"popout"})},e.prototype.toggleVisibility=function(){var e=this.props.parent.state;this.props.parent.setState({sideDocsCollapsed:!e.sideDocsCollapsed}),document.getElementById("sidedocstoggle").focus()},e.prototype.componentDidUpdate=function(){this.props.parent.editor.resize();var e=document.getElementById("sidedocstoggle");this.openingSideDoc&&e&&(e.focus(),this.openingSideDoc=!1)},e.prototype.componentWillReceiveProps=function(e){var t={};null!=e.sideDocsCollapsed&&(t.sideDocsCollapsed=e.sideDocsCollapsed),null!=e.docsUrl&&(t.docsUrl=e.docsUrl),0<Object.keys(t).length&&this.setState(t)},e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.sideDocsCollapsed!=t.sideDocsCollapsed||this.state.docsUrl!=t.docsUrl},e.prototype.renderCore=function(){var e=this.state,t=e.sideDocsCollapsed,n=e.docsUrl;return n?k.createElement("div",null,k.createElement("button",{id:"sidedocstoggle",role:"button","aria-label":t?lf("Expand the side documentation"):lf("Collapse the side documentation"),className:"ui icon button",onClick:this.toggleVisibility},k.createElement(x.Icon,{icon:"icon large inverted "+(t?"book":"chevron right")}),t?k.createElement(x.Icon,{icon:"large inverted chevron left hover"}):void 0),k.createElement("div",{id:"sidedocs"},k.createElement("div",{id:"sidedocsframe-wrapper"},k.createElement("iframe",{id:"sidedocsframe",src:n,title:lf("Documentation"),"aria-atomic":"true","aria-live":"assertive",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})),k.createElement("div",{className:"ui app hide",id:"sidedocsbar"},k.createElement("a",{className:"ui icon link",role:"button",tabIndex:0,"data-content":lf("Open documentation in new tab"),"aria-label":lf("Open documentation in new tab"),onClick:this.popOut,onKeyDown:x.fireClickOnEnter},k.createElement(x.Icon,{icon:"external"}))))):null},e}(s.Component);n.SideDocs=g;var v=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.compile=t.compile.bind(t),t}return o(e,n),e.prototype.compile=function(){pxt.tickEvent("sandboxfooter.compile",void 0,{interactiveConsent:!0}),this.props.parent.compile()},e.prototype.renderCore=function(){var e=pxt.appTarget.appTheme,t=lf("Download your code to the {0}",e.boardName);return k.createElement("div",{className:"ui horizontal small divided link list sandboxfooter"},e.organizationUrl&&e.organization?k.createElement("a",{className:"item",target:"_blank",rel:"noopener noreferrer",href:e.organizationUrl},e.organization):void 0,k.createElement("a",{target:"_blank",className:"item",href:e.termsOfUseUrl,rel:"noopener noreferrer"},lf("Terms of Use")),k.createElement("a",{target:"_blank",className:"item",href:e.privacyUrl,rel:"noopener noreferrer"},lf("Privacy")),k.createElement("span",{className:"item"},k.createElement("a",{role:"button",className:"ui thin portrait only",title:t,onClick:this.compile},k.createElement(x.Icon,{icon:"icon "+(pxt.appTarget.appTheme.downloadIcon||"download")}),pxt.appTarget.appTheme.useUploadMessage?lf("Upload"):lf("Download"))))},e}(s.PureComponent);n.SandboxFooter=v},{"./container":12,"./data":15,"./greenscreen":26,"./sui":48,"./tutorial":51,react:157}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("react"),i=e("react-dom"),a=e("./coretsx"),s=pxt.Cloud,l=!1,c=[],u={};function d(e){if(pxt.debug("hideloading: "+e),null!=u[e]){var t=c.indexOf(e);-1<t&&c.splice(t,1),delete u[e]}else pxt.debug("Loading not in queue, disregard: "+e);0<c.length?f():l&&n&&n.hide()}function p(e,t){pxt.debug("showloading: "+e),u[e]||(!function(){if(l)return;var e=document.getElementById("content").appendChild(document.createElement("div"));n=i.render(o.createElement(a.LoadingDimmer,{}),e),l=!0}(),n.show(lf("Please wait")),c.push(e),u[e]=t,f())}function f(){if(c.length){var e=c[c.length-1],t=u[e];n.show(t)}}r.isLoading=function(){return n&&n.isVisible()},r.hideLoading=d,r.killLoadingQueue=function(){c=[],u={},l&&n&&n.hide()},r.showLoading=p;var h={};function m(e){clearTimeout(h[e]),d(e)}function g(e,t){a.pushNotificationMessage({kind:e,text:t,hc:r.highContrast})}function v(e){pxt.log("warning: "+e),g("warn",e)}function y(e){return e.type||(e.type="dialog"),e.hideCancel||(e.buttons||(e.buttons=[]),e.buttons.push({label:e.disagreeLbl||lf("Cancel"),className:e.disagreeClass||"cancel",icon:e.disagreeIcon||"cancel"})),a.renderConfirmDialogAsync(e)}function b(e){e.type="confirm",e.buttons||(e.buttons=[]);var t=0;return e.hideAgree||e.buttons.push({label:e.agreeLbl||lf("Go ahead!"),className:e.agreeClass,icon:e.agreeIcon||"checkmark",onclick:function(){t=1}}),e.deleteLbl&&e.buttons.push({label:e.deleteLbl,className:"delete red",icon:"trash",onclick:function(){t=2}}),y(e).then(function(){return t})}function _(e){return"number"==typeof e.which?e.which:e.keyCode}r.showLoadingAsync=function(e,t,n,r){return void 0===r&&(r=700),clearTimeout(h[e]),h[e]=setTimeout(function(){p(e,t)},r),n.finally(function(){m(e)})},r.cancelAsyncLoading=m,r.errorNotification=function(e){pxt.tickEvent("notification.error",{message:e}),g("err",e)},r.warningNotification=v,r.infoNotification=function(e){pxt.debug(e),g("info",e)},r.dialogAsync=y,r.hideDialog=function(){a.hideDialog()},r.confirmAsync=b,r.confirmDelete=function(e,t){b({header:lf("Would you like to delete '{0}'?",e),body:lf("It will be deleted for good. No undo."),agreeLbl:lf("Delete"),agreeClass:"red",agreeIcon:"trash"}).then(function(e){e&&t().done()}).done()},r.promptAsync=function(e){e.type="prompt",e.buttons||(e.buttons=[]);var t="";return e.hideAgree||e.buttons.push({label:e.agreeLbl||lf("Go ahead!"),className:e.agreeClass,icon:e.agreeIcon||"checkmark",onclick:function(){var e=document.getElementById("promptDialogInput");t=e.value}}),e.onLoaded=function(n){var e=document.getElementById("promptDialogInput");e&&(e.setSelectionRange(0,9999),e.onkeyup=function(e){if(_(e)===r.ENTER_KEY){e.preventDefault();var t=n.getElementsByClassName("approve positive").item(0);t&&t.click()}})},y(e).then(function(){return t})},r.TAB_KEY=9,r.ESC_KEY=27,r.ENTER_KEY=13,r.SPACE_KEY=32,r.setHighContrast=function(e){r.highContrast=e},r.resetFocus=function(){var e=document.getElementById("content");e.tabIndex=0,e.focus(),e.blur(),e.tabIndex=-1},r.keyCodeFromEvent=_,r.navigateInWindow=function(e){window.location.href=e},r.findChild=function(e,t){var n=i.findDOMNode(e);return t?pxt.Util.toArray(n.querySelectorAll(t)):[n]},r.parseQueryString=function(e){var r={};return e.replace(/\+/g," ").replace(/([^&=]+)=?([^&]*)/g,function(e,t,n){return r[decodeURIComponent(t)]=decodeURIComponent(n),""}),r},r.handleNetworkError=function(e,t){var n=parseInt(e.statusCode);if(e.isOffline||0===n)v(lf("Network request failed; you appear to be offline"));else if(!isNaN(n)&&200!==n){if(t&&-1!==t.indexOf(n))return e;v(lf("Network request failed"))}throw e},r.apiAsync=function(t,e){return(e?s.privatePostAsync(t,e):s.privateGetAsync(t)).then(function(e){return console.log("*"),console.log("*******",t,"---\x3e"),console.log("*"),console.log(e),console.log("*"),e},function(e){console.log(e.message)})}},{"./coretsx":14,react:157,"react-dom":145}],14:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("react"),s=e("react-dom"),l=e("./sui"),c=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.hide=t.hide.bind(t),t.modalDidOpen=t.modalDidOpen.bind(t),t}return o(e,n),e.prototype.hide=function(){this.close()},e.prototype.close=function(e){this.setState({visible:!1}),this.resolve(e)},e.prototype.componentDidMount=function(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t});var e=this.refs.copybtn;e&&s.findDOMNode(e).addEventListener("click",function(){try{var e=n.refs.linkinput;e.focus(),e.setSelectionRange(0,e.value.length),document.execCommand("copy")}catch(e){}})},e.prototype.modalDidOpen=function(e){var t=this.props;t.onLoaded&&t.onLoaded(e)},e.prototype.render=function(){var n=this,e=this.props,t=e.size||"small",r=e.buttons?e.buttons.filter(function(e){return!!e}):[];r.forEach(function(e){var t=e.onclick;e.onclick=function(){n.close(t?t():0)},e.className||(e.className="approve positive")});var o=l.cx(["coredialog",e.className]);return a.createElement(l.Modal,{isOpen:!0,ref:"modal",className:o,onClose:this.hide,size:t,defaultOpen:!0,buttons:r,dimmer:!0,closeIcon:e.hasCloseIcon,header:e.header,closeOnDimmerClick:!e.hideCancel,closeOnDocumentClick:!e.hideCancel,closeOnEscape:!e.hideCancel,modalDidOpen:this.modalDidOpen},"prompt"==e.type?a.createElement("div",{className:"ui fluid icon input"},a.createElement("input",{autoFocus:!0,type:"text",id:"promptDialogInput",placeholder:e.defaultValue})):void 0,e.jsx,e.body?a.createElement("p",null,e.body):void 0,e.htmlBody?a.createElement("div",{dangerouslySetInnerHTML:{__html:e.htmlBody}}):void 0,e.input?a.createElement("div",{className:"ui fluid action input"},a.createElement("input",{className:"userinput",spellCheck:!1,placeholder:""+e.input,type:"text"})):void 0,e.copyable?a.createElement("div",{className:"ui fluid action input"},a.createElement("input",{ref:"linkinput",className:"linkinput",readOnly:!0,spellCheck:!1,type:"text",value:""+e.copyable}),a.createElement(l.Button,{ref:"copybtn",labelPosition:"right",color:"teal",className:"copybtn","data-content":lf("Copied!")})):void 0)},e}(a.Component);n.CoreDialog=c,n.renderConfirmDialogAsync=function(t){return Promise.resolve().delay(10).then(function(){var e=document.body.appendChild(document.createElement("div"));return(i=s.render(a.createElement(c,t),e)).promise.finally(function(){return s.unmountComponentAtNode(e),void setTimeout(function(){e.parentElement.removeChild(e)})})})},n.hideDialog=function(){i&&i.hide()};var u=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!0},t}return o(e,n),e.prototype.hide=function(){this.setState({visible:!1,content:void 0})},e.prototype.show=function(e){this.setState({visible:!0,content:e})},e.prototype.isVisible=function(){return this.state.visible},e.prototype.render=function(){var e=this.state,t=e.visible,n=e.content;return t?a.createElement(l.Dimmer,{isOpen:!0,active:t,closable:!1},a.createElement(l.Loader,{className:"large main msg no-select","aria-live":"assertive"},n)):a.createElement("div",null)},e}(a.Component);n.LoadingDimmer=u;var d=function(n){function e(e){var t=n.call(this,e)||this;return t.state={notifications:{}},t}return o(e,n),e.prototype.push=function(t){var n=this,r=this.state.notifications,e=ts.pxtc.Util.guidGen();Object.keys(r).filter(function(e){return r[e].kind==t.kind}).forEach(function(e){return n.remove(e)}),r[e]=t;var o=this;setTimeout(function(){o.remove(e)},3e3),this.setState({notifications:r})},e.prototype.remove=function(e){var t=this.state.notifications;t[e]&&(delete t[e],this.setState({notifications:t}))},e.prototype.render=function(){var t=this.state.notifications;return a.createElement("div",{id:"msg","aria-live":"polite"},Object.keys(t).map(function(e){return function(e,t){var n=t.kind,r=t.text,o=t.hc,i="ignored info message";switch(n){case"err":i="red inverted segment";break;case"warn":i="orange inverted segment";break;case"info":i="teal inverted segment";break;case"compile":i="ignored info message"}return a.createElement("div",{key:""+e,id:n+"msg",className:"ui "+o+" "+i},r)}(e,t[e])}))},e}(a.Component);n.NotificationMessages=d;var p,f=!1;n.pushNotificationMessage=function(e){if(f)p&&p.push(e);else{f=!0;var t=document.body.appendChild(document.createElement("div"));(p=s.render(a.createElement(d,e),t)).push(e)}}},{"./sui":48,react:157,"react-dom":145}],15:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./core"),s=pxt.Cloud,l=pxt.Util,c={};_("cloud",{getAsync:function(e){return s.privateGetAsync(w(e)).catch(a.handleNetworkError)},expirationTime:function(e){return 6e4},isOffline:function(){return!s.isOnline()}}),_("cloud-search",{getAsync:function(e){return s.privateGetAsync(w(e)).catch(function(e){return a.handleNetworkError(e,[404]),{statusCode:404,headers:{},json:{}}})},expirationTime:function(e){return 6e4},isOffline:function(){return!s.isOnline()}}),_("gallery",{getAsync:function(e){return pxt.gallery.loadGalleryAsync(w(decodeURIComponent(e))).catch(function(e){return Promise.resolve(e)})},expirationTime:function(e){return 36e5}}),_("td-cloud",{getAsync:function(e){return l.httpGetJsonAsync("https://www.touchdevelop.com/api/"+w(e)).catch(a.handleNetworkError)},expirationTime:function(e){return 6e4}}),_("gh-search",{getAsync:function(t){return pxt.targetConfigAsync().then(function(e){return pxt.github.searchAsync(w(t),e?e.packages:void 0)}).catch(a.handleNetworkError)},expirationTime:function(e){return 6e4},isOffline:function(){return!s.isOnline()}}),_("gh-pkgcfg",{getAsync:function(e){return pxt.github.pkgConfigAsync(w(e)).catch(a.handleNetworkError)},expirationTime:function(e){return 6e4},isOffline:function(){return!s.isOnline()}});var u=void 0;_("target-config",{getAsync:function(e){u||(u=pxt.targetConfigAsync().then(function(e){return e&&(pxt.storage.setLocal("targetconfig",JSON.stringify(e)),k("target-config"),k("gh-search"),k("gh-pkgcfg")),e}).catch(a.handleNetworkError));var t=JSON.parse(pxt.storage.getLocal("targetconfig")||"null");return t?Promise.resolve(t):u},expirationTime:function(e){return 864e5},isOffline:function(){return!s.isOnline()}});var d={};function p(n){var e=n.subscriptions;0!=e.length&&(n.subscriptions=[],e.forEach(function(e){var t=e.components.indexOf(n);0<=t&&e.components.splice(t,1)}))}function f(e){return e.api.expirationTime?null==e.data||Date.now()-e.lastRefresh>e.api.expirationTime(e.path):null!=e.data}function h(e){return!(!e.data||e.data instanceof Error)&&/^cloud:(me\/settings|ptr-pkg-)/.test(e.path)}function m(){d={},g()}function g(){var e=l.values(d).filter(function(e){return h(e)}).map(function(e){return{path:e.path,data:e.data}});pxt.storage.setLocal("apiCache2",JSON.stringify(e))}function v(t){if(!(t.queued||t.api.isOffline&&t.api.isOffline())){t.queued=!0;var e=function(e){t.data=e,t.lastRefresh=Date.now(),t.queued=!1,function(e){h(e)&&g();var t=e.callbackOnce;0<t.length&&(e.callbackOnce=[],l.nextTick(function(){return t.forEach(function(e){return e()})})),0<e.components.length&&e.components.forEach(function(e){return l.nextTick(function(){return e.forceUpdate()})})}(t)};t.api.isSync?e(t.api.getSync(t.path)):t.api.getAsync(t.path).done(e)}}function y(e){var t,n;return d.hasOwnProperty(e)||(d[e]={path:e,data:null,lastRefresh:0,queued:!1,callbackOnce:[],components:[],api:(t=e,n=/^([\w\-]+):/.exec(t),n&&c[n[1]]||l.oops("bad data protocol: "+t),c[n[1]])}),d[e]}function b(e,t){var n,r,o;n=e,r=y(t),(o=r.components).indexOf(n)<0&&(o.push(n),n.subscriptions.push(r));var i=y(t);return i.api.isSync?i.api.getSync(i.path):((f(i)||i.data instanceof Error)&&v(i),i.data)}function _(e,t){l.assert(!c[e]),l.assert(!!t.getSync||!!t.getAsync),l.assert(!!t.getSync!=!!t.getAsync),t.isSync=!!t.getSync,c[e]=t}function w(e){var t=/^([\w\-]+):(.*)/.exec(e);return t?t[2]:(l.oops("protocol missing in: "+e),e)}function k(n){l.values(d).forEach(function(e){var t;t=n,e.path.slice(0,t.length)==t&&(e.lastRefresh=0)<e.components.length&&v(y(e.path))})}n.clearCache=m,n.mountVirtualApi=_,n.stripProtocol=w,n.invalidate=k,n.getAsync=function(e){var n=y(e);return n.api.isSync?Promise.resolve(n.api.getSync(n.path)):s.isOnline()&&f(n)?new Promise(function(e,t){n.callbackOnce.push(function(){e(n.data)}),v(n)}):Promise.resolve(n.data)};var x=function(n){function e(e){var t=n.call(this,e)||this;return t.subscriptions=[],t.renderCoreOk=!1,t.state={},t}return o(e,n),e.prototype.getData=function(e){return this.renderCoreOk||l.oops("Override renderCore() not render()"),b(this,e)},e.prototype.componentWillUnmount=function(){p(this)},e.prototype.child=function(e){return a.findChild(this,e)},e.prototype.renderCore=function(){return null},e.prototype.render=function(){return p(this),this.renderCoreOk=!0,this.renderCore()},e}(i.Component);n.Component=x;var E=function(n){function e(e){var t=n.call(this,e)||this;return t.renderCoreOk=!1,t.state={},t}return o(e,n),e.prototype.child=function(e){return a.findChild(this,e)},e.prototype.renderCore=function(){return null},e.prototype.render=function(){return this.renderCoreOk=!0,this.renderCore()},e}(i.PureComponent);n.PureComponent=E,n.wrapWorkspace=function(n){return{initAsync:n.initAsync,resetAsync:function(){return n.resetAsync().then(function(){m()})},getHeaders:n.getHeaders,getHeader:n.getHeader,syncAsync:function(){return n.syncAsync().then(function(e){return k("header:*"),k("text:*"),e})},getTextAsync:n.getTextAsync,saveAsync:function(e,t){return n.saveAsync(e,t).then(function(){k("header:"+e.id),k("text:"+e.id)})},saveToCloudAsync:n.saveToCloudAsync,saveScreenshotAsync:n.saveScreenshotAsync,installAsync:n.installAsync,loadedAsync:n.loadedAsync}},JSON.parse(pxt.storage.getLocal("apiCache2")||"[]").forEach(function(e){y(e.path).data=e.data})},{"./core":13,react:157}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("bluebird");window.Promise=i;var r=e("pouchdb");e("pouchdb/extras/memory"),i.config({warnings:{wForgottenReturn:!1}});var o=void 0;function a(){return pxt.debug("db: in memory..."),!0,o=new r("pxt-"+pxt.storage.storageId(),{adapter:"memory"}),i.resolve(o)}function s(){if(o)return i.resolve(o);if(pxt.shell.isSandboxMode()||pxt.shell.isReadOnly())return a();var t=new r("pxt-"+pxt.storage.storageId(),{revs_limit:2});return t.get("pouchdbsupportabletest").catch(function(e){return e&&e.error&&"indexed_db_went_bad"==e.name?a():(o=t,i.resolve(o))})}n.getDbAsync=s,n.destroyAsync=function(){return o?o.destroy():i.resolve()};var l=function(){function e(e){this.name=e}return e.prototype.getAsync=function(t){var n=this;return s().then(function(e){return e.get(n.name+"--"+t)}).then(function(e){return e.id=t,e})},e.prototype.getAllAsync=function(){var t=this;return s().then(function(e){return e.allDocs({include_docs:!0,startkey:t.name+"--",endkey:t.name+"--￿"})}).then(function(e){return e.rows.map(function(e){return e.doc})})},e.prototype.deleteAsync=function(t){return s().then(function(e){return e.remove(t)})},e.prototype.forceSetAsync=function(t){var n=this;return this.getAsync(t.id).then(function(e){return t._rev=e._rev,n.setAsync(t)},function(e){return n.setAsync(t)})},e.prototype.setAsync=function(t){return t.id&&!t._id&&(t._id=this.name+"--"+t.id),s().then(function(e){return e.put(t)}).then(function(e){return e.rev})},e}();n.Table=l;var c=function(){function e(){this.memCache={},this.table=new l("translations")}return e.prototype.key=function(e,t,n){return e+"-"+t+"-"+(n||"")},e.prototype.getAsync=function(e,t,n){var r=this.key(e,t,n),o=this.memCache[r];return o?(pxt.debug("translation cache live hit "+r),i.resolve(o)):(pxt.debug("translation cache: load "+r),this.table.getAsync(r).then(function(e){return pxt.debug("translation cache hit "+r),e},function(e){pxt.debug("translation cache miss "+r)}))},e.prototype.setAsync=function(e,t,n,r,o){var i=this.key(e,t,n),a={id:i,etag:r,strings:o};pxt.debug("translation cache: save "+i+"-"+r);var s=pxt.Util.clone(a);return s.cached=!0,delete s._rev,this.memCache[i]=s,this.table.forceSetAsync(a).then(function(){},function(e){pxt.log("translate cache: conflict for "+i)})},e}();ts.pxtc.Util.translationDb=new c;var u=function(){function e(){this.mem=new pxt.github.MemoryGithubDb,this.table=new l("github")}return e.prototype.loadConfigAsync=function(t,n){var r=this;if("master"==n)return this.mem.loadConfigAsync(t,n);var o="config-"+t+"-"+n;return this.table.getAsync(o).then(function(e){return pxt.debug("github offline cache hit "+o),e.config},function(e){return pxt.debug("github offline cache miss "+o),r.mem.loadConfigAsync(t,n).then(function(t){return r.table.forceSetAsync({id:o,config:t}).then(function(){return t},function(e){return t})})})},e.prototype.loadPackageAsync=function(t,n){var r=this;if("master"==n)return this.mem.loadPackageAsync(t,n);var o="pkg-"+t+"-"+n;return this.table.getAsync(o).then(function(e){return pxt.debug("github offline cache hit "+o),e.package},function(e){return pxt.debug("github offline cache miss "+o),r.mem.loadPackageAsync(t,n).then(function(t){return r.table.forceSetAsync({id:o,package:t}).then(function(){return t},function(e){return t})})})},e}();pxt.github.db=new u},{bluebird:55,pouchdb:123,"pouchdb/extras/memory":121}],17:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var d=e("react"),i=e("react-dom"),p=e("./sui"),a=e("./data"),f=e("./simulator"),s=function(n){function l(e){var t=n.call(this,e)||this;return t.nextVariables={},t.state={variables:{}},t}return o(l,n),l.prototype.clear=function(){this.nextVariables={},this.setState({variables:{}})},l.prototype.set=function(e,t){this.nextVariables[e]=t},l.renderValue=function(e){var t="";switch(typeof e){case"undefined":t="undefined";break;case"number":case"boolean":t=e+"";break;case"string":t=JSON.stringify(e);break;case"object":if(null==e)t="null";else if(e.text)t=e.text;else{if(e.id&&e.preview)return e.preview;t=void 0!==e.id?"(object)":"(unknown)"}}return l.capLength(t)},l.capLength=function(e){var t=l.MAX_VARIABLE_CHARS-3,n=!1;return 0==e.indexOf('"')&&(t-=2,n=!0,e=e.substring(1,e.length-1)),e.length>t&&(e=e.substring(0,t)+"..."),n&&(e='"'+e+'"'),e},l.prototype.update=function(e){var n=this;void 0===e&&(e=!1);var r=this.state.variables;Object.keys(this.nextVariables).forEach(function(e){var t=n.nextVariables[e];r[e]={value:t,prevValue:t&&!t.id&&r[e]&&t!==r[e].value?r[e].value:void 0}}),this.setState({variables:r,frozen:e}),this.nextVariables={}},l.prototype.toggle=function(e){var t=this;if(e.children)delete e.children,this.setState({variables:this.state.variables});else{if(!e.value.id)return;f.driver.variablesAsync(e.value.id).then(function(n){n&&(e.children=pxt.Util.mapMap(n.variables||{},function(e,t){return{value:n.variables[e]}}),t.setState({variables:t.state.variables}))})}},l.prototype.renderVariables=function(r,o){var i=this,a=pxt.toolbox.getNamespaceColor("variables"),s=[];return Object.keys(r).forEach(function(e){var t=r[e],n=t.value&&t.value.id?function(){return i.toggle(t)}:void 0;s.push(d.createElement("div",{key:(o||"")+e,className:"item"},d.createElement("div",{role:"listitem",className:"ui label image variable "+(void 0!==t.prevValue?"changed":""),style:{backgroundColor:a},onClick:n},d.createElement("span",{className:"varname"},e),d.createElement("div",{className:"detail"},d.createElement("span",{className:"varval"},l.renderValue(t.value)),d.createElement("span",{className:"previousval"},void 0!==t.prevValue?""+l.renderValue(t.prevValue):""))))),t.children&&(s=s.concat(i.renderVariables(t.children,e)))}),s},l.prototype.renderCore=function(){var e=this.state,t=e.variables,n=e.frozen;return 0==Object.keys(t).length?d.createElement("div",null):d.createElement("div",{className:"ui segment debugvariables "+(n?"frozen":"")},d.createElement("div",{className:"ui middle aligned list"},this.renderVariables(t)))},l.MAX_VARIABLE_CHARS=20,l}(a.Component);n.DebuggerVariables=s;var l=function(n){function e(e){var t=n.call(this,e)||this;return t.cachedMaxWidth=0,t.state={},t.toolbarHandleDown=t.toolbarHandleDown.bind(t),t.restartSimulator=t.restartSimulator.bind(t),t.dbgPauseResume=t.dbgPauseResume.bind(t),t.dbgInsertBreakpoint=t.dbgInsertBreakpoint.bind(t),t.dbgStepOver=t.dbgStepOver.bind(t),t.dbgStepInto=t.dbgStepInto.bind(t),t.dbgStepOut=t.dbgStepOut.bind(t),t}return o(e,n),e.prototype.restartSimulator=function(){pxt.tickEvent("debugger.restart",void 0,{interactiveConsent:!0}),this.props.parent.restartSimulator(!0)},e.prototype.exitDebugging=function(){pxt.tickEvent("debugger.exit",void 0,{interactiveConsent:!0}),this.props.parent.toggleDebugging()},e.prototype.dbgPauseResume=function(){pxt.tickEvent("debugger.pauseresume",void 0,{interactiveConsent:!0}),this.props.parent.dbgPauseResume()},e.prototype.dbgInsertBreakpoint=function(){pxt.tickEvent("debugger.breakpoint",void 0,{interactiveConsent:!0}),this.props.parent.dbgInsertBreakpoint()},e.prototype.dbgStepOver=function(){pxt.tickEvent("debugger.stepover",void 0,{interactiveConsent:!0}),this.props.parent.dbgStepOver()},e.prototype.dbgStepInto=function(){pxt.tickEvent("debugger.stepinto",void 0,{interactiveConsent:!0}),this.props.parent.dbgStepInto()},e.prototype.dbgStepOut=function(){pxt.tickEvent("debugger.stepout",void 0,{interactiveConsent:!0}),f.dbgStepOut()},e.prototype.componentDidUpdate=function(e,t){this.state.isDragging&&!t.isDragging?(document.addEventListener("mousemove",this.toolbarHandleMove.bind(this)),document.addEventListener("mouseup",this.toolbarHandleUp.bind(this))):!this.state.isDragging&&t.isDragging&&(document.removeEventListener("mousemove",this.toolbarHandleMove.bind(this)),document.removeEventListener("mouseup",this.toolbarHandleUp.bind(this))),null==t.xPos&&e.parent.state.debugging&&(this.centerToolbar(),window.addEventListener("resize",this.centerToolbar.bind(this)))},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.toolbarHandleMove.bind(this)),document.removeEventListener("mouseup",this.toolbarHandleUp.bind(this)),window.removeEventListener("resize",this.centerToolbar.bind(this))},e.prototype.toolbarHandleDown=function(e){if(0===e.button){var t=this.getMenuDom(),n=t&&t.clientWidth||0;this.cachedMaxWidth=window.innerWidth-n,this.setState({isDragging:!0,xPos:Math.min(e.pageX,this.cachedMaxWidth)}),e.stopPropagation(),e.preventDefault()}},e.prototype.toolbarHandleMove=function(e){this.state.isDragging&&(this.setState({isDragging:!0,xPos:Math.min(e.pageX,this.cachedMaxWidth)}),e.stopPropagation(),e.preventDefault())},e.prototype.toolbarHandleUp=function(e){this.setState({isDragging:!1}),e.stopPropagation(),e.preventDefault()},e.prototype.getMenuDom=function(){var e=i.findDOMNode(this);return e&&e.firstElementChild},e.prototype.centerToolbar=function(){var e=this.getMenuDom(),t=e&&e.clientWidth,n=document.getElementById("maineditor"),r=window.innerWidth-n.clientWidth;this.setState({xPos:r+(n.clientWidth-t)/2})},e.prototype.renderCore=function(){var e=this.state.xPos,t=this.props.parent.state,n=(pxt.appTarget.simulator,t.running),r=t.debugging;if(!r)return d.createElement("div",null);var o=f.driver&&f.driver.state==pxsim.SimulatorState.Running,i=this.props.parent.isJavaScriptActive();if(!(i||this.props.parent.isBlocksActive()))return d.createElement("div",null);var a=lf("Restart debugging"),s=(t.debugging?lf("Stop"):lf("Start Debugging"),n?lf("Pause execution"):lf("Continue execution")),l=lf("Step into"),c=lf("Step over"),u=lf("Step out");return d.createElement("aside",{className:"debugtoolbar",style:{left:e},role:"complementary","aria-label":lf("Debugger toolbar")},r?d.createElement("div",{className:"ui compact borderless menu icon"},d.createElement("div",{role:"button",className:"ui item link dbg-btn dbg-handle",key:"toolbarhandle",title:lf("Debugger buttons"),onMouseDown:this.toolbarHandleDown},d.createElement(p.Icon,{key:"iconkey",icon:"icon ellipsis vertical"}),d.createElement(p.Icon,{key:"iconkey2",icon:"xicon bug"})),d.createElement(p.Item,{key:"dbgpauseresume",className:"dbg-btn dbg-pause-resume "+(o?"pause":"play"),icon:o?"pause blue":"step forward green",title:s,onClick:this.dbgPauseResume}),d.createElement(p.Item,{key:"dbgbreakpoint",className:"dbg-btn dbg-breakpoint",icon:"circle red",title:lf("Insert debugger breakpoint"),onClick:this.dbgInsertBreakpoint}),i?void 0:d.createElement(p.Item,{key:"dbgstep",className:"dbg-btn dbg-step",icon:"arrow right "+(o?"disabled":"blue"),title:l,onClick:this.dbgStepInto}),i?d.createElement(p.Item,{key:"dbgstepover",className:"dbg-btn dbg-step-over",icon:"xicon stepover "+(o?"disabled":"blue"),title:c,onClick:this.dbgStepOver}):void 0,i?d.createElement(p.Item,{key:"dbgstepinto",className:"dbg-btn dbg-step-into",icon:"xicon stepinto "+(o?"disabled":""),title:l,onClick:this.dbgStepInto}):void 0,i?d.createElement(p.Item,{key:"dbgstepout",className:"dbg-btn dbg-step-out",icon:"xicon stepout "+(o?"disabled":""),title:u,onClick:this.dbgStepOut}):void 0,d.createElement(p.Item,{key:"dbgrestart",className:"dbg-btn dbg-restart right",icon:"refresh green",title:a,onClick:this.restartSimulator})):void 0)},e}(a.Component);n.DebuggerToolbar=l},{"./data":15,"./simulator":45,"./sui":48,react:157,"react-dom":145}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./core"),s=pxt.Cloud;n.showAboutDialogAsync=function(){var e=pxt.appTarget.compileService,t=(pxt.appTarget.description||pxt.appTarget.title,pxt.appTarget.appTheme.githubUrl),n=pxt.appTarget.appTheme,r=pxt.appTarget.versions;a.confirmAsync({header:lf("About"),hideCancel:!0,agreeLbl:lf("Ok"),agreeClass:"positive",jsx:i.createElement("div",null,t&&r?i.createElement("p",null,lf("{0} version:",pxt.Util.htmlEscape(pxt.appTarget.name)),"  ",i.createElement("a",{href:pxt.Util.htmlEscape(t)+"/releases/tag/v"+pxt.Util.htmlEscape(r.target),title:""+lf("{0} version : {1}",pxt.Util.htmlEscape(pxt.appTarget.name),pxt.Util.htmlEscape(r.target)),target:"_blank",rel:"noopener noreferrer"},pxt.Util.htmlEscape(pxt.appTarget.versions.target))):void 0,r?i.createElement("p",null,lf("{0} version:","Microsoft MakeCode"),"  ",i.createElement("a",{href:"https://github.com/Microsoft/pxt/releases/tag/v"+pxt.Util.htmlEscape(r.pxt),title:""+lf("{0} version: {1}","Microsoft MakeCode",pxt.Util.htmlEscape(r.pxt)),target:"_blank",rel:"noopener noreferrer"},pxt.Util.htmlEscape(r.pxt))):void 0,e&&e.githubCorePackage&&e.gittag?i.createElement("p",null,lf("{0} version:","C++ runtime"),"  ",i.createElement("a",{href:""+pxt.Util.htmlEscape("https://github.com/"+e.githubCorePackage+"/releases/tag/"+e.gittag),title:""+lf("{0} version: {1}","C++ runtime",pxt.Util.htmlEscape(e.gittag)),target:"_blank",rel:"noopener noreferrer"},pxt.Util.htmlEscape(e.gittag))):void 0,i.createElement("p",null,i.createElement("br",null)),i.createElement("p",null,n.termsOfUseUrl?i.createElement("a",{target:"_blank",className:"item",href:n.termsOfUseUrl,rel:"noopener noreferrer"},lf("Terms of Use")):void 0,"    ",n.privacyUrl?i.createElement("a",{target:"_blank",className:"item",href:n.privacyUrl,rel:"noopener noreferrer"},lf("Privacy")):void 0),n.copyrightText?i.createElement("p",null," ",n.copyrightText," "):void 0)}).done()},n.showImportUrlDialogAsync=function(){var t,e=pxt.appTarget.appTheme.shareUrl||"https://makecode.com/";return a.confirmAsync({header:lf("Open project URL"),onLoaded:function(e){t=e.querySelectorAll("input")[0]},jsx:i.createElement("div",{className:"ui form"},i.createElement("div",{className:"ui icon violet message"},i.createElement("i",{className:"user icon"}),i.createElement("div",{className:"content"},i.createElement("h3",{className:"header"},lf("User-provided content")),i.createElement("p",null,lf("The content below is provided by a user, and is not endorsed by Microsoft."),lf("If you think it's not appropriate, please report abuse through Settings -> Report Abuse.")))),i.createElement("div",{className:"ui field"},i.createElement("label",{id:"selectUrlToOpenLabel"},lf("Copy the URL of the project.")),i.createElement("input",{type:"url",tabIndex:0,autoFocus:!0,"aria-describedby":"selectUrlToOpenLabel",placeholder:e+"...",className:"ui blue fluid"})))}).then(function(e){if(e)return pxt.tickEvent("app.open.url"),pxt.Cloud.parseScriptId(t.value)})},n.showImportFileDialogAsync=function(){var t,e=".mkcd";return pxt.appTarget.compile.hasHex&&(e=".hex"),pxt.appTarget.compile.useUF2&&(e=".uf2"),pxt.appTarget.compile.saveAsPNG&&(e=".png"),a.confirmAsync({header:lf("Open {0} file",e),onLoaded:function(e){t=e.querySelectorAll("input")[0]},jsx:i.createElement("div",{className:"ui form"},i.createElement("div",{className:"ui field"},i.createElement("label",{id:"selectFileToOpenLabel"},lf("Select a {0} file to open.",e)),i.createElement("input",{type:"file",tabIndex:0,autoFocus:!0,"aria-describedby":"selectFileToOpenLabel",className:"ui blue fluid"})))}).then(function(e){if(e)return t.files[0]})},n.showReportAbuseAsync=function(t){var n,r,o=pxt.appTarget.appTheme.shareUrl||"https://makecode.com/";a.confirmAsync({header:lf("Report Abuse"),onLoaded:function(e){n=e.querySelectorAll("input")[0],r=e.querySelectorAll("textarea")[0],t&&(n.value=o+t)},agreeLbl:lf("Submit"),jsx:i.createElement("div",{className:"ui form"},i.createElement("div",{className:"ui field"},i.createElement("label",null,lf("What is the URL of the offensive project?")),i.createElement("input",{type:"url",tabIndex:0,autoFocus:!0,placeholder:"Enter project URL here..."})),i.createElement("div",{className:"ui field"},i.createElement("label",null,lf("Why do you find it offensive?")),i.createElement("textarea",null)))}).done(function(e){if(e){pxt.tickEvent("app.reportabuse.send");var t=pxt.Cloud.parseScriptId(n.value);t?(a.infoNotification(lf("Sending abuse report...")),s.privatePostAsync(t+"/abusereports",{text:r.value}).then(function(e){a.infoNotification(lf("Report sent. Thank you!"))}).catch(function(e){404==e.statusCode?a.warningNotification(lf("Oops, we could not find this script.")):a.handleNetworkError(e)})):a.errorNotification(lf("Sorry, the project url looks invalid."))}})},n.showResetDialogAsync=function(){return a.confirmAsync({header:lf("Reset"),body:lf("You are about to clear all projects. Are you sure? This operation cannot be undone."),agreeLbl:lf("Reset"),agreeClass:"red",agreeIcon:"sign out",disagreeLbl:lf("Cancel")})}},{"./core":13,react:157}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setupDragAndDrop=function(e,r,o){document&&document.createElement&&document.createElement("span"),e.addEventListener("paste",function(e){if(e.clipboardData){var t=pxt.Util.toArray(e.clipboardData.files).filter(r);if(0<t.length)e.stopPropagation(),e.preventDefault(),o(t);else if(e.clipboardData.items&&0<e.clipboardData.items.length){var n=e.clipboardData.items[0].getAsFile();n&&(e.stopPropagation(),e.preventDefault(),o([n]))}}}),e.addEventListener("dragover",function(e){for(var t=e.dataTransfer.types,n=!1,r=0;r<t.length;++r)"Files"==t[r]&&(n=!0);return!(n&&(e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="copy"))},!1),e.addEventListener("drop",function(e){var t=pxt.Util.toArray(e.dataTransfer.files);return 0<t.length&&(e.stopPropagation(),e.preventDefault(),o(t)),!1},!1),e.addEventListener("dragend",function(e){return!1},!1)}},{}],20:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var q=e("react"),s=e("./data"),l=e("./sui"),c=function(n){function e(e){var t=n.call(this,e)||this;return t.saveProjectName=t.saveProjectName.bind(t),t.compile=t.compile.bind(t),t.saveFile=t.saveFile.bind(t),t.undo=t.undo.bind(t),t.redo=t.redo.bind(t),t.zoomIn=t.zoomIn.bind(t),t.zoomOut=t.zoomOut.bind(t),t.startStopSimulator=t.startStopSimulator.bind(t),t.restartSimulator=t.restartSimulator.bind(t),t.toggleTrace=t.toggleTrace.bind(t),t.toggleDebugging=t.toggleDebugging.bind(t),t.toggleCollapse=t.toggleCollapse.bind(t),t}return o(e,n),e.prototype.saveProjectName=function(e,t){pxt.tickEvent("editortools.projectrename",{view:t},{interactiveConsent:!0}),this.props.parent.updateHeaderName(e)},e.prototype.compile=function(e){pxt.tickEvent("editortools.download",{view:e,collapsed:this.getCollapsedState()},{interactiveConsent:!0}),this.props.parent.compile()},e.prototype.saveFile=function(e){pxt.tickEvent("editortools.save",{view:e,collapsed:this.getCollapsedState()},{interactiveConsent:!0}),this.props.parent.saveAndCompile()},e.prototype.undo=function(e){pxt.tickEvent("editortools.undo",{view:e,collapsed:this.getCollapsedState()},{interactiveConsent:!0}),this.props.parent.editor.undo()},e.prototype.redo=function(e){pxt.tickEvent("editortools.redo",{view:e,collapsed:this.getCollapsedState()},{interactiveConsent:!0}),this.props.parent.editor.redo()},e.prototype.zoomIn=function(e){pxt.tickEvent("editortools.zoomIn",{view:e,collapsed:this.getCollapsedState()},{interactiveConsent:!0}),this.props.parent.editor.zoomIn()},e.prototype.zoomOut=function(e){pxt.tickEvent("editortools.zoomOut",{view:e,collapsed:this.getCollapsedState()},{interactiveConsent:!0}),this.props.parent.editor.zoomOut()},e.prototype.startStopSimulator=function(e){pxt.tickEvent("editortools.startStopSimulator",{view:e,collapsed:this.getCollapsedState(),headless:this.getHeadlessState()},{interactiveConsent:!0}),this.props.parent.startStopSimulator()},e.prototype.restartSimulator=function(e){pxt.tickEvent("editortools.restart",{view:e,collapsed:this.getCollapsedState(),headless:this.getHeadlessState()},{interactiveConsent:!0}),this.props.parent.restartSimulator()},e.prototype.toggleTrace=function(e){pxt.tickEvent("editortools.trace",{view:e,collapsed:this.getCollapsedState(),headless:this.getHeadlessState()},{interactiveConsent:!0}),this.props.parent.toggleTrace()},e.prototype.toggleDebugging=function(e){pxt.tickEvent("editortools.debug",{view:e,collapsed:this.getCollapsedState(),headless:this.getHeadlessState()},{interactiveConsent:!0}),this.props.parent.toggleDebugging()},e.prototype.toggleCollapse=function(e){pxt.tickEvent("editortools.toggleCollapse",{view:e,collapsedTo:""+!this.props.parent.state.collapseEditorTools},{interactiveConsent:!0}),this.props.parent.toggleSimulatorCollapse()},e.prototype.getCollapsedState=function(){return""+this.props.parent.state.collapseEditorTools},e.prototype.getHeadlessState=function(){return pxt.appTarget.simulator.headless?"true":"false"},e.prototype.renderCore=function(){var e=this.props.parent.state,t=e.home,n=e.tutorialOptions,r=e.hideEditorFloats,o=e.collapseEditorTools,i=e.projectName,a=e.compiling,s=e.isSaving,l=e.running;if(t)return q.createElement("div",null);var c=pxt.shell.isSandboxMode(),u=pxt.shell.isControllerMode(),d=pxt.shell.isReadOnly(),p=!!n&&n.tutorial,f=(r||o)&&!p;if(!(this.props.parent.isBlocksEditor()||this.props.parent.isTextEditor()))return q.createElement("div",null);var h=pxt.appTarget.appTheme,m=pxt.appTarget.compile,g=m.hasHex||m.saveAsPNG,v=pxt.appTarget.simulator,y=lf("Download your code to the {0}",h.boardName),b=!!a,_=l?lf("Stop the simulator"):lf("Start the simulator"),w=lf("Restart the simulator"),k=f?lf("Show the simulator"):lf("Hide the simulator"),x=v.headless,E=this.props.parent.editor.hasUndo(),C=this.props.parent.editor.hasRedo(),S=!p&&!c,T=!p&&!d&&!u,N=!p&&!d,A=!p,P=!v.hideRestart,O=!!v.enableTrace,I=this.props.parent.state.tracing,R=I?lf("Disable Slow-Mo"):lf("Slow-Mo"),D=!O&&!!v.debugger,j=this.props.parent.state.debugging,F=j?lf("Disable Debugging"):lf("Debugging"),M=pxt.appTarget.appTheme.downloadIcon||"download",L=pxt.appTarget.appTheme.useUploadMessage?lf("Upload"):lf("Download"),U="",B="";s?(U="disabled",B="loading disabled"):b&&(U="loading disabled",B="disabled");var H=pxt.Util.isUserLanguageRtl();return q.createElement("div",{className:"ui equal width grid right aligned padded"},q.createElement("div",{className:"column mobile only"},f?q.createElement("div",{className:"ui equal width grid"},q.createElement("div",{className:"left aligned column"},q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:f?"toggle up":"toggle down",className:"collapse-button "+(f?"collapsed":"")+" "+(r?"disabled":""),ariaLabel:lf("{0}, {1}",k,r?lf("Disabled"):""),title:k,onButtonClick:this.toggleCollapse,view:"mobile"}),x?q.createElement(z,{className:"play-button "+(l?"stop":"play"),key:"runmenubtn",icon:l?"stop":"play",title:_,onButtonClick:this.startStopSimulator,view:"mobile"}):void 0,x&&P?q.createElement(z,{key:"restartbtn",className:"restart-button",icon:"refresh",title:w,onButtonClick:this.restartSimulator,view:"mobile"}):void 0,x&&O?q.createElement(z,{key:"tracebtn",className:"trace-button "+(I?"orange":""),icon:"xicon turtle",title:R,onButtonClick:this.toggleTrace,view:"mobile"}):void 0,x&&D?q.createElement(z,{key:"debugbtn",className:"debug-button "+(j?"orange":""),icon:"xicon bug",title:F,onButtonClick:this.toggleDebugging,view:"mobile"}):void 0,g?q.createElement(z,{className:"primary download-button download-button-full "+U,icon:M,title:y,ariaLabel:lf("Download your code"),onButtonClick:this.compile,view:"mobile"}):void 0)),q.createElement("div",{className:"right aligned column"},d?void 0:q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:"save",className:"editortools-btn save-editortools-btn "+B,title:lf("Save"),ariaLabel:lf("Save the project"),onButtonClick:this.saveFile,view:"mobile"}),N?q.createElement(z,{icon:"xicon undo",className:"editortools-btn undo-editortools-btn} "+(E?"":"disabled"),ariaLabel:lf("{0}, {1}",lf("Undo"),E?"":lf("Disabled")),title:lf("Undo"),onButtonClick:this.undo,view:"mobile"}):void 0)),q.createElement("div",{className:"right aligned column"},A?q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:"plus circle",className:"editortools-btn zoomin-editortools-btn",title:lf("Zoom In"),onButtonClick:this.zoomIn,view:"mobile"}),q.createElement(z,{icon:"minus circle",className:"editortools-btn zoomout-editortools-btn",title:lf("Zoom Out"),onButtonClick:this.zoomOut,view:"mobile"})):void 0)):q.createElement("div",{className:"ui equal width grid"},q.createElement("div",{className:"left aligned two wide column"},q.createElement("div",{className:"ui vertical icon small buttons"},q.createElement(z,{className:"play-button "+(l?"stop":"play"),key:"runmenubtn",icon:l?"stop":"play",title:_,onButtonClick:this.startStopSimulator,view:"mobile"}),P?q.createElement(z,{key:"restartbtn",className:"restart-button",icon:"refresh",title:w,onButtonClick:this.restartSimulator,view:"mobile"}):void 0),S?q.createElement("div",{className:"row",style:{paddingTop:"1rem"}},q.createElement("div",{className:"ui vertical icon small buttons"},q.createElement(z,{icon:f?"toggle up":"toggle down",className:"collapse-button "+(f?"collapsed":""),title:k,ariaLabel:lf("{0}, {1}",k,f?lf("Collapsed"):"Expanded"),onButtonClick:this.toggleCollapse,view:"mobile"}))):void 0),q.createElement("div",{className:"three wide column"}),q.createElement("div",{className:"column"},q.createElement("div",{className:"ui grid"},d||!N?void 0:q.createElement("div",{className:"row"},q.createElement("div",{className:"column"},q.createElement("div",{className:"ui icon large buttons"},q.createElement(z,{icon:"xicon undo",className:"editortools-btn undo-editortools-btn "+(E?"":"disabled"),ariaLabel:lf("{0}, {1}",lf("Undo"),E?"":lf("Disabled")),title:lf("Undo"),onButtonClick:this.undo,view:"mobile"})))),q.createElement("div",{className:"row",style:d||!N?void 0:{paddingTop:0}},q.createElement("div",{className:"column"},q.createElement("div",{className:"ui icon large buttons"},O?q.createElement(z,{key:"tracebtn",className:"trace-button "+(I?"orange":""),icon:"xicon turtle",title:R,onButtonClick:this.toggleTrace,view:"mobile"}):void 0,D?q.createElement(z,{key:"debugbtn",className:"debug-button "+(j?"orange":""),icon:"xicon bug",title:F,onButtonClick:this.toggleDebugging,view:"mobile"}):void 0,g?q.createElement(z,{className:"primary download-button download-button-full "+U,icon:M,title:y,onButtonClick:this.compile,view:"mobile"}):void 0))))))),q.createElement("div",{className:"column tablet only"},f?q.createElement("div",{className:"ui grid seven column"},x?q.createElement("div",{className:"left aligned six wide column"},q.createElement("div",{className:"ui icon buttons"},q.createElement(z,{icon:f?"toggle up":"toggle down",className:"collapse-button "+(f?"collapsed":"")+" "+(r?"disabled":""),ariaLabel:lf("{0}, {1}",k,r?lf("Disabled"):""),title:k,onButtonClick:this.toggleCollapse,view:"tablet"}),q.createElement(z,{role:"menuitem",className:"play-button "+(l?"stop":"play"),key:"runmenubtn",icon:l?"stop":"play",title:_,onButtonClick:this.startStopSimulator,view:"tablet"}),P?q.createElement(z,{key:"restartbtn",className:"restart-button",icon:"refresh",title:w,onButtonClick:this.restartSimulator,view:"tablet"}):void 0,D?q.createElement(z,{key:"debug",className:"debug-button "+(j?"orange":""),icon:"xicon bug",title:F,onButtonClick:this.toggleDebugging,view:"tablet"}):void 0,g?q.createElement(z,{className:"primary download-button download-button-full "+U,icon:M,title:y,onButtonClick:this.compile,view:"tablet"}):void 0)):q.createElement("div",{className:"left aligned six wide column"},q.createElement("div",{className:"ui icon buttons"},q.createElement(z,{icon:f?"toggle up":"toggle down",className:"collapse-button "+(f?"collapsed":"")+" "+(r?"disabled":""),ariaLabel:lf("{0}, {1}",k,r?lf("Disabled"):""),title:k,onButtonClick:this.toggleCollapse,view:"tablet"}),g?q.createElement(z,{className:"primary download-button download-button-full "+U,icon:M,text:L,title:y,onButtonClick:this.compile,view:"tablet"}):void 0)),q.createElement("div",{className:"column four wide"},d?void 0:q.createElement(z,{icon:"save",className:"small editortools-btn save-editortools-btn "+B,title:lf("Save"),ariaLabel:lf("Save the project"),onButtonClick:this.saveFile,view:"tablet"})),q.createElement("div",{className:"column six wide right aligned"},N?q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:"xicon undo",className:"editortools-btn undo-editortools-btn "+(E?"":"disabled"),ariaLabel:lf("{0}, {1}",lf("Undo"),E?"":lf("Disabled")),title:lf("Undo"),onButtonClick:this.undo,view:"tablet"}),q.createElement(z,{icon:"xicon redo",className:"editortools-btn redo-editortools-btn "+(C?"":"disabled"),ariaLabel:lf("{0}, {1}",lf("Red"),C?"":lf("Disabled")),title:lf("Redo"),onButtonClick:this.redo,view:"tablet"})):void 0,A?q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:"plus circle",className:"editortools-btn zoomin-editortools-btn",title:lf("Zoom In"),onButtonClick:this.zoomIn,view:"tablet"}),q.createElement(z,{icon:"minus circle",className:"editortools-btn zoomout-editortools-btn",title:lf("Zoom Out"),onButtonClick:this.zoomOut,view:"tablet"})):void 0)):q.createElement("div",{className:"ui grid"},q.createElement("div",{className:"left aligned two wide column"},q.createElement("div",{className:"ui vertical icon small buttons"},q.createElement(z,{role:"menuitem",className:"play-button "+(l?"stop":"play"),key:"runmenubtn",icon:l?"stop":"play",title:_,onButtonClick:this.startStopSimulator,view:"tablet"}),P?q.createElement(z,{key:"restartbtn",className:"restart-button",icon:"refresh",title:w,onButtonClick:this.restartSimulator,view:"tablet"}):void 0),S?q.createElement("div",{className:"row",style:{paddingTop:"1rem"}},q.createElement("div",{className:"ui vertical icon small buttons"},q.createElement(z,{icon:f?"toggle up":"toggle down",className:"collapse-button "+(f?"collapsed":""),title:k,ariaLabel:lf("{0}, {1}",k,f?lf("Collapsed"):"Expanded"),onButtonClick:this.toggleCollapse,view:"tablet"}))):void 0),q.createElement("div",{className:"three wide column"}),q.createElement("div",{className:"five wide column"},q.createElement("div",{className:"ui grid right aligned"},g?q.createElement("div",{className:"row"},q.createElement("div",{className:"column"},q.createElement(z,{role:"menuitem",className:"primary large fluid download-button download-button-full "+U,icon:M,text:L,title:y,onButtonClick:this.compile,view:"tablet"}))):void 0,T?q.createElement("div",{className:"row",style:g?{paddingTop:0}:{}},q.createElement("div",{className:"column"},q.createElement("div",{className:"ui item large right labeled fluid input projectname-input projectname-tablet",title:lf("Pick a name for your project")},q.createElement("label",{htmlFor:"fileNameInput1",id:"fileNameInputLabel1",className:"accessible-hidden"},lf("Type a name for your project")),q.createElement(W,{id:"fileNameInput1",type:"text","aria-labelledby":"fileNameInputLabel1",placeholder:lf("Pick a name..."),value:i||"",onChangeValue:this.saveProjectName,view:"tablet"}),q.createElement(z,{icon:"save",className:"large right attached editortools-btn save-editortools-btn "+B,title:lf("Save"),ariaLabel:lf("Save the project"),onButtonClick:this.saveFile,view:"tablet"})))):void 0)),q.createElement("div",{className:"six wide column right aligned"},q.createElement("div",{className:"ui grid right aligned"},N||A?q.createElement("div",{className:"row"},q.createElement("div",{className:"column"},N?q.createElement("div",{className:"ui icon large buttons"},q.createElement(z,{icon:"xicon undo",className:"editortools-btn undo-editortools-btn} "+(E?"":"disabled"),title:lf("Undo"),ariaLabel:lf("{0}, {1}",lf("Undo"),E?"":lf("Disabled")),onButtonClick:this.undo,view:"tablet"}),q.createElement(z,{icon:"xicon redo",className:"editortools-btn redo-editortools-btn} "+(C?"":"disabled"),title:lf("Redo"),ariaLabel:lf("{0}, {1}",lf("Redo"),C?"":lf("Disabled")),onButtonClick:this.redo,view:"tablet"})):void 0,A?q.createElement("div",{className:"ui icon large buttons"},q.createElement(z,{icon:"plus circle",className:"editortools-btn zoomin-editortools-btn",title:lf("Zoom In"),onButtonClick:this.zoomIn,view:"tablet"}),q.createElement(z,{icon:"minus circle",className:"editortools-btn zoomout-editortools-btn",title:lf("Zoom Out"),onButtonClick:this.zoomOut,view:"tablet"})):void 0)):void 0,q.createElement("div",{className:"row",style:N||A?{paddingTop:0}:{}},q.createElement("div",{className:"column"},O?q.createElement(z,{key:"tracebtn",className:"large trace-button "+(I?"orange":""),icon:"xicon turtle",title:R,onButtonClick:this.toggleTrace,view:"tablet"}):void 0,D?q.createElement(z,{key:"debugbtn",className:"large debug-button "+(j?"orange":""),icon:"xicon bug",title:F,onButtonClick:this.toggleDebugging,view:"tablet"}):void 0)))))),q.createElement("div",{className:"column computer only"},q.createElement("div",{className:"ui grid equal width"},q.createElement("div",{id:"downloadArea",className:"ui column items"},x?q.createElement("div",{className:"ui item"},q.createElement("div",{className:"ui icon large buttons"},S?q.createElement(z,{icon:o?"toggle "+(H?"left":"right"):"toggle "+(H?"right":"left"),className:"large collapse-button "+(f?"collapsed":""),title:k,onButtonClick:this.toggleCollapse,view:"computer"}):void 0,q.createElement(z,{role:"menuitem",className:"large play-button "+(l?"stop":"play"),key:"runmenubtn",icon:l?"stop":"play",title:_,onButtonClick:this.startStopSimulator,view:"computer"}),P?q.createElement(z,{key:"restartbtn",className:"large restart-button",icon:"refresh",title:w,onButtonClick:this.restartSimulator,view:"computer"}):void 0,O?q.createElement(z,{key:"tracebtn",className:"large trace-button "+(I?"orange":""),icon:"xicon turtle",title:R,onButtonClick:this.toggleTrace,view:"computer"}):void 0,D?q.createElement(z,{key:"debugbtn",className:"large debug-button "+(j?"orange":""),icon:"xicon bug",title:F,onButtonClick:this.toggleDebugging,view:"computer"}):void 0,g?q.createElement(z,{icon:M,className:"primary large download-button "+U,title:y,onButtonClick:this.compile,view:"computer"}):void 0)):q.createElement("div",{className:"ui item"},S?q.createElement(z,{icon:o?"toggle "+(H?"left":"right"):"toggle "+(H?"right":"left"),className:"large collapse-button "+(f?"collapsed":""),title:k,onButtonClick:this.toggleCollapse,view:"computer"}):void 0,D?q.createElement(z,{key:"debugbtn",icon:"xicon bug",className:"large debug-button "+(j?"orange":""),title:F,onButtonClick:this.toggleDebugging,view:"computer"}):void 0,g?q.createElement(z,{icon:M,className:"primary huge fluid download-button "+U,text:L,title:y,onButtonClick:this.compile,view:"computer"}):void 0)),T?q.createElement("div",{className:"column left aligned"},q.createElement("div",{className:"ui right labeled input projectname-input projectname-computer",title:lf("Pick a name for your project")},q.createElement("label",{htmlFor:"fileNameInput2",id:"fileNameInputLabel2",className:"accessible-hidden"},lf("Type a name for your project")),q.createElement(W,{id:"fileNameInput2",view:"computer",type:"text","aria-labelledby":"fileNameInputLabel2",placeholder:lf("Pick a name..."),value:i||"",onChangeValue:this.saveProjectName}),q.createElement(z,{icon:"save",className:"small right attached editortools-btn save-editortools-btn "+B,title:lf("Save"),ariaLabel:lf("Save the project"),onButtonClick:this.saveFile,view:"computer"}))):void 0,q.createElement("div",{className:"column right aligned"},N?q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:"xicon undo",className:"editortools-btn undo-editortools-btn "+(E?"":"disabled"),ariaLabel:lf("{0}, {1}",lf("Undo"),E?"":lf("Disabled")),title:lf("Undo"),onButtonClick:this.undo,view:"computer"}),q.createElement(z,{icon:"xicon redo",className:"editortools-btn redo-editortools-btn "+(C?"":"disabled"),ariaLabel:lf("{0}, {1}",lf("Redo"),C?"":lf("Disabled")),title:lf("Redo"),onButtonClick:this.redo,view:"computer"})):void 0,A?q.createElement("div",{className:"ui icon small buttons"},q.createElement(z,{icon:"plus circle",className:"editortools-btn zoomin-editortools-btn",title:lf("Zoom In"),onButtonClick:this.zoomIn,view:"computer"}),q.createElement(z,{icon:"minus circle",className:"editortools-btn zoomout-editortools-btn",title:lf("Zoom Out"),onButtonClick:this.zoomOut,view:"computer"})):void 0))))},e}(s.Component);n.EditorToolbar=c;var z=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){var e=this.props;(0,e.onButtonClick)(e.view)},e.prototype.renderCore=function(){var e=this.props,t=(e.onClick,e.onButtonClick,a(e,["onClick","onButtonClick"]));return q.createElement(l.Button,i({},t,{onClick:this.handleClick}))},e}(l.StatelessUIElement),W=function(n){function e(e){var t=n.call(this,e)||this;return t.handleChange=t.handleChange.bind(t),t}return o(e,n),e.prototype.handleChange=function(e){var t=this.props,n=t.onChangeValue,r=t.view;n(e.target.value,r)},e.prototype.renderCore=function(){var e=this.props,t=(e.onChange,e.onChangeValue,e.view,a(e,["onChange","onChangeValue","view"]));return q.createElement("input",i({onChange:this.handleChange},t))},e}(l.StatelessUIElement)},{"./data":15,"./sui":48,react:157}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("./core"),i=window.pxtElectron;r.isPxtElectron=!!i,r.isIpcRenderer=!!window.ipcRenderer,r.isElectron=r.isPxtElectron||r.isIpcRenderer;r.initElectron=function(t){if(r.isPxtElectron){i.onTelemetry(function(e){pxt.tickEvent(e.event,e.data)}),i.onUpdateInstalled(function(){o.infoNotification(lf("An update will take effect after the app restarts"))});var n=new Promise(function(e){i.onCriticalUpdateFailed(function(){pxt.tickEvent("electron.criticalupdate.failed"),e()})});i.onUpdateStatus(function(e){switch(pxt.debug("Electron app update status: "+e),pxt.tickEvent("electron.updatestatus."+e),"updating-critical"!==e&&"banned-without-update"!==e||t.stopSimulator(),e){case"ok":return;case"updating-critical":o.confirmAsync({header:lf("Critical update required"),body:lf("A critical update is installing. Please do not quit the app. It will automatically restart when the update has completed."),hideAgree:!0,disagreeLbl:lf("Ok"),disagreeClass:"green",size:"medium"}).then(function(){o.showLoading("pxt-electron-update",lf("Installing update..."))}),n.then(function(){o.hideLoading("pxt-electron-update"),o.hideDialog(),o.confirmAsync({header:lf("Critical update failed"),body:lf("There was an error installing the critical update. Please ensure you are connected to the Internet and try again later."),hideAgree:!0,disagreeLbl:lf("Quit"),disagreeClass:"red",size:"medium"}).then(function(e){i.sendQuit()})});break;case"banned-without-update":o.confirmAsync({header:lf("Critical update required"),body:lf("We have disabled this app for security reasons. Please ensure you are connected to the Internet and try again later. An update will be automatically installed as soon as it is available."),hideAgree:!0,disagreeLbl:lf("Quit"),disagreeClass:"red",size:"medium"}).then(function(e){i.sendQuit()});default:return}}),i.sendUpdateStatusCheck()}},r.openDevTools=function(){i&&i.sendOpenDevTools()}},{"./core":13}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u,r,i,o,a=pxt.editor,d=e("./package");(r=u=n.Permissions||(n.Permissions={}))[r.Console=0]="Console",r[r.ReadUserCode=1]="ReadUserCode",(o=i=n.PermissionStatus||(n.PermissionStatus={}))[o.Granted=0]="Granted",o[o.Denied=1]="Denied",o[o.NotAvailable=2]="NotAvailable",o[o.NotYetPrompted=3]="NotYetPrompted";var s=function(){function e(e){this.host=e,this.statuses={},this.nameToExtId={},this.extIdToName={},this.consent={},this.pendingRequests=[],this.queueLock=!1,this.streams={}}return e.prototype.streamingExtensions=function(){return Object.keys(this.streams)},e.prototype.handleExtensionMessage=function(e){this.handleRequestAsync(e).catch(function(e){})},e.prototype.sendEvent=function(e,t){this.host.send(e,{type:"pxtpkgext",event:t})},e.prototype.setConsent=function(e,t){this.consent[e]=t},e.prototype.hasConsent=function(e){return this.consent[e]},e.prototype.getExtId=function(e){return this.nameToExtId[e]||(this.nameToExtId[e]=ts.pxtc.Util.guidGen(),this.extIdToName[this.nameToExtId[e]]=e),this.nameToExtId[e]},e.prototype.sendResponse=function(e){this.host.send(this.extIdToName[e.extId],e)},e.prototype.handleRequestAsync=function(e){var t,n,r,o,i,a=this,s=function(e,t){void 0===t&&(t=!0);return{type:"pxtpkgext",id:e.id,extId:e.extId,success:t}}(e);if(!this.hasConsent(e.extId))return s.success=!1,s.error="",this.sendResponse(s),Promise.reject("No consent");switch(e.action){case"extinit":s.target=pxt.appTarget,this.sendResponse(s);break;case"extdatastream":return this.permissionOperation(e.extId,u.Console,s,function(e,t){return a.handleDataStreamRequest(e,t)});case"extquerypermission":var l=this.getPermissions(e.extId),c=s;c.resp=f(l),this.sendResponse(c);break;case"extrequestpermission":return this.requestPermissionsAsync(e.extId,s,e.body);case"extusercode":return this.permissionOperation(e.extId,u.ReadUserCode,s,p);case"extreadcode":t=this.extIdToName[e.extId],n=s,r=d.mainEditorPkg(),o=ts.pxtc.escapeIdentifier(t),i=r.getAllFiles(),n.resp={json:i[o+".json"],code:i[o+".ts"],jres:i[o+".jres"],asm:i[o+".asm"]},this.sendResponse(s);break;case"extwritecode":(function(e,t,n){var r=d.mainEditorPkg(),o=ts.pxtc.escapeIdentifier(e);function i(e,t){return void 0!==e&&(!r.files[o+t]||r.files[o+t].content!=e)}var a=!1;i(n.json,".json")&&(a=!0,r.setFile(o+".json",n.json));i(n.code,".ts")&&(a=!0,r.setFile(o+".ts",n.code));i(n.jres,".jres")&&(a=!0,r.setFile(o+".jres",n.jres));i(n.asm,".asm")&&(a=!0,r.setFile(o+".asm",n.asm));return a?r.updateConfigAsync(function(e){return void 0!==n.json&&e.files.indexOf(o+".json")<0&&e.files.push(o+".json"),void 0!==n.code&&e.files.indexOf(o+".ts")<0&&e.files.push(o+".ts"),void 0!==n.jres&&e.files.indexOf(o+".jres")<0&&e.files.push(o+".jres"),void 0!==n.asm&&e.files.indexOf(o+".asm")<0&&e.files.push(o+".asm"),r.savePkgAsync()}):Promise.resolve()})(this.extIdToName[e.extId],0,e.body).done(function(){return a.sendResponse(s)})}return Promise.resolve()},e.prototype.permissionOperation=function(t,e,n,r){var o=this;return this.checkPermissionAsync(t,e).then(function(e){e?r(o.extIdToName[t],n):(n.success=!1,n.error="permission denied"),o.sendResponse(n)}).catch(function(e){n.success=!1,n.error=e,o.sendResponse(n)})},e.prototype.getPermissions=function(e){return this.statuses[e]||(this.statuses[e]={console:i.NotYetPrompted,readUserCode:i.NotYetPrompted}),this.statuses[e]},e.prototype.queuePermissionRequest=function(r,o){var i=this;return new Promise(function(e,t){var n={extId:r,permissions:[o],resolver:e};i.pendingRequests.push(n),i.queueLock||1!==i.pendingRequests.length||(i.queueLock=!0,i.nextPermissionRequest())})},e.prototype.nextPermissionRequest=function(){var t=this;if(this.pendingRequests.length){var n=this.pendingRequests.shift();n.permissions=n.permissions.filter(function(e){return t.hasNotBeenPrompted(n.extId,e)}),n.permissions.length?this.host.promptForPermissionAsync(this.extIdToName[n.extId],n.permissions).done(function(e){n.resolver(e),t.nextPermissionRequest()}):this.nextPermissionRequest()}else this.queueLock=!1},e.prototype.checkPermissionAsync=function(n,r){var e,o=this,t=this.getPermissions(n);switch(r){case u.Console:e=t.console;break;case u.ReadUserCode:e=t.readUserCode}return e===i.NotYetPrompted?this.queuePermissionRequest(n,r).then(function(e){var t=e?i.Granted:i.Denied;switch(r){case u.Console:o.statuses[n].console=t;break;case u.ReadUserCode:o.statuses[n].readUserCode=t}return e}):Promise.resolve(e===i.Granted)},e.prototype.requestPermissionsAsync=function(e,t,n){var r=this,o=[];return n.readUserCode&&o.push(this.checkPermissionAsync(e,u.ReadUserCode)),n.console&&o.push(this.checkPermissionAsync(e,u.Console)),Promise.all(o).then(function(){return f(r.getPermissions(e))}).then(function(e){t.resp=e})},e.prototype.hasNotBeenPrompted=function(e,t){var n,r=this.getPermissions(e);switch(t){case u.Console:n=r.console;break;case u.ReadUserCode:n=r.readUserCode}return n===i.NotYetPrompted},e.prototype.handleDataStreamRequest=function(e,t){this.streams[e]=!0},e}();function p(e,t){var n=d.mainEditorPkg();t.resp=n.getAllFiles()}function f(e){return{readUserCode:l(e.readUserCode),console:l(e.console)}}function l(e){switch(e){case i.NotYetPrompted:case i.Denied:return a.PermissionResponses.Denied;case i.Granted:return a.PermissionResponses.Granted;case i.NotAvailable:default:return a.PermissionResponses.NotAvailable}}n.ExtensionManager=s},{"./package":36}],23:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var d=e("react"),i=e("./data"),a=e("./core"),p=e("./sui"),s=e("./extensionManager"),l=function(n){function u(e){var t=n.call(this,e)||this;return t.handleExtensionWrapperRef=function(e){t.extensionWrapper=e},t.state={visible:!1,consent:!1},t.manager=new s.ExtensionManager(t),window.addEventListener("message",t.processMessage.bind(t),!1),t.hide=t.hide.bind(t),t.updateDimensions=t.updateDimensions.bind(t),t.onApprovedDecision=t.onApprovedDecision.bind(t),t.onDeniedDecision=t.onDeniedDecision.bind(t),t}return o(u,n),u.prototype.processMessage=function(e){var t=this,n=e.data;if("serial"===n.type){var r=n,o=this.manager.streamingExtensions();if(o&&o.length){var i=r.data||"",a=r.id||"?";o.forEach(function(e){t.send(e,{type:"pxtpkgext",event:"extconsole",body:{source:a,sim:r.sim,data:i}})})}}},u.prototype.hide=function(){var e=this;this.setState({visible:!1}),u.getFrame(this.state.extension,!0).style.display="none",a.showLoading("reloadproject",lf("loading...")),this.props.parent.reloadHeaderAsync().done(function(){e.send(e.state.extension,{type:"pxtpkgext",event:"exthidden"}),a.hideLoading("reloadproject")})},u.prototype.showExtension=function(e,t,n){var r=this,o=!n||this.manager.hasConsent(this.manager.getExtId(e));this.setState({visible:!0,extension:e,url:t,consent:o},function(){r.send(e,{type:"pxtpkgext",event:"extshown"})})},u.prototype.submitConsent=function(){this.manager.setConsent(this.manager.getExtId(this.state.extension),!0),this.setState({consent:!0})},u.prototype.initializeFrame=function(){this.manager.setConsent(this.manager.getExtId(this.state.extension),!0);var e=u.getFrame(this.state.extension,!0);e.style.display="block",e.src||(e.src=this.state.url+"#"+this.manager.getExtId(this.state.extension))},u.prototype.shouldComponentUpdate=function(e,t,n){return this.state.visible!=t.visible||this.state.extension!=t.extension||this.state.permissionRequest!=t.permissionRequest||this.state.consent!=t.consent},u.prototype.updateDimensions=function(){if(this.extensionWrapper){var e=this.extensionWrapper.getAttribute("data-frame");if(e){var t=u.getFrame(e,!1),n=document.getElementsByClassName("extensiondialog")[0];if(n&&t){n.getBoundingClientRect();t.width=window.innerWidth+"px",t.height=window.innerHeight-60+"px",t.style.top="60px",t.style.left="0px"}}}},u.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateDimensions)},u.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateDimensions)},u.prototype.componentDidUpdate=function(){var e=this;setTimeout(function(){e.updateDimensions()},0)},u.prototype.componentWillUpdate=function(e,t){if(t.extension&&t.visible)u.getFrame(t.extension,!0)},u.prototype.handleExtensionRequest=function(e){this.manager.handleExtensionMessage(e)},u.prototype.send=function(e,t){var n=u.getFrame(e,!1);n?n.contentWindow.postMessage(t,"*"):console.warn("Attempting to post message to unloaded extesnion "+e)},u.prototype.promptForPermissionAsync=function(n,r){var o=this;return new Promise(function(e,t){o.permissionCb=e,o.setState({permissionRequest:r,permissionExtName:n})})},u.prototype.onApprovedDecision=function(){this.onPermissionDecision(!0)},u.prototype.onDeniedDecision=function(){this.onPermissionDecision(!1)},u.prototype.onPermissionDecision=function(e){this.permissionCb(e),this.permissionCb=void 0,this.setState({permissionRequest:null,permissionExtName:null})},u.getCustomContent=function(){return document.getElementById("custom-content")},u.getFrame=function(e,t){var n=this.getCustomContent().getElementsByClassName("extension-frame-"+e)[0];return!n&&t&&(n=this.createFrame(e)),n},u.createFrame=function(e){var t=this.getCustomContent(),n=document.createElement("iframe");return n.className="extension-frame extension-frame-"+e,n.allowFullscreen=!0,n.setAttribute("sandbox","allow-same-origin allow-scripts"),n.sandbox.value="allow-scripts allow-same-origin",n.frameBorder="0",n.style.display="none",t.appendChild(n),n},u.hideAllFrames=function(){var e=this.getCustomContent();e&&pxt.Util.toArray(e.getElementsByClassName("extension-frame")).forEach(function(e){e.style.zIndex="10"})},u.showAllFrames=function(){var e=this.getCustomContent();e&&pxt.Util.toArray(e.getElementsByClassName("extension-frame")).forEach(function(e){e.style.zIndex=""})},u.prototype.getIconForPermission=function(e){switch(e){case s.Permissions.Console:return"terminal";case s.Permissions.ReadUserCode:return"code"}return""},u.prototype.getDisplayNameForPermission=function(e){switch(e){case s.Permissions.Console:return lf("Console output");case s.Permissions.ReadUserCode:return lf("Read your code")}return""},u.prototype.getDescriptionForPermission=function(e){switch(e){case s.Permissions.Console:return lf("The extension will be able to read any console output (including device data) streamed to the editor");case s.Permissions.ReadUserCode:return lf("The extension will be able to read the code in the current project")}return""},u.prototype.renderCore=function(){var t=this,e=this.state,n=e.visible,r=e.extension,o=e.consent,i=e.permissionRequest,a=e.permissionExtName,s=!o;i?u.hideAllFrames():u.showAllFrames();var l=s?lf("Agree"):void 0,c=l?[{label:l,onclick:function(){t.submitConsent()}}]:void 0;return!s&&n&&this.initializeFrame(),d.createElement(p.Modal,{isOpen:n,className:s?"extensionconsentdialog":"extensiondialog",size:"fullscreen",closeIcon:!1,onClose:this.hide,dimmer:!0,buttons:c,modalDidOpen:this.updateDimensions,shouldFocusAfterRender:!1,onPositionChanged:this.updateDimensions,closeOnDimmerClick:!0},o?d.createElement("div",{id:"extensionWrapper","data-frame":r,ref:this.handleExtensionWrapperRef},i?d.createElement(p.Modal,{isOpen:!0,className:"extensionpermissiondialog basic",closeIcon:!1,dimmer:!0,dimmerClassName:"permissiondimmer"},d.createElement("div",{className:"permissiondialoginner"},d.createElement("div",{className:"permissiondialogheader"},lf("Permission Request")),d.createElement("div",{className:"permissiondialogbody"},lf("Extension {0} is requesting the following permission(s):",a)),d.createElement("div",{className:"ui inverted list"},i.map(function(e){return d.createElement("div",{key:e.toString(),className:"item"},d.createElement(p.Icon,{icon:t.getIconForPermission(e)+" icon"}),d.createElement("div",{className:"content"},d.createElement("div",{className:"header"},t.getDisplayNameForPermission(e)),d.createElement("div",{className:"description"},t.getDescriptionForPermission(e))))}))),d.createElement("div",{className:"actions"},d.createElement(p.Button,{text:lf("Deny"),className:"deny inverted",onClick:this.onDeniedDecision}),d.createElement(p.Button,{text:lf("Approve"),className:"approve inverted green",onClick:this.onApprovedDecision}))):void 0):d.createElement("div",null,d.createElement("div",{className:"ui form"},d.createElement("div",{className:"ui icon violet message"},d.createElement(p.Icon,{icon:"user"}),d.createElement("div",{className:"content"},d.createElement("h3",{className:"header"},lf("User-provided content")),d.createElement("p",null,lf("This content is provided by a user, and is not endorsed by Microsoft."),d.createElement("br",null),lf("If you think it's not appropriate, please report abuse through Settings -> Report Abuse.")))))))},u}(i.Component);n.Extensions=l},{"./core":13,"./data":15,"./extensionManager":22,"./sui":48,react:157}],24:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var l=e("react"),i=e("./data"),c=e("./sui"),u=e("./package"),d=e("./core"),p="custom.ts",f=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.toggleVisibility=t.toggleVisibility.bind(t),t.handleCustomBlocksClick=t.handleCustomBlocksClick.bind(t),t.handleButtonKeydown=t.handleButtonKeydown.bind(t),t.setFile=t.setFile.bind(t),t.removeFile=t.removeFile.bind(t),t.removePkg=t.removePkg.bind(t),t.updatePkg=t.updatePkg.bind(t),t.togglePkg=t.togglePkg.bind(t),t}return o(e,n),e.prototype.componentWillReceiveProps=function(e){var t=this,n=e.parent.state.currFile;if(this.state.currentFile!=n){var r=void 0;u.allEditorPkgs().forEach(function(e){t.packageContainsFile(e,n)&&(r=e.getPkgId())}),this.setState({expandedPkg:r,currentFile:n})}},e.prototype.removePkg=function(t){var n=this;d.confirmAsync({header:lf("Remove {0} package",t.getPkgId()),body:lf("You are about to remove a package from your project. Are you sure?"),agreeClass:"red",agreeIcon:"trash",agreeLbl:lf("Remove it")}).done(function(e){e&&u.mainEditorPkg().removeDepAsync(t.getPkgId()).then(function(){return n.props.parent.reloadHeaderAsync()}).done()})},e.prototype.setFile=function(e){this.props.parent.setSideFile(e)},e.prototype.removeFile=function(e){this.props.parent.removeFile(e)},e.prototype.updatePkg=function(e){var t=this;u.mainEditorPkg().updateDepAsync(e.getPkgId()).then(function(){return t.props.parent.reloadHeaderAsync()}).done()},e.prototype.filesOf=function(n){var r=this,o=this.state.currentFile,i="this"==n.getPkgId();this.props.parent;return n.sortedFiles().map(function(e){var t=r.getData("open-meta:"+e.getName());return l.createElement(h,{key:e.getName(),file:e,onItemClick:r.setFile,onItemRemove:r.removeFile,isActive:o==e,hasDelete:i&&/\.blocks$/i.test(e.getName()),className:(o==e?"active ":"")+(n.isTopLevel()?"":"nested ")+"item"},e.name," ",t.isSaved?"":"*",/\.ts$/.test(e.name)?l.createElement(c.Icon,{icon:"align left"}):/\.blocks$/.test(e.name)?l.createElement(c.Icon,{icon:"puzzle"}):void 0,t.isReadonly?l.createElement(c.Icon,{icon:"lock"}):null,t.numErrors?l.createElement("span",{className:"ui label red"},t.numErrors):null)})},e.prototype.packageOf=function(e){var t=this.state.expandedPkg,n=e.getPkgId()!=pxt.appTarget.id&&"built"!=e.getPkgId()&&"assets"!=e.getPkgId()&&e.getPkgId()!=pxt.appTarget.corepkg&&e.getKsPkg().config&&!e.getKsPkg().config.core&&e.getKsPkg().level<=1,r=e.getKsPkg()&&"github"==e.getKsPkg().verProtocol(),o=this.getData("open-pkg-meta:"+e.getPkgId());return[l.createElement(m,{key:"hd-"+e.getPkgId(),pkg:e,isActive:t==e.getPkgId(),onItemClick:this.togglePkg,hasDelete:n,onItemRemove:this.removePkg,hasRefresh:r,onItemRefresh:this.updatePkg},o.numErrors?l.createElement("span",{className:"ui label red"},o.numErrors):null,e.getPkgId(),t==e.getPkgId()?l.createElement("div",{role:"group",className:"menu"},this.filesOf(e)):void 0)]},e.prototype.packageContainsFile=function(e,t){return 0<e.sortedFiles().filter(function(e){return e==t}).length},e.prototype.togglePkg=function(e){this.setState({expandedPkg:this.state.expandedPkg==e.getPkgId()?void 0:e.getPkgId()})},e.prototype.filesWithHeader=function(e){return e.isTopLevel()?this.filesOf(e):this.packageOf(e)},e.prototype.toggleVisibility=function(){this.props.parent.setState({showFiles:!this.props.parent.state.showFiles})},e.prototype.handleCustomBlocksClick=function(e){this.addCustomBlocksFile(),e.stopPropagation()},e.prototype.handleButtonKeydown=function(e){e.stopPropagation()},e.prototype.addCustomBlocksFile=function(){var t=this;d.confirmAsync({header:lf("Add custom blocks?"),body:lf("A new JavaScript file, custom.ts, will be added to your project. You can define custom functions and blocks in that file.")}).then(function(e){if(e)return t.props.parent.updateFileAsync(p,"\n/**\n * "+lf("Use this file to define custom functions and blocks.")+"\n * "+lf("Read more at {0}",pxt.appTarget.appTheme.homeUrl+"blocks/custom")+'\n */\n\nenum MyEnum {\n    //% block="one"\n    One,\n    //% block="two"\n    Two\n}\n\n/**\n * '+lf("Custom blocks")+'\n */\n//% weight=100 color=#0fbc11 icon=""\nnamespace custom {\n    /**\n     * TODO: '+lf("describe your function here")+"\n     * @param n "+lf("describe parameter here")+", eg: 5\n     * @param s "+lf("describe parameter here")+', eg: "Hello"\n     * @param e '+lf("describe parameter here")+"\n     */\n    //% block\n    export function foo(n: number, s: string, e: MyEnum): void {\n        // Add code here\n    }\n\n    /**\n     * TODO: "+lf("describe your function here")+"\n     * @param value "+lf("describe value here")+", eg: 5\n     */\n    //% block\n    export function fib(value: number): number {\n        return value <= 1 ? value : fib(value -1) + fib(value - 2);\n    }\n}\n",!0)})},e.prototype.renderCore=function(){var t=this,e=!!this.props.parent.state.showFiles,n=pxt.appTarget.appTheme,r=e&&!u.mainEditorPkg().files[p],o=this.getData("open-pkg-meta:"+u.mainEditorPkg().getPkgId());return l.createElement("div",{role:"tree",className:"ui tiny vertical "+(n.invertedMenu?"inverted":"")+" menu filemenu landscape only hidefullscreen"},l.createElement("div",{role:"treeitem","aria-selected":e,"aria-expanded":e,"aria-label":lf("File explorer toolbar"),key:"projectheader",className:"link item",onClick:this.toggleVisibility,tabIndex:0,onKeyDown:c.fireClickOnEnter},lf("Explorer"),l.createElement(c.Icon,{icon:"chevron "+(e?"down":"right")+" icon"}),r?l.createElement(c.Button,{className:"primary label",icon:"plus",title:lf("Add custom blocks?"),onClick:this.handleCustomBlocksClick,onKeyDown:this.handleButtonKeydown}):void 0,o.numErrors?l.createElement("span",{className:"ui label red"},o.numErrors):null),e?pxt.Util.concat(u.allEditorPkgs().map(function(e){return t.filesWithHeader(e)})):void 0)},e}(i.Component);n.FileList=f;var h=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t.handleRemove=t.handleRemove.bind(t),t.handleButtonKeydown=t.handleButtonKeydown.bind(t),t}return o(e,n),e.prototype.handleClick=function(e){this.props.onItemClick(this.props.file),e.stopPropagation()},e.prototype.handleRemove=function(e){this.props.onItemRemove(this.props.file),e.stopPropagation()},e.prototype.handleButtonKeydown=function(e){e.stopPropagation()},e.prototype.renderCore=function(){var e=this.props,t=(e.onClick,e.onItemClick,e.onItemRemove,e.isActive),n=e.hasDelete,r=e.file,o=s(e,["onClick","onItemClick","onItemRemove","isActive","hasDelete","file"]);return l.createElement("a",a({onClick:this.handleClick,tabIndex:0,role:"treeitem","aria-selected":t,"aria-label":t?lf("{0}, it is the current opened file in the JavaScript editor",r.name):r.name,onKeyDown:c.fireClickOnEnter},o),this.props.children,n?l.createElement(c.Button,{className:"primary label",icon:"trash",title:lf("Delete file {0}",r.name),onClick:this.handleRemove,onKeyDown:this.handleButtonKeydown}):"")},e}(c.StatelessUIElement),m=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t.handleRemove=t.handleRemove.bind(t),t.handleRefresh=t.handleRefresh.bind(t),t.handleButtonKeydown=t.handleButtonKeydown.bind(t),t}return o(e,n),e.prototype.handleClick=function(){this.props.onItemClick(this.props.pkg)},e.prototype.handleRefresh=function(e){this.props.onItemRefresh(this.props.pkg),e.stopPropagation()},e.prototype.handleRemove=function(e){this.props.onItemRemove(this.props.pkg),e.stopPropagation()},e.prototype.handleButtonKeydown=function(e){e.stopPropagation()},e.prototype.renderCore=function(){var e=this.props,t=(e.onItemClick,e.onItemRemove,e.onItemRefresh,e.isActive),n=e.hasRefresh,r=e.hasDelete,o=e.pkg,i=s(e,["onItemClick","onItemRemove","onItemRefresh","isActive","hasRefresh","hasDelete","pkg"]);return l.createElement("div",a({className:"header link item",role:"treeitem","aria-selected":t,"aria-expanded":t,"aria-label":lf("{0}, {1}",o.getPkgId(),t?lf("expanded"):lf("collapsed")),onClick:this.handleClick,tabIndex:0,onKeyDown:c.fireClickOnEnter},i),l.createElement(c.Icon,{icon:"chevron "+(t?"down":"right")+" icon"}),n?l.createElement(c.Button,{className:"primary label",icon:"refresh",title:lf("Refresh package {0}",o.getPkgId()),onClick:this.handleRefresh,onKeyDown:this.handleButtonKeydown}):"",r?l.createElement(c.Button,{className:"primary label",icon:"trash",title:lf("Delete package {0}",o.getPkgId()),onClick:this.handleRemove,onKeyDown:this.handleButtonKeydown}):"",this.props.children)},e}(c.StatelessUIElement)},{"./core":13,"./data":15,"./package":36,"./sui":48,react:157}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,s,r=e("./db"),l=e("./core"),c=e("./data"),u=pxt.Util,o=pxt.Cloud,d=[];function p(t){return d.filter(function(e){return e.id==t})[0]}function f(e,t){return u.requestAsync({url:"/api/"+e,headers:{Authorization:o.localToken},method:t?"POST":"GET",data:t||void 0}).then(function(e){return e.json}).catch(l.handleNetworkError)}function h(e){var t=p(e.path);t||(t={id:e.path,header:null,text:null,fsText:null},d.push(t));var n=e.files.map(function(e){return e.mtime});n.sort(function(e,t){return t-e});var r=Math.round(n[0]/1e3)||u.nowSeconds(),o={target:a,targetVersion:t.header?t.header.targetVersion:s,name:e.config.name,meta:{},editor:pxt.JAVASCRIPT_PROJECT_NAME,pubId:e.config.installedVersion,pubCurrent:!1,_rev:null,id:e.path,recentUse:r,modificationTime:r,blobId:null,blobCurrent:!1,isDeleted:!1,icon:e.icon};if(t.header){var i=t.header;i.name=o.name,i.pubId=o.pubId,i.modificationTime=o.modificationTime,i.isDeleted=o.isDeleted,i.icon=o.icon}else t.header=o}var m=new u.PromiseQueue;function g(i,a){if(i.temporary)return Promise.resolve();var s=p(i.id);return u.assert(s.header===i),a?(i.saveId=null,s.textNeedsSave=!0,s.text=a,m.enqueue(i.id,function(){u.assert(!!s.fsText);for(var e={files:[],config:null,path:i.id},t=0,n=Object.keys(s.text);t<n.length;t++){var r=n[t];s.text[r]!==s.fsText[r]&&e.files.push({name:r,mtime:null,content:s.text[r],prevContent:s.fsText[r]})}var o=u.flatClone(s.text);return 0==e.files.length?Promise.resolve():f("pkg/"+i.id,e).then(function(e){s.fsText=o,h(e),c.invalidate("header:"+i.id),c.invalidate("header:*"),a&&(c.invalidate("text:"+i.id),i.saveId=null)}).catch(function(e){return l.errorNotification(lf("Save failed!"))})})):Promise.resolve()}function i(){return f("list").then(function(e){e.pkgs.forEach(h),c.invalidate("header:"),c.invalidate("text:")})}n.provider={getHeaders:function(){return d.map(function(e){return e.header})},getHeader:function(e){var t=p(e);return t&&!t.header.isDeleted?t.header:null},getTextAsync:function(e){var t=p(e);return t?t.text?Promise.resolve(t.text):m.enqueue(e,function(){return f("pkg/"+(o=t).id).then(function(e){if(!o.text){o.text={};for(var t=o.mtime=0,n=e.files;t<n.length;t++){var r=n[t];o.text[r.name]=r.content,o.mtime=Math.max(o.mtime,r.mtime)}o.fsText=u.flatClone(o.text)}return o.text});var o}):Promise.resolve(null)},initAsync:function(e,t){return d=[],a=e,s=t,i().then(function(){})},saveAsync:function(e,t){return g(e,t)},installAsync:function(e,t){var n=e,r=n.name.replace(/[^a-zA-Z0-9]+/g," ").trim().replace(/ /g,"-");if(p(r)){for(var o=2;p(r+"-"+o);)o++;r+="-"+o,n.name+=" "+o}n.id=r,n.recentUse=u.nowSeconds(),n.modificationTime=n.recentUse;var i={id:n.id,header:n,text:t,fsText:{}};return d.push(i),g(n,t).then(function(){return n})},saveToCloudAsync:function(e){return Promise.resolve()},syncAsync:i,resetAsync:function(){return r.destroyAsync().then(function(){d=[],pxt.storage.clearLocal(),c.clearCache()})},loadedAsync:function(){return Promise.resolve()},saveScreenshotAsync:function(e,t,n){return f("screenshot/"+e.id,{screenshot:t,icon:n})},saveAssetAsync:function(e,t,n){return f("pkgasset/"+e,{encoding:"base64",name:t,data:btoa(ts.pxtc.Util.uint8ArrayToString(n))}).then(function(e){})},listAssetsAsync:function(e){return f("pkgasset/"+e).then(function(e){return e.files})}}},{"./core":13,"./data":15,"./db":16}],26:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./data"),s=e("./sui");n.isSupported=function(){return void 0!==typeof navigator&&!!navigator.mediaDevices&&!!navigator.mediaDevices.enumerateDevices&&!!navigator.mediaDevices.getUserMedia};var l=function(n){function e(e){var t=n.call(this,e)||this;return t.handleVideoRef=function(e){t.v=e},t.state={hasPrompt:!0},t.handleDeviceClick=t.handleDeviceClick.bind(t),t.handleClose=t.handleClose.bind(t),t}return o(e,n),e.prototype.handleDeviceClick=function(e){var t=this;this.setState({hasPrompt:!1}),this.deviceId=e,this.deviceId&&navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:e}},audio:!1}).then(function(e){try{t.stream=e,t.v.srcObject=t.stream,t.v.play()}catch(e){pxt.debug("greenscreen: play failed, "+e),t.stop()}},function(e){t.stop()})},e.prototype.handleClose=function(){this.deviceId||this.props.close()},e.prototype.componentDidMount=function(){var t=this;navigator.mediaDevices.enumerateDevices().then(function(e){t.setState({devices:e.filter(function(e){return"videoinput"==e.kind})})})},e.prototype.componentWillUnmount=function(){this.stop()},e.prototype.stop=function(){if(this.deviceId=void 0,this.stream){try{this.stream.stop&&this.stream.stop()}catch(e){}try{var e=this.stream.getTracks();e&&e.forEach(function(e){return e.stop()})}catch(e){}this.stream=void 0}if(this.v)try{this.v.srcObject=void 0}catch(e){}},e.prototype.render=function(){var n=this,e=this.state,t=e.hasPrompt,r=e.devices;return i.createElement("div",{className:"videoContainer"},i.createElement("video",{ref:this.handleVideoRef}),t?i.createElement(s.Modal,{isOpen:t,onClose:this.handleClose,closeIcon:!0,dimmer:!0,header:lf("Choose a camera")},i.createElement("div",{className:"ui cards "+(r?"":"loading")},i.createElement(c,{key:"devicegreenscreen",icon:"green tint",onClick:this.handleDeviceClick,deviceId:"",header:lf("Green background")}),r&&r.map(function(e,t){return i.createElement(c,{key:"device"+t,icon:"video camera",onClick:n.handleDeviceClick,deviceId:e.deviceId,header:e.label||lf("camera {0}",t)})}))):void 0)},e}(a.Component);n.WebCam=l;var c=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){var e=this.props,t=e.deviceId;(0,e.onClick)(t)},e.prototype.renderCore=function(){var e=this.props,t=e.header,n=e.icon;return i.createElement("div",{role:"button",className:"ui card link",onClick:this.handleClick},i.createElement("div",{className:"imageicon"},i.createElement(s.Icon,{icon:n+" massive"})),i.createElement("div",{className:"content"},i.createElement("span",{className:"header"},t)))},e}(a.Component)},{"./data":15,"./sui":48,react:157}],27:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i,a=pxt.Cloud,s=pxt.Util,l=function(n){function e(e){var t=n.call(this,e)||this;return t.message=e,t}return o(e,n),e}(Error);n.HIDError=l;var c={};function u(e){var t=s.lookup(c,e.result.path);t?t.onOOB(e):console.error("Dropping data for "+e.result.path)}n.shouldUse=function(){var e=pxt.appTarget.serial;return e&&e.useHF2&&(a.isLocalHost()&&!!a.localToken||pxt.winrt.isWinRT())},pxt.HF2.mkPacketIOAsync=function(){!function(){if(!i){if(!a.isLocalHost()||!a.localToken)return;pxt.debug("initializing hid pipe"),i=pxt.worker.makeWebSocket("ws://localhost:"+pxt.options.wsPort+"/"+a.localToken+"/hid",u)}}();var e=!1;pxt.appTarget.serial&&pxt.appTarget.serial.rawHID&&(e=!0);var t=new h(e);return t.initAsync().then(function(){return t})};var d,p,f,h=function(){function e(e){void 0===e&&(e=!1);var t=this;this.rawMode=e,this.onData=function(e){},this.onEvent=function(e){},this.onError=function(e){},this.onSerial=function(e,t){},e&&(this.onEvent=function(e){return t.onData(e)})}return e.prototype.onOOB=function(e){"serial"==e.op?this.onSerial(s.fromHex(e.result.data),e.result.isError):"event"==e.op&&this.onEvent(s.fromHex(e.result.data))},e.prototype.talksAsync=function(e){return i.opAsync("talk",{path:this.dev.path,cmds:e.map(function(e){return{cmd:e.cmd,data:e.data?s.toHex(e.data):""}})}).then(function(e){return e.map(function(e){return s.fromHex(e.data)})})},e.prototype.error=function(e){throw new l(s.lf("USB/HID error on device {0} ({1})",this.dev.product,e))},e.prototype.reconnectAsync=function(){return this.initAsync()},e.prototype.disconnectAsync=function(){return i.opAsync("disconnect",{path:this.dev.path})},e.prototype.sendPacketAsync=function(e){if(this.rawMode)return i.opAsync("send",{path:this.dev.path,data:s.toHex(e),raw:!0});throw new Error("should use talksAsync()!")},e.prototype.sendSerialAsync=function(e,t){return i.opAsync("sendserial",{path:this.dev.path,data:s.toHex(e),isError:t})},e.prototype.initAsync=function(){var r=this;return i.opAsync("list",{}).then(function(e){var t=e.devices,n=t.filter(function(e){return 16896==(65280&e.release)})[0];if(pxt.appTarget.serial&&pxt.appTarget.serial.rawHID&&(n=t[0]),!n)throw new Error("No device connected");r.dev&&delete c[r.dev.path],r.dev=n,c[r.dev.path]=r}).then(function(){return i.opAsync("init",{path:r.dev.path,raw:r.rawMode})})},e}();n.configureHidSerial=function(e){f=e,d&&(d.onSerial=f)},n.disconnectWrapperAsync=function(){return d?d.disconnectAsync():Promise.resolve()},n.initAsync=function(t){var n;return void 0===t&&(t=!1),p||(p=pxt.HF2.mkPacketIOAsync().then(function(e){return d=new pxt.HF2.Wrapper(e),f&&(d.onSerial=f),d.reconnectAsync(!0).then(function(){return d})}).catch(function(e){return p=null,Promise.reject(e)})),p.then(function(e){return n=e,t?n.reconnectAsync():Promise.resolve()}).then(function(){return n})}},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./data"),o=e("./memoryworkspace");n.provider={getHeaders:function(){return o.provider.getHeaders()},getHeader:function(e){return o.provider.getHeader(e)},getTextAsync:function(e){return o.provider.getTextAsync(e)},initAsync:function(e,t){return o.provider.initAsync(e,t)},saveAsync:function(e,t){return o.provider.saveAsync(e,t).then(function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspacesave",project:{header:e,text:t},response:!1})}).then(function(){})},installAsync:function(e,t){return o.provider.installAsync(e,t)},saveToCloudAsync:function(e){return o.provider.saveToCloudAsync(e)},syncAsync:function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspacesync",response:!0}).then(function(e){return(e.projects||[]).forEach(o.merge),r.invalidate("header:"),r.invalidate("text:"),pxt.tickEvent("pxt.controller",{controllerId:e.controllerId}),e.editor})},resetAsync:function(){return o.provider.resetAsync().then(function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspacereset",response:!0})}).then(function(){})},loadedAsync:function(){return o.provider.loadedAsync().then(function(){return pxt.editor.postHostMessageAsync({type:"pxthost",action:"workspaceloaded",response:!0})}).then(function(){})}}},{"./data":15,"./memoryworkspace":32}],29:[function(e,t,r){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),s=e("./codecard"),l=e("./sui"),n=e("./data"),c={af:{englishName:"Afrikaans",localizedName:"Afrikaans"},ar:{englishName:"Arabic",localizedName:"العربية"},bg:{englishName:"Bulgarian",localizedName:"български"},ca:{englishName:"Catalan",localizedName:"Català"},cs:{englishName:"Czech",localizedName:"Čeština"},da:{englishName:"Danish",localizedName:"Dansk"},de:{englishName:"German",localizedName:"Deutsch"},el:{englishName:"Greek",localizedName:"Ελληνικά"},en:{englishName:"English",localizedName:"English"},"es-ES":{englishName:"Spanish (Spain)",localizedName:"Español (España)"},"es-MX":{englishName:"Spanish (Mexico)",localizedName:"Español (México)"},fi:{englishName:"Finnish",localizedName:"Suomi"},fr:{englishName:"French",localizedName:"Français"},"fr-CA":{englishName:"French (Canada)",localizedName:"Français (Canada)"},he:{englishName:"Hebrew",localizedName:"עברית"},hr:{englishName:"Croatian",localizedName:"Hrvatski"},hu:{englishName:"Hungarian",localizedName:"Magyar"},"hy-AM":{englishName:"Armenian (Armenia)",localizedName:"Հայերէն (Հայաստան)"},id:{englishName:"Indonesian",localizedName:"Bahasa Indonesia"},is:{englishName:"Icelandic",localizedName:"Íslenska"},it:{englishName:"Italian",localizedName:"Italiano"},ja:{englishName:"Japanese",localizedName:"日本語"},ko:{englishName:"Korean",localizedName:"한국어"},lt:{englishName:"Lithuanian",localizedName:"Lietuvių"},nl:{englishName:"Dutch",localizedName:"Nederlands"},no:{englishName:"Norwegian",localizedName:"Norsk"},pl:{englishName:"Polish",localizedName:"Polski"},"pt-BR":{englishName:"Portuguese (Brazil)",localizedName:"Português (Brasil)"},"pt-PT":{englishName:"Portuguese (Portugal)",localizedName:"Português (Portugal)"},ro:{englishName:"Romanian",localizedName:"Română"},ru:{englishName:"Russian",localizedName:"Русский"},"si-LK":{englishName:"Sinhala (Sri Lanka)",localizedName:"සිංහල (ශ්රී ලංකා)"},sk:{englishName:"Slovak",localizedName:"Slovenčina"},sl:{englishName:"Slovenian",localizedName:"Slovenski"},sr:{englishName:"Serbian",localizedName:"Srpski"},"sv-SE":{englishName:"Swedish (Sweden)",localizedName:"Svenska (Sverige)"},ta:{englishName:"Tamil",localizedName:"தமிழ்"},tr:{englishName:"Turkish",localizedName:"Türkçe"},uk:{englishName:"Ukrainian",localizedName:"Українська"},vi:{englishName:"Vietnamese",localizedName:"Tiếng việt"},"zh-CN":{englishName:"Chinese (Simplified)",localizedName:"简体中文"},"zh-TW":{englishName:"Chinese (Traditional)",localizedName:"繁体中文"}},u="PXT_LANG",d=30,p=["en"];function f(){var e=new RegExp(pxt.Util.escapeForRegex(u)+"=(.*?)(?:;|$)").exec(document.cookie);return e&&e[1]||null}function h(e){if(c[e]&&e!==f()){pxt.tickEvent("menu.lang.setcookielang."+e);var t=new Date;t.setTime(t.getTime()+24*d*60*60*1e3),document.cookie=u+"="+e+"; expires="+t.toUTCString()}}r.setInitialLang=function(e){r.initialLang=e},r.getCookieLang=f,r.setCookieLang=h;var m=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!1},t.hide=t.hide.bind(t),t.changeLanguage=t.changeLanguage.bind(t),t}return i(e,n),e.prototype.languageList=function(){return pxt.appTarget.appTheme.selectLanguage&&pxt.appTarget.appTheme.availableLocales&&pxt.appTarget.appTheme.availableLocales.length?pxt.appTarget.appTheme.availableLocales:p},e.prototype.changeLanguage=function(e){var t=this;c[e]&&(h(e),e!==r.initialLang?(pxt.tickEvent("menu.lang.changelang."+e),pxt.winrt.releaseAllDevicesAsync().then(function(){t.props.parent.reloadEditor()}).done()):(pxt.tickEvent("menu.lang.samelang."+e),this.hide()))},e.prototype.hide=function(){this.setState({visible:!1})},e.prototype.show=function(){this.setState({visible:!0})},e.prototype.renderCore=function(){var t=this;if(!this.state.visible)return a.createElement("div",null);var e=pxt.appTarget.appTheme,n=this.languageList(),r=4<n.length?"large":"small";return a.createElement(l.Modal,{isOpen:this.state.visible,size:r,onClose:this.hide,dimmer:!0,header:lf("Select Language"),closeIcon:!0,allowResetFocus:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!0,closeOnEscape:!0},a.createElement("div",{className:"group"},a.createElement("div",{className:"ui cards centered",role:"listbox"},n.map(function(e){return a.createElement(g,{key:e,langId:e,name:c[e].localizedName,ariaLabel:c[e].englishName,description:c[e].englishName,onClick:t.changeLanguage})}))),e.crowdinProject?a.createElement("p",null,a.createElement("br",null),a.createElement("br",null),a.createElement("a",{href:"https://crowdin.com/project/"+e.crowdinProject,target:"_blank",rel:"noopener noreferrer","aria-label":lf("Help us translate")},lf("Help us translate"))):void 0)},e}(n.Component);r.LanguagePicker=m;var g=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t}return i(e,n),e.prototype.handleClick=function(){this.props.onClick(this.props.langId)},e.prototype.renderCore=function(){var e=this.props,t=e.name,n=e.ariaLabel,r=e.description;return a.createElement(s.CodeCardView,{className:"card-selected",name:t,ariaLabel:n,role:"link",description:r,onClick:this.handleClick})},e}(l.StatelessUIElement)},{"./codecard":10,"./data":15,"./sui":48,react:157}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=e("./package"),r=e("./core"),o=e("./compiler"),i="instructions";function a(e){var p,t;return(t=e,new Promise(function(r,e){window.addEventListener("message",function e(t){var n=t.data;"ready"==n.type&&n.frameid==i&&(window.removeEventListener("message",e),r(o))});var o=document.createElement("iframe");o.frameBorder="0",o.setAttribute("allowfullscreen","true"),o.setAttribute("sandbox","allow-popups allow-forms allow-scripts allow-same-origin allow-modals"),o.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;"),o.src=pxt.webConfig.partsUrl+"#"+i,t.appendChild(o)})).then(function(e){return p=e,o.compileAsync({native:!0})}).then(function(e){for(var t=f.mainEditorPkg().header.name||lf("Untitled"),n=pxt.appTarget.simulator.boardDefinition,r=ts.pxtc.computeUsedParts(e).sort(),o=f.mainPkg.computePartDefinitions(r),i=e.usedArguments,a={},s={},l=0,c=e.configData||[];l<c.length;l++){var u=c[l];a[u.key+""]=u.value,s[u.name]=u.key}var d={cfg:a,cfgKey:s};return p.contentWindow.postMessage({type:"instructions",options:{name:t,boardDef:n,parts:r,partDefinitions:o,fnArgs:i,configData:d}},"*"),p})}n.makeAsync=function(){var t;return r.dialogAsync({header:lf("Make"),size:"large",htmlBody:'\n        <div class="ui container">\n            <div id="makecontainer" style="position:relative;height:0;padding-bottom:40%;overflow:hidden;">\n            </div>\n        </div>',onLoaded:function(e){a(e.querySelectorAll("#makecontainer")[0]).done(function(e){return t=e})},buttons:[{label:lf("Print"),onclick:function(){t&&t.contentWindow&&t.contentWindow.postMessage({type:"print"},"*")},icon:"print"}]}).then(function(e){})}},{"./compiler":11,"./core":13,"./package":36}],31:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=e("react"),i=e("./data"),s=e("marked"),l=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return o(i,e),i.clearBlockSnippetCache=function(){this.blockSnippetCache={}},i.prototype.getBuiltinMacros=function(){var e={},t=pxt.appTarget.appTheme;return t.boardName&&(e.boardname=pxt.Util.htmlEscape(t.boardName)),t.boardNickname&&(e.boardnickname=pxt.Util.htmlEscape(t.boardNickname)),t.driveDisplayName&&(e.drivename=pxt.Util.htmlEscape(t.driveDisplayName)),t.homeUrl&&(e.homeurl=pxt.Util.htmlEscape(t.homeUrl)),e.targetid=t.id||"???",e.targetname=t.name||"Microsoft MakeCode",e.targetlogo=t.docsLogo?'<img aria-hidden="true" role="presentation" class="ui mini image" src="'+t.docsLogo+'" />':"",e},i.prototype.renderSnippets=function(e){var n=this.props.parent;pxt.Util.toArray(e.querySelectorAll(".lang-blocks")).forEach(function(e){var r=e.textContent,o=document.createElement("div");if(pxsim.U.clear(e),e.appendChild(o),o.className="ui segment raised loading",i.blockSnippetCache[r]){var t=Blockly.Xml.textToDom(i.blockSnippetCache[r]);o.appendChild(t),pxsim.U.removeClass(o,"loading")}else n.renderBlocksAsync({action:"renderblocks",ts:r}).done(function(e){var t=e.svg;if(t)t.setAttribute("height",t.getAttribute("viewBox").split(" ")[3]+"px"),pxt.BrowserUtils.isIE()||(i.blockSnippetCache[r]=Blockly.Xml.domToText(t)),o.appendChild(t),pxsim.U.removeClass(o,"loading");else{var n=document.createElement("span");n.textContent=lf("Oops, something went wrong trying to render this block snippet."),o.appendChild(n),pxsim.U.removeClass(o,"loading")}})})},i.prototype.renderInlineBlocks=function(e){pxt.Util.toArray(e.querySelectorAll(":not(pre) > code")).forEach(function(e){var t=e.innerText,n=/^(\|+)([^\|]+)\|+$/.exec(t);if(n){var r=/^(([^\:\.]*?)[\:\.])?(.*)$/.exec(n[2]),o=r[2]?r[2].trim().toLowerCase():"",i=r[3].trim(),a=1==n[1].length?"docs inlinebutton ui button "+pxt.Util.htmlEscape(i.toLowerCase())+"-button":"docs inlineblock "+pxt.Util.htmlEscape(o),s=document.createElement("span");pxsim.U.clear(e),e.appendChild(s),s.className=a,s.textContent=pxt.U.rlf(i)}})},i.prototype.renderMarkdown=function(e){var t=this.refs["marked-content"],n=this.getBuiltinMacros();e=e.replace(/@([a-z]+)@/gi,function(e,t){return n[t]||"unknown macro"}),s.setOptions({sanitize:!0}),t.innerHTML=s(e),this.renderInlineBlocks(t),this.renderSnippets(t)},i.prototype.componentDidMount=function(){var e=this.props.markdown;this.renderMarkdown(e)},i.prototype.componentWillReceiveProps=function(e){var t=e.markdown;this.props.markdown!=e.markdown&&this.renderMarkdown(t)},i.prototype.renderCore=function(){return a.createElement("div",{ref:"marked-content"})},i.blockSnippetCache={},i}(i.Component);n.MarkedContent=l},{"./data":15,marked:110,react:157}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=pxt.Util;n.projects={};var o="",i="";function a(e,t){return n.projects[e.id]={header:e,text:t},Promise.resolve()}n.merge=function(e){var t=e.header;t||(e.header=t={id:ts.pxtc.Util.guidGen(),recentUse:r.nowSeconds(),modificationTime:r.nowSeconds(),target:o,targetVersion:i,_rev:void 0,blobId:void 0,blobCurrent:void 0,isDeleted:!1,name:lf("Untitled"),meta:{},editor:pxt.BLOCKS_PROJECT_NAME,pubId:void 0,pubCurrent:void 0}),n.projects[e.header.id]=e},n.provider={getHeaders:function(){return pxt.Util.values(n.projects).map(function(e){return e.header})},getHeader:function(e){var t=n.projects[e];return t?t.header:void 0},getTextAsync:function(e){var t=n.projects[e];return Promise.resolve(t?t.text:void 0)},initAsync:function(e,t){return o=e,i=t,Promise.resolve()},saveAsync:a,installAsync:function(e,t){var n=e;return n.id=ts.pxtc.Util.guidGen(),n.recentUse=r.nowSeconds(),n.modificationTime=n.recentUse,a(n,t).then(function(){return n})},saveToCloudAsync:function(e){return Promise.resolve()},syncAsync:function(){return Promise.resolve(void 0)},resetAsync:function(){return n.projects={},o="",Promise.resolve()},loadedAsync:function(){return Promise.resolve()}}},{}],33:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var c,i,a=e("react"),u=e("./package"),l=e("./core"),s=e("./toolboxeditor"),d=e("./compiler"),p=e("./sui"),f=e("./monacoSnippets"),h=e("./toolbox"),A=pxt.Util;(i=c||(c={}))[i.Unknown=0]="Unknown",i[i.TypeScript=1]="TypeScript",i[i.Markdown=2]="Markdown";var m=function(r){function e(){var o=null!==r&&r.apply(this,arguments)||this;return o.fileType=c.Unknown,o.giveFocusOnLoading=!1,o.handleToolboxRef=function(e){o.toolbox=e},o.dragCurrentPos={x:0,y:0},o.onDragBlockThrottled=A.throttle(function(){var e=o.dragCurrentPos,t=e.x,n=e.y,r=o.editor.getTargetAtClientPoint(t,n);r&&r.position&&o.editor.getPosition()!=r.position&&o.editor.setPosition(r.position),o.editor.focus()},200),o.highlightDecorations=[],o.uniqueBlockId=0,o}return o(e,r),e.prototype.hasBlocks=function(){if(!this.currFile)return!0;var e=this.currFile.getVirtualFileName();return e&&null!=u.mainEditorPkg().files[e]},e.prototype.openBlocks=function(){var s=this;if(pxt.tickEvent("typescript.showBlocks"),this.currFile){var e=this.parent.state.header;e&&(e.editor=pxt.BLOCKS_PROJECT_NAME,e.pubCurrent=!1);var t=Promise.resolve().then(function(){if(s.hasBlocks()){var o=s.currFile.getVirtualFileName();if(!o){var e=u.mainEditorPkg();if(!e||!e.files["main.blocks"])return void(e&&s.parent.setFile(e.files["main.ts"]));s.currFile=e.files["main.ts"],o=s.currFile.getVirtualFileName()}var i,r,a=u.mainEditorPkg();return s.parent.saveFileAsync().then(function(){return s.parent.loadBlocklyAsync()}).then(function(){return d.getBlocksAsync()}).then(function(e){r=e,pxt.blocks.initializeAndInject(r);var n=pxt.blocks.loadWorkspaceXml(a.files[o].content);return n?pxt.blocks.compileAsync(n,r).then(function(e){var t=e.source;return d.formatAsync(t,0).then(function(t){return d.formatAsync(s.editor.getValue(),0).then(function(e){return t.formatted==e.formatted?(pxt.debug("js not changed, skipping decompile"),pxt.tickEvent("typescript.noChanges"),s.parent.setFile(a.files[o]),[n,!1]):[n,!0]})})}):[n,!0]}).then(function(e){if(!e)return Promise.resolve();var t=e[0];return e[1]?d.decompileAsync(s.currFile.name,r,t,o).then(function(e){if(!e.success){s.currFile.diagnostics=e.diagnostics;var t=!1;return e.diagnostics.forEach(function(e){return t=t||9266===e.code}),n=o,void 0===(r=t)&&(r=!1),l.cancelAsyncLoading("switchtoblocks"),s.forceDiagnosticsUpdate(),s.showConversionFailedDialog(n,r)}var n,r;return i=e.outfiles[o],A.assert(!!i),a.setContentAsync(o,i).then(function(){return s.parent.setFile(a.files[o])})}):Promise.resolve()}).catch(function(e){pxt.reportException(e),l.errorNotification(lf("Oops, something went wrong trying to convert your code."))})}});l.showLoadingAsync("switchtoblocks",lf("switching to blocks..."),t).done()}},e.prototype.showConversionFailedDialog=function(e,t){var n=this,r=u.mainEditorPkg().files[e];return t&&pxt.tickEvent("typescript.programTooLarge"),l.confirmAsync({header:t?lf("Program too large"):lf("Oops, there is a problem converting your code."),body:t?lf("Your program is too large to convert into blocks. You can keep working in JavaScript or discard your changes and go back to the previous Blocks version."):lf("We are unable to convert your JavaScript code back to blocks. You can keep working in JavaScript or discard your changes and go back to the previous Blocks version."),agreeLbl:lf("Discard and go to Blocks"),agreeClass:"cancel",agreeIcon:"cancel",disagreeLbl:lf("Stay in JavaScript"),disagreeClass:"positive",disagreeIcon:"checkmark",hideCancel:!r}).then(function(e){e?(pxt.tickEvent("typescript.discardText",void 0,{interactiveConsent:!0}),n.parent.saveBlocksToTypeScriptAsync().then(function(e){n.overrideFile(e),n.parent.setFile(r)})):pxt.tickEvent("typescript.keepText",void 0,{interactiveConsent:!0})})},e.prototype.decompileAsync=function(e){return d.decompileAsync(e)},e.prototype.display=function(){return a.createElement("div",{id:"monacoEditorArea",className:"full-abs",style:{direction:"ltr"}},a.createElement("div",{className:"monacoToolboxDiv "+(this.toolbox&&!this.toolbox.state.visible?"invisible":"")},a.createElement(h.Toolbox,{ref:this.handleToolboxRef,editorname:"monaco",parent:this})),a.createElement("div",{id:"monacoEditorInner",style:{float:"right"}}))},e.prototype.showPackageDialog=function(){pxt.tickEvent("monaco.addpackage",void 0,{interactiveConsent:!0}),this.hideFlyout(),this.parent.showPackageDialog()},e.prototype.defineEditorTheme=function(e,t){var o=this,n=pxt.appTarget.appTheme.invertedMonaco,r=.6,i=[];if(!e&&t){var a={};this.getNamespaces().forEach(function(e){var t=o.getNamespaceAttrs(e),n=f.isBuiltin(e)?f.getBuiltinCategory(e).blocks.concat(o.nsMap[e]||[]):o.nsMap[e];if(t.color&&n){var r=d(t.color);n.forEach(function(e){i.push({token:"identifier.ts "+e.name,foreground:r})}),i.push({token:"identifier.ts "+e,foreground:r}),a[e]=t.color}}),i.push({token:"identifier.ts if",foreground:"5B80A5"}),i.push({token:"identifier.ts else",foreground:"5B80A5"}),i.push({token:"identifier.ts while",foreground:"5BA55B"}),i.push({token:"identifier.ts for",foreground:"5BA55B"});var s=pxt.appTarget.runtime&&pxt.appTarget.runtime.pauseUntilBlock;if(s){var l=s.callName||"pauseUntil",c=s.color||a[s.category];c&&i.push({token:"identifier.ts "+l,foreground:d(c)})}}var u=pxt.appTarget.appTheme.monacoColors||{};function d(e){return e=pxt.toolbox.convertColor(e),(n?pxt.toolbox.fadeColor(e,r,!0):e).replace("#","")}monaco.editor.defineTheme("pxtTheme",{base:e?"hc-black":n?"vs-dark":"vs",inherit:!0,rules:i,colors:e?{}:u}),monaco.editor.setTheme("pxtTheme")},e.prototype.setHighContrast=function(e){this.loadedMonaco&&this.defineEditorTheme(e,!0)},e.prototype.beforeCompile=function(){this.editor&&this.editor.getAction("editor.action.formatDocument").run()},e.prototype.isIncomplete=function(){return!(!this.editor||!this.editor._view)&&this.editor._view.contentWidgets._widgets["editor.widget.suggestWidget"].isVisible},e.prototype.resize=function(e){var t=document.getElementById("monacoEditorArea");if(t){var n=t.getElementsByClassName("monacoToolboxDiv")[0];if(t&&this.editor){var r=n&&n.offsetWidth||0;this.editor.layout({width:t.offsetWidth-r,height:t.offsetHeight});var o=this.editor._themeService._theme.colors["editor.background"].rgba;this.parent.updateEditorLogo(r,"rgba("+o.r+","+o.g+","+o.b+","+o.a+")");var i=this.editor?this.editor.getLayoutInfo().contentHeight:0;n&&(n.style.height=i+"px")}}},e.prototype.prepare=function(){this.isReady=!0},e.prototype.loadMonacoAsync=function(){var s=this;if(this.editor||this.loadingMonaco)return Promise.resolve();this.loadingMonaco=!0,this.extraLibs=Object.create(null);var o=document.getElementById("monacoEditorArea"),e=document.getElementById("monacoEditorInner");return pxt.vs.initMonacoAsync(e).then(function(e){if(s.editor=e,s.loadingMonaco=!1,s.loadedMonaco=!0,s.editor.updateOptions({fontSize:s.parent.settings.editorFontSize}),s.editor.addAction({id:"save",label:lf("Save"),keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_S],keybindingContext:"!editorReadonly",precondition:"!editorReadonly",contextMenuGroupId:"0_pxtnavigation",contextMenuOrder:.2,run:function(){return Promise.resolve(s.parent.typecheckNow())}}),s.editor.addAction({id:"runSimulator",label:lf("Run Simulator"),keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter],keybindingContext:"!editorReadonly",precondition:"!editorReadonly",contextMenuGroupId:"0_pxtnavigation",contextMenuOrder:.21,run:function(){return Promise.resolve(s.parent.runSimulator())}}),pxt.appTarget.compile&&pxt.appTarget.compile.hasHex&&s.editor.addAction({id:"compileHex",label:lf("Download"),keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyCode.Enter],keybindingContext:"!editorReadonly",precondition:"!editorReadonly",contextMenuGroupId:"0_pxtnavigation",contextMenuOrder:.22,run:function(){return Promise.resolve(s.parent.compile())}}),s.editor.addAction({id:"zoomIn",label:lf("Zoom In"),keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.NUMPAD_ADD,monaco.KeyMod.CtrlCmd|monaco.KeyCode.US_EQUAL],run:function(){return Promise.resolve(s.zoomIn())}}),s.editor.addAction({id:"zoomOut",label:lf("Zoom Out"),keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.NUMPAD_SUBTRACT,monaco.KeyMod.CtrlCmd|monaco.KeyCode.US_MINUS],run:function(){return Promise.resolve(s.zoomOut())}}),pxt.appTarget.appTheme.hasReferenceDocs){var n=s.editor.createContextKey("editorHasReference",!1);s.editor.addAction({id:"reference",label:lf("Help"),keybindingContext:"!editorReadonly && editorHasReference",precondition:"!editorReadonly && editorHasReference",contextMenuGroupId:"navigation",contextMenuOrder:.1,run:function(){return Promise.resolve(s.loadReference())}}),s.editor.onDidChangeCursorPosition(function(e){var t=s.editor.getModel().getWordUntilPosition(e.position);t&&""!=t.word?n.set(!0):n.reset()})}var t=A.isUserLanguageRtl()?monaco.KeyCode.RightArrow:monaco.KeyCode.LeftArrow;s.editor.addAction({id:"jumptoolbox",label:lf("Jump to Toolbox"),keybindings:[monaco.KeyMod.CtrlCmd|t],keybindingContext:"!editorReadonly",precondition:"!editorReadonly",run:function(){return Promise.resolve(s.moveFocusToToolbox())}}),s.editor.onDidLayoutChange(function(e){var t=s.editor.getConfiguration().fontInfo.fontSize;s.parent.settings.editorFontSize!=t&&(s.parent.settings.editorFontSize=t,s.forceDiagnosticsUpdate());var n=document.getElementById("monacoToolboxDiv");n&&(n.style.height=s.editor.getLayoutInfo().contentHeight+"px");var r=document.getElementById("monacoFlyoutWidget");r&&(r.style.height=s.editor.getLayoutInfo().contentHeight+"px")});var r=document.getElementById("monacoEditorInner");r.ondragenter=function(e){e.preventDefault(),e.stopPropagation()},r.ondragover=function(e){e.preventDefault(),e.stopPropagation(),s.dragCurrentPos={x:e.clientX,y:e.clientY},s.onDragBlockThrottled(e)},r.ondrop=function(e){var t=e.dataTransfer.getData("text");if(t){e.preventDefault(),e.stopPropagation();var n=s.editor.getTargetAtClientPoint(e.clientX,e.clientY).position,r=s.editor.getModel(),o=s.editor.getPosition(),i=r.getOffsetAt(o);n||(n=o),-1<(t=1<o.column?"\n"+t:null!=r.getWordUntilPosition(o)&&""!=r.getWordUntilPosition(o).word?t+"\n":t).indexOf("{{}}")?(i+=t.indexOf("{{}}"),t=t.replace("{{}}","")):i+=t.length,s.editor.pushUndoStop(),s.editor.executeEdits("",[{identifier:{major:0,minor:0},range:new monaco.Range(n.lineNumber,n.column,n.lineNumber,n.column),text:t,forceMoveMarkers:!0,isAutoWhitespaceEdit:!0}]),s.beforeCompile(),s.editor.pushUndoStop();var a=r.getPositionAt(i);s.editor.setPosition(a),s.editor.focus()}},s.editor.onDidFocusEditorText(function(){s.hideFlyout()}),s.editorViewZones=[],s.setupToolbox(o)})},e.prototype.undo=function(){this.editor&&this.editor.trigger("keyboard","undo",null)},e.prototype.redo=function(){this.editor&&this.editor.trigger("keyboard","redo",null)},e.prototype.zoomIn=function(){if(this.editor&&!(40<=this.parent.settings.editorFontSize)){var e=this.editor.getConfiguration().fontInfo.fontSize;this.parent.settings.editorFontSize=e+1,this.editor.updateOptions({fontSize:this.parent.settings.editorFontSize}),this.forceDiagnosticsUpdate()}},e.prototype.zoomOut=function(){if(this.editor&&!(this.parent.settings.editorFontSize<=10)){var e=this.editor.getConfiguration().fontInfo.fontSize;this.parent.settings.editorFontSize=e-1,this.editor.updateOptions({fontSize:this.parent.settings.editorFontSize}),this.forceDiagnosticsUpdate()}},e.prototype.loadReference=function(){A.assert(null!=this.editor);var e=this.editor.getPosition(),t=this.editor.getModel().getWordAtPosition(e);if(t){var n=this.editor.getModel().getWordUntilPosition(new monaco.Position(e.lineNumber,t.startColumn-1));if(n&&t){var r=n.word.replace(/([A-Z]+)/g,"-$1"),o=t.word.replace(/([A-Z]+)/g,"-$1");this.parent.setSideDoc("/reference/"+r+"/"+o,!1)}else if(t){o=t.word.replace(/([A-Z]+)/g,"-$1");this.parent.setSideDoc("/reference/"+o,!1)}}},e.prototype.setupToolbox=function(e){var t={getId:function(){return"pxt.flyout.widget"},getDomNode:function(){return this.domNode||(this.domNode=document.createElement("div"),this.domNode.id="monacoFlyoutWidget",this.domNode.style.top="0",this.domNode.className="monacoFlyout",this.domNode.style.display="none",this.domNode.textContent="Flyout"),this.domNode},getPosition:function(){return null}};this.editor.addOverlayWidget(t)},e.prototype.closeFlyout=function(){this.editor&&this.hideFlyout()},e.prototype.hideFlyout=function(){var e=document.getElementById("monacoFlyoutWidget");pxsim.U.clear(e),e.style.display="none",this.toolbox.clearSelection(),this.parent.setState({hideEditorFloats:!1})},e.prototype.updateToolbox=function(){pxt.appTarget.appTheme.monacoToolbox&&!pxt.shell.isReadOnly()&&(this.editor.layout(),this.toolbox.setState({loading:!1,categories:this.getAllCategories(),showSearchBox:this.shouldShowSearch()}))},e.prototype.getId=function(){return"monacoEditor"},e.prototype.getViewState=function(){return this.editor?this.editor.getPosition():{}},e.prototype.getCurrentSource=function(){return this.editor?this.editor.getValue():this.currSource},e.prototype.acceptsFile=function(e){return!0},e.prototype.setValue=function(e){this.editor.setValue(e)},e.prototype.overrideFile=function(e){A.assert(null!=this.editor),this.editor.setValue(e)},e.prototype.loadFileAsync=function(i,a){var s=this,l="text";this.currSource=i.content;var e=document.createElement("div");e.className="ui inverted loading dimmer active";var t=document.getElementById("monacoEditorArea"),n=document.getElementById("monacoEditorInner");return t.insertBefore(e,n),this.loadMonacoAsync().then(function(){if(s.editor){var e=i.getExtension(),t={cpp:"cpp",h:"cpp",json:"json",md:"text",ts:"typescript",js:"javascript",svg:"xml",blocks:"xml",asm:"asm"};t.hasOwnProperty(e)&&(l=t[e]);var n=i.isReadonly()||pxt.shell.isReadOnly();s.editor.updateOptions({readOnly:n});var r="pkg:"+i.getName(),o=monaco.editor.getModels().filter(function(e){return e.uri.toString()==r})[0];o||(o=monaco.editor.createModel(u.mainPkg.readFile(i.getName()),l,monaco.Uri.parse(r))),o&&s.editor.setModel(o),s.defineEditorTheme(a),"typescript"==l&&pxt.appTarget.appTheme.monacoToolbox&&!n?s.beginLoadToolbox(i,a):s.toolbox.hide(),s.currFile=i,s.setValue(i.content),s.setDiagnostics(i,s.snapshotState()),s.fileType="typescript"==l?c.TypeScript:"md"==e?c.Markdown:c.Unknown,s.fileType==c.Markdown&&s.parent.setSideMarkdown(i.content),s.currFile.setForceChangeCallback(function(e,t){e!=t&&(pxt.debug("File changed (from "+e+", to "+t+"). Reloading editor"),s.loadFileAsync(s.currFile))}),i.isReadonly()||o.onDidChangeContent(function(e){s.clearHighlightedStatements();var n=s.editorViewZones||[];s.editor.changeViewZones(function(t){n.forEach(function(e){t.removeZone(e)})}),s.editorViewZones=[],e.isRedoing||e.isUndoing||s.editor.getValue()||s.editor.setValue(" "),s.updateDiagnostics(),s.changeCallback()}),s.resize(),s.hideFlyout(),s.extensions=u.allEditorPkgs().map(function(e){return e.getKsPkg()}).map(function(e){return!!e&&e.config}).filter(function(e){return!!e&&!!e.extension&&/^(file:|github:)/.test(e.installedVersion)}),s.giveFocusOnLoading&&s.editor.focus()}}).finally(function(){t.removeChild(e)})},e.prototype.unloadFileAsync=function(){return this.toolbox.clearSearch(),this.currFile&&this.currFile.getName()=="this/"+pxt.CONFIG_NAME?this.parent.reloadHeaderAsync():Promise.resolve()},e.prototype.beginLoadToolbox=function(t,n){var r=this;this.toolbox.showLoading(),d.getBlocksAsync().then(function(e){r.blockInfo=e,r.nsMap=r.partitionBlocks(),r.updateToolbox(),pxt.vs.syncModels(u.mainPkg,r.extraLibs,t.getName(),t.isReadonly()),r.defineEditorTheme(n,!0)})},e.prototype.snapshotState=function(){return this.editor&&this.editor.getModel()?this.editor.getModel().getLinesContent():null},e.prototype.setViewState=function(e){this.editor&&e&&0!==Object.keys(e).length&&(this.editor.setPosition(e),this.editor.setScrollPosition(e))},e.prototype.setDiagnostics=function(e,t){A.assert(null!=this.editor),A.assert(this.currFile==e),this.diagSnapshot=t,this.forceDiagnosticsUpdate()},e.prototype.updateDiagnostics=function(){this.needsDiagUpdate()&&this.forceDiagnosticsUpdate()},e.prototype.needsDiagUpdate=function(){if(!this.annotationLines)return!1;for(var e=this.editor.getModel().getLinesContent(),t=0,n=this.annotationLines;t<n.length;t++){var r=n[t];if(this.diagSnapshot[r]!==e[r])return!0}return!1},e.prototype.forceDiagnosticsUpdate=function(){if(this.fileType==c.TypeScript){var e=this.currFile,o=[];if(e&&e.diagnostics){for(var i=monaco.editor.getModel(monaco.Uri.parse("pkg:"+e.getName())),t=function(t){var e=function(e){o.push({severity:monaco.Severity.Error,message:e,startLineNumber:t.line+1,startColumn:t.column,endLineNumber:null==t.endLine?n.lineNumber:t.endLine+1,endColumn:null==t.endColumn?n.column:t.endColumn})},n=i.getPositionAt(t.start+t.length);if("string"==typeof t.messageText)e(t.messageText);else for(var r=t.messageText;null!=r.next;)e(r.messageText),r=r.next},n=0,r=e.diagnostics;n<r.length;n++){t(r[n])}monaco.editor.setModelMarkers(i,"typescript",o)}}},e.prototype.highlightStatement=function(e,t){if(e||this.clearHighlightedStatements(),!e||!this.currFile||this.currFile.name!=e.fileName||!this.editor)return!1;var n=this.editor.getModel().getPositionAt(e.start),r=this.editor.getModel().getPositionAt(e.start+e.length);return!(!n||!r)&&(this.highlightDecorations=this.editor.deltaDecorations(this.highlightDecorations,[{range:new monaco.Range(n.lineNumber,n.column,r.lineNumber,r.column),options:{inlineClassName:"highlight-statement"}}]),t&&this.editor.revealPositionInCenter(n),!0)},e.prototype.clearHighlightedStatements=function(){this.editor&&this.highlightDecorations&&this.editor.deltaDecorations(this.highlightDecorations,[])},e.prototype.partitionBlocks=function(){var r={},o=f.allBuiltinBlocksByName(),n=this;function i(e,t){n.subcategoryMap[e]||(n.subcategoryMap[e]={}),n.subcategoryMap[e][t]=!0}if(this.blockInfo.blocks.forEach(function(e){var t=(e.attributes.blockNamespace||e.namespace).split(".")[0];if(t=t.toLowerCase(),!o[e.qName]){r[t]||(r[t]=[]),r[t].push(e);var n=e.attributes.subcategory;e.attributes.advanced?i(t,"more"):n&&i(t,n)}}),f.getPauseUntil()){var e=pxt.appTarget.runtime.pauseUntilBlock.category;r[e]&&r[e].push(f.getPauseUntil())}return r},e.prototype.clearCaches=function(){r.prototype.clearCaches.call(this),f.clearBuiltinBlockCache()},e.prototype.shouldShowSearch=function(){return!this.parent.state.editorState||null==this.parent.state.editorState.searchBar||this.parent.state.editorState.searchBar},e.prototype.getBuiltinCategory=function(e){return f.getBuiltinCategory(e)},e.prototype.isBuiltIn=function(e){return f.isBuiltin(e)},e.prototype.getNamespaceAttrs=function(e){var t=f.getBuiltinCategory(e);return t?(t.attributes.color=pxt.toolbox.getNamespaceColor(t.nameid),t.attributes):this.blockInfo?r.prototype.getNamespaceAttrs.call(this,e):void 0},e.prototype.getNamespaces=function(){var t=this,e=Object.keys(this.nsMap).filter(function(e){return!f.isBuiltin(e)&&!!t.getNamespaceAttrs(e)}),n=pxt.appTarget.runtime||{};return n.loopsBlocks&&!f.loops.removed&&e.push(f.loops.nameid),n.logicBlocks&&!f.logic.removed&&e.push(f.logic.nameid),n.variablesBlocks&&!f.variables.removed&&e.push(f.variables.nameid),n.mathBlocks&&!f.maths.removed&&e.push(f.maths.nameid),n.functionBlocks&&!f.functions.removed&&e.push(f.functions.nameid),n.listsBlocks&&!f.arrays.removed&&e.push(f.arrays.nameid),n.textBlocks&&!f.text.removed&&e.push(f.text.nameid),pxt.appTarget.cloud&&pxt.appTarget.cloud.packages&&e.push(f.extensions.nameid),e.concat(r.prototype.getNamespaces.call(this))},e.prototype.moveFocusToToolbox=function(){this.toolbox&&this.toolbox.focus()},e.prototype.moveFocusToFlyout=function(){var e=document.getElementById("monacoFlyoutWidget").getElementsByClassName("monacoDraggableBlock")[0];e&&e.focus()},e.prototype.getBlocksForCategory=function(e,t){return f.isBuiltin(e)?this.getBuiltinBlocks(e,t):this.filterBlocks(t,this.nsMap[e])},e.prototype.filterBlocks=function(t,e){return e.filter(function(e){return!(e.attributes.blockHidden||e.attributes.deprecated)&&0!=e.name.indexOf("_")&&(!t&&!e.attributes.subcategory&&!e.attributes.advanced||t&&(e.attributes.advanced&&"more"==t||e.attributes.subcategory&&t==e.attributes.subcategory))})},e.prototype.getBuiltinBlocks=function(e,t){var n=f.getBuiltinCategory(e),r=n.blocks||[];return r.forEach(function(e){e.noNamespace=!0}),!n.custom&&this.nsMap[e.toLowerCase()]&&(r=r.concat(this.nsMap[e.toLowerCase()].filter(function(e){return!(e.attributes.blockHidden||e.attributes.deprecated)}))),this.filterBlocks(t,r)},e.prototype.showFlyout=function(e){if(this.editor){var t=e.nameid;this.createMonacoFlyout();"search"!=t?this.abstractShowFlyout(e)?this.parent.setState({hideEditorFloats:!0}):this.closeFlyout():this.showSearchFlyout()}},e.prototype.showFlyoutHeadingLabel=function(e,t,n,r){var o=name||""+(t?A.capitalize(e)+" > "+A.capitalize(t):A.capitalize(e)),i=("blocklyTreeIcon"+(n?(e||n).toLowerCase():"Default")).replace(/\s/g,"");this.getMonacoLabel(o,"monacoFlyoutLabel monacoFlyoutHeading",!0,n,i,r)},e.prototype.showFlyoutGroupLabel=function(e,t,n){this.getMonacoLabel(pxt.Util.rlf("{id:group}"+e),"monacoFlyoutLabel blocklyFlyoutGroup",!1,void 0,void 0,void 0,!0,n)},e.prototype.showFlyoutBlocks=function(e,t,n){var r=this.getMonacoFlyout(),o=this.parent.state.editorState?this.parent.state.editorState.filters:void 0,i=o?o.namespaces&&null!=o.namespaces[e]?o.namespaces[e]:o.defaultState:void 0;this.createMonacoBlocks(this,r,e,n,t,o,i)},e.prototype.showSearchFlyout=function(){var l=this,c=[],e=this.toolbox.getSearchBlocks(),u=(this.getMonacoFlyout(),this);function d(e){var t=u.blockInfo.apis.byQName[e];return(t?t.attributes.color:void 0)||pxt.toolbox.getNamespaceColor(e.toLowerCase())||"255"}e.forEach(function(e){if(e.name){var t=l.blockInfo.apis.byQName[e.name];if(t){if(0==t.name.indexOf("_"))return;a=(t.attributes.blockNamespace||t.namespace).split(".")[0],r=t.attributes.color||d(a);c.push(l.getMonacoBlock(t,a,r))}else pxt.log("couldn't find non builtin search by qName: "+e.name)}else if(e.attributes.blockId==pxtc.PAUSE_UNTIL_TYPE){var n=f.getPauseUntil();if(n){var r=d(a=n.attributes.blockNamespace);c.push(l.getMonacoBlock(n,a,r))}}else{var o=f.allBuiltinBlocks()[e.attributes.blockId];if(o){var i=o[0],a=o[1],s=u.getNamespaceAttrs(a);c.push(l.getMonacoBlock(i,a,s.color))}else pxt.log("couldn't find buildin search qName for block: "+e.attributes.blockId)}}),this.attachMonacoBlockAccessibility(c),0==c.length&&this.getMonacoLabel(lf("No search results..."),"monacoFlyoutLabel")},e.prototype.getMonacoFlyout=function(){return document.getElementById("monacoFlyoutWidget")},e.prototype.createMonacoFlyout=function(){var e=this.getMonacoFlyout();return e.style.left=this.editor.getLayoutInfo().lineNumbersLeft+"px",e.style.height=this.editor.getLayoutInfo().contentHeight+"px",e.style.display="block",e.className="monacoFlyout",e.style.transform="none",pxsim.U.clear(e),e},e.prototype.createMonacoBlocks=function(r,e,o,t,i,a,s){var n=t.sort(function(e,t){var n=(t.attributes.weight||50)+(t.attributes.advanced?0:1e3);return(e.attributes.weight||50)+(e.attributes.advanced?0:1e3)<n?1:-1}).map(function(e){var t,n=a?a.fns&&null!=a.fns[e.name]?a.fns[e.name]:null!=s?s:a.defaultState:void 0;if(t=n==pxt.editor.FilterState.Disabled,n!=pxt.editor.FilterState.Hidden)return r.getMonacoBlock(e,o,i,t)});r.attachMonacoBlockAccessibility(n)},e.prototype.attachMonacoBlockAccessibility=function(o){var i=this,a=this;o.forEach(function(e,n){if(e){var r=A.isUserLanguageRtl();e.onkeydown=function(e){var t=l.keyCodeFromEvent(e);40==t?n<o.length-1&&o[n+1].focus():38==t?0<n&&o[n-1].focus():37==t&&!r||38==t&&r?a.moveFocusToToolbox():27==t?(a.hideFlyout(),a.moveFocusToToolbox()):p.fireClickOnEnter.call(i,e)}}})},e.prototype.getMonacoLabel=function(e,t,n,r,o,i,a,s){var l=this.getMonacoFlyout(),c=this.parent.settings.editorFontSize,u=document.createElement("div");u.className=t;var d=document.createElement("div");if(d.className="monacoFlyoutLabelText",d.style.display="inline-block",d.style.fontSize=c+(n?5:0)+"px",d.style.lineHeight=c+5+"px",d.textContent=e,n){var p=document.createElement("span");p.className="monacoFlyoutHeadingIcon blocklyTreeIcon "+o,p.setAttribute("role","presentation"),p.style.display="inline-block",p.style.color=""+i,p.textContent=r,u.appendChild(p)}if(u.appendChild(d),l.appendChild(u),a){var f=document.createElement("hr");f.className="monacoFlyoutLabelLine",f.align="left",f.style.width=Math.min(s?parseInt(s):d.offsetWidth,350)+"px",u.appendChild(f)}return u},e.prototype.getMonacoBlock=function(e,t,n,r){if(e.attributes.blockBuiltin)pxt.log("ignoring built in block: "+e.attributes.blockId);else{var a=this,o=this.getMonacoFlyout(),s=e.snippet;if(s){var i=document.createElement("div");i.className="monacoBlock "+(r?"monacoDisabledBlock":""),o.appendChild(i);var l=document.createElement("div");l.className="monacoDraggableBlock",l.tabIndex=0,i.appendChild(l);var c=e.attributes.jsDoc,u=e.noNamespace?"":t,d=!1,p=!1,f="",h=e;if(h.attributes.block)if(h.attributes.defaultInstance)u=h.attributes.defaultInstance;else if(h.namespace){var m=this.blockInfo.apis.byQName[h.namespace];if(m.attributes.fixedInstances){var g=A.values(this.blockInfo.apis.byQName);f=h.attributes.blockNamespace||m.namespace||"";var v=g.filter(function(e){return e.kind===pxtc.SymbolKind.Variable&&e.attributes.fixedInstance}),y=v.filter(function(e){return e.retType==m.name}).sort(function(e,t){return e.name.localeCompare(t.name)}),b=v.filter(function(e){return-1!==(n=m.name,g.filter(function(e){return e.extendsTypes}).filter(function(e){return e.extendsTypes.reduce(function(e,t){return e||-1!=t.indexOf(n)},!1)}).reduce(function(e,t){return e.concat(t.extendsTypes)},[])).indexOf(e.retType);var n}).sort(function(e,t){return e.name.localeCompare(t.name)});y.length?u=""+y[0].name:b.length&&(u=""+b[0].name),p=d=!0}else if(h.kind==pxtc.SymbolKind.Method||h.kind==pxtc.SymbolKind.Property){var _=pxt.blocks.compileInfo(h);u=_.thisParameter.definitionName,d=!0}else if(m.kind===pxtc.SymbolKind.Class)return}var w=document.createElement("span");if(e.snippetOnly||(w.className="sig"),w.textContent=s.replace(/^[^(]*\(/,"(").replace(/^\s*\{\{\}\}\n/gm,"").replace(/\{\n\}/g,"{}").replace(/(?:\{\{)|(?:\}\})/g,""),l.title=c,!r){l.draggable=!0,l.onclick=function(e){pxt.tickEvent("monaco.toolbox.itemclick",void 0,{interactiveConsent:!0}),a.hideFlyout();var t=a.editor.getModel(),n=a.editor.getPosition(),r=t.getOffsetAt(n),o=u?u+"."+s:s;o=p?P(f)+"."+o:o,-1<(o=1<n.column?"\n"+o:null!=t.getWordUntilPosition(n)&&""!=t.getWordUntilPosition(n).word?o+"\n":o).indexOf("{{}}")?(r+=o.indexOf("{{}}"),o=o.replace("{{}}","")):r+=o.length,o=o.replace(/(?:\{\{)|(?:\}\})/g,""),a.editor.pushUndoStop(),a.editor.executeEdits("",[{identifier:{major:0,minor:0},range:new monaco.Range(n.lineNumber,n.column,n.lineNumber,n.column),text:o,forceMoveMarkers:!1}]),a.beforeCompile(),a.editor.pushUndoStop();var i=t.getPositionAt(r);a.editor.setPosition(i),a.editor.focus()},l.ondragstart=function(e){pxt.tickEvent("monaco.toolbox.itemdrag",void 0,{interactiveConsent:!0}),setTimeout(function(){o.style.transform="translateX(-9999px)"});var t=u?u+"."+s:s;t=p?P(f)+"."+t:t,e.dataTransfer.setData("text",t)},l.ondragend=function(e){o.style.transform="none",a.hideFlyout()};var k=function(){l.style.backgroundColor=r?""+pxt.toolbox.fadeColor(n||"#ddd",.8,!1):""+pxt.toolbox.fadeColor(n||"#ddd",.1,!1)},x=function(){l.style.backgroundColor=r?""+pxt.toolbox.fadeColor(n||"#ddd",.8,!1):""+n};l.onmouseenter=function(e){k()},l.onmouseleave=function(e){x()},l.onfocus=function(e){k()},l.onblur=function(e){x()}}if(!e.snippetOnly){if(d){var E=document.createElement("span");E.textContent=u+".",E.className="sigPrefix",l.appendChild(E)}var C=document.createElement("span");C.textContent=e.snippetName||e.name,l.appendChild(C)}if(l.appendChild(w),l.style.fontSize=a.parent.settings.editorFontSize+"px",l.style.lineHeight=a.parent.settings.editorFontSize+1+"px",l.style.backgroundColor=r?""+pxt.toolbox.fadeColor(n||"#ddd",.8,!1):""+n,l.style.borderColor=""+pxt.toolbox.fadeColor(n||"#ddd",.2,!1),e.retType&&"boolean"==e.retType){l.style.borderRadius="0px";var S=l.offsetHeight-2,T=a.uniqueBlockId++;l.id="monacoHexBlock"+T,l.className+=" monacoHexBlock";var N=document.createElement("style");N.appendChild(document.createTextNode("\n                    #monacoHexBlock"+T+":before,\n                    #monacoHexBlock"+T+":after {\n                        border-top: "+S/2+"px solid transparent;\n                        border-bottom: "+S/2+"px solid transparent;\n                    }\n                    #monacoHexBlock"+T+":before {\n                        border-right: 17px solid "+n+";\n                    }\n                    #monacoHexBlock"+T+":after {\n                        border-left: 17px solid "+n+";\n                    }\n                ")),i.insertBefore(N,l)}else e.retType&&"void"!=e.retType?l.style.borderRadius="40px":l.style.borderRadius="3px";return l}}},e}(s.ToolboxEditor);function P(e){return/[^\.]+/.exec(e)[0]}n.Editor=m},{"./compiler":11,"./core":13,"./monacoSnippets":34,"./package":36,"./sui":48,"./toolbox":49,"./toolboxeditor":50,react:157}],34:[function(e,t,n){"use strict";var r,o,i;function a(e){switch(e){case n.loops.nameid:return n.loops;case n.logic.nameid:return n.logic;case n.variables.nameid:return n.variables;case n.maths.nameid:return n.maths;case n.text.nameid:return n.text;case n.arrays.nameid:return n.arrays;case n.functions.nameid:return n.functions;case n.extensions.nameid:return n.extensions}}function s(){o||(o={},i={},[n.loops,n.logic,n.maths,n.text,n.arrays,n.variables,n.functions].forEach(function(t){t.blocks.forEach(function(e){e.type||e.snippet&&(e.attributes.blockId&&!o[e.attributes.blockId]&&(o[e.attributes.blockId]=[e,t.nameid]),i[e.name]||(i[e.name]=[e,t.nameid]))})}))}function l(e,t){var n=a(e);if(t&&n&&(0===Object.keys(t).length&&(n.removed=!0),t.name&&(n.name=t.name),t.icon&&(n.attributes.icon=t.icon),void 0!==t.weight&&(n.attributes.weight=t.weight),void 0!==t.advanced&&(n.attributes.advanced=t.advanced),null!=t.groups&&(n.groups=t.groups),t.blocks)){var o=100;n.blocks=t.blocks.map(function(e,t){return e.weight?o=e.weight:o--,r=o,{name:(n=e).name,snippet:n.snippet,snippetName:n.snippetName,snippetOnly:n.snippetOnly,attributes:{blockId:n.blockId,weight:r||n.weight,advanced:n.advanced,jsDoc:n.jsDoc,group:n.group},noNamespace:!0,retType:n.retType,blockXml:n.blockXml};var n,r})}}function c(e){return{name:e.name,icon:e.attributes.icon,color:e.attributes.color,weight:e.attributes.weight,advanced:e.attributes.advanced,blocks:e.blocks?e.blocks.map(function(e){return{name:(t=e).name,snippet:t.snippet,snippetName:t.snippetName,snippetOnly:t.snippetOnly,retType:t.retType,weight:t.attributes.weight,advanced:t.attributes.advanced,jsDoc:t.attributes.jsDoc,group:t.attributes.group,blockXml:t.blockXml,blockId:t.attributes.blockId};var t}):[]}}Object.defineProperty(n,"__esModule",{value:!0}),n.loops={name:lf("{id:category}Loops"),nameid:"loops",blocks:[{name:"loops_while",snippetName:"while",snippet:"while(true) {\n\n}",attributes:{blockId:"device_while",weight:48,jsDoc:lf("Repeat code while condition is true")}},{name:"loops_for",snippetName:"for",snippet:"for(let i = 0; i < 5; i++) {\n\n}",attributes:{blockId:"pxt_controls_for",weight:47,jsDoc:lf("Repeat code a number of times in a loop")}}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,icon:"loops",weight:50.09,paramDefl:{}}},n.logic={name:lf("{id:category}Logic"),nameid:"logic",blocks:[{name:"logic_if",snippetName:"if",snippet:"if (true) {\n\n}",attributes:{blockId:"controls_if",weight:49,jsDoc:lf("Runs code if the condition is true")}},{name:"logic_if_else",snippetName:"if",snippet:"if (true) {\n\n} else {\n\n}",attributes:{blockId:"controls_if",weight:48,jsDoc:lf("Runs code if the condition is true; else run other code")}},{name:"logic_switch",snippetName:"switch",snippet:"switch(item) {\n    case 0:\n        break;\n    case 1:\n        break;\n}",attributes:{jsDoc:lf("Runs different code based on a value")}}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,weight:50.08,icon:"logic",paramDefl:{}}},n.variables={name:lf("{id:category}Variables"),nameid:"variables",blocks:[{name:"var_let",snippetName:"let",snippet:"let item: number",snippetOnly:!0,attributes:{blockId:"variables_set",jsDoc:lf("Declares a variable named 'item'")}},{name:"var_equals",snippetName:"equals",snippet:"item = 0",snippetOnly:!0,attributes:{blockId:"variables_get",jsDoc:lf("Assigns a value to a variable")}},{name:"var_change",snippetName:"change",snippet:"item += 1",snippetOnly:!0,attributes:{blockId:"variables_change",jsDoc:lf("Changes the value of item by 1")}}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,weight:50.07,icon:"variables",paramDefl:{}}},n.maths={name:lf("{id:category}Math"),nameid:"math",blocks:[{name:"Math.plus",snippetName:"plus",snippet:"1 + 1",snippetOnly:!0,attributes:{weight:90,blockId:"math_arithmetic",jsDoc:lf("Adds two numbers together")},retType:"number"},{name:"Math.minus",snippetName:"minus",snippet:"1 - 1",snippetOnly:!0,attributes:{weight:89,blockId:"math_arithmetic",jsDoc:lf("Subtracts the value of one number from another")},retType:"number"},{name:"Math.multiply",snippetName:"multiply",snippet:"1 * 1",snippetOnly:!0,attributes:{weight:88,blockId:"math_arithmetic",jsDoc:lf("Multiplies two numbers together")},retType:"number"},{name:"Math.divide",snippetName:"divide",snippet:"1 / 1",snippetOnly:!0,attributes:{weight:87,blockId:"math_arithmetic",jsDoc:lf("Returns the quotient of one number divided by another")},retType:"number"},{name:"Math.remainder",snippetName:"remainder",snippet:"1 % 2",snippetOnly:!0,attributes:{weight:80,blockId:"math_modulo",jsDoc:lf("Returns the remainder of one number divided by another")},retType:"number"},{name:"Math.max",snippetName:"max",snippet:"Math.max(1, 2)",attributes:{weight:75,blockId:"math_op2",jsDoc:lf("Returns the largest of two numbers")},retType:"number"},{name:"Math.min",snippetName:"min",snippet:"Math.min(1, 2)",attributes:{weight:74,blockId:"math_op2",jsDoc:lf("Returns the smallest of two numbers")},retType:"number"},{name:"Math.abs",snippetName:"abs",snippet:"Math.abs(-1)",attributes:{weight:70,blockId:"math_op3",jsDoc:lf("Returns the absolute value of a number")},retType:"number"},{name:"Math.randomRange",snippetName:"randomRange",snippet:"Math.randomRange(0, 10)",attributes:{weight:65,jsDoc:lf("Returns a random number between min and max")},retType:"number"}],attributes:{callingConvention:ts.pxtc.ir.CallingConvention.Plain,weight:50.06,icon:"math",paramDefl:{}}},n.functions={name:lf("{id:category}Functions"),nameid:"functions",blocks:[{name:"functionDef",snippetName:"function doSomething",snippet:"function doSomething() {\n\n}",attributes:{blockId:"procedures_defnoreturn",jsDoc:lf("Define a function")}},{name:"functionCall",snippetName:"doSomething",snippet:"doSomething()",attributes:{blockId:"procedures_callnoreturn",jsDoc:lf("Call a function")}}],attributes:{advanced:!0,weight:50.08,callingConvention:ts.pxtc.ir.CallingConvention.Plain,icon:"functions",paramDefl:{}}},n.arrays={name:lf("{id:category}Arrays"),nameid:"arrays",custom:!0,blocks:[{name:"array_create",snippetName:"create",snippet:"let "+lf("{id:snippets}list")+" = [1, 2, 3];",snippetOnly:!0,attributes:{weight:100,blockId:"lists_create_with",jsDoc:lf("Creates a new Array")},retType:"array"},{name:"array_length",snippetName:"length",snippet:lf("{id:snippets}list")+".length",snippetOnly:!0,attributes:{weight:99,blockId:"lists_length",jsDoc:lf("Returns the number of values in an Array")},retType:"number"},{name:"array_get",snippetName:"get",snippet:lf("{id:snippets}list")+"[0]",snippetOnly:!0,attributes:{weight:98,blockId:"lists_index_get",jsDoc:lf("Returns the value in the Array at the given index")}},{name:"array_set",snippetName:"set",snippet:lf("{id:snippets}list")+"[0] = 1",snippetOnly:!0,attributes:{weight:97,blockId:"lists_index_set",jsDoc:lf("Overwrites the value in an Array at the given index")}},{name:"array_push",snippetName:"push",snippet:lf("{id:snippets}list")+".push(1)",attributes:{weight:96,blockId:"array_push",jsDoc:lf("Adds a value to the end of an Array")}},{name:"arary_pop",snippetName:"pop",snippet:lf("{id:snippets}list")+".pop()",attributes:{weight:95,blockId:"array_pop",jsDoc:lf("Removes and returns the value at the end of an Array")},retType:"object"},{name:"array_insertAt",snippetName:"insertAt",snippet:lf("{id:snippets}list")+".insertAt(0, 0)",attributes:{weight:50,blockId:"array_insertAt",jsDoc:lf("Inserts a value into the Array at the given index"),advanced:!0}},{name:"array_removeAt",snippetName:"removeAt",snippet:lf("{id:snippets}list")+".removeAt(0)",attributes:{weight:49,blockId:"array_removeat",jsDoc:lf("Removes a value from the Array at the given index and returns it"),advanced:!0},retType:"object"},{name:"array_shift",snippetName:"shift",snippet:lf("{id:snippets}list")+".shift()",attributes:{weight:48,blockId:"array_shift",jsDoc:lf("Removes and returns the value at the front of an Array"),advanced:!0}},{name:"array_unshift",snippetName:"unshift",snippet:lf("{id:snippets}list")+".unshift(0)",attributes:{weight:47,blockId:"array_unshift",jsDoc:lf("Inserts a value at the beginning of an Array"),advanced:!0}},{name:"array_indexOf",snippetName:"indexOf",snippet:'["A", "B", "C"].indexOf("B")',attributes:{weight:46,jsDoc:lf("Returns the first index in the Array that contains the given value or -1 if it does not exist in the Array"),advanced:!0},retType:"number"},{name:"array_reverse",snippetName:"reverse",snippet:lf("{id:snippets}list")+".reverse()",attributes:{weight:45,jsDoc:lf("Reverses the contents of an Array"),advanced:!0}}],attributes:{advanced:!0,weight:50.07,icon:"arrays",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.text={name:lf("{id:category}Text"),nameid:"text",custom:!0,blocks:[{name:"text_length",snippetName:"length",snippet:'"".length',snippetOnly:!0,attributes:{blockId:"text_length",jsDoc:lf("Returns the number of characters in a string")},retType:"number"},{name:"text_concat",snippetName:"concat",snippet:'"" + 5',snippetOnly:!0,attributes:{blockId:"text_join",jsDoc:lf("Combines a string with a number, boolean, string, or other object into one string")},retType:"string"},{name:"text_compare",snippetName:"compare",snippet:'"".compare("")',attributes:{blockId:"string_compare",jsDoc:lf("Compares one string against another alphabetically and returns a number")},retType:"number"},{name:"text_parseInt",snippetName:"parseInt",snippet:'parseInt("5")',attributes:{blockId:"string_parseint",jsDoc:lf("Converts a number written as text into a number")},retType:"number"},{name:"text_substr",snippetName:"substr",snippet:'"".substr(0, 0)',attributes:{blockId:"string_substr",jsDoc:lf("Returns the part of a string starting at a given index with the given length")},retType:"string"},{name:"text_charAt",snippetName:"charAt",snippet:'"".charAt(0)',attributes:{blockId:"string_get",jsDoc:lf("Returns the character at the given index")},retType:"string"}],attributes:{advanced:!0,weight:50.06,icon:"text",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.extensions={name:pxt.toolbox.addPackageTitle(),nameid:"addpackage",blocks:[],custom:!0,customClick:function(e){return e.closeFlyout(),e.showPackageDialog(),!0},attributes:{advanced:!0,weight:-1,icon:"addpackage",callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}},n.getPauseUntil=function(){if(r)return r;var e=pxt.appTarget.runtime&&pxt.appTarget.runtime.pauseUntilBlock;if(e){var t=e.callName||"pauseUntil",n=t+"(() => true)";e.namespace&&(n=e.namespace+"."+n),r={name:"pause_until",snippetName:t,snippet:n,attributes:{blockNamespace:e.category||"loops",weight:null==e.weight?0:e.weight,jsDoc:lf("Pause execution of code until the given boolean expression is true"),advanced:!1},noNamespace:!0}}return r},n.getBuiltinCategory=a,n.isBuiltin=function(e){switch(e){case n.loops.nameid:case n.logic.nameid:case n.variables.nameid:case n.maths.nameid:case n.text.nameid:case n.arrays.nameid:case n.functions.nameid:case n.extensions.nameid:return!0}return!1},n.allBuiltinBlocks=function(){s();var e=this.getPauseUntil();return e&&(o[pxtc.PAUSE_UNTIL_TYPE]=e),o},n.allBuiltinBlocksByName=function(){s();var e=this.getPauseUntil();return e&&(i[pxtc.PAUSE_UNTIL_TYPE]=e),i},n.clearBuiltinBlockCache=function(){i=o=void 0},n.overrideCategory=l,n.overrideToolbox=function(e){l(n.loops.nameid,e.loops),l(n.logic.nameid,e.logic),l(n.variables.nameid,e.variables),l(n.maths.nameid,e.maths),l(n.text.nameid,e.text),l(n.arrays.nameid,e.arrays),l(n.functions.nameid,e.functions)},n.getToolboxDefinition=function(){return{loops:c(a(n.loops.nameid)),logic:c(a(n.logic.nameid)),variables:c(a(n.variables.nameid)),maths:c(a(n.maths.nameid)),text:c(a(n.text.nameid)),arrays:c(a(n.arrays.nameid)),functions:c(a(n.functions.nameid))}}},{}],35:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var l=e("react"),i=e("./data"),c=e("./sui"),u=e("./electron"),d=pxt.Cloud,p=function(n){function e(e){var t=n.call(this,e)||this;return t.delayTime=t.props.delayTime||0,t.doneSleeping=t.sleepDone(),t.bannerType=t.props.bannerType||"default",t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.componentDidMount=function(){var e=this;this.doneSleeping&&(this.timer=setTimeout(function(){return e.show()},this.delayTime))},e.prototype.componentWillUnmount=function(){clearTimeout(this.timer)},e.prototype.sleepDone=function(){if(!this.props.sleepTime)return!0;var e=parseInt(pxt.storage.getLocal("lastBannerClosedTime")||"0");return pxt.Util.nowSeconds()-e>this.props.sleepTime},e.prototype.show=function(){var e=this;pxt.tickEvent("notificationBanner.show"),this.props.displayTime&&(this.timer=setTimeout(function(){return e.hide("automatic")},this.delayTime+this.props.displayTime)),this.props.parent.setBannerVisible(!0),this.render()},e.prototype.hide=function(e){pxt.tickEvent("notificationBanner."+e+"Close"),pxt.storage.setLocal("lastBannerClosedTime",pxt.Util.nowSeconds().toString()),this.props.parent.setBannerVisible(!1),this.render()},e.prototype.handleClick=function(){this.hide("manual"),clearTimeout(this.timer)},e.prototype.renderCore=function(){return this.props.parent.state.bannerVisible&&this.doneSleeping?l.createElement("div",{id:"notificationBanner",className:"ui attached "+this.bannerType+" message"},l.createElement("div",{className:"bannerLeft"},l.createElement("div",{className:"content"},this.props.children)),l.createElement("div",{className:"bannerRight"},l.createElement(c.Icon,{icon:"close",tabIndex:0,onClick:this.handleClick}))):l.createElement("div",null)},e}(i.Component);n.GenericBanner=p;var a=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleBannerClick=t.handleBannerClick.bind(t),t}return o(e,n),e.prototype.handleBannerClick=function(){pxt.tickEvent("banner.linkClicked",void 0,{interactiveConsent:!0})},e.prototype.renderCore=function(){if(pxt.analytics.isCookieBannerVisible())return l.createElement("div",null);var e=pxt.appTarget.appTheme,t=pxt.winrt.isWinRT()||u.isElectron,n="localhost"===location.hostname,r="/"!==location.pathname&&-1===(e.appPathNames||[]).indexOf(location.pathname),o=!n&&t&&r,i=pxt.BrowserUtils.isWindows10(),a=this.getData("target-config:");if(i&&d.isOnline()&&a&&a.windowsStoreLink&&!t&&!pxt.shell.isSandboxMode())return l.createElement(p,{parent:this.props.parent,delayTime:1e4,displayTime:45e3,sleepTime:604800},l.createElement(c.Link,{className:"link",target:"_blank",ariaLabel:lf("View app in the Windows store"),href:a.windowsStoreLink,onClick:this.handleBannerClick},l.createElement("img",{className:"bannerIcon",src:pxt.Util.pathJoin(pxt.webConfig.commitCdnUrl,"images/windowsstorebag.png"),alt:lf("Windows store logo")})),l.createElement(c.Link,{className:"link",target:"_blank",ariaLabel:lf("View app in the Windows store"),href:a.windowsStoreLink,onClick:this.handleBannerClick},lf("Want a faster download? Get the app!")));if(o){var s=pxt.appTarget.appTheme.homeUrl+location.search+location.hash;return l.createElement(p,{parent:this.props.parent,bannerType:"negative"},l.createElement(c.Icon,{icon:"warning circle"}),l.createElement("div",{className:"header"},lf("You are viewing an experimental version of the editor")),l.createElement(c.Link,{className:"link",ariaLabel:lf("Go back to live editor"),href:s},lf("Take me back")))}return l.createElement("div",null)},e}(i.Component);n.NotificationBanner=a},{"./data":15,"./electron":21,"./sui":48,react:157}],36:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("./workspace"),r=e("./data"),a=e("./core"),n=e("./db"),y=pxt.Util,s=new n.Table("hostcache"),l={ts:10,blocks:20,json:30,md:40};o.setupAppTarget=function(e){pxt.setAppTarget(e)};var b=function(){function e(e,t,n){this.epkg=e,this.name=t,this.content=n,this.inSyncWithEditor=!0,this.inSyncWithDisk=!0}return e.prototype.isReadonly=function(){return!this.epkg.header},e.prototype.getName=function(){return this.epkg.getPkgId()+"/"+this.name},e.prototype.getTypeScriptName=function(){return this.epkg.isTopLevel()?this.name:"pxt_modules/"+this.epkg.getPkgId()+"/"+this.name},e.prototype.getExtension=function(){var e=/\.([^\.]+)$/.exec(this.name);return e?e[1]:""},e.prototype.getVirtualFileName=function(){return e.blocksFileNameRx.test(this.name)?this.name.replace(e.blocksFileNameRx,".ts"):e.tsFileNameRx.test(this.name)?this.name.replace(e.tsFileNameRx,".blocks"):void 0},e.prototype.weight=function(){return/^main\./.test(this.name)?5:l.hasOwnProperty(this.getExtension())?l[this.getExtension()]:60},e.prototype.markDirty=function(){this.inSyncWithEditor=!1,this.updateStatus()},e.prototype.updateStatus=function(){r.invalidate("open-meta:"+this.getName())},e.prototype.setContentAsync=function(e,t){var n=this;if(y.assert(void 0!==e),this.inSyncWithEditor=!0,e!=this.content){var r=this.content;return this.inSyncWithDisk=!1,this.content=e,this.updateStatus(),this.epkg.saveFilesAsync().then(function(){n.content==e&&(n.inSyncWithDisk=!0,n.updateStatus()),t&&n.forceChangeCallback&&n.forceChangeCallback(r,e)})}return this.updateStatus(),Promise.resolve()},e.prototype.setForceChangeCallback=function(e){this.forceChangeCallback=e},e.tsFileNameRx=/\.ts$/,e.blocksFileNameRx=/\.blocks$/,e}();o.File=b;var c=function(){function e(e,t){this.ksPkg=e,this.topPkg=t,this.files={},this.onupdate=function(){},this.saveScheduled=!1,this.savingNow=0,e&&"workspace"==e.verProtocol()&&(this.header=i.getHeader(e.verArgument()))}return e.prototype.getTopHeader=function(){return this.topPkg.header},e.prototype.afterMainLoadAsync=function(){return this.assetsPkg?this.assetsPkg.loadAssetsAsync():Promise.resolve()},e.prototype.saveAssetAsync=function(e,t){var n=this;return i.saveAssetAsync(this.header.id,e,t).then(function(){return n.assetsPkg.loadAssetsAsync()})},e.prototype.loadAssetsAsync=function(){var v=this;return"assets"!=this.id?Promise.resolve():i.listAssetsAsync(this.topPkg.header.id).then(function(r){for(var e=y.flatClone(v.files),t=0,n=r;t<n.length;t++){var o=n[t],i=o.name,a=y.lookup(v.files,i);a?delete e[i]:(a=new b(v,i,"File size: "+o.size+"; URL: "+o.url),v.files[i]=a)}for(var s=0,l=Object.keys(e);s<l.length;s++){var c=l[s];delete v.files[c]}for(var u="",d=function(t){var e=r.filter(function(e){return e.name==t.name})[0],n=t.name.replace(/\..*/,"").replace(/[^a-zA-Z0-9_]/g,"_");u+="    export const "+n+' = "'+e.url+'";\n'},p=0,f=v.sortedFiles();p<f.length;p++){d(f[p])}var h="assets.ts",m=v.topPkg.lookupFile(h);if(m||u){u="namespace assets {\n"+u+"}\n";var g=v.topPkg.ksPkg.config;if(g.files.indexOf(h)<0&&(g.files.push(h),v.topPkg.ksPkg.saveConfig()),m)return m.setContentAsync(u);v.topPkg.setFile(h,u)}return Promise.resolve()})},e.prototype.makeTopLevel=function(){(this.topPkg=this).outputPkg=new e(null,this),this.outputPkg.id="built",pxt.appTarget.runtime&&pxt.appTarget.runtime.assetExtensions&&(this.assetsPkg=new e(null,this),this.assetsPkg.id="assets")},e.prototype.updateConfigAsync=function(e){var t=this.files[pxt.CONFIG_NAME];if(t)try{var n=JSON.parse(t.content);return e(n),t.setContentAsync(JSON.stringify(n,null,4)+"\n")}catch(e){}return null},e.prototype.updateDepAsync=function(e){var t=this,n=this.ksPkg.resolveDep(e);if(!n||"github"!=n.verProtocol())return Promise.resolve();var r=pxt.github.parseRepoId(n.verArgument());return pxt.targetConfigAsync().then(function(e){return pxt.github.latestVersionAsync(r.fullName,e.packages)}).then(function(e){r.tag=e}).then(function(){return pxt.github.pkgConfigAsync(r.fullName,r.tag)}).catch(a.handleNetworkError).then(function(e){return t.addDepAsync(e.name,pxt.github.stringifyRepo(r))})},e.prototype.removeDepAsync=function(t){var e=this;return this.updateConfigAsync(function(e){return delete e.dependencies[t]}).then(function(){return e.saveFilesAsync(!0)})},e.prototype.addDepAsync=function(t,n){var e=this;return this.updateConfigAsync(function(e){return e.dependencies[t]=n}).then(function(){return e.saveFilesAsync(!0)})},e.prototype.getKsPkg=function(){return this.ksPkg},e.prototype.getPkgId=function(){return this.ksPkg?this.ksPkg.id:this.id},e.prototype.isTopLevel=function(){return this.ksPkg&&0==this.ksPkg.level},e.prototype.setFile=function(e,t){var n=new b(this,e,t);return this.files[e]=n,r.invalidate("open-meta:"),n},e.prototype.removeFileAsync=function(t){return delete this.files[t],r.invalidate("open-meta:"),this.updateConfigAsync(function(e){return e.files=e.files.filter(function(e){return e!=t})})},e.prototype.setContentAsync=function(e,t){var n=this.files[e];return n||(n=this.setFile(e,t)),n.setContentAsync(t)},e.prototype.setFiles=function(e){var n=this;this.files=y.mapMap(e,function(e,t){return new b(n,e,t)}),r.invalidate("open-meta:")},e.prototype.updateStatus=function(){r.invalidate("pkg-status:"+this.header.id)},e.prototype.savePkgAsync=function(){var e=this;return this.header.blobCurrent?Promise.resolve():(this.savingNow++,this.updateStatus(),i.saveToCloudAsync(this.header).then(function(){e.savingNow--,e.updateStatus(),e.header.blobCurrent||e.scheduleSave()}))},e.prototype.scheduleSave=function(){var e=this;this.saveScheduled||(this.saveScheduled=!0,setTimeout(function(){e.saveScheduled=!1,e.savePkgAsync().done()},5e3))},e.prototype.getAllFiles=function(){var e=y.mapMap(this.files,function(e,t){return t.content});return delete e[pxt.SERIAL_EDITOR_FILE],e},e.prototype.saveFilesAsync=function(e){var t=this;if(!this.header)return Promise.resolve();var n=this.files[pxt.CONFIG_NAME];if(n)try{var r=JSON.parse(n.content);this.header.name=r.name}catch(e){}return i.saveAsync(this.header,this.getAllFiles()).then(function(){return e?t.savePkgAsync():t.scheduleSave()})},e.prototype.sortedFiles=function(){var e=y.values(this.files);return e.sort(function(e,t){return e.weight()-t.weight()||y.strcmp(e.name,t.name)}),e},e.prototype.forEachFile=function(t){this.pkgAndDeps().forEach(function(e){y.values(e.files).forEach(t)})},e.prototype.getMainFile=function(){return this.sortedFiles()[0]},e.prototype.pkgAndDeps=function(){if(this.topPkg!=this)return this.topPkg.pkgAndDeps();var e=y.values(this.ksPkg.deps).map(d);return this.assetsPkg&&e.push(this.assetsPkg),e.push(this.outputPkg),e},e.prototype.filterFiles=function(t){return y.concat(this.pkgAndDeps().map(function(e){return y.values(e.files).filter(t)}))},e.prototype.lookupFile=function(t){return this.filterFiles(function(e){return e.getName()==t})[0]},e}();o.EditorPackage=c;var u=new(function(){function e(){}return e.prototype.readFile=function(e,t){var n=d(e).files[t];return n?n.content:null},e.prototype.writeFile=function(e,t,n,r){if(t!=pxt.CONFIG_NAME&&!r)throw y.oops("trying to write "+e+" / "+t);d(e).files[t].setContentAsync(n,r).done()},e.prototype.getHexInfoAsync=function(e){return pxt.hex.getHexInfoAsync(this,e).catch(a.handleNetworkError)},e.prototype.cacheStoreAsync=function(t,e){return s.forceSetAsync({id:t,val:e}).then(function(){},function(e){pxt.tickEvent("cache.store.failed",{error:e.name}),pxt.log("cache store failed for "+t+": "+e.name)})},e.prototype.cacheGetAsync=function(e){return s.getAsync(e).then(function(e){return e.val},function(e){return null})},e.prototype.downloadPackageAsync=function(e){var t=e.verProtocol(),n=d(e);if("pub"==t)return i.getPublishedScriptAsync(e.verArgument()).then(function(e){return n.setFiles(e)});if("github"==t)return i.getPublishedScriptAsync(e.version()).then(function(e){return n.setFiles(e)});if("workspace"==t)return i.getTextAsync(e.verArgument()).then(function(e){return n.setFiles(e)});if("file"==t){var r=e.verArgument();return"."==r[0]&&(r=(e.parent.verArgument()+"/"+r).replace(/\/+/g,"/").replace(/[^\/]+\/\.\.\//g,"").replace(/\/\.\//g,"/")),i.getTextAsync(r).then(function(e){return n.setFiles(e)})}return"embed"==t?(n.setFiles(pxt.getEmbeddedScript(e.verArgument())),Promise.resolve()):Promise.reject("Cannot download "+e.version()+"; unknown protocol")},e}());function d(e){var t=e._editorPkg;if(t)return t;var n=null;e!=o.mainPkg&&(n=d(o.mainPkg));var r=new c(e,n);return e==o.mainPkg&&r.makeTopLevel(),e._editorPkg=r}function p(){return d(o.mainPkg)}function f(){return d(o.mainPkg).pkgAndDeps()}o.mainPkg=new pxt.MainPackage(u),o.getEditorPkg=d,o.mainEditorPkg=p,o.genFileName=function(e){var t=p().header.name.replace(/[()\\\/.,?*^:<>!;'#$%^&|"\x00-\x1F ]\s/g,"");if(pxt.appTarget.appTheme&&pxt.appTarget.appTheme.fileNameExclusiveFilter){var n=new RegExp(pxt.appTarget.appTheme.fileNameExclusiveFilter,"g");t=t.replace(n,"")}return(pxt.appTarget.nickname||pxt.appTarget.id)+"-"+t+e},o.allEditorPkgs=f,o.notifySyncDone=function(t){0<y.values(o.mainPkg.deps).filter(function(e){return"workspace"==e.verProtocol()&&t.hasOwnProperty(e.verArgument())}).length&&d(o.mainPkg).onupdate()},o.loadPkgAsync=function(e,t){return o.mainPkg=new pxt.MainPackage(u),o.mainPkg._verspec="workspace:"+e,u.downloadPackageAsync(o.mainPkg).catch(a.handleNetworkError).then(function(){return JSON.parse(u.readFile(o.mainPkg,pxt.CONFIG_NAME))}).then(function(e){return e?o.mainPkg.installAllAsync(t).then(function(){return p().afterMainLoadAsync()}).catch(function(e){a.errorNotification(lf("Cannot load package: {0}",e.message))}):Promise.resolve()})},r.mountVirtualApi("open-meta",{getSync:function(e){e=r.stripProtocol(e);var t=d(o.mainPkg).lookupFile(e);if(!t)return{};var n={isReadonly:t.isReadonly(),isSaved:t.inSyncWithEditor&&t.inSyncWithDisk,numErrors:t.numDiagnosticsOverride};return null==n.numErrors&&(n.numErrors=t.diagnostics?t.diagnostics.length:0),n}}),r.mountVirtualApi("open-pkg-meta",{getSync:function(t){t=r.stripProtocol(t);var e=f().filter(function(e){return e.getPkgId()==t})[0];return e&&"built"!=e.getPkgId()?{numErrors:e.sortedFiles().reduce(function(e,t){return e+(t.numDiagnosticsOverride||(t.diagnostics?t.diagnostics.length:0)||0)},0)}:{}}}),r.mountVirtualApi("pkg-status",{getSync:function(t){t=r.stripProtocol(t);var e=f().filter(function(e){return e.header&&e.header.id==t})[0];return e&&e.savingNow?"saving":""}})},{"./core":13,"./data":15,"./db":16,"./workspace":52}],37:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var u=e("react"),s=e("react-dom"),l=e("./data"),d=e("./sui"),c=e("./core"),p=e("./compiler"),f=e("./codecard"),h=e("./carousel"),m=e("./dialogs"),g=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!1},t.showLanguagePicker=t.showLanguagePicker.bind(t),t.showAboutDialog=t.showAboutDialog.bind(t),t.chgHeader=t.chgHeader.bind(t),t.chgGallery=t.chgGallery.bind(t),t.chgCode=t.chgCode.bind(t),t.importProject=t.importProject.bind(t),t.setSelected=t.setSelected.bind(t),t}return o(e,n),e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.visible!=t.visible||this.state.searchFor!=t.searchFor||this.state.selectedCategory!=t.selectedCategory||this.state.selectedIndex!=t.selectedIndex},e.prototype.setSelected=function(e,t){null==t||this.state.selectedCategory==e&&this.state.selectedIndex==t?this.setState({selectedCategory:void 0,selectedIndex:void 0}):this.setState({selectedCategory:e,selectedIndex:t})},e.prototype.componentDidUpdate=function(e,t){this.state.selectedCategory!==t.selectedCategory&&this.ensureSelectedItemVisible()},e.prototype.ensureSelectedItemVisible=function(){var e=this.refs.activeCarousel;if(e){var t=e.getCarouselDOM();this.scrollElementIntoViewIfNeeded(t)}},e.prototype.scrollElementIntoViewIfNeeded=function(e){var t=s.findDOMNode(this.refs.homeContainer),n=e.getBoundingClientRect().top;t.parentElement.scrollTop=t.parentElement.scrollTop+n-30},e.prototype.showLanguagePicker=function(){pxt.tickEvent("projects.langpicker"),this.props.parent.showLanguagePicker()},e.prototype.showAboutDialog=function(){m.showAboutDialogAsync()},e.prototype.chgHeader=function(e){pxt.tickEvent("projects.header"),c.showLoading("changeheader",lf("loading...")),this.props.parent.loadHeaderAsync(e).done(function(){c.hideLoading("changeheader")})},e.prototype.chgGallery=function(e){switch(pxt.tickEvent("projects.gallery",{name:e.name}),e.cardType){case"template":var t=pxt.Util.clone(pxt.appTarget.blocksprj);t.config.dependencies={},this.chgCode(e,!0,t);break;case"example":this.chgCode(e,!0);break;case"codeExample":this.chgCode(e,!1);break;case"side":this.props.parent.newEmptyProject(e.name,e.url);break;case"tutorial":this.props.parent.startTutorial(e.url,e.name);break;default:var n=/^\/#tutorial:([a-z0A-Z0-9\-\/]+)$/.exec(e.url);n?this.props.parent.startTutorial(n[1]):e.youTubeId&&!e.url?window.open("https://youtu.be/"+e.youTubeId,"yt"):/^https:\/\//i.test(e.url)?window.open(e.url,"_blank"):e.url?/^\//i.test(e.url)?window.open(e.url,"_blank"):c.errorNotification(lf("Sorry, the project url looks invalid.")):this.props.parent.newEmptyProject(e.name.toLowerCase())}},e.prototype.chgCode=function(e,t,n){var r=this;c.showLoading("changingcode",lf("loading..."));var o=e.name.toLowerCase().replace(/\W/,"");pxt.gallery.loadExampleAsync(o,e.url).done(function(e){if(e)return n&&(e.prj=n),t?r.props.parent.createProjectAsync(e).then(function(){return p.getBlocksAsync().then(function(e){return p.decompileAsync("main.ts",e)}).then(function(e){pxt.debug("example decompilation: "+e.success),e.success&&r.props.parent.overrideBlocksFile(e.outfiles["main.blocks"])})}).done(function(){c.hideLoading("changingcode")}):(e.tsOnly=!0,r.props.parent.createProjectAsync(e).then(function(){return Promise.delay(500)}).done(function(){return c.hideLoading("changingcode")}));c.hideLoading("changingcode")})},e.prototype.importProject=function(){pxt.tickEvent("projects.importdialog",void 0,{interactiveConsent:!0}),this.props.parent.importProjectDialog()},e.prototype.renderCore=function(){var t=this,e=this.state,n=e.selectedCategory,r=e.selectedIndex,o=pxt.appTarget.appTheme,i=this.getData("target-config:"),a=pxt.Util.userLanguage(),s={};i&&i.localizedGalleries&&i.localizedGalleries[a]&&pxt.Util.jsonCopyFrom(s,i.localizedGalleries[a]),i&&i.galleries&&pxt.Util.jsonCopyFrom(s,i.galleries);var l=!!o.homeScreenHero,c=d.cx(["ui segment bottom attached tab active tabsegment"]);return u.createElement("div",{ref:"homeContainer",className:c},l?u.createElement("div",{className:"ui segment getting-started-segment",style:{backgroundImage:"url("+encodeURI(o.homeScreenHero)+")"}}):void 0,u.createElement("div",{key:"mystuff_gallerysegment",className:"ui segment gallerysegment mystuff-segment"},u.createElement("div",{className:"ui grid equal width padded heading"},u.createElement("div",{className:"column"},u.createElement("h2",{className:"ui header"},lf("My Projects")," ")),u.createElement("div",{className:"column right aligned"},pxt.appTarget.compile||pxt.appTarget.cloud&&pxt.appTarget.cloud.sharing&&pxt.appTarget.cloud.importing?u.createElement(d.Button,{key:"import",icon:"upload",className:"mini import-dialog-btn",textClass:"landscape only",text:lf("Import"),title:lf("Import a project"),onClick:this.importProject}):void 0)),u.createElement("div",{className:"content"},u.createElement(y,{key:"mystuff_carousel",parent:this.props.parent,name:"recent",onClick:this.chgHeader}))),Object.keys(s).map(function(e){return u.createElement("div",{key:e+"_gallerysegment",className:"ui segment gallerysegment"},u.createElement("h2",{className:"ui header heading"},pxt.Util.rlf(e)," "),u.createElement("div",{className:"content"},u.createElement(y,{ref:n==e?"activeCarousel":"",key:e+"_carousel",parent:t.props.parent,name:e,path:s[e],onClick:t.chgGallery,setSelected:t.setSelected,selectedIndex:n==e?r:void 0})))}),o.organizationUrl||o.organizationUrl||o.privacyUrl||o.copyrightText?u.createElement("div",{className:"ui horizontal small divided link list homefooter"},o.organizationUrl&&o.organization?u.createElement("a",{className:"item",target:"_blank",rel:"noopener noreferrer",href:o.organizationUrl},o.organization):void 0,o.selectLanguage?u.createElement(d.Link,{className:"item",text:lf("Language"),onClick:this.showLanguagePicker,onKeyDown:d.fireClickOnEnter}):void 0,o.termsOfUseUrl?u.createElement("a",{target:"_blank",className:"item",href:o.termsOfUseUrl,rel:"noopener noreferrer"},lf("Terms of Use")):void 0,o.privacyUrl?u.createElement("a",{target:"_blank",className:"item",href:o.privacyUrl,rel:"noopener noreferrer"},lf("Privacy")):void 0,pxt.appTarget.versions?u.createElement(d.Link,{className:"item",text:"v"+pxt.appTarget.versions.target,onClick:this.showAboutDialog,onKeyDown:d.fireClickOnEnter}):void 0,o.copyrightText?u.createElement("div",{className:"ui item copyright"},o.copyrightText):void 0):void 0)},e}(l.Component);n.Projects=g;var v=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.brandIconClick=t.brandIconClick.bind(t),t.orgIconClick=t.orgIconClick.bind(t),t}return o(e,n),e.prototype.brandIconClick=function(){pxt.tickEvent("projects.brand",void 0,{interactiveConsent:!0})},e.prototype.orgIconClick=function(){pxt.tickEvent("projects.org",void 0,{interactiveConsent:!0})},e.prototype.shouldComponentUpdate=function(e,t,n){return!1},e.prototype.renderCore=function(){var e=pxt.appTarget.appTheme;return u.createElement("div",{id:"homemenu",className:"ui borderless fixed "+(e.invertedMenu?"inverted":"")+" menu",role:"menubar"},u.createElement("div",{className:"left menu"},u.createElement("a",{href:e.logoUrl,"aria-label":lf("{0} Logo",e.boardName),role:"menuitem",target:"blank",rel:"noopener",className:"ui item logo brand",onClick:this.brandIconClick},e.logo||e.portraitLogo?u.createElement("img",{className:"ui logo "+(e.logo?" portrait hide":""),src:e.logo||e.portraitLogo,alt:lf("{0} Logo",e.boardName)}):u.createElement("span",{className:"name"},e.boardName),e.portraitLogo?u.createElement("img",{className:"ui mini image portrait only",src:e.portraitLogo,alt:lf("{0} Logo",e.boardName)}):null)),u.createElement("div",{className:"ui item"},u.createElement(d.Icon,{icon:"icon home large"})," ",u.createElement("span",null,lf("Home"))),u.createElement("div",{className:"right menu"},u.createElement("a",{href:e.organizationUrl,target:"blank",rel:"noopener",className:"ui item logo organization",onClick:this.orgIconClick},e.organizationWideLogo||e.organizationLogo?u.createElement("img",{className:"ui logo "+(e.organizationWideLogo?" portrait hide":""),src:e.organizationWideLogo||e.organizationLogo,alt:lf("{0} Logo",e.organization)}):u.createElement("span",{className:"name"},e.organization),e.organizationLogo?u.createElement("img",{className:"ui mini image portrait only",src:e.organizationLogo,alt:lf("{0} Logo",e.organization)}):null)),e.betaUrl?u.createElement("a",{href:""+e.betaUrl,className:"ui red mini corner top left attached label betalabel",role:"menuitem"},lf("Beta")):void 0)},e}(l.Component);n.ProjectsMenu=v;var y=function(n){function e(e){var t=n.call(this,e)||this;return t.prevGalleries=[],t.hasFetchErrors=!1,t.state={},t.closeDetail=t.closeDetail.bind(t),t.closeDetailOnEscape=t.closeDetailOnEscape.bind(t),t.reload=t.reload.bind(t),t.newProject=t.newProject.bind(t),t.handleCardClick=t.handleCardClick.bind(t),t}return o(e,n),e.prototype.componentDidMount=function(){this.props.parent.state.header&&this.latestProject&&this.latestProject.element&&this.latestProject.element.focus()},e.prototype.fetchGallery=function(e){var t=this.getData("gallery:"+encodeURIComponent(e));return t&&(t instanceof Error?this.hasFetchErrors=!0:this.prevGalleries=pxt.Util.concat(t.map(function(e){return e.cards}))),this.prevGalleries||[]},e.prototype.fetchLocalData=function(){return this.getData("header:*")},e.prototype.newProject=function(){pxt.tickEvent("projects.new",void 0,{interactiveConsent:!0}),this.props.parent.newProject()},e.prototype.closeDetail=function(){var e=this.props.name;pxt.tickEvent("projects.detail.close"),this.props.setSelected(e,void 0)},e.prototype.getCarouselDOM=function(){return s.findDOMNode(this.refs.carousel)},e.prototype.getDetailDOM=function(){return s.findDOMNode(this.refs.detailView)},e.prototype.closeDetailOnEscape=function(e){c.keyCodeFromEvent(e)==c.ESC_KEY&&(this.closeDetail(),document.removeEventListener("keydown",this.closeDetailOnEscape),e.preventDefault())},e.prototype.componentWillReceiveProps=function(e){null!=e.selectedIndex&&document.addEventListener("keydown",this.closeDetailOnEscape)},e.prototype.reload=function(){this.setState({})},e.prototype.handleCardClick=function(e,t){var n=this.props.name;this.props.setSelected?(pxt.tickEvent("projects.detail.open"),this.props.setSelected(n,t)):this.props.onClick(e)},e.prototype.renderCore=function(){var n=this,e=this.props,r=(e.name,e.path),o=e.selectedIndex;if(r){this.hasFetchErrors=!1;var t=this.fetchGallery(r);return this.hasFetchErrors?u.createElement("div",{className:"ui carouselouter"},u.createElement("div",{role:"button",className:"carouselcontainer",tabIndex:0,onClick:this.reload},u.createElement("p",{className:"ui grey inverted segment"},lf("Oops, please connect to the Internet and try again.")))):u.createElement("div",null,u.createElement(h.Carousel,{ref:"carousel",bleedPercent:20,selectedIndex:o},t.map(function(e,t){return u.createElement(b,{className:"example",key:r+e.name,name:e.name,url:e.url,imageUrl:e.imageUrl,youTubeId:e.youTubeId,label:e.label,labelClass:e.labelClass,scr:e,index:t,onCardClick:n.handleCardClick})})),u.createElement("div",{ref:"detailView",className:"detailview "+(0<t.filter(function(e,t){return t==o}).length?"visible":"")},0<t.filter(function(e,t){return t==o}).length?u.createElement("div",{className:"close"},u.createElement(d.Icon,{tabIndex:0,icon:"remove circle",onClick:this.closeDetail})):void 0,t.filter(function(e,t){return t==o}).map(function(e){return u.createElement(_,{parent:n.props.parent,name:e.name,key:"detail"+e.name,description:e.description,url:e.url,imageUrl:e.imageUrl,largeImageUrl:e.largeImageUrl,youTubeId:e.youTubeId,scr:e,onClick:n.props.onClick,cardType:e.cardType})})))}var i=this.fetchLocalData(),a=pxt.appTarget.appTheme&&!pxt.appTarget.appTheme.hideNewProjectButton;return u.createElement(h.Carousel,{bleedPercent:20},a?u.createElement("div",{role:"button",className:"ui card link newprojectcard",title:lf("Creates a new empty project"),onClick:this.newProject,onKeyDown:d.fireClickOnEnter},u.createElement("div",{className:"content"},u.createElement(d.Icon,{icon:"huge add circle"}),u.createElement("span",{className:"header"},lf("New Project")))):void 0,i.map(function(e,t){return u.createElement(b,{key:"local"+e.id+e.recentUse,cardType:"file",className:"file",name:e.name,time:e.recentUse,url:e.pubId&&e.pubCurrent?"/"+e.pubId:"",scr:e,onCardClick:n.handleCardClick})}))},e}(l.Component);n.ProjectsCarousel=y;var b=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){this.props.onCardClick(this.props.scr,this.props.index)},e.prototype.renderCore=function(){var e=this.props,t=(e.scr,e.onCardClick,e.onClick,a(e,["scr","onCardClick","onClick"]));return u.createElement(f.CodeCardView,i({},t,{onClick:this.handleClick}))},e}(d.StatelessUIElement),_=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleDetailClick=t.handleDetailClick.bind(t),t}return o(e,n),e.prototype.handleDetailClick=function(){var e=this.props,t=e.scr;(0,e.onClick)(t)},e.prototype.renderCore=function(){var e=this.props,t=e.name,n=e.description,r=e.imageUrl,o=e.largeImageUrl,i=e.youTubeId,a=e.cardType,s=o||r||(i?"https://img.youtube.com/vi/"+i+"/0.jpg":void 0),l=lf("Show Instructions");"tutorial"==a?l=lf("Start Tutorial"):"codeExample"==a||"example"==a?l=lf("Open Example"):"template"==a?l=lf("New Project"):i&&(l=lf("Play Video"));var c=[{label:l,onClick:this.handleDetailClick,icon:"",className:"huge positive"}];return u.createElement("div",{className:"ui grid stackable padded"},s?u.createElement("div",{className:"imagewrapper"},u.createElement("div",{className:"image",style:{backgroundImage:'url("'+s+'")'}})):void 0,u.createElement("div",{className:"column eight wide"},u.createElement("div",{className:"segment"},u.createElement("div",{className:"header"}," ",t," "),u.createElement("p",{className:"detail"},n),u.createElement("div",{className:"actions"},c.map(function(e){return u.createElement(d.Button,{key:"action_"+e.label,icon:e.icon,text:e.label,className:"approve "+(e.icon?"icon right labeled":"")+" "+(e.className||""),onClick:e.onClick,onKeyDown:d.fireClickOnEnter})})))))},e}(l.Component);n.ProjectsDetail=_;var w=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!1},t.close=t.close.bind(t),t.importHex=t.importHex.bind(t),t.importUrl=t.importUrl.bind(t),t}return o(e,n),e.prototype.hide=function(){this.setState({visible:!1})},e.prototype.close=function(){this.setState({visible:!1})},e.prototype.show=function(){this.setState({visible:!0})},e.prototype.importHex=function(){pxt.tickEvent("projects.import",void 0,{interactiveConsent:!0}),this.hide(),this.props.parent.showImportFileDialog()},e.prototype.importUrl=function(){pxt.tickEvent("projects.importurl",void 0,{interactiveConsent:!0}),this.hide(),this.props.parent.showImportUrlDialog()},e.prototype.renderCore=function(){var e=this.state.visible;return u.createElement(d.Modal,{isOpen:e,className:"importdialog",size:"small",onClose:this.close,dimmer:!0,closeIcon:!0,header:lf("Import"),closeOnDimmerClick:!0,closeOnDocumentClick:!0,closeOnEscape:!0},u.createElement("div",{className:"ui two cards"},pxt.appTarget.compile?u.createElement(f.CodeCardView,{ariaLabel:lf("Open files from your computer"),role:"button",key:"import",icon:"upload",iconColor:"secondary",name:lf("Import File..."),description:lf("Open files from your computer"),onClick:this.importHex}):void 0,pxt.appTarget.cloud&&pxt.appTarget.cloud.sharing&&pxt.appTarget.cloud.importing?u.createElement(f.CodeCardView,{ariaLabel:lf("Open a shared project URL"),role:"button",key:"importurl",icon:"cloud download",iconColor:"secondary",name:lf("Import URL..."),description:lf("Open a shared project URL"),onClick:this.importUrl}):void 0))},e}(l.Component);n.ImportDialog=w;var k=function(n){function e(e){var t=n.call(this,e)||this;return t.state={visible:!1},t.hide=t.hide.bind(t),t.modalDidOpen=t.modalDidOpen.bind(t),t.handleChange=t.handleChange.bind(t),t.cancel=t.cancel.bind(t),t.save=t.save.bind(t),t}return o(e,n),e.prototype.componentWillReceiveProps=function(e){this.setState({projectName:e.parent.state.projectName})},e.prototype.hide=function(){this.setState({visible:!1})},e.prototype.show=function(){this.setState({visible:!0})},e.prototype.modalDidOpen=function(n){var e=document.getElementById("projectNameInput");e&&(e.setSelectionRange(0,9999),e.onkeydown=function(e){if(c.keyCodeFromEvent(e)===c.ENTER_KEY){e.preventDefault();var t=n.getElementsByClassName("approve positive").item(0);t&&t.click()}})},e.prototype.handleChange=function(e){this.setState({projectName:e})},e.prototype.cancel=function(){pxt.tickEvent("exitandsave.cancel",void 0,{interactiveConsent:!0}),this.hide()},e.prototype.save=function(){var e=this,t=this.state.projectName;this.hide(),this.props.parent.state.projectName!=t&&pxt.tickEvent("exitandsave.projectrename",void 0,{interactiveConsent:!0}),this.props.parent.updateHeaderNameAsync(t).done(function(){e.props.parent.openHome()})},e.prototype.renderCore=function(){var e=this.state,t=e.visible,n=e.projectName,r=[{label:lf("Done"),onclick:this.save,icon:"check",className:"approve positive"},{label:lf("Cancel"),icon:"cancel",onclick:this.cancel}];return u.createElement(d.Modal,{isOpen:t,className:"exitandsave",size:"tiny",onClose:this.hide,dimmer:!0,buttons:r,closeIcon:!0,header:lf("Exit Project"),closeOnDimmerClick:!0,closeOnDocumentClick:!0,closeOnEscape:!0,modalDidOpen:this.modalDidOpen},u.createElement("div",{className:"ui form"},u.createElement(d.Input,{ref:"filenameinput",autoFocus:!0,id:"projectNameInput",label:lf("Project Name"),ariaLabel:lf("Type a name for your project"),value:n||"",onChange:this.handleChange})))},e}(l.Component);n.ExitAndSaveDialog=k},{"./carousel":7,"./codecard":10,"./compiler":11,"./core":13,"./data":15,"./dialogs":18,"./sui":48,react:157,"react-dom":145}],38:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./package"),s=e("./srceditor"),l=e("./sui"),c=e("./core"),u=e("./data"),d=pxt.Util,p=function(n){function e(e){var t=n.call(this,e)||this;return t.parent=e,t.config={},t.changeMade=!1,t.handleNameInputRef=function(e){t.nameInput=e},t.editSettingsText=t.editSettingsText.bind(t),t.save=t.save.bind(t),t.setFileName=t.setFileName.bind(t),t.isUserConfigActive=t.isUserConfigActive.bind(t),t.applyUserConfig=t.applyUserConfig.bind(t),t}return o(e,n),e.prototype.prepare=function(){this.isReady=!0},e.prototype.getId=function(){return"pxtJsonEditor"},e.prototype.hasEditorToolbar=function(){return!1},e.prototype.save=function(){var e=this,t=this.config;if(this.isSaving=!0,!t.name)return c.errorNotification(lf("Please choose a project name. It can't be blank.")),void(this.isSaving=!1);a.mainEditorPkg().lookupFile("this/"+pxt.CONFIG_NAME).setContentAsync(JSON.stringify(this.config,null,4)+"\n").then(function(){a.mainPkg.config.name=t.name,e.parent.setState({projectName:t.name}),e.parent.forceUpdate(),d.nextTick(e.changeCallback),e.isSaving=!1,e.changeMade=!0,e.parent.openPreviousEditor(),c.resetFocus()})},e.prototype.setFileName=function(e){this.config.name=e,this.parent.forceUpdate()},e.prototype.isUserConfigActive=function(e){var t=d.jsonFlatten(this.config.yotta?this.config.yotta.config:{}),n=d.jsonFlatten(e.config);return!Object.keys(n).some(function(e){return null===n[e]?!!t[e]:t[e]!==n[e]})},e.prototype.applyUserConfig=function(e){var t=d.jsonFlatten(this.config.yotta?this.config.yotta.config:{}),n=d.jsonFlatten(e.config);this.isUserConfigActive(e)?Object.keys(n).forEach(function(e){return delete t[e]}):Object.keys(n).forEach(function(e){return t[e]=n[e]}),Object.keys(t).length?(this.config.yotta||(this.config.yotta={}),Object.keys(t).filter(function(e){return null===t[e]}).forEach(function(e){return delete t[e]}),this.config.yotta.config=d.jsonUnFlatten(t)):this.config.yotta&&(delete this.config.yotta.config,Object.keys(this.config.yotta).length||delete this.config.yotta),this.save()},e.prototype.display=function(){var t=this,e=this.config,n=[];return a.allEditorPkgs().map(function(e){return e.getKsPkg()}).filter(function(e){return!!e&&e.isLoaded&&!!e.config&&!!e.config.yotta&&!!e.config.yotta.userConfigs}).forEach(function(e){return n=n.concat(e.config.yotta.userConfigs)}),i.createElement("div",{className:"ui content"},i.createElement("h3",{className:"ui small header"},i.createElement("div",{className:"content"},lf("Project Settings"))),i.createElement("div",{className:"ui segment form text"},i.createElement(l.Input,{ref:this.handleNameInputRef,id:"fileNameInput",label:lf("Name"),ariaLabel:lf("Type a name for your project"),value:e.name||"",onChange:this.setFileName}),n.map(function(e){return i.createElement(f,{key:"userconfig-"+e.description,uc:e,isUserConfigActive:t.isUserConfigActive,applyUserConfig:t.applyUserConfig})}),i.createElement(l.Field,null,i.createElement(l.Button,{text:lf("Save"),className:"green "+(this.isSaving?"disabled":""),onClick:this.save}),i.createElement(l.Button,{text:lf("Edit Settings As text"),onClick:this.editSettingsText}))))},e.prototype.isIncomplete=function(){return!this.changeMade},e.prototype.editSettingsText=function(){this.changeMade=!1,this.parent.editText()},e.prototype.getCurrentSource=function(){return JSON.stringify(this.config,null,4)+"\n"},e.prototype.acceptsFile=function(e){if(e.name!=pxt.CONFIG_NAME)return!1;if(e.isReadonly())return!1;try{JSON.parse(e.content);return!0}catch(e){return!1}},e.prototype.loadFileAsync=function(e){return this.config=JSON.parse(e.content),this.nameInput&&this.nameInput.clearValue(),this.setDiagnostics(e,this.snapshotState()),this.changeMade=!1,Promise.resolve()},e.prototype.unloadFileAsync=function(){return this.changeMade?this.parent.reloadHeaderAsync():Promise.resolve()},e}(s.Editor);n.Editor=p;var f=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.isUserConfigActive=t.isUserConfigActive.bind(t),t.applyUserConfig=t.applyUserConfig.bind(t),t}return o(e,n),e.prototype.isUserConfigActive=function(){var e=this.props;e.applyUserConfig;return(0,e.isUserConfigActive)(e.uc)},e.prototype.applyUserConfig=function(){var e=this.props,t=e.applyUserConfig;e.isUserConfigActive;t(e.uc)},e.prototype.renderCore=function(){var e=this.props.uc,t=this.isUserConfigActive();return i.createElement(l.Checkbox,{key:"userconfig-"+e.description,inputLabel:e.description,checked:t,onChange:this.applyUserConfig})},e}(u.Component)},{"./core":13,"./data":15,"./package":36,"./srceditor":47,"./sui":48,react:157}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./workspace"),i=e("./data");function r(r){return new Promise(function(t,e){var n=new Image;n.src=r,n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0),t(e)},n.onerror=function(){e(new Error(lf("Cannot load image")))}})}n.saveAsync=function(n,r){return pxt.BrowserUtils.loadImageAsync(r).then(function(e){var t=function(e){var t=null;if(e&&0<e.width&&0<e.height){var n=document.createElement("canvas");n.width=305,n.height=200;var r=0,o=0,i=0,a=0;e.height>e.width?(r=0,a=(i=e.width)/n.width*n.height,o=(e.height-a)/2):(o=0,i=(a=e.height)/n.height*n.width,r=(e.width-i)/2),n.getContext("2d").drawImage(e,r,o,i,a,0,0,n.width,n.height),t=n.toDataURL("image/jpeg",85)}return t}(e);return o.saveScreenshotAsync(n,r,t).then(function(){i.invalidate("header:"+n.id),i.invalidate("header:*")})})},n.loadImageAsync=r;var v=1496611453,y=36;function a(e){return r(e).then(function(e){var s=e.getContext("2d").getImageData(0,0,e.width,e.height).data,t=1&s[0]|(1&s[1])<<1|(1&s[2])<<2;if(5<t)return Promise.reject(new Error(lf("Invalid encoded PNG format")));function n(e,t,n){for(var r=0,o=0,i=0,a=(1<<t)-1;o<n.length;)i|=(s[e++]&a)<<r,3==(3&e)&&e++,8<=(r+=t)&&(n[o++]=255&i,i>>=8,r-=8);return e}var r=new Uint8Array(y),o=n(4,t,r),i=pxt.HF2.decodeU32LE(r);if(i[0]!=v)return Promise.reject(new Error(lf("Invalid magic in encoded PNG")));var a=new Uint8Array(i[1]),l=i[2];if(0<l){var c=(e.height-l)*e.width,u=new Uint8Array((3*(c-1)*t>>3)-y);n(o,t,u),a.set(u);var d=new Uint8Array(a.length-u.length);n(4*c,8,d),a.set(d,u.length)}else n(o,t,a);return a})}function s(e,g){return r(e).then(function(e){for(var t=y+g.length,n=3*(e.width*e.height-1),r=1;r<4&&!(8*t<=n*r);)r++;var o=n*r>>3,i=t-o,a=0,s=e.width*e.height*4;if(0<i){var l=3*e.width;a=Math.ceil(i/l);var c=document.createElement("canvas");c.width=e.width,c.height=e.height+a,c.getContext("2d").drawImage(e,0,0),e=c}var u=pxt.HF2.encodeU32LE([v,g.length,a,0,0,0,0,0,0]);function d(e,t,n,r){for(var o=0,i=0,a=r[i++],s=(1<<n)-1,l=!0;l;){var c=a>>o&s,u=8-o;if(u<=n){if(i>=r.length){if(0==u)break;l=!1}c|=(a=r[i++])<<u&s,o=n-u}else o+=n;e[t]=255&(e[t]&~s|c),3==(3&++t)&&(e[t++]=255)}return t}pxt.Util.assert(u.length==y);var p=e.getContext("2d"),f=p.getImageData(0,0,e.width,e.height);d(f.data,0,1,[r]);var h=4;if(h=d(f.data,h,r,u),pxt.Util.assert(0==(3&h)),0==a)h=d(f.data,h,r,g);else{var m=o-u.length;h=d(f.data,h,r,g.slice(0,m)),h=d(f.data,s,8,g.slice(m))}for(h|=3;h<f.data.length;)f.data[h]=255,h+=4;return p.putImageData(f,0,0),e.toDataURL("image/png")})}n.decodeBlobAsync=a,n.encodeBlobAsync=s,n.testBlobEncodeAsync=function(e,t){void 0===t&&(t=1e4);var n=new Uint8Array(t);return pxt.Util.getRandomBuf(n),s(e,n).then(function(e){var t=document.createElement("img");return t.src=e,document.getElementById("msg").appendChild(t),a(e)}).then(function(e){pxt.Util.assert(e.length==n.length);for(var t=0;t<n.length;++t)pxt.Util.assert(e[t]==n[t])})}},{"./data":15,"./workspace":52}],40:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(n,"__esModule",{value:!0});var s=e("react"),l=e("react-dom"),c=e("./data"),u=e("./sui"),d=e("./package"),p=e("./core"),f=e("./codecard"),h=e("./electron"),m=function(n){function e(e){var t=n.call(this,e)||this;return t.prevGhData=[],t.prevUrlData=[],t.state={searchFor:"",visible:!1},t.hide=t.hide.bind(t),t.handleSearchKeyUpdate=t.handleSearchKeyUpdate.bind(t),t.handleSearch=t.handleSearch.bind(t),t.addUrl=t.addUrl.bind(t),t.addBundle=t.addBundle.bind(t),t.installGh=t.installGh.bind(t),t}return o(e,n),e.prototype.hide=function(){this.setState({visible:!1})},e.prototype.showAddPackages=function(){this.setState({visible:!0,searchFor:""})},e.prototype.fetchUrlData=function(){if(!this.state.searchFor)return[];var e=pxt.Cloud.parseScriptId(this.state.searchFor);if(e){var t=this.getData("cloud-search:"+e);t&&(404!==t.statusCode?this.prevUrlData=[t]:this.prevUrlData=[])}else this.prevUrlData=[];return this.prevUrlData},e.prototype.fetchGhData=function(){var e=pxt.appTarget.cloud||{};if(!e.packages)return[];var t=e.githubPackages?this.state.searchFor:void 0,n=void 0;if(!t){var r=this.getData("target-config:");n=r&&r.packages?r.packages.preferredRepos:void 0}var o=t||n?this.getData("gh-search:"+(t||n.join("|"))):null;return o&&(this.prevGhData=o),this.prevGhData||[]},e.prototype.fetchBundled=function(){var t=this.state.searchFor,n=pxt.appTarget.bundledpkgs;return Object.keys(n).filter(function(e){return!/prj$/.test(e)}).map(function(e){return JSON.parse(n[e]["pxt.json"])}).filter(function(e){return!t||-1<e.name.toLowerCase().indexOf(t.toLowerCase())}).filter(function(e){return!d.mainPkg.deps[e.name]})},e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.visible!=t.visible||this.state.searchFor!=t.searchFor},e.prototype.componentDidUpdate=function(){var e=l.findDOMNode(this.refs.searchInput);e&&e.focus()},e.prototype.handleSearchKeyUpdate=function(e){13==e.keyCode&&this.handleSearch()},e.prototype.handleSearch=function(){var e=l.findDOMNode(this.refs.searchInput).value,t=/^\/@(.*)$/.exec(e),n=t&&t[1];if(n)if("devtools"===n&&h.isPxtElectron)h.openDevTools(),this.hide();else{var r=pxt.appTarget.appTheme.homeUrl;/\/$/.test(r)||(r+="/"),n=n.replace(/^\//,""),pxt.winrt.releaseAllDevicesAsync().then(function(){window.location.href=r+n}).done()}else this.setState({searchFor:e})},e.prototype.addUrl=function(e){var t=this;return this.hide(),d.mainEditorPkg().addDepAsync(e.name,"pub:"+e.id).then(function(){return t.props.parent.reloadHeaderAsync()})},e.prototype.addBundle=function(e){pxt.tickEvent("packages.bundled",{name:e.name}),this.hide(),this.addDepIfNoConflict(e,"*").done()},e.prototype.installGh=function(n){var r=this;pxt.tickEvent("packages.github",{name:n.fullName}),this.hide(),p.showLoading("downloadingpackage",lf("downloading package...")),pxt.packagesConfigAsync().then(function(e){return pxt.github.latestVersionAsync(n.fullName,e)}).then(function(t){return pxt.github.pkgConfigAsync(n.fullName,t).then(function(e){return p.hideLoading("downloadingpackage"),e}).then(function(e){return r.addDepIfNoConflict(e,"github:"+n.fullName+"#"+t)})}).catch(p.handleNetworkError).finally(function(){return p.hideLoading("downloadingpackage")})},e.prototype.addDepIfNoConflict=function(o,i){var a=this;return d.mainPkg.findConflictsAsync(o,i).then(function(n){var e=o.core?[]:n.filter(function(e){return d.mainPkg.isPackageInUse(e.pkg0.id)}),t=Promise.resolve(!0);if(e.length)t=t.then(function(){return p.confirmAsync({header:lf("Cannot add {0} package",o.name),hideCancel:!0,agreeLbl:lf("Ok"),body:lf("Remove all the blocks from the {0} package and try again.",e[0].pkg0.id)})}).then(function(){return!1});else if(n.length){var r=1===n.length?lf("Package {0} is incompatible with {1}. Remove {0} and add {1}?",n[0].pkg0.id,o.name):lf("Packages {0} and {1} are incompatible with {2}. Remove them and add {2}?",n.slice(0,-1).map(function(e){return e.pkg0.id}).join(", "),n.slice(-1)[0].pkg0.id,o.name);t=t.then(function(){return p.confirmAsync({header:lf("Some packages will be removed"),agreeLbl:lf("Remove package(s) and add {0}",o.name),agreeClass:"pink",body:r})}).then(function(e){if(0!==e){var t=d.mainEditorPkg();return Promise.all(n.map(function(e){return t.removeDepAsync(e.pkg0.id)})).then(function(){return!0})}return Promise.resolve(!1)})}return t.then(function(e){return e?d.mainEditorPkg().addDepAsync(o.name,i).then(function(){return a.props.parent.reloadHeaderAsync()}):Promise.resolve()})})},e.prototype.renderCore=function(){var t=this;if(!this.state.visible)return s.createElement("div",null);var e=this.fetchBundled(),n=this.fetchGhData(),r=this.fetchUrlData();e.sort(function(e,t){return e.core!=t.core?e.core?-1:1:pxt.Util.strcmp(e.name,t.name)});var o=lf("Extensions");return s.createElement(u.Modal,{isOpen:this.state.visible,dimmer:!0,className:"searchdialog",size:"fullscreen",onClose:this.hide,closeIcon:!0,header:o,helpUrl:"/packages",closeOnDimmerClick:!0,closeOnEscape:!0,description:lf("Add a package to the project")},s.createElement("div",{className:"ui"},s.createElement("div",{className:"ui search"},s.createElement("div",{className:"ui fluid action input",role:"search"},s.createElement("div",{"aria-live":"polite",className:"accessible-hidden"},lf("{0} result matching '{1}'",e.length+n.length+r.length,this.state.searchFor)),s.createElement("input",{autoFocus:!0,ref:"searchInput",type:"text",placeholder:lf("Search or enter project URL..."),onKeyUp:this.handleSearchKeyUpdate}),s.createElement("button",{title:lf("Search"),className:"ui right icon button",onClick:this.handleSearch},s.createElement(u.Icon,{icon:"search"})))),s.createElement("div",{className:"ui cards centered",role:"listbox"},r.map(function(e){return s.createElement(g,{key:"url"+e.id,name:e.name,description:e.description,url:"/"+e.id,scr:e,onCardClick:t.addUrl,role:"link"})}),e.map(function(e){return s.createElement(g,{key:"bundled"+e.name,name:e.name,description:e.description,url:"/"+e.installedVersion,imageUrl:e.icon,scr:e,onCardClick:t.addBundle,label:/\bbeta\b/i.test(e.description)?lf("Beta"):void 0,role:"link"})}),n.filter(function(e){return e.status==pxt.github.GitRepoStatus.Approved}).map(function(e){return s.createElement(g,{name:e.name.replace(/^pxt-/,""),description:e.description,key:"gha"+e.fullName,scr:e,onCardClick:t.installGh,url:"github:"+e.fullName,imageUrl:pxt.github.repoIconUrl(e),label:/\bbeta\b/i.test(e.description)?lf("Beta"):void 0,role:"link"})}),n.filter(function(e){return e.status!=pxt.github.GitRepoStatus.Approved}).map(function(e){return s.createElement(g,{name:e.name.replace(/^pxt-/,""),description:e.description||"",extracontent:lf("User provided package, not endorsed by Microsoft."),key:"ghd"+e.fullName,scr:e,onCardClick:t.installGh,imageUrl:pxt.github.repoIconUrl(e),url:"github:"+e.fullName,role:"link"})})),t.state.searchFor&&!(e.length||n.length||r.length)?s.createElement("div",{className:"ui items"},s.createElement("div",{className:"ui item"},lf("We couldn't find any packages matching '{0}'",this.state.searchFor))):void 0))},e}(c.Component);n.ScriptSearch=m;var g=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){var e=this.props,t=e.scr;(0,e.onCardClick)(t)},e.prototype.renderCore=function(){var e=this.props,t=(e.onCardClick,e.onClick,e.scr,a(e,["onCardClick","onClick","scr"]));return s.createElement(f.CodeCardView,i({},t,{onClick:this.handleClick}))},e}(u.StatelessUIElement)},{"./codecard":10,"./core":13,"./data":15,"./electron":21,"./package":36,"./sui":48,react:157,"react-dom":145}],41:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./core"),s=e("./srceditor"),l=e("./sui"),c=e("./data"),u=pxt.Util,d=function(r){function e(e){var t=r.call(this,e)||this;t.parent=e,t.savedMessageQueue=[],t.maxSavedMessages=1e3,t.charts=[],t.chartIdx=0,t.sourceMap={},t.consoleBuffer="",t.isSim=!0,t.maxConsoleLineLength=255,t.maxConsoleEntries=500,t.active=!0,t.rawDataBuffer="",t.maxBufferLength=1e4,t.csvHeaders=[],t.lineColors=["#f00","#00f","#0f0","#ff0"],t.hcLineColors=["000"],t.currentLineColors=t.lineColors,t.highContrast=!1,t.handleStartPauseRef=function(e){t.startPauseButton=e},t.handleChartRootRef=function(e){t.chartRoot=e},t.handleConsoleRootRef=function(e){t.consoleRoot=e},window.addEventListener("message",t.processEvent.bind(t),!1);var n=pxt.appTarget.serial&&pxt.appTarget.serial.editorTheme;return t.lineColors=n&&n.lineColors||t.lineColors,t.goBack=t.goBack.bind(t),t.toggleRecording=t.toggleRecording.bind(t),t.downloadRaw=t.downloadRaw.bind(t),t.downloadCSV=t.downloadCSV.bind(t),t}return o(e,r),e.prototype.getId=function(){return"serialEditor"},e.prototype.hasHistory=function(){return!1},e.prototype.hasEditorToolbar=function(){return!1},e.prototype.setVisible=function(e){this.parent.state.highContrast!==this.highContrast&&this.setHighContrast(this.parent.state.highContrast),this.isVisible=e,this.isVisible?(this.processQueuedMessages(),this.startRecording()):(this.pauseRecording(),this.clear())},e.prototype.setHighContrast=function(e){e!==this.highContrast&&(this.highContrast=e,this.currentLineColors=e?this.hcLineColors:this.lineColors,this.clear())},e.prototype.acceptsFile=function(e){return e.name===pxt.SERIAL_EDITOR_FILE},e.prototype.setSim=function(e){this.isSim!=e&&(this.isSim=e,this.clear())},e.prototype.loadSmoothieChartsAsync=function(){return this.loadSmoothieChartsPromise||(this.loadSmoothieChartsPromise=pxt.BrowserUtils.loadScriptAsync("smoothie/smoothie_compressed.js")),this.loadSmoothieChartsPromise},e.prototype.saveMessageForLater=function(e){this.savedMessageQueue.push(e),this.savedMessageQueue.length>this.maxSavedMessages&&this.savedMessageQueue.shift()},e.prototype.processQueuedMessages=function(){var t=this;this.savedMessageQueue.forEach(function(e){return t.processMessage(e)}),this.savedMessageQueue=[]},e.prototype.processEvent=function(e){var t=e.data;if("serial"===t.type){var n=t;n.receivedTime=n.receivedTime||u.now(),this.active?this.processMessage(n):this.saveMessageForLater(n)}},e.prototype.processMessage=function(e){var r=this;if(!!e.sim==this.isSim){var t=e.data||"",n=e.id||"?",o=e.receivedTime||u.now();if(this.appendRawData(t),!this.sourceMap[n]){var i=Object.keys(this.sourceMap).length+1;this.sourceMap[n]=lf("source")+i.toString()}var a=this.sourceMap[n];if(/^\s*(-?\d+(\.\d*)?)(\s*,\s*(-?\d+(\.\d*)?))+\s*,?\s*$/.test(t))t.split(/\s*,\s*/).map(function(e){return parseFloat(e)}).filter(function(e){return!isNaN(e)}).forEach(function(e,t){var n="data."+(r.csvHeaders[t]||t);r.appendGraphEntry(a,n,e,o)});else if(/^\s*[\s\w]+(\s*,\s*[\w\s]+)+\s*,?\s*$/.test(t))this.csvHeaders=t.split(/\s*,\s*/).map(function(e){return e.trim()});else{var s=/^\s*(([^:]+):)?\s*(-?\d+(\.\d*)?)/i.exec(t);if(s){var l=s[2]||"",c=parseFloat(s[3]);isNaN(c)||this.appendGraphEntry(a,l,c,o)}}this.appendConsoleEntry(t)}},e.prototype.appendRawData=function(e){this.rawDataBuffer+=e,this.rawDataBuffer.length>this.maxBufferLength&&this.rawDataBuffer.slice(this.rawDataBuffer.length/4)},e.prototype.appendGraphEntry=function(r,o,i,a){var s=this;this.loadSmoothieChartsAsync().then(function(){for(var e=void 0,t=0;t<s.charts.length;++t){var n=s.charts[t];if(n.shouldContain(r,o)){e=n;break}}e||(e=new f(r,o,s.chartIdx,s.currentLineColors),s.chartIdx++,s.charts.push(e),s.chartRoot.appendChild(e.getElement())),e.addPoint(o,i,a)})},e.prototype.appendConsoleEntry=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(this.consoleBuffer+=n,!("\n"!==n&&this.consoleBuffer.length<this.maxConsoleLineLength)){if("\n"===n){var r=this.consoleRoot.lastChild,o=document.createElement("div");if(r&&r.lastChild.textContent==this.consoleBuffer)if(2==r.childNodes.length){var i=parseInt(r.firstChild.textContent);r.firstChild.textContent=(i+1).toString()}else{var a=document.createElement("a");a.className="ui horizontal label",a.textContent="2",r.insertBefore(a,r.lastChild)}else o.appendChild(document.createTextNode(this.consoleBuffer)),this.consoleRoot.appendChild(o)}else{(o=document.createElement("span")).appendChild(document.createTextNode(this.consoleBuffer)),this.consoleRoot.appendChild(o)}this.consoleBuffer="",this.consoleRoot.scrollTop=this.consoleRoot.scrollHeight,this.consoleRoot.childElementCount>this.maxConsoleEntries&&this.consoleRoot.removeChild(this.consoleRoot.firstChild),this.consoleRoot&&0<this.consoleRoot.childElementCount&&(this.chartRoot&&this.chartRoot.classList.remove("noconsole"),this.consoleRoot&&this.consoleRoot.classList.remove("noconsole"))}}},e.prototype.pauseRecording=function(){this.active=!1,this.startPauseButton&&this.startPauseButton.setState({active:this.active}),this.charts.forEach(function(e){return e.stop()})},e.prototype.startRecording=function(){this.active=!0,this.startPauseButton&&this.startPauseButton.setState({active:this.active}),this.charts.forEach(function(e){return e.start()})},e.prototype.toggleRecording=function(){pxt.tickEvent("serial.toggleRecording",void 0,{interactiveConsent:!0}),this.active?this.pauseRecording():this.startRecording()},e.prototype.clearNode=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)},e.prototype.clear=function(){this.chartRoot&&(this.clearNode(this.chartRoot),this.chartRoot.classList.add("noconsole")),this.consoleRoot&&(this.clearNode(this.consoleRoot),this.consoleRoot.classList.add("noconsole")),this.charts=[],this.consoleBuffer="",this.rawDataBuffer="",this.savedMessageQueue=[],this.sourceMap={},this.csvHeaders=[]},e.prototype.isCSV=function(e,t){if(t.length<2)return!1;for(var n=0;n<t.length;++n)if(t[n].length!=e)return!1;for(var r=0;r<e;++r)for(var o=t[0][r][0],i=1;i<t.length;++i)if(t[i][r][0]!=o)return!1;return!0},e.prototype.downloadCSV=function(){var l=this,c=lf("{id:csvseparator}\t"),u=[];this.charts.forEach(function(t){var n=[];Object.keys(t.datas).forEach(function(e){return n.push({name:e,line:t.datas[e]})});var r=n.map(function(e){return e.line}),e=0<r.length?r.map(function(e){return e.length}).reduce(function(e,t){return Math.max(e,t)}):0;if(l.isCSV(e,r)){var o="time ("+t.source+")"+c+n.map(function(e){return e.name}).join(c)+c;u[0]=u[0]?u[0]+c+o:o;for(var i=function(t){var e=(r[0][t][0]-r[0][0][0])/1e3+c+r.map(function(e){return e[t][1]}).join(c)+c;u[t+1]=u[t+1]?u[t+1]+c+e:e},a=0;a<e;++a)i(a)}else{o=n.map(function(e){return"time ("+t.source+")"+c+e.name}).join(c);u[0]=u[0]?u[0]+c+o:o;var s=function(t){var e=r.map(function(e){return t<e.length?""+(e[t][0]-e[0][0])/1e3+c+e[t][1]:c}).join(c);u[t+1]=u[t+1]?u[t+1]+c+e:e};for(a=0;a<e;++a)s(a)}}),u.unshift("sep="+c);var e=u.join("\r\n");a.infoNotification(lf("Exporting data...."));var t=new Date(Date.now()).toString().replace(/[^\d]+/g,"-").replace(/(^-|-$)/g,"");pxt.commands.browserDownloadAsync(e,pxt.appTarget.id+"-"+lf("{id:csvfilename}data")+"-"+t+".csv","text/csv")},e.prototype.downloadRaw=function(){a.infoNotification(lf("Exporting text...."));var e=new Date(Date.now()).toString().replace(/[^\d]+/g,"-").replace(/(^-|-$)/g,"");pxt.commands.browserDownloadAsync(this.rawDataBuffer,pxt.appTarget.id+"-"+lf("{id:csvfilename}console")+"-"+e+".txt","text/plain")},e.prototype.goBack=function(){pxt.tickEvent("serial.backButton",void 0,{interactiveConsent:!0}),this.parent.openPreviousEditor()},e.prototype.display=function(){return i.createElement("div",{id:"serialArea"},i.createElement("div",{id:"serialHeader",className:"ui serialHeader"},i.createElement("div",{className:"leftHeaderWrapper"},i.createElement("div",{className:"leftHeader"},i.createElement(l.Button,{text:lf("Go back"),title:lf("Go back to the previous editor"),className:"icon circular small editorBack left labeled",ariaLabel:lf("Go back"),onClick:this.goBack},i.createElement(l.Icon,{icon:"arrow left"})))),i.createElement("div",{className:"rightHeader"},i.createElement(l.Button,{title:lf("Export data"),className:"ui icon blue button editorExport",ariaLabel:lf("Export data"),onClick:this.downloadCSV},i.createElement(l.Icon,{icon:"download"})),i.createElement(p,{ref:this.handleStartPauseRef,active:this.active,toggle:this.toggleRecording}),i.createElement("span",{className:"ui small header"},this.isSim?lf("Simulator"):lf("Device")))),i.createElement("div",{id:"serialCharts",ref:this.handleChartRootRef}),i.createElement("div",{id:"consoleHeader",className:"ui serialHeader"},i.createElement("div",{className:"rightHeader"},i.createElement(l.Button,{title:lf("Copy text"),className:"ui icon button editorExport",ariaLabel:lf("Copy text"),onClick:this.downloadRaw},i.createElement(l.Icon,{icon:"copy"})))),i.createElement("div",{id:"serialConsole",ref:this.handleConsoleRootRef}))},e.prototype.domUpdate=function(){},e}(s.Editor);n.Editor=d;var p=function(n){function e(e){var t=n.call(this,e)||this;return t.state={active:t.props.active},t}return o(e,n),e.prototype.renderCore=function(){var e=this.props.toggle,t=this.state.active;return i.createElement(l.Button,{title:t?lf("Pause recording"):lf("Start recording"),className:"ui left floated icon button "+(t?"green":"red circular")+" toggleRecord",onClick:e},i.createElement(l.Icon,{icon:t?"pause icon":"circle icon"}))},e}(c.PureComponent);n.StartPauseButton=p;var f=function(){function e(e,t,n,r){var o=this;this.rootElement=document.createElement("div"),this.lines={},this.datas={};var i=pxt.appTarget.serial&&pxt.appTarget.serial.editorTheme,a={interpolation:"bezier",labels:{disabled:!1,fillStyle:"black",fontSize:14},responsive:!0,millisPerPixel:20,grid:{verticalSections:0,borderVisible:!1,millisPerLine:5e3,fillStyle:i&&i.gridFillStyle||"transparent",strokeStyle:i&&i.gridStrokeStyle||"#fff"},tooltip:!0,tooltipFormatter:function(e,t){return o.tooltip(e,t)}};this.lineColors=r,this.chartIdx=n,this.chart=new SmoothieChart(a),this.rootElement.className="ui segment",this.source=e,this.variable=t.replace(/\..*$/,""),this.rootElement.appendChild(this.makeLabel()),this.rootElement.appendChild(this.makeCanvas())}return e.prototype.tooltip=function(e,t){return t.map(function(e){var t=e.series.timeSeries.__name;return"<span>"+(t?t+": ":"")+e.value+"</span>"}).join("<br/>")},e.prototype.getLine=function(e){var t=this.lines[e];if(!t){var n=this.lineColors[this.chartIdx++%this.lineColors.length];this.lines[e]=t=new TimeSeries,t.__name=u.htmlEscape(e.substring(this.variable.length+1)),this.chart.addTimeSeries(t,{strokeStyle:n,lineWidth:3}),this.datas[e]=[]}return t},e.prototype.makeLabel=function(){return this.label=document.createElement("div"),this.label.className="ui orange bottom left attached no-select label seriallabel",this.label.innerText=this.variable||"...",this.label},e.prototype.makeCanvas=function(){var e=document.createElement("canvas");return this.chart.streamTo(e),this.canvas=e},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getElement=function(){return this.rootElement},e.prototype.shouldContain=function(e,t){return this.source==e&&this.variable==t.replace(/\..*$/,"")},e.prototype.addPoint=function(e,t,n){if(this.getLine(e).append(n,t),1==Object.keys(this.lines).length){var r=Number(Math.round(Number(t+"e+2"))+"e-2").toString();this.label.innerText=this.variable?this.variable+": "+r:r}else this.label.innerText=this.variable||"";var o=this.datas[e];o.push([n,t]),4e3<o.length&&o.splice(0,o.length/4)},e.prototype.start=function(){this.chart.start()},e.prototype.stop=function(){this.chart.stop()},e}(),h=function(){function e(){}return e.prototype.canImport=function(e){return"text/plain"==e.type},e.prototype.importAsync=function(e,i){return ts.pxtc.Util.fileReadAsTextAsync(i).then(function(e){if(e){var t=e.split(/\n/g).map(function(e){var t=/^\s*(\d+)>/.exec(e);return t&&(e=e.substr(t[0].length)),{type:"serial",data:e+"\n",id:i.name,receivedTime:t?parseFloat(t[1]):void 0}});if(t.length){var n=u.now(),r=t.filter(function(e){return!!e.receivedTime});if(r.length){var o=r[r.length-1].receivedTime||0;r.forEach(function(e){return e.receivedTime+=n-o})}t.forEach(function(e){return window.postMessage(e,"*")})}}else a.errorNotification(lf("Ooops, could not read file"))})},e}();n.ResourceImporter=h},{"./core":13,"./data":15,"./srceditor":47,"./sui":48,react:157}],42:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),a=e("./sui"),s=function(n){function e(e){var t=n.call(this,e)||this;return t.state={active:!1},t}return o(e,n),e.prototype.componentDidMount=function(){window.addEventListener("message",this.setActive.bind(this))},e.prototype.componentWillUnmount=function(){window.addEventListener("message",this.setActive.bind(this))},e.prototype.setActive=function(e){var t=e.data;this.state.active||"serial"!==t.type||!!t.sim===this.props.isSim&&this.setState({active:!0})},e.prototype.clear=function(){this.setState({active:!1})},e.prototype.renderCore=function(){return this.state.active?i.createElement("div",{role:"button",title:lf("Open console"),className:"ui label circular",tabIndex:0,onClick:this.props.onClick,onKeyDown:a.fireClickOnEnter},i.createElement("div",{className:"detail"},i.createElement("img",{alt:lf("Animated bar chart"),className:"barcharticon",src:pxt.Util.pathJoin(pxt.webConfig.commitCdnUrl,"images/Bars_black.gif")})),i.createElement("span",null,lf("Show console")),i.createElement("div",{className:"detail"},this.props.isSim?lf("Simulator"):lf("Device"))):i.createElement("div",null)},e}(e("./data").Component);n.SerialIndicator=s},{"./data":15,"./sui":48,react:157}],43:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),k=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0});var x,i,E=e("react"),a=e("./data"),C=e("./sui");(i=x=n.ShareMode||(n.ShareMode={}))[i.Code=0]="Code",i[i.Url=1]="Url",i[i.Editor=2]="Editor",i[i.Simulator=3]="Simulator";var s=function(n){function e(e){var t=n.call(this,e)||this;return t.state={currentPubId:void 0,pubCurrent:!1,visible:!1,advancedMenu:!1},t.hide=t.hide.bind(t),t.toggleAdvancedMenu=t.toggleAdvancedMenu.bind(t),t.setAdvancedMode=t.setAdvancedMode.bind(t),t}return o(e,n),e.prototype.hide=function(){this.setState({visible:!1})},e.prototype.show=function(e){this.setState({visible:!0,mode:x.Code,pubCurrent:e.pubCurrent,sharingError:!1})},e.prototype.shouldComponentUpdate=function(e,t,n){return this.state.visible!=t.visible||this.state.advancedMenu!=t.advancedMenu||this.state.mode!=t.mode||this.state.pubCurrent!=t.pubCurrent||this.state.currentPubId!=t.currentPubId||this.state.sharingError!=t.sharingError},e.prototype.toggleAdvancedMenu=function(){var e=!!this.state.advancedMenu;this.setState({advancedMenu:!e})},e.prototype.setAdvancedMode=function(e){this.setState({mode:e})},e.prototype.renderCore=function(){var t=this,e=this.state.visible,n=pxt.appTarget.appTheme,r=this.props.parent.state.header,o=!!this.state.advancedMenu,i=!!n.hideShareEmbed,a=!!n.socialOptions&&!pxt.BrowserUtils.isUwpEdge(),s=!1,l=this.state.mode,c="",u="";if(r){var d=pxt.appTarget.appTheme.shareUrl||"https://makecode.com/";/\/$/.test(d)||(d+="/");var p=pxt.appTarget.appTheme.embedUrl;/\/$/.test(p)||(p+="/");var f=(r?r.pubId:void 0)||this.state.currentPubId,h=pxt.webConfig.verprefix||"";if(s=!!f&&r.pubCurrent){c=""+d+f;var m=""+p+h+"#pub:"+f;switch(l){case x.Code:u=pxt.docs.codeEmbedUrl(""+p+h,r.pubId);break;case x.Editor:u=pxt.docs.embedUrl(""+p+h,"pub",r.pubId);break;case x.Simulator:var g="81.97%";pxt.appTarget.simulator&&(g=(100/pxt.appTarget.simulator.aspectRatio).toPrecision(4)+"%");var v=p+(pxt.webConfig.runUrl||h+"--run").replace(/^\//,"");u=pxt.docs.runUrl(v,g,r.pubId);break;case x.Url:u=m}}}var y=[{mode:x.Code,label:lf("Code")},{mode:x.Editor,label:lf("Editor")},{mode:x.Simulator,label:lf("Simulator")}],b=s?void 0:lf("Publish project"),_=this.props.parent.state.publishing&&!this.state.sharingError,w=[];return b&&w.push({label:b,onclick:function(){pxt.tickEvent("menu.embed.publish",void 0,{interactiveConsent:!0}),t.setState({sharingError:!1}),t.props.parent.anonymousPublishAsync().catch(function(e){t.setState({sharingError:!0})}).done(function(){t.setState({pubCurrent:!0}),t.forceUpdate()}),t.forceUpdate()},icon:"share alternate",loading:_,className:"primary"}),E.createElement(C.Modal,{isOpen:e,className:"sharedialog",size:"small",onClose:this.hide,dimmer:!0,header:lf("Share Project"),closeIcon:!0,buttons:w,closeOnDimmerClick:!0,closeOnDocumentClick:!0,closeOnEscape:!0},E.createElement("div",{className:"ui form"},b?E.createElement("div",null,E.createElement("p",null,lf("You need to publish your project to share it or embed it in other web pages.")+" "+lf("You acknowledge having consent to publish this project.")),this.state.sharingError?E.createElement("p",{className:"ui red inverted segment"},lf("Oops! There was an error. Please ensure you are connected to the Internet and try again.")):void 0):void 0,c&&s?E.createElement("div",null,E.createElement("p",null,lf("Your project is ready! Use the address below to share your projects.")),E.createElement(C.Input,{id:"projectUri",class:"mini",readOnly:!0,lines:1,value:c,copy:!0,selectOnClick:!0,"aria-describedby":"projectUriLabel"}),E.createElement("label",{htmlFor:"projectUri",id:"projectUriLabel",className:"accessible-hidden"},lf("This is the read-only internet address of your project.")),a?E.createElement("div",{className:"social-icons"},E.createElement(S,{url:c,ariaLabel:"Facebook",type:"facebook",heading:lf("Share on Facebook")}),E.createElement(S,{url:c,ariaLabel:"Twitter",type:"twitter",heading:lf("Share on Twitter")})):void 0):void 0,s&&!i?E.createElement("div",null,E.createElement("div",{className:"ui divider"}),E.createElement(C.Link,{icon:"chevron "+(o?"down":"right"),text:lf("Embed"),ariaExpanded:o,onClick:this.toggleAdvancedMenu}),o?E.createElement(C.Menu,{pointing:!0,secondary:!0},y.map(function(e){return E.createElement(T,k({key:"tab"+e.label,onClick:t.setAdvancedMode,currentMode:l},e))})):void 0,o?E.createElement(C.Field,null,E.createElement(C.Input,{id:"embedCode",class:"mini",readOnly:!0,lines:4,value:u,copy:s,disabled:!s,selectOnClick:!0}),E.createElement("label",{htmlFor:"embedCode",id:"embedCodeLabel",className:"accessible-hidden"},lf("This is the read-only code for the selected tab."))):null):void 0))},e}(a.Component);n.ShareEditor=s;var S=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(e){var t=this.props,n=t.type,r=t.url,o=t.heading,i=lf("Check out what I made!"),a=pxt.appTarget.appTheme.socialOptions;a.twitterHandle&&a.orgTwitterHandle?i=lf("Check out what I made with @{0} and @{1}!",a.twitterHandle,a.orgTwitterHandle):a.twitterHandle?i=lf("Check out what I made with @{0}!",a.twitterHandle):a.orgTwitterHandle&&(i=lf("Check out what I made with @{0}!",a.orgTwitterHandle));var s="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(r),l="https://twitter.com/intent/tweet?url="+encodeURIComponent(r)+"&text="+encodeURIComponent(i)+(a.hashtags?"&hashtags="+encodeURIComponent(a.hashtags):"")+(a.related?"&related="+encodeURIComponent(a.related):"");pxt.tickEvent("share."+n,void 0,{interactiveConsent:!0});var c="";switch(n){case"facebook":c=s;break;case"twitter":c=l}C.popupWindow(c,o,600,600),e.preventDefault()},e.prototype.renderCore=function(){var e=this.props,t=e.type,n=e.ariaLabel;return E.createElement("a",{role:"button",className:"ui button large icon "+t,tabIndex:0,"aria-label":n,onClick:this.handleClick},E.createElement(C.Icon,{icon:t}))},e}(a.Component),T=function(n){function e(e){var t=n.call(this,e)||this;return t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){this.props.onClick(this.props.mode)},e.prototype.renderCore=function(){var e=this.props,t=e.label,n=e.mode,r=e.currentMode;return E.createElement(C.MenuItem,{id:"tab"+n,active:r==n,name:t,onClick:this.handleClick})},e}(C.StatelessUIElement)},{"./data":15,"./sui":48,react:157}],44:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var _=e("react"),i=e("./data"),w=e("./sui"),a=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.toggleTrace=t.toggleTrace.bind(t),t.toggleMute=t.toggleMute.bind(t),t.restartSimulator=t.restartSimulator.bind(t),t.openInstructions=t.openInstructions.bind(t),t.startStopSimulator=t.startStopSimulator.bind(t),t.toggleSimulatorFullscreen=t.toggleSimulatorFullscreen.bind(t),t}return o(e,n),e.prototype.openInstructions=function(){pxt.tickEvent("simulator.make",void 0,{interactiveConsent:!0}),this.props.parent.openInstructions()},e.prototype.startStopSimulator=function(){pxt.tickEvent("simulator.startstop",void 0,{interactiveConsent:!0}),this.props.parent.startStopSimulator()},e.prototype.restartSimulator=function(){pxt.tickEvent("simulator.restart",void 0,{interactiveConsent:!0}),this.props.parent.restartSimulator()},e.prototype.toggleTrace=function(){pxt.tickEvent("simulator.trace",void 0,{interactiveConsent:!0}),this.props.parent.toggleTrace()},e.prototype.toggleDebug=function(){pxt.tickEvent("simulator.debug",void 0,{interactiveConsent:!0}),this.props.parent.toggleDebugging()},e.prototype.toggleMute=function(){pxt.tickEvent("simulator.mute",{view:"computer",muteTo:""+!this.props.parent.state.mute},{interactiveConsent:!0}),this.props.parent.toggleMute()},e.prototype.toggleSimulatorFullscreen=function(){pxt.tickEvent("simulator.fullscreen",{view:"computer",fullScreenTo:""+!this.props.parent.state.fullscreen},{interactiveConsent:!0}),this.props.parent.toggleSimulatorFullscreen()},e.prototype.renderCore=function(){var e=this.props.parent.state;if(!e.currFile)return _.createElement("div",null);var t=pxt.appTarget.appTheme,n=pxt.appTarget.simulator,r=!pxt.shell.isSandboxMode()&&e.showParts&&n&&(n.instructions||n.parts&&pxt.options.debug),o=e.running,i=e.fullscreen,a=e.mute,s=!!e.tutorialOptions&&!!e.tutorialOptions.tutorial,l=!n.hideRestart,c=!!n.enableTrace,u=this.props.parent.state.tracing,d=u?lf("Disable Slow-Mo"):lf("Slow-Mo"),p=e.debugging,f=!s&&!n.hideFullscreen,h=!s&&t.hasAudio;if(n.headless)return _.createElement("div",null);var m=o?lf("Stop the simulator"):lf("Start the simulator"),g=lf("Open assembly instructions"),v=lf("Restart the simulator"),y=(p?lf("Disable Debugging"):lf("Debugging"),i?lf("Exit fullscreen mode"):lf("Launch in fullscreen")),b=a?lf("Unmute audio"):lf("Mute audio");return _.createElement("aside",{className:"ui item grid centered portrait hide simtoolbar",role:"complementary","aria-label":lf("Simulator toolbar")},_.createElement("div",{className:"ui icon tiny buttons "+(i?"massive":""),style:{padding:"0"}},r?_.createElement(w.Button,{disabled:p,icon:"configure",className:"secondary",title:g,onClick:this.openInstructions}):void 0,_.createElement(w.Button,{disabled:p,key:"runbtn",className:"play-button "+(o?"stop":"play"),icon:o?"stop":"play green",title:m,onClick:this.startStopSimulator}),l?_.createElement(w.Button,{disabled:p,key:"restartbtn",className:"restart-button",icon:"refresh",title:v,onClick:this.restartSimulator}):void 0,c?_.createElement(w.Button,{key:"trace",className:"trace-button "+(u?"orange":""),icon:"xicon turtle",title:d,onClick:this.toggleTrace}):void 0),_.createElement("div",{className:"ui icon tiny buttons "+(i?"massive":""),style:{padding:"0"}},h?_.createElement(w.Button,{key:"mutebtn",className:"mute-button "+(a?"red":""),icon:a?"volume off":"volume up",title:b,onClick:this.toggleMute}):void 0,f?_.createElement(w.Button,{key:"fullscreenbtn",className:"fullscreen-button",icon:"xicon "+(i?"fullscreencollapse":"fullscreen"),title:y,onClick:this.toggleSimulatorFullscreen}):void 0))},e}(i.Component);n.SimulatorToolbar=a},{"./data":15,"./sui":48,react:157}],45:[function(e,t,d){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var i=e("./core"),a=pxt.U;d.FAST_TRACE_INTERVAL=100,d.SLOW_TRACE_INTERVAL=500;var s,p,l,c={},n=!1;function f(e,t){pxt.appTarget.appTheme.allowParentController&&pxt.BrowserUtils.isIFrame()&&pxt.editor.postHostMessageAsync({type:"pxthost",action:"simevent",subtype:e,exception:t})}function r(){pxsim.U.addClass(d.driver.container,o()),n=!0}function u(e){d.driver&&(h(),d.driver.stop(e),pxsim.U.removeChildren(l))}function h(){pxsim.U.removeClass(d.driver.container,o()),n=!1}function o(){return pxt.appTarget.simulator&&pxt.appTarget.simulator.invalidatedClass?pxt.appTarget.simulator.invalidatedClass:"sepia"}d.setTranslations=function(e){d.simTranslations=e},d.init=function(e,o){if(e){pxsim.U.clear(e);var t=document.createElement("div");t.id="simulators",t.className="simulator",e.appendChild(t);var n=document.createElement("div");n.id="debugger",n.className="ui item landscape only",e.appendChild(n),l=document.getElementById("debugger");var r={revealElement:function(e){if(!pxt.options.light){var t=pxt.appTarget.appTheme.simAnimationEnter||"fly right in";e.style.animationDuration="500ms";var n=t+" visible transition animating";pxsim.U.addClass(e,n),Promise.resolve().delay(500).then(function(){pxsim.U.removeClass(e,n),e.style.animationDuration=""})}},removeElement:function(e,t){if(pxt.appTarget.simulator.headless)pxsim.U.addClass(e,"simHeadless"),t&&t();else{if(pxt.options.light)return t&&t(),void pxsim.U.remove(e);var n=pxt.appTarget.appTheme.simAnimationExit||"fly right out";e.style.animationDuration="500ms";var r=n+" visible transition animating";pxsim.U.addClass(e,r),Promise.resolve().delay(500).then(function(){pxsim.U.removeClass(e,"animating"),e.style.animationDuration="",t&&t(),pxsim.U.remove(e)})}},unhideElement:function(e){pxsim.U.removeClass(e,"simHeadless")},onDebuggerBreakpoint:function(e){var t=!1;if(s)for(var n=0,r=e.breakpointId;!t;){if(r){var o=p.breakpoints[r];t=s.highlightStatement(o,e)}if(!t){n++;var i=e.stackframes?e.stackframes[n]:void 0;if(!i)break;r=i.breakpointId}}e.exceptionMessage||!s||t?(!t&&e.exceptionMessage&&(pxt.debug("runtime error: "+e.exceptionMessage),pxt.debug(e.exceptionStack),s&&s.orphanException(e)),f("stopped",e.exceptionMessage)):d.driver.resume(pxsim.SimulatorDebuggerCommand.StepInto)},onTraceMessage:function(e){var t=p.breakpoints[e.breakpointId];s&&s.highlightStatement(t)},onDebuggerWarning:function(e){for(var t=0,n=e.breakpointIds;t<n.length;t++){var r=n[t],o=p.breakpoints[r];if(o&&!a.startsWith("pxt_modules/",o.fileName)){s&&s.highlightStatement(o);break}}},onDebuggerResume:function(){f("resumed"),s&&s.highlightStatement(null)},onStateChanged:function(e){e===pxsim.SimulatorState.Stopped?f("stopped"):e===pxsim.SimulatorState.Running&&this.onDebuggerResume(),o.onStateChanged(e)},onSimulatorCommand:function(t){switch(t.command){case"restart":o.restartSimulator();break;case"reload":u(!0),o.restartSimulator();break;case"modal":if(u(),!(pxt.shell.isSandboxMode()||t.displayOnceId&&c[t.displayOnceId])){var e={header:t.header,body:t.body,size:"large",copyable:t.copyable,disagreeLbl:lf("Close"),modalContext:t.modalContext},n=pxt.appTarget.simulator.trustedUrls,r=t.linkButtonHref&&n&&-1!==n.indexOf(t.linkButtonHref);r?e.agreeLbl=t.linkButtonLabel:e.hideAgree=!0,c[t.displayOnceId]=!0,i.confirmAsync(e).then(function(e){r&&1==e&&window.open(t.linkButtonHref,"_blank")}).done()}}},onTopLevelCodeEnd:function(){f("toplevelfinished")},stoppedClass:function(){if(pxt.appTarget.simulator&&pxt.appTarget.simulator.stoppedClass)return pxt.appTarget.simulator.stoppedClass}()};d.driver=new pxsim.SimulatorDriver(document.getElementById("simulators"),r),s=o}},d.setState=function(e,t){s&&s.editor!=e&&(s.editor=e,s.highlightStatement(null)),t},d.makeDirty=r,d.isDirty=function(){return n},d.run=function(e,t,n,r,o,i){h();var a=n.outfiles[pxtc.BINARY_JS],s=pxt.appTarget.simulator.boardDefinition,l=pxtc.computeUsedParts(n,!0),c=n.usedArguments;p=n;var u={boardDefinition:s,mute:r,parts:l,debug:t,fnArgs:c,highContrast:o,light:i,aspectRatio:l.length?pxt.appTarget.simulator.partsAspectRatio:pxt.appTarget.simulator.aspectRatio,partDefinitions:e.computePartDefinitions(l),cdnUrl:pxt.webConfig.commitCdnUrl,localizedStrings:d.simTranslations,refCountingDebug:pxt.options.debug,version:e.version()};f("started"),d.driver.run(a,u)},d.mute=function(e){d.driver.mute(e),pxsim.U.removeChildren(l)},d.stop=u,d.hide=function(e){pxt.appTarget.simulator.headless||r(),d.driver.hide(e),pxsim.U.removeChildren(l)},d.unhide=function(){d.driver.unhide()},d.setTraceInterval=function(e){d.driver.setTraceInterval(e)},d.proxy=function(e){d.driver&&(d.driver.postMessage(e),pxsim.U.removeChildren(l))},d.dbgPauseResume=function(){d.driver.state==pxsim.SimulatorState.Paused?d.driver.resume(pxsim.SimulatorDebuggerCommand.Resume):d.driver.state==pxsim.SimulatorState.Running&&d.driver.resume(pxsim.SimulatorDebuggerCommand.Pause)},d.dbgStepOver=function(){d.driver.state==pxsim.SimulatorState.Paused&&d.driver.resume(pxsim.SimulatorDebuggerCommand.StepOver)},d.dbgStepInto=function(){d.driver.state==pxsim.SimulatorState.Paused&&d.driver.resume(pxsim.SimulatorDebuggerCommand.StepInto)},d.dbgStepOut=function(){d.driver.state==pxsim.SimulatorState.Paused&&d.driver.resume(pxsim.SimulatorDebuggerCommand.StepOut)}},{"./core":13}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./audio"),i={},r=.2;function a(e){var t=(pxt.appTarget.appTheme.sounds||{})[e];if(pxt.options.light||!t)return Promise.resolve(void 0);var n=i[t];if(n)return Promise.resolve(n);var r=pxt.webConfig.commitCdnUrl+"sounds/"+t;return pxt.Util.requestAsync({url:r,headers:{Accept:"audio/"+t.slice(-3)},responseArrayBuffer:!0}).then(function(e){return o.loadAsync(e.buffer)}).then(function(e){return i[t]=e})}function s(e){pxt.options.light||a(e).done(function(e){return e?o.play(e,r):void 0})}n.tutorialStep=function(){s("tutorialStep")},n.tutorialNext=function(){s("tutorialNext")},n.click=function(){s("click")},n.initTutorial=function(){pxt.options.light||Promise.all([a("tutorialStep"),a("tutorialNext"),a("click")]).done()}},{"./audio":4}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("react"),o=function(){function e(e){this.parent=e,this.isVisible=!1,this.changeCallback=function(){},this.isReady=!1}return e.prototype.setVisible=function(e){this.isVisible=e},e.prototype.acceptsFile=function(e){return!1},e.prototype.getViewState=function(){return{}},e.prototype.getCurrentSource=function(){return this.currSource},e.prototype.getId=function(){return"editor"},e.prototype.displayOuter=function(){return r.createElement("div",{className:"full-abs",key:this.getId(),id:this.getId(),style:{display:this.isVisible?"block":"none"}},this.display())},e.prototype.display=function(){return null},e.prototype.beforeCompile=function(){},e.prototype.prepare=function(){this.isReady=!0},e.prototype.resize=function(e){},e.prototype.snapshotState=function(){return null},e.prototype.unloadFileAsync=function(){return Promise.resolve()},e.prototype.isIncomplete=function(){return!1},e.prototype.hasHistory=function(){return!0},e.prototype.hasUndo=function(){return!0},e.prototype.hasRedo=function(){return!0},e.prototype.undo=function(){},e.prototype.redo=function(){},e.prototype.zoomIn=function(){},e.prototype.zoomOut=function(){},e.prototype.setScale=function(e){},e.prototype.closeFlyout=function(){},e.prototype.loadFileAsync=function(e,t){return this.currSource=e.content,this.setDiagnostics(e,this.snapshotState()),Promise.resolve()},e.prototype.domUpdate=function(){},e.prototype.setDiagnostics=function(e,t){},e.prototype.setViewState=function(e){},e.prototype.saveToTypeScript=function(){return Promise.resolve("")},e.prototype.highlightStatement=function(e,t){return!1},e.prototype.clearHighlightedStatements=function(){},e.prototype.setHighContrast=function(e){},e.prototype.hasEditorToolbar=function(){return!0},e.prototype.filterToolbox=function(e,t){},e.prototype.insertBreakpoint=function(){},e}();n.Editor=o},{react:157}],48:[function(e,t,A){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),P=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},O=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(A,"__esModule",{value:!0});var I=e("react"),i=e("react-dom"),R=e("react-modal"),n=e("./data"),D=e("./core");function j(e){return e.filter(function(e){return!!e&&""!=e.trim()}).join(" ")}function a(e,t,n){return void 0===n&&(n=!1),e+" "+(n?"":t.icon&&t.text?"icon icon-and-text":t.icon?"icon":"")+" "+(t.className||"")}function p(e){var t=[e.icon?I.createElement(A.Icon,{key:"iconkey",icon:e.icon+(e.text?" icon-and-text ":"")+(e.iconClass?" "+e.iconClass:"")}):null,e.text?I.createElement("span",{key:"textkey",className:"ui text"+(e.textClass?" "+e.textClass:"")},e.text):null];return e.icon&&e.rightIcon&&(t=t.reverse()),t}function F(e){var t=D.keyCodeFromEvent(e);t!==D.ENTER_KEY&&t!==D.SPACE_KEY||(e.preventDefault(),e.currentTarget.click())}A.appElement=document.getElementById("content"),A.cx=j,A.popupWindow=function(e,t,n,r){return window.open(e,t,"resizable=no, copyhistory=no, width="+n+", height="+r+", top="+(screen.height/2-r/2)+", left="+(screen.width/2-n/2))},A.fireClickOnEnter=F;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(n.Component);A.UIElement=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(n.PureComponent);A.StatelessUIElement=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.show=function(){this.setState({open:!0})},t.prototype.hide=function(){this.setState({open:!1})},t.prototype.toggle=function(){this.setState({open:!this.state.open})},t.prototype.focus=function(e){this.setActive(e),e.focus()},t.prototype.blur=function(e){this.isActive(e)&&e.classList.remove("active")},t.prototype.setActive=function(e){this.isActive(e)||e.classList.add("active")},t.prototype.isActive=function(e){return e&&e.classList.contains("active")},t.prototype.selectFirstElementOnDown=function(e,t){var n=D.keyCodeFromEvent(e);n===D.SPACE_KEY||n===D.ENTER_KEY?(e.preventDefault(),this.toggle()):n===D.ESC_KEY?(e.preventDefault(),this.hide()):40===n?(e.preventDefault(),this.state.open||this.show(),t&&this.focus(t)):n===D.TAB_KEY&&this.hide()},t.prototype.navigateToNextElement=function(e,t,n){var r=D.keyCodeFromEvent(e),o=e.currentTarget;if(40===r||!e.shiftKey&&r===D.TAB_KEY)e.preventDefault(),n&&this.focus(n);else if(38===r||e.shiftKey&&r===D.TAB_KEY)e.preventDefault(),t&&this.focus(t);else if(r===D.ESC_KEY){e.preventDefault();var i=this.refs.dropdown;this.hide(),i.focus()}else r!==D.SPACE_KEY&&r!==D.ENTER_KEY||(e.preventDefault(),o.click())},t.prototype.componentDidMount=function(){for(var o=this,e=this.props.openOnMouseOver,i=this.refs.dropdown,a=this.refs.menu,s=[],t=0;t<a.childNodes.length;t++){var n=a.childNodes[t];n.classList.contains("divider")||(n.classList.contains("mobile")&&!pxt.BrowserUtils.isMobile()||s.push(n))}var r=function(e){var t=0<e?s[e-1]:i,n=s[e],r=e<s.length?s[e+1]:void 0;n.addEventListener("keydown",function(e){o.navigateToNextElement(e,t,r),e.stopPropagation()}),n.addEventListener("focus",function(e){o.setActive(n)}),n.addEventListener("blur",function(e){o.blur(n),setTimeout(function(){0==a.querySelectorAll(".item.active").length&&o.hide()},10)})};for(t=0;t<s.length;t++)r(t);var l=0<s.length?s[0]:void 0;i.addEventListener("keydown",function(e){o.selectFirstElementOnDown(e,l)}),i.addEventListener("blur",function(e){setTimeout(function(){0==a.querySelectorAll(".item.active").length&&o.hide()},1)}),e&&i.addEventListener("mouseover",function(e){i.focus(),o.show()}),i.addEventListener("click",function(e){o.toggle()})},t.prototype.componentDidUpdate=function(e,t){for(var n=this.refs.menu,r=0;r<n.childNodes.length;r++){var o=n.childNodes[r];this.blur(o)}if(t.open!=this.state.open&&this.state.open){var i=this.refs.dropdown,a=this.refs.menu;i.offsetLeft+a.offsetWidth>window.innerWidth&&pxsim.U.addClass(a,"left")}},t.prototype.renderCore=function(){var e=this.props,t=e.disabled,n=e.title,r=e.role,o=e.icon,i=e.className,a=e.children,s=this.state.open,l={role:r||"combobox","aria-disabled":t,"aria-haspopup":!!t,"aria-expanded":s},c={role:"menu","aria-label":lf("Dropdown menu {0}",n),"aria-hidden":!!s},u=j(["ui",s?"active visible":"","dropdown",o?"icon":"",i]),d=j(["menu",s?"visible transition":""]);return I.createElement("div",P({ref:"dropdown",title:n},l,{className:u,tabIndex:0}),p(this.props),I.createElement("div",P({ref:"menu"},c,{className:d,role:"menu"}),a))},t}(s);A.DropdownMenu=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){var e=this.props,t=e.text,n=e.title,r=e.ariaLabel;return I.createElement("div",{className:a("ui item link",this.props,!0)+" "+(this.props.active?"active":""),role:this.props.role,"aria-label":r||n||t,title:n||t,tabIndex:this.props.tabIndex||0,key:this.props.value,"data-value":this.props.value,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown||F},p(this.props),this.props.children)},t}(n.Component);A.Item=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){return I.createElement("div",{className:a("ui item link",this.props,!0)+" "+(this.props.active?"active":""),role:this.props.role,title:this.props.title||this.props.text,tabIndex:this.props.tabIndex||0,key:this.props.value,"data-value":this.props.value,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown||F},I.createElement("div",{className:a("ui button",this.props)},p(this.props),this.props.children))},t}(s);A.ButtonMenuItem=d;var M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){var e=this.props,t=(e.labelPosition,j(["ui button",e.color,e.size,e.disabled?"disabled":"",a("ui button",this.props)]));return I.createElement("button",{className:t,id:this.props.id,role:this.props.role,title:this.props.title,tabIndex:this.props.tabIndex||0,"aria-label":this.props.ariaLabel,"aria-expanded":this.props.ariaExpanded,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown},p(this.props),this.props.children)},t}(l);A.Button=M;var L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){return I.createElement("a",{className:a("ui",this.props)+" "+(this.props.disabled?"disabled":""),id:this.props.id,href:this.props.href,target:this.props.target,download:this.props.download,role:this.props.role,title:this.props.title,tabIndex:this.props.tabIndex||0,"aria-label":this.props.ariaLabel,"aria-expanded":this.props.ariaExpanded,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown||F},p(this.props),this.props.children)},t}(l);A.Link=L;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){return I.createElement("div",{className:"field"},this.props.label?I.createElement("label",{htmlFor:this.props.ariaLabel?void 0:this.props.htmlFor},this.props.label):null,this.props.ariaLabel&&this.props.htmlFor?I.createElement("label",{htmlFor:this.props.htmlFor,className:"accessible-hidden"},this.props.ariaLabel):"",this.props.children)},t}(n.Component);A.Field=f;var h=function(n){function e(e){var t=n.call(this,e)||this;return t.state={value:e.value},t.copy=t.copy.bind(t),t.handleClick=t.handleClick.bind(t),t.handleChange=t.handleChange.bind(t),t}return o(e,n),e.prototype.componentWillReceiveProps=function(e){this.setState({value:e.value})},e.prototype.clearValue=function(){this.setState({value:void 0})},e.prototype.copy=function(){var e,t=this.props,n=i.findDOMNode(this);t.lines&&1!=t.lines?((e=n.getElementsByTagName("textarea")[0]).focus(),e.setSelectionRange(0,9999)):((e=n.getElementsByTagName("input")[0]).focus(),e.setSelectionRange(0,9999));try{var r=document.execCommand("copy");pxt.debug("copy: "+r)}catch(e){}},e.prototype.handleClick=function(e){this.props.selectOnClick&&e.target.setSelectionRange(0,9999)},e.prototype.handleChange=function(e){var t=e.target.value;this.props.readOnly||this.state&&this.state.value===t||this.setState({value:t}),this.props.onChange&&this.props.onChange(t)},e.prototype.renderCore=function(){var e=this.props,t=e.copy&&document.queryCommandSupported("copy")?I.createElement(M,{className:"ui right labeled primary icon button",text:lf("Copy"),icon:"copy",onClick:this.copy}):null,n=this.state.value;return I.createElement(f,{ariaLabel:e.ariaLabel,htmlFor:e.id,label:e.label},I.createElement("div",{className:"ui input"+(e.inputLabel?" labelled":"")+(e.copy?" action fluid":"")+(e.disabled?" disabled":"")},e.inputLabel?I.createElement("div",{className:"ui label"},e.inputLabel):"",e.lines&&1!=e.lines?I.createElement("textarea",{id:e.id,className:"ui input "+(e.class||"")+(e.inputLabel?" labelled":""),rows:e.lines,placeholder:e.placeholder,value:n||"",readOnly:!!e.readOnly,onClick:this.handleClick,onChange:this.handleChange}):I.createElement("input",{autoFocus:e.autoFocus,id:e.id,className:e.class||"",type:e.type||"text",placeholder:e.placeholder,value:n||"",readOnly:!!e.readOnly,onClick:this.handleClick,onChange:this.handleChange}),t))},e}(n.Component);A.Input=h;var m=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleChange=t.handleChange.bind(t),t}return o(e,n),e.prototype.handleChange=function(e){this.props.onChange(e.target.value)},e.prototype.renderCore=function(){var e=this.props;return I.createElement(f,{label:e.label},I.createElement("div",{className:"ui toggle checkbox"},I.createElement("input",{type:"checkbox",checked:e.checked,"aria-checked":e.checked,onChange:this.handleChange}),e.inputLabel?I.createElement("label",null,e.inputLabel):void 0))},e}(n.Component);A.Checkbox=m,A.Icon=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.onKeyDown,i=e.children,a=O(e,["icon","className","onClick","onKeyDown","children"]);return I.createElement("i",P({className:"icon "+t+" "+(n||""),onClick:r,onKeyDown:o||F,"aria-hidden":!0,role:"presentation"},a),i)};var g=function(t){function e(e){var n=t.call(this,e)||this;return n.handleClick=function(e){var t=n.props.onClick;t&&t(e,n.props)},n}return o(e,t),e.prototype.renderCore=function(){var e=this.props,t=e.active,n=e.children,r=e.className,o=e.color,i=e.content,a=e.fitted,s=e.header,l=e.icon,c=e.link,u=e.name,d=e.onClick,p=e.position,f=e.ariaControls,h=e.id,m=j([o,p,t?"active":"",!0===l||l&&!u&&!i?"icon":"",s?"header":"",c||d?"link":"",a?1==a?""+a:"fitted "+a:"","item",r]);return n?I.createElement("div",{role:"menuitem",className:m,onClick:this.handleClick},n):I.createElement("div",{id:h,tabIndex:t?0:-1,className:m,onClick:this.handleClick,role:"tab","aria-controls":f,"aria-selected":t,"aria-label":i||u},l?I.createElement(A.Icon,{icon:l}):void 0,i||u)},e}(n.Component);A.MenuItem=g;var v=function(t){function e(e){var l=t.call(this,e)||this;return l.handleKeyboardNavigation=function(e){var t=D.keyCodeFromEvent(e),n=37===t||38===t,r=39===t||40===t;if(n||r){for(var o,i=l.child(".item"),a=-1,s=0;-1===a&&s<i.length;)i[s].classList.contains("active")&&(a=s),s++;if(-1!==a)n&&!pxt.Util.isUserLanguageRtl()||r&&pxt.Util.isUserLanguageRtl()?o=0===a?i[i.length-1]:i[a-1]:(r&&!pxt.Util.isUserLanguageRtl()||n&&pxt.Util.isUserLanguageRtl())&&(o=a===i.length-1?i[0]:i[a+1]),void 0!==o&&(o.click(),o.focus())}},l}return o(e,t),e.prototype.componentDidMount=function(){var n=this;this.child(".item").forEach(function(e,t){e.onkeydown=n.handleKeyboardNavigation})},e.prototype.renderCore=function(){var e=this.props,t=e.attached,n=e.borderless,r=e.children,o=e.className,i=e.color,a=e.compact,s=e.fixed,l=e.floated,c=e.fluid,u=e.icon,d=e.inverted,p=e.pagination,f=e.pointing,h=e.secondary,m=e.size,g=e.stackable,v=e.tabular,y=j(["ui",i,m,n?"borderless":"",a?"compact":"",c?"fluid":"",d?"inverted":"",p?"pagination":"",f?"pointing":"",h?"secondary":"",g?"stackable":"",e.text?"text":"",e.vertical?"vertical":"",t?1==t?"attached":t+" attached ":"",l?1==l?"floated":l+" floated":"",u?1==u?"icon":u+" icon":"",v?1==v?"tabular":v+" tabular":"",s?"tabular "+v:"",o,"menu"]);return I.createElement("div",{className:y,role:"tablist"},r)},e}(n.Component);A.Menu=v;var y=function(t){function e(e){var s=t.call(this,e)||this;return s.setPositionAndClassNames=function(){var e,t=s.props.dimmer;t&&(e="dimmable dimmed","blurring"===t&&(e+=" blurring"));var n={},r=s.getRef();if(r){var o=r.getBoundingClientRect().height,i=-Math.round(o/2),a=o>=window.innerHeight;s.state.marginTop!==i&&(n.marginTop=i),s.state.scrolling!==a&&(n.scrolling=a),a&&(e+=" scrolling")}s.state.mountClasses!==e&&(n.mountClasses=e),0<Object.keys(n).length&&(s.setState(n),s.props.onPositionChanged&&s.props.onPositionChanged(s.props)),s.animationRequestId=requestAnimationFrame(s.setPositionAndClassNames)},s.id=ts.pxtc.Util.guidGen(),s.state={},s.onRequestClose=s.onRequestClose.bind(s),s.afterOpen=s.afterOpen.bind(s),s}return o(e,t),e.prototype.afterOpen=function(){var e=this.props.modalDidOpen;this.setState({scrolling:!1}),this.setPositionAndClassNames(),e&&e(this.getRef())},e.prototype.onClose=function(){cancelAnimationFrame(this.animationRequestId)},e.prototype.getRef=function(){var e=this.refs.modal;return e&&e.node&&e.node.firstChild&&e.node.firstChild.firstChild},e.prototype.onRequestClose=function(){var e=this.props.onClose;this.onClose(),e()},e.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.size,r=e.longer,o=e.basic,i=e.className,a=e.onClose,s=e.closeIcon,l=e.children,c=e.header,u=e.headerClass,d=e.helpUrl,p=e.description,f=e.closeOnDimmerClick,h=e.closeOnDocumentClick,m=e.closeOnEscape,g=e.shouldCloseOnEsc,v=e.shouldCloseOnOverlayClick,y=e.shouldFocusAfterRender,b=O(e,["isOpen","size","longer","basic","className","onClose","closeIcon","children","header","headerClass","helpUrl","description","closeOnDimmerClick","closeOnDocumentClick","closeOnEscape","shouldCloseOnEsc","shouldCloseOnOverlayClick","shouldFocusAfterRender"]),_=this.state,w=_.marginTop,k=_.scrolling,x=_.mountClasses,E="fullscreen"==n,C=j(["ui",n,r?"longer":"",o?"basic":"",k?"scrolling":"",s?"closable":"","modal transition visible active",i]),S=j([D.highContrast?"hc":"",x]),T={labelledby:c?this.id+"title":void 0,describedby:p?this.id+"description":this.id+"desc"},N={content:{marginTop:w}};return I.createElement(R,P({isOpen:t,ref:"modal",appElement:A.appElement,onRequestClose:this.onRequestClose,onAfterOpen:this.afterOpen,shouldReturnFocusAfterClose:!0,shouldFocusAfterRender:y,shouldCloseOnEsc:g||m,shouldCloseOnOverlayClick:v||h||f,portalClassName:S,overlayClassName:"ui page modals dimmer transition "+(t?"visible active":""),className:C,style:N,aria:T},b),c?I.createElement("div",{id:this.id+"title",className:"header "+(u||"")},c,d?I.createElement("a",{className:"ui huge icon clear helpIcon",href:d,target:"_docs",role:"button","aria-label":lf("Help on {0} dialog",c)},I.createElement(A.Icon,{icon:"help"})):void 0):void 0,p?I.createElement("label",{id:this.id+"description",className:"accessible-hidden"},p):void 0,I.createElement("div",{id:this.id+"desc",className:(r?"scrolling":"")+" content"},l),this.props.buttons&&0<this.props.buttons.length?I.createElement("div",{className:"actions"},this.props.buttons.map(function(e){return e.url?I.createElement(L,{key:"action_"+e.label,icon:e.icon,text:e.label,className:"ui button approve "+(e.icon?"icon right labeled":"")+" "+(e.className||"")+" "+(e.loading?"loading disabled":""),href:e.url,target:e.fileName?void 0:"_blank",download:e.fileName?pxt.Util.htmlEscape(e.fileName):void 0}):I.createElement(U,P({key:"action_"+e.label},e))})):void 0,s&&!E?I.createElement("div",{role:"button",className:"closeIcon",tabIndex:0,onClick:a,onKeyDown:F},I.createElement(A.Icon,{icon:"close remove circle"})," "):void 0,E?I.createElement(M,{text:lf("Go back"),title:lf("Go back to the editor"),className:"icon circular small editorBack left labeled",ariaLabel:lf("Go back"),onClick:a,onKeyDown:F},I.createElement(A.Icon,{icon:"arrow left"})):void 0)},e}(I.Component);A.Modal=y;var U=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.handleClick=t.handleClick.bind(t),t}return o(e,n),e.prototype.handleClick=function(){this.props.onclick()},e.prototype.renderCore=function(){var e=this.props;return I.createElement(M,{icon:e.icon,text:e.label,className:"approve "+(e.icon?"icon right labeled":"")+" "+(e.className||"")+" "+(e.loading?"loading disabled":""),onClick:this.handleClick,onKeyDown:F})},e}(n.PureComponent),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.inverted,r=e.page,o=e.simple,i=e.closable,a=e.onClose,s=e.active,l=e.children,c=O(e,["disabled","inverted","page","simple","closable","onClose","active","children"]),u=j(["ui dimmer",s?"active transition visible":"",t?"disabled":"",n?"inverted":"",r?"page":"",o?"simple":""]);return I.createElement(R,P({appElement:A.appElement,style:{content:{background:"none",border:"0"}},shouldCloseOnOverlayClick:i,onRequestClose:a,overlayClassName:u},c),l)},t}(s);A.Dimmer=b;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.children,r=e.disabled,o=e.inverted,i=j(["ui loader",e.size,t?"active":"",r?"disabled":"",o?"inverted":"",n?"text":"",e.className]);return I.createElement("div",{className:i},n)},t}(s);A.Loader=_},{"./core":13,"./data":15,react:157,"react-dom":145,"react-modal":154}],49:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(n,"__esModule",{value:!0});var _=e("react"),a=e("./data"),w=e("./sui"),s=e("./core"),y=pxt.Util,l=function(n){function e(e){var t=n.call(this,e)||this;return t.handleRootElementRef=function(e){t.rootElement=e},t.state={categories:[],visible:!1,loading:!1,showAdvanced:!1},t.setSelection=t.setSelection.bind(t),t.advancedClicked=t.advancedClicked.bind(t),t.recoverToolbox=t.recoverToolbox.bind(t),t}return o(e,n),e.prototype.getElement=function(){return this.rootElement},e.prototype.hide=function(){this.setState({visible:!1})},e.prototype.showLoading=function(){this.setState({visible:!0,loading:!0})},e.prototype.show=function(){this.setState({visible:!0})},e.prototype.setSelectedItem=function(e){this.selectedItem=e},e.prototype.setPreviousItem=function(){if(0<this.selectedIndex){var e=--this.selectedIndex,t=this.items[e];this.setSelection(t,e)}else if(this.state.showSearchBox){var n=this.refs.searchbox;n&&n.focus()}},e.prototype.setNextItem=function(){if(this.items.length-1>this.selectedIndex){var e=++this.selectedIndex;this.setSelection(this.items[e],e)}},e.prototype.setSearch=function(){var e=this.refs.searchbox;e&&e.focus()},e.prototype.clear=function(){this.clearSelection(),this.selectedIndex=0,this.selectedTreeRow=void 0},e.prototype.clearSelection=function(){this.setState({selectedItem:void 0,expandedItem:void 0,focusSearch:!1})},e.prototype.clearSearch=function(){this.setState({hasSearch:!1,searchBlocks:void 0,focusSearch:!1})},e.prototype.setSelection=function(e,t,n){var r=this.props,o=r.editorname,i=r.parent,a=e.nameid,s=e.subns,l=e.customClick;pxt.tickEvent(o+".toolbox.click",void 0,{interactiveConsent:!0});var c=s?a+s:a;if(this.state.selectedItem!=c||n){var u=!1;if(l&&(u=l(i)))return;u||(this.setState({selectedItem:c,expandedItem:a,focusSearch:!1}),this.selectedIndex=t,(this.selectedTreeRow=e).advanced&&!this.state.showAdvanced&&this.showAdvanced(),l||this.showFlyout(e))}else this.clearSelection(),this.closeFlyout()},e.prototype.focus=function(){if(this.rootElement)if(this.selectedItem&&this.selectedItem.getTreeRow()){var e=this.selectedItem.props.treeRow,t=this.items.indexOf(e);this.setSelection(e,t,!0)}else this.selectFirstItem()},e.prototype.selectFirstItem=function(){this.items[0]&&this.setSelection(this.items[0],0,!0)},e.prototype.moveFocusToFlyout=function(){this.props.parent.moveFocusToFlyout()},e.prototype.componentDidUpdate=function(e,t){t.visible==this.state.visible&&t.loading==this.state.loading&&t.showAdvanced==this.state.showAdvanced||this.props.parent.resize(),this.state.hasSearch&&this.state.searchBlocks!=t.searchBlocks?this.refreshSearchItem():t.hasSearch&&!this.state.hasSearch&&"search"==this.state.selectedItem&&this.closeFlyout()},e.prototype.componentDidCatch=function(e,t){var n=this.props.editorname;pxt.tickEvent(n+".toolbox.crashed",{error:e}),this.setState({hasError:!0})},e.prototype.recoverToolbox=function(){this.setState({hasError:!1})},e.prototype.advancedClicked=function(){var e=this.props.editorname;pxt.tickEvent(e+".advanced",void 0,{interactiveConsent:!0}),this.showAdvanced()},e.prototype.showAdvanced=function(){this.props.parent;this.selectedItem&&this.selectedItem.props.treeRow&&this.selectedItem.props.treeRow.advanced&&(this.clear(),this.closeFlyout()),this.setState({showAdvanced:!this.state.showAdvanced})},e.prototype.getSearchBlocks=function(){this.props.parent;return this.state.searchBlocks.map(function(e){return{name:e.qName,attributes:{blockId:e.id},builtinBlock:e.builtinBlock,builtinField:e.field}})},e.prototype.refreshSelection=function(){var e=this.props.parent;this.state.selectedItem&&this.selectedTreeRow&&(this.selectedTreeRow.customClick?this.selectedTreeRow.customClick(e):this.showFlyout(this.selectedTreeRow))},e.prototype.refreshSearchItem=function(){var e=E.getSearchTreeRow();this.showFlyout(e)},e.prototype.showFlyout=function(e){this.props.parent.showFlyout(e)},e.prototype.closeFlyout=function(){this.props.parent.closeFlyout()},e.prototype.hasAdvancedCategories=function(){return this.state.categories.some(function(e){return e.advanced})},e.prototype.getNonAdvancedCategories=function(){return this.state.categories.filter(function(e){return!e.advanced})},e.prototype.getAdvancedCategories=function(){return this.state.categories.filter(function(e){return e.advanced})},e.prototype.getAllCategoriesList=function(t){var e=this.state,n=e.categories,r=e.hasSearch,o=e.expandedItem,i=[];return r&&i.push(E.getSearchTreeRow()),n.forEach(function(e){i.push(e),e.subcategories&&(!t||t&&e.nameid==o)&&e.subcategories.forEach(function(e){i.push(e)})}),i},e.prototype.shouldComponentUpdate=function(e,t){return this.state!=t},e.prototype.renderCore=function(){var t=this,e=this.props,n=e.editorname,r=e.parent,o=this.state,i=o.showAdvanced,a=o.visible,s=o.loading,l=o.selectedItem,c=o.expandedItem,u=o.hasSearch,d=o.showSearchBox,p=o.hasError;if(!a)return _.createElement("div",{style:{display:"none"}});if(s||p)return _.createElement("div",null,_.createElement("div",{className:"blocklyTreeRoot"},_.createElement("div",{className:"blocklyTreeRow",style:{opacity:0}})),s?_.createElement("div",{className:"ui active dimmer"},_.createElement("div",{className:"ui loader indeterminate"})):void 0,p?_.createElement("div",{className:"ui"},lf("Toolbox crashed.."),_.createElement(w.Button,{icon:"refresh",onClick:this.recoverToolbox,text:lf("Reload"),className:"fluid"})):void 0);var f=this.hasAdvancedCategories(),h=this.getNonAdvancedCategories(),m=f?this.getAdvancedCategories():[];this.items=this.getAllCategoriesList();var g=E.getSearchTreeRow(),v=pxt.appTarget.appTheme,y=w.cx(["pxtToolbox",v.invertedToolbox?"invertedToolbox":"",v.coloredToolbox?"coloredToolbox":""]),b=0;return _.createElement("div",{ref:this.handleRootElementRef,className:y,id:n+"EditorToolbox"},_.createElement(C,{categories:this.items}),d?_.createElement(E,{ref:"searchbox",parent:r,toolbox:this,editorname:n}):void 0,_.createElement("div",{className:"blocklyTreeRoot"},_.createElement("div",{role:"tree"},u?_.createElement(k,{key:"search",toolbox:this,index:b++,selected:"search"==l,treeRow:g,onCategoryClick:this.setSelection}):void 0,h.map(function(e){return _.createElement(k,{key:e.nameid,toolbox:t,index:b++,selected:l==e.nameid,childrenVisible:c==e.nameid,treeRow:e,onCategoryClick:t.setSelection},e.subcategories?e.subcategories.map(function(e){return _.createElement(k,{key:e.nameid,index:b++,toolbox:t,selected:l==e.nameid+e.subns,treeRow:e,onCategoryClick:t.setSelection})}):void 0)}),f?_.createElement(x,{key:"advancedseparator"}):void 0,f?_.createElement(k,{toolbox:this,treeRow:{nameid:"",name:pxt.toolbox.advancedTitle(),color:pxt.toolbox.getNamespaceColor("advanced"),icon:pxt.toolbox.getNamespaceIcon(i?"advancedexpanded":"advancedcollapsed")},onCategoryClick:this.advancedClicked}):void 0,i?m.map(function(e){return _.createElement(k,{key:e.nameid,toolbox:t,index:b++,selected:l==e.nameid,childrenVisible:c==e.nameid,treeRow:e,onCategoryClick:t.setSelection},e.subcategories?e.subcategories.map(function(e){return _.createElement(k,{key:e.nameid,toolbox:t,index:b++,selected:l==e.nameid+e.subns,treeRow:e,onCategoryClick:t.setSelection})}):void 0)}):void 0)))},e}(a.Component);n.Toolbox=l;var k=function(n){function e(e){var t=n.call(this,e)||this;return t.handleTreeRowRef=function(e){t.treeRowElement=e},t.state={selected:e.selected},t.handleClick=t.handleClick.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t}return o(e,n),e.prototype.getTreeRow=function(){return this.treeRowElement},e.prototype.componentWillReceiveProps=function(e){var t={};null!=e.selected&&(t.selected=e.selected),0<Object.keys(t).length&&this.setState(t)},e.prototype.componentDidUpdate=function(e,t){var n=this.props.toolbox;this.state.selected&&(this.props.toolbox.setSelectedItem(this),n.state.focusSearch||this.focusElement())},e.prototype.focusElement=function(){this.treeRowElement.focus()},e.prototype.handleClick=function(){var e=this.props,t=e.treeRow,n=e.onCategoryClick,r=e.index;n&&n(t,r)},e.prototype.handleKeyDown=function(e){var t=this.props,n=t.toolbox,r=(t.childrenVisible,y.isUserLanguageRtl()),o=s.keyCodeFromEvent(e);40==o?this.nextItem():38==o?this.previousItem():39==o&&!r||37==o&&r?n.moveFocusToFlyout():27==o?n.closeFlyout():o==s.ENTER_KEY||o==s.SPACE_KEY?w.fireClickOnEnter.call(this,e):o==s.TAB_KEY||37==o||39==o||17==o||16==o||91==o||n.setSearch()},e.prototype.previousItem=function(){var e=this.props,t=e.toolbox,n=(e.childrenVisible,t.props.editorname);pxt.tickEvent(n+'.toolbox.keyboard.prev"',void 0,{interactiveConsent:!0}),t.setPreviousItem()},e.prototype.nextItem=function(){var e=this.props,t=e.toolbox,n=(e.childrenVisible,t.props.editorname);pxt.tickEvent(n+'.toolbox.keyboard.next"',void 0,{interactiveConsent:!0}),t.setNextItem()},e.prototype.renderCore=function(){var e=this.props,t=(e.toolbox,e.childrenVisible),n=this.state.selected;return _.createElement(u,null,_.createElement(c,i({ref:this.handleTreeRowRef},this.props,{selected:n,onClick:this.handleClick,onKeyDown:this.handleKeyDown})),_.createElement(d,{visible:t},this.props.children))},e}(a.Component);n.CategoryItem=k;var c=function(n){function e(e){var t=n.call(this,e)||this;return t.handleTreeRowRef=function(e){t.treeRow=e},t.state={},t.onmouseenter=t.onmouseenter.bind(t),t.onmouseleave=t.onmouseleave.bind(t),t}return o(e,n),e.prototype.focus=function(){this.treeRow&&this.treeRow.focus()},e.prototype.getProperties=function(){return this.props.treeRow},e.prototype.onmouseenter=function(){var e=pxt.appTarget.appTheme,t=this.getMetaColor(),n=e.blocklyOptions&&e.blocklyOptions.toolboxOptions&&e.blocklyOptions.toolboxOptions.invertedMultiplier||.3;e.invertedToolbox&&(this.treeRow.style.backgroundColor=pxt.toolbox.fadeColor(t||"#ddd",n,!1))},e.prototype.onmouseleave=function(){var e=pxt.appTarget.appTheme,t=this.getMetaColor();e.invertedToolbox&&(this.treeRow.style.backgroundColor=t||"#ddd")},e.prototype.getMetaColor=function(){var e=this.props.treeRow.color;return pxt.toolbox.convertColor(e)||pxt.toolbox.getNamespaceColor("default")},e.prototype.renderCore=function(){var e=this.props,t=e.selected,n=e.onClick,r=e.onKeyDown,o=this.props.treeRow,i=o.nameid,a=o.subns,s=o.name,l=o.icon,c=o.color,u=pxt.appTarget.appTheme,d=this.getMetaColor(),p=u.blocklyOptions&&u.blocklyOptions.toolboxOptions&&u.blocklyOptions.toolboxOptions.invertedMultiplier||.3,f={paddingLeft:"0px"},h="blocklyTreeRow";u.coloredToolbox?(f.color=""+d,f.borderLeft="8px solid "+d):u.invertedToolbox?(f.backgroundColor=d||"#ddd",f.color="#fff"):f.borderLeft="8px solid "+d,t&&(h+=" blocklyTreeSelected",u.invertedToolbox?f.backgroundColor=""+pxt.toolbox.fadeColor(c,p,!1):f.backgroundColor=d||"#ddd",f.color="#fff");var m,g=("blocklyTreeIcon"+(a?"more":l?(i||l).toLowerCase():"Default")).replace(/\s/g,""),v=a?pxt.toolbox.getNamespaceIcon("more"):l||pxt.toolbox.getNamespaceIcon("default");return 1<v.length&&(m=_.createElement("style",null,".blocklyTreeIcon."+g+' {\n                    background-image: url("'+y.pathJoin(pxt.webConfig.commitCdnUrl,encodeURI(l))+'")!important;\n                    width: 30px;\n                    height: 100%;\n                    background-size: 20px !important;\n                    background-repeat: no-repeat !important;\n                    background-position: 50% 50% !important;\n                }'),v=void 0),_.createElement("div",{role:"button",ref:this.handleTreeRowRef,className:h,style:f,tabIndex:0,onMouseEnter:this.onmouseenter,onMouseLeave:this.onmouseleave,onClick:n,onKeyDown:r||w.fireClickOnEnter},_.createElement("span",{className:"blocklyTreeIcon",role:"presentation"}),m,_.createElement("span",{style:{display:"inline-block"},className:"blocklyTreeIcon "+g,role:"presentation"},v),_.createElement("span",{className:"blocklyTreeLabel"},s||""+y.capitalize(a||i)))},e}(a.Component);n.TreeRow=c;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){return _.createElement(u,null,_.createElement("div",{className:"blocklyTreeSeparator"},_.createElement("span",{style:{display:"inline-block"},role:"presentation"})))},t}(a.Component);n.TreeSeparator=x;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){var e=this.props.selected;return _.createElement("div",{role:"treeitem","aria-selected":e},this.props.children)},t}(a.Component);n.TreeItem=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){var e=this.props.visible;return _.createElement("div",{role:"group",style:{backgroundPosition:"0px 0px",display:e?"":"none"}},this.props.children)},t}(a.Component);n.TreeGroup=d;var E=function(n){function e(e){var t=n.call(this,e)||this;return t.search=y.debounce(function(){t.searchImmediate()},300,!1),t.state={},t.searchImmediate=t.searchImmediate.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.handleChange=t.handleChange.bind(t),t}return o(e,n),e.getSearchTreeRow=function(){return{nameid:"search",name:lf("{id:category}Search"),color:pxt.toolbox.getNamespaceColor("search"),icon:pxt.toolbox.getNamespaceIcon("search")}},e.prototype.handleChange=function(){this.search()},e.prototype.handleKeyDown=function(e){var t=this.props.toolbox;40===("number"==typeof e.which?e.which:e.keyCode)&&t.selectFirstItem()},e.prototype.focus=function(){this.refs.searchInput.focus()},e.prototype.searchImmediate=function(){var n=this,e=this.props,t=e.parent,r=e.toolbox,o=e.editorname,i=this.refs.searchInput.value,a="",s=!1;pxt.tickEvent(o+".search",void 0,{interactiveConsent:!0}),t.searchAsync(i).done(function(e){a=0==e.length?lf("No search results..."):lf("{0} result matching '{1}'",e.length,i.toLowerCase()),s=""!=i;var t={};t.hasSearch=s,t.searchBlocks=e,t.focusSearch=!0,s&&(t.selectedItem="search"),r.setState(t),n.setState({searchAccessibilityLabel:a})})},e.prototype.renderCore=function(){var e=this.state.searchAccessibilityLabel;return _.createElement("div",{id:"blocklySearchArea"},_.createElement("div",{id:"blocklySearchInput",className:"ui fluid icon input",role:"search"},_.createElement("input",{ref:"searchInput",type:"text",placeholder:"Search...",autoComplete:"off",onFocus:this.searchImmediate,onKeyDown:this.handleKeyDown,onChange:this.handleChange,id:"blocklySearchInputField",className:"blocklySearchInputField"}),_.createElement("i",{className:"search icon",role:"presentation","aria-hidden":"true"}),_.createElement("div",{className:"accessible-hidden",id:"blocklySearchLabel","aria-live":"polite"}," ",e," ")))},e}(a.Component);n.ToolboxSearch=E;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){return _.createElement("div",{id:"blocklyTrashIcon",style:{opacity:0,display:"none"}},_.createElement("i",{className:"trash icon","aria-hidden":"true"}))},t}(a.Component);n.ToolboxTrashIcon=p;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.renderCore=function(){var e=this.props.categories;return _.createElement("style",null,e.filter(function(e){return!!e.color}).map(function(e){return"span.docs.inlineblock."+e.nameid+" {\n                    background-color: "+e.color+";\n                    border-color: "+pxt.toolbox.fadeColor(e.color,.1,!1)+";\n                }"}))},t}(a.Component);n.ToolboxStyle=C},{"./core":13,"./data":15,"./sui":48,react:157}],50:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=e("./srceditor"),a=e("./compiler"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.extensionsMap={},e.subcategoryMap={},e}return o(e,t),e.prototype.shouldShowBlock=function(e,t){var n=this.parent.state.editorState&&this.parent.state.editorState.filters;if(n){var r=n.blocks&&n.blocks[e],o=n.namespaces&&n.namespaces[t];if(null!=r&&r==pxt.editor.FilterState.Hidden)return!1;if(null!=r)return!0;if(null!=o&&o==pxt.editor.FilterState.Hidden)return!1;if(null!=o)return!0;if(null!=n.defaultState&&n.defaultState==pxt.editor.FilterState.Hidden)return!1}return!0},e.prototype.shouldShowCustomCategory=function(e){var t=this.parent.state.editorState&&this.parent.state.editorState.filters;return!t||(!("variables"!==e||t.blocks&&!t.blocks.variables_set&&!t.blocks.variables_get&&!t.blocks.variables_change||t.namespaces&&t.namespaces.variables===pxt.editor.FilterState.Disabled)||!("functions"!==e||t.blocks&&!t.blocks.procedures_defnoreturn&&!t.blocks.procedures_callnoreturn||t.namespaces&&t.namespaces.functions===pxt.editor.FilterState.Disabled))},e.prototype.getSearchSubset=function(){var n=this;if(!this.searchSubset&&this.blockInfo){this.searchSubset={};var r=this.searchSubset,e=pxt.blocks.blockDefinitions();for(var t in e){var o=e[t];this.shouldShowBlock(t,o.category)&&(r[t]=!0)}this.blockInfo.blocks.forEach(function(e){var t=(e.attributes.blockNamespace||e.namespace).split(".")[0];t=t.toLowerCase(),e.attributes.debug&&!pxt.options.debug||e.attributes.deprecated||e.attributes.blockHidden||n.shouldShowBlock(e.attributes.blockId,t)&&(r[e.attributes.blockId]=!0)})}return this.searchSubset},e.prototype.searchAsync=function(t){var e={term:t,subset:this.getSearchSubset()};return a.apiSearchAsync(e).then(function(e){return e}).then(function(e){return pxt.debug("searching for: "+t),e})},e.prototype.clearCaches=function(){this.searchSubset=void 0},e.prototype.getAllCategories=function(){return this.getToolboxCategories(!1).concat(this.getToolboxCategories(!0))},e.prototype.getToolboxCategories=function(n){if(!this.blockInfo)return[];var p=this;var f,e=this.getNamespaces().map(function(e){return[e,p.getNamespaceAttrs(e)]}).filter(function(e){var t=e[1];return!t.deprecated&&(n?t.advanced:!t.advanced)});return f=n,e.sort(function(e,t){var n=e[1],r=t[1],o=r&&r.weight||50;return(n&&n.weight||50)<=o?1:-1}).map(function(e){var t=e[0],n=e[1],r=p.isBuiltIn(t),o=r?p.getBuiltinCategory(t):void 0,i=p.getBlocksForCategory(t).filter(function(e){return p.shouldShowBlock(e.attributes.blockId,t)}),a=p.extensionsMap[t],s=o&&o.customClick;if((i.length||a||s)&&(!s||p.shouldShowCustomCategory(t))){var l,c,u,d={nameid:t,name:n.block?n.block:void 0,color:n.color,icon:n.icon,groups:n.groups,groupIcons:n.groupIcons,labelLineWidth:n.labelLineWidth,blocks:i,subcategories:n.subcategories||p.subcategoryMap[t]?(l=[t,n],c=n.subcategories||Object.keys(p.subcategoryMap[t]),u=f,c.map(function(e){var t=l[0],n=l[1],r=p.getBlocksForCategory(t,e).filter(function(e){return p.shouldShowBlock(e.attributes.blockId,t)});if(r.length)return{nameid:t,subns:e,color:n.color,icon:n.icon,groups:n.groups,groupIcons:n.groupIcons,labelLineWidth:n.labelLineWidth,blocks:r,advanced:u}}).filter(function(e){return!!e})):void 0,advanced:f};return r&&(d.name=o.name,d.icon=n.icon?pxt.toolbox.getNamespaceIcon(n.icon)||n.icon:pxt.toolbox.getNamespaceIcon(t),d.groups=o.groups||n.groups,d.customClick=o.customClick),d}}).filter(function(e){return!!e})},e.prototype.moveFocusToFlyout=function(){},e.prototype.abstractShowFlyout=function(e){var t=this,n=e.nameid,r=e.subns,o=e.icon,i=e.color,a=e.groups,s=e.groupIcons,l=e.labelLineWidth,c=e.blocks;if(!c||!c.length)return!1;pxt.appTarget.appTheme.hideFlyoutHeadings||this.showFlyoutHeadingLabel(n,r,o,i);var u={},d=[];a&&(d=a);var p={};if(a&&s)for(var f=s,h=0;h<d.length;h++){var m=f[h];p[d[h]]=m||""}for(var g=0;g<c.length;++g){var v=c[g],y=v.attributes.group||"other";u[y]||(u[y]=[]),u[y].push(v)}var b=Object.keys(u).length;if(1<b){Object.keys(u).sort().forEach(function(e){-1==d.indexOf(e)&&d.push(e)});for(var _=0;_<d.length;++_){y=d[_];u[y]&&u[y].length&&("other"!=y&&this.showFlyoutGroupLabel(y,p[y],l),u[y]&&this.showFlyoutBlocks(n,i,u[y]))}}else 1==b&&Object.keys(u).forEach(function(e){t.showFlyoutBlocks(n,i,u[e])});return!0},e.prototype.getNamespaceAttrs=function(e){var t=this.blockInfo.apis.byQName[e];if(t)return t.attributes;if(this.extensionsMap[e]){var n=this.extensionsMap[e];return{weight:0,blockId:n.name,color:n.extension.color||"#7f8c8d",advanced:n.extension.advanced||!1,callingConvention:ts.pxtc.ir.CallingConvention.Plain,paramDefl:{}}}},e.prototype.getNamespaces=function(){var r=this,o=[];return this.extensions.forEach(function(e){var t=e.name,n=e.extension.namespace||t;r.extensionsMap[n]||(r.extensionsMap[n]=e),o.filter(function(e){return e==n})||o.push(t)}),o},e}(i.Editor);n.ToolboxEditor=s},{"./compiler":11,"./srceditor":47}],51:[function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var m=e("react"),i=e("react-dom"),a=e("./data"),g=e("./sui"),s=e("./sounds"),l=e("./core"),v=e("./marked"),c=e("./compiler");n.getUsedBlocksAsync=function(e,t){var n=pxt.tutorial.bundleTutorialCode(t);return Promise.resolve().then(function(){var o={};return""==n?Promise.resolve({}):c.getBlocksAsync().then(function(e){return c.decompileSnippetAsync(n,e)}).then(function(e){if(e){for(var t=pxt.blocks.loadWorkspaceXml(e).getAllBlocks(),n=0;n<t.length;++n){var r=t[n];o[r.type]=1}return o}throw new Error("Empty blocksXml, failed to decompile")}).catch(function(){throw pxt.log("Failed to decompile tutorial: "+e),new Error("Failed to decompile tutorial: "+e)})})};var u=function(n){function e(e){var t=n.call(this,e)||this;return t.openTutorialStep=t.openTutorialStep.bind(t),t}return o(e,n),e.prototype.openTutorialStep=function(e){var t=this.props.parent.state.tutorialOptions;t.tutorialStep=e,pxt.tickEvent("tutorial.step",{tutorial:t.tutorial,step:e},{interactiveConsent:!0}),this.props.parent.setTutorialStep(e)},e.prototype.renderCore=function(){var n=this,e=this.props.parent.state.tutorialOptions,r=e.tutorialReady,t=e.tutorialStepInfo,o=e.tutorialStep;return r?m.createElement("div",{className:"ui item"},m.createElement("div",{className:"ui item tutorial-menuitem",role:"menubar"},t.map(function(e,t){return t==o?m.createElement("span",{className:"step-label",key:"tutorialStep"+t},m.createElement(d,{index:t,className:"ui circular label "+(o==t?"blue selected":"inverted")+" "+(r?"":"disabled"),ariaLabel:lf("Tutorial step {0}. This is the current step",t+1),onClick:n.openTutorialStep},t+1)):m.createElement("span",{className:"step-label",key:"tutorialStep"+t,"data-tooltip":""+(t+1),"data-inverted":"","data-position":"bottom center"},m.createElement(d,{index:t,className:"ui empty circular label "+(r?"":"disabled")+" clear",ariaLabel:lf("Tutorial step {0}",t+1),onClick:n.openTutorialStep}))}))):m.createElement("div",null)},e}(a.Component);n.TutorialMenuItem=u;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleClick=function(){e.props.onClick(e.props.index)},e}return o(e,t),e.prototype.renderCore=function(){var e=this.props,t=e.className,n=e.ariaLabel;e.index;return m.createElement("a",{className:t,role:"menuitem","aria-label":n,tabIndex:0,onClick:this.handleClick,onKeyDown:g.fireClickOnEnter},this.props.children)},e}(a.Component);n.TutorialMenuItemLink=d;var p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.showHint=function(){this.setState({visible:!0})},e.prototype.renderCore=function(){var t=this,e=this.state.visible,n=this.props.parent.state.tutorialOptions,r=n.tutorialReady,o=n.tutorialStepInfo,i=n.tutorialStep,a=n.tutorialName;if(!r)return m.createElement("div",null);var s=o[i],l=s.contentMd,c=s.fullscreen,u=!!s.unplugged&&i<o.length-1,d=c?a:lf("Hint"),p=function(){return t.setState({visible:!1})},f=function(){p();var e=i+1;n.tutorialStep=e,pxt.tickEvent("tutorial.hint.next",{tutorial:n.tutorial,step:e}),t.props.parent.setTutorialStep(e)},h=(pxt.Util.isUserLanguageRtl(),[{label:lf("Ok"),onclick:u?f:p,icon:"check",className:"green"}]);return m.createElement(g.Modal,{isOpen:e,className:"hintdialog",closeIcon:!0,header:d,buttons:h,onClose:u?f:p,dimmer:!0,longer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!0,closeOnEscape:!0},m.createElement(v.MarkedContent,{markdown:l,parent:this.props.parent}))},e}(a.Component);n.TutorialHint=p;var f=function(n){function e(e){var t=n.call(this,e)||this;return t.closeLightboxOnEscape=function(e){27===l.keyCodeFromEvent(e)&&t.closeLightbox()},t.state={},t.showHint=t.showHint.bind(t),t.closeLightbox=t.closeLightbox.bind(t),t.tutorialCardKeyDown=t.tutorialCardKeyDown.bind(t),t.okButtonKeyDown=t.okButtonKeyDown.bind(t),t.previousTutorialStep=t.previousTutorialStep.bind(t),t.nextTutorialStep=t.nextTutorialStep.bind(t),t.finishTutorial=t.finishTutorial.bind(t),t}return o(e,n),e.prototype.previousTutorialStep=function(){var e=this.props.parent.state.tutorialOptions,t=e.tutorialStep-1;e.tutorialStep=t,pxt.tickEvent("tutorial.previous",{tutorial:e.tutorial,step:t},{interactiveConsent:!0}),this.props.parent.setTutorialStep(t)},e.prototype.nextTutorialStep=function(){var e=this.props.parent.state.tutorialOptions,t=e.tutorialStep+1;e.tutorialStep=t,pxt.tickEvent("tutorial.next",{tutorial:e.tutorial,step:t},{interactiveConsent:!0}),this.props.parent.setTutorialStep(t)},e.prototype.finishTutorial=function(){this.closeLightbox(),this.props.parent.completeTutorial()},e.prototype.setPopout=function(){this.setState({popout:!0})},e.prototype.closeLightbox=function(){s.tutorialNext(),document.documentElement.removeEventListener("keydown",this.closeLightboxOnEscape),this.props.parent.hideLightbox(),this.setState({popout:!1})},e.prototype.componentWillUpdate=function(){document.documentElement.addEventListener("keydown",this.closeLightboxOnEscape)},e.prototype.tutorialCardKeyDown=function(e){if(l.keyCodeFromEvent(e)==l.TAB_KEY){e.preventDefault();var t=this.refs.tutorialok;i.findDOMNode(t).focus()}},e.prototype.okButtonKeyDown=function(e){l.keyCodeFromEvent(e)==l.TAB_KEY&&(e.preventDefault(),this.refs.tutorialmessage.focus())},e.prototype.componentDidUpdate=function(e,t){var n=this.refs.tutorialmessage,r=this.refs.tutorialok,o=i.findDOMNode(r);t.popout!=this.state.popout&&this.state.popout?(n.addEventListener("keydown",this.tutorialCardKeyDown),o.addEventListener("keydown",this.okButtonKeyDown),n.focus()):t.popout==this.state.popout||this.state.popout||(n.removeEventListener("keydown",this.tutorialCardKeyDown),o.removeEventListener("keydown",this.okButtonKeyDown),n.focus())},e.prototype.componentWillUnmount=function(){v.MarkedContent.clearBlockSnippetCache()},e.prototype.hasHint=function(){var e=this.props.parent.state.tutorialOptions,t=e.tutorialReady,n=e.tutorialStepInfo,r=e.tutorialStep;return!!t&&n[r].hasHint},e.prototype.showHint=function(){this.hasHint()&&(this.closeLightbox(),this.props.parent.showTutorialHint())},e.prototype.renderCore=function(){var e=this.props.parent.state.tutorialOptions,t=e.tutorialReady,n=e.tutorialStepInfo,r=e.tutorialStep;if(!t)return m.createElement("div",null);var o=n[r].headerContentMd,i="",a=r,s=n.length,l=t&&0!=a,c=t&&a!=s-1,u=a==s-1,d=this.hasHint();d&&(i+=lf("Press Space or Enter to show a hint."));var p=pxt.Util.isUserLanguageRtl();return m.createElement("div",{id:"tutorialcard",className:"ui "+(t?"tutorialReady":"")},m.createElement("div",{className:"ui buttons"},l?m.createElement(g.Button,{icon:(p?"right":"left")+" chevron",className:"prevbutton left attached green "+(l?"":"disabled"),text:lf("Back"),textClass:"landscape only",ariaLabel:lf("Go to the previous step of the tutorial."),onClick:this.previousTutorialStep,onKeyDown:g.fireClickOnEnter}):void 0,m.createElement("div",{className:"ui segment attached tutorialsegment"},m.createElement("div",{role:"button",className:"avatar-image",onClick:this.showHint,onKeyDown:g.fireClickOnEnter}),d?m.createElement(g.Button,{className:"mini blue hintbutton hidelightbox",text:lf("Hint"),tabIndex:-1,onClick:this.showHint,onKeyDown:g.fireClickOnEnter}):void 0,m.createElement("div",{ref:"tutorialmessage",className:"tutorialmessage",role:"alert","aria-label":i,tabIndex:d?0:-1,onClick:this.showHint,onKeyDown:g.fireClickOnEnter},m.createElement("div",{className:"content"},m.createElement(v.MarkedContent,{markdown:o,parent:this.props.parent}))),m.createElement(g.Button,{ref:"tutorialok",id:"tutorialOkButton",className:"large green okbutton showlightbox",text:lf("Ok"),onClick:this.closeLightbox,onKeyDown:g.fireClickOnEnter})),c?m.createElement(g.Button,{icon:(p?"left":"right")+" chevron",rightIcon:!0,className:"nextbutton right attached green "+(c?"":"disabled"),text:lf("Next"),textClass:"landscape only",ariaLabel:lf("Go to the next step of the tutorial."),onClick:this.nextTutorialStep,onKeyDown:g.fireClickOnEnter}):void 0,u?m.createElement(g.Button,{icon:"left checkmark",className:"orange right attached "+(t?"":"disabled"),text:lf("Finish"),ariaLabel:lf("Finish the tutorial."),onClick:this.finishTutorial,onKeyDown:g.fireClickOnEnter}):void 0))},e}(a.Component);n.TutorialCard=f},{"./compiler":11,"./core":13,"./data":15,"./marked":31,"./sounds":46,"./sui":48,react:157,"react-dom":145}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o,i=e("./db"),a=e("./core"),s=e("./data"),l=e("./cloudworkspace"),c=e("./fileworkspace"),u=e("./memoryworkspace"),d=e("./iframeworkspace"),p=new i.Table("script"),f=pxt.Util,h=pxt.Cloud;function m(e){void 0===e&&(e=!1),y();var t=r.getHeaders();return e||(t=t.filter(function(e){return!e.isDeleted})),t.sort(function(e,t){return t.recentUse-e.recentUse}),t}function g(e){y();var t=r.getHeader(e);return t&&!t.isDeleted?t:null}function v(){return pxt.storage.getLocal("pxt_workspace_session_id")!=o}function y(){v()&&pxt.Util.assert(!1,"trying to access outdated session")}function b(e){return y(),r.getTextAsync(e)}function _(e,t){return y(),f.assert(e.target==pxt.appTarget.id),(t||e.isDeleted)&&(e.pubCurrent=!1,e.blobCurrent=!1,e.modificationTime=f.nowSeconds()),e.recentUse=f.nowSeconds(),e.targetVersion=pxt.appTarget.versions.target,r.saveAsync(e,t)}function w(e,t){return y(),f.assert(e.target==pxt.appTarget.id),r.installAsync(e,t)}function k(t){return t&&["kind.json","yelm.json"].forEach(function(e){!t[pxt.CONFIG_NAME]&&t[e]&&(t[pxt.CONFIG_NAME]=t[e],delete t[e])}),t}n.setupWorkspace=function(e){switch(f.assert(!r,"workspace set twice"),pxt.debug("workspace: "+e),e){case"fs":case"file":r=c.provider;break;case"mem":case"memory":r=u.provider;break;case"iframe":r=d.provider;break;case"uwp":r=s.wrapWorkspace(pxt.winrt.workspace.provider);break;case"cloud":default:r=l.provider}},n.getHeaders=m,n.getHeader=g,n.isSessionOutdated=v,n.initAsync=function(){return r||(r=l.provider),o=ts.pxtc.Util.guidGen(),pxt.storage.setLocal("pxt_workspace_session_id",o),pxt.debug("workspace session: "+o),r.initAsync(pxt.appTarget.id,pxt.appTarget.versions.target)},n.getTextAsync=b,n.anonymousPublishAsync=function(t,e,n){var r={};t.saveId=r;var o=JSON.stringify(e,null,2)+"\n",i={name:t.name,target:t.target,targetVersion:t.targetVersion,description:n.description,editor:t.editor,text:e,meta:{versions:pxt.appTarget.versions,blocksHeight:n.blocksHeight,blocksWidth:n.blocksWidth}};return pxt.debug("publishing script; "+o.length+" bytes"),h.privatePostAsync("scripts",i,!0).then(function(e){return e.shortid&&(e.id=e.shortid),t.pubId=e.shortid,t.pubCurrent=t.saveId===r,t.meta=e.meta,pxt.debug("published; id /"+t.pubId),_(t).then(function(){return e})})},n.saveAsync=_,n.installAsync=w,n.saveScreenshotAsync=function(e,t,n){return y(),r.saveScreenshotAsync?r.saveScreenshotAsync(e,t,n):Promise.resolve()},n.fixupFileNames=k;var x=new f.PromiseQueue;function E(n){y(),pxt.github.isGithubId(n)&&(n=pxt.github.noramlizeRepoId(n));var r=encodeURIComponent(n);return pxt.packagesConfigAsync().then(function(t){return x.enqueue(n,function(){return p.getAsync(r).then(function(e){return e.files},function(e){return(pxt.github.isGithubId(n)?pxt.github.downloadPackageAsync(n,t).then(function(e){return e.files}):h.downloadScriptFilesAsync(n)).catch(a.handleNetworkError).then(function(e){return p.setAsync({id:r,files:e}).then(function(){return e})})}).then(k)})})}n.getPublishedScriptAsync=E,n.installByIdAsync=function(n){return h.privateGetAsync(n,!0).then(function(t){return E(t.id).then(function(e){return w({name:t.name,pubId:n,pubCurrent:!0,meta:t.meta,editor:t.editor,target:t.target,targetVersion:t.targetVersion},e)})})},n.saveToCloudAsync=function(e){return y(),r.saveToCloudAsync(e)},n.syncAsync=function(){return y(),r.syncAsync()},n.resetAsync=function(){return y(),r.resetAsync()},n.loadedAsync=function(){return y(),r.loadedAsync()},n.saveAssetAsync=function(e,t,n){return r.saveAssetAsync?r.saveAssetAsync(e,t,n):Promise.reject(new Error(lf("Assets not supported here.")))},n.listAssetsAsync=function(e){return r.listAssetsAsync?r.listAssetsAsync(e):Promise.resolve([])},s.mountVirtualApi("header",{getSync:function(e){return"*"==(e=s.stripProtocol(e))?m():g(e)}}),s.mountVirtualApi("text",{getAsync:function(e){var t=/^[\w\-]+:([^\/]+)(\/(.*))?/.exec(e);return b(t[1]).then(function(e){return t[3]?e[t[3]]:e})}})},{"./cloudworkspace":8,"./core":13,"./data":15,"./db":16,"./fileworkspace":25,"./iframeworkspace":28,"./memoryworkspace":32}],53:[function(e,t,n){"use strict";t.exports=function(r){return function(){var e=arguments.length;if(e){for(var t=[],n=-1;++n<e;)t[n]=arguments[n];return r.call(this,t)}return r.call(this,[])}}},{}],54:[function(e,t,n){"use strict";n.byteLength=function(e){var t=f(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=f(e),r=n[0],o=n[1],i=new p((c=r,u=o,3*(c+u)/4-u)),a=0,s=0<o?r-4:r,l=0;l<s;l+=4)t=d[e.charCodeAt(l)]<<18|d[e.charCodeAt(l+1)]<<12|d[e.charCodeAt(l+2)]<<6|d[e.charCodeAt(l+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;var c,u;2===o&&(t=d[e.charCodeAt(l)]<<2|d[e.charCodeAt(l+1)]>>4,i[a++]=255&t);1===o&&(t=d[e.charCodeAt(l)]<<10|d[e.charCodeAt(l+1)]<<4|d[e.charCodeAt(l+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t);return i},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],i=0,a=n-r;i<a;i+=16383)o.push(l(e,i,a<i+16383?a:i+16383));1===r?(t=e[n-1],o.push(s[t>>2]+s[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return o.join("")};for(var s=[],d=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)s[o]=r[o],d[r.charCodeAt(o)]=o;function f(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(s[(o=r)>>18&63]+s[o>>12&63]+s[o>>6&63]+s[63&o]);return i.join("")}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}],55:[function(e,n,r){(function(Q,q){!function(e){if("object"==typeof r&&void 0!==n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:void 0!==q?t=q:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){var e,t,n;return function i(a,s,l){function c(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof _dereq_&&_dereq_;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[n]={exports:{}};a[n][0].call(o.exports,function(e){var t=a[n][1][e];return c(t||e)},o,o.exports,i,a,s,l)}return s[n].exports}for(var u="function"==typeof _dereq_&&_dereq_,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";t.exports=function(e){var r=e._SomePromiseArray;function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){"use strict";var r;try{throw new Error}catch(e){r=e}var o=e("./schedule"),i=e("./queue"),a=e("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function l(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function c(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function u(e){this._normalQueue._pushOne(e),this._queueTick()}s.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(e,t){t?(Q.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),Q.exit(2)):this.throwLater(e)},s.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},s.prototype.invoke=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},s.prototype.settlePromises=function(e){this._trampolineEnabled?u.call(this,e):this._schedule(function(){e._settlePromises()})}):(s.prototype.invokeLater=l,s.prototype.invoke=c,s.prototype.settlePromises=u),s.prototype._drainQueue=function(e){for(;0<e.length();){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},t.exports=s,t.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(i,a,s,l){var c=!1,n=function(e,t){this._reject(t)},u=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)},d=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},p=function(e,t){t.promiseRejectionQueued||this._reject(e)};i.prototype.bind=function(e){c||(c=!0,i.prototype._propagateFrom=l.propagateFromFunction(),i.prototype._boundValue=l.boundValueFunction());var t=s(e),n=new i(a);n._propagateFrom(this,1);var r=this._target();if(n._setBoundTo(t),t instanceof i){var o={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:t};r._then(a,u,void 0,n,o),t._then(d,p,void 0,n,o),n._setOnCancel(t)}else n._resolveCallback(r);return n},i.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},i.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},i.bind=function(e,t){return i.resolve(t).bind(e)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=r)}catch(e){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var o=r(null),i=r(null);o[" size"]=i[" size"]=0}t.exports=function(o){var r,i=e("./util"),a=i.canEvaluate;i.isIdentifier;function t(e,t){var n;if(null!=e&&(n=e[t]),"function"!=typeof n){var r="Object "+i.classString(e)+" has no method '"+i.toString(t)+"'";throw new o.TypeError(r)}return n}function n(e){return t(e,this.pop()).apply(e,this)}function s(e){return e[this]}function l(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}o.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},o.prototype.get=function(e){var t;if("number"==typeof e)t=l;else if(a){var n=r(e);t=null!==n?n:s}else t=s;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(l,e,t){"use strict";e.exports=function(e,t,n,r){var o=l("./util"),i=o.tryCatch,a=o.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=i(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(d){var p=e("./util"),f=e("./es5").keys,h=p.tryCatch,m=p.errorObj;return function(l,c,u){return function(e){var t=u._boundValue();e:for(var n=0;n<l.length;++n){var r=l[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(e instanceof r)return h(c).call(t,e)}else if("function"==typeof r){var o=h(r).call(t,e);if(o===m)return o;if(o)return h(c).call(t,e)}else if(p.isObject(e)){for(var i=f(r),a=0;a<i.length;++a){var s=i[a];if(r[s]!=e[s])continue e}return h(c).call(t,e)}}return d}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(i){var a=!1,n=[];function s(){this._trace=new s.CapturedTrace(l())}function l(){var e=n.length-1;if(0<=e)return n[e]}return i.prototype._promiseCreated=function(){},i.prototype._pushContext=function(){},i.prototype._popContext=function(){return null},i._peekContext=i.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},s.CapturedTrace=null,s.create=function(){if(a)return new s},s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var e=i.prototype._pushContext,t=i.prototype._popContext,n=i._peekContext,r=i.prototype._peekContext,o=i.prototype._promiseCreated;s.deactivateLongStackTraces=function(){i.prototype._pushContext=e,i.prototype._popContext=t,i._peekContext=n,i.prototype._peekContext=r,i.prototype._promiseCreated=o,a=!1},a=!0,i.prototype._pushContext=s.prototype._pushContext,i.prototype._popContext=s.prototype._popContext,i._peekContext=i.prototype._peekContext=l,i.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},s}},{}],9:[function(J,e,t){"use strict";e.exports=function(a,n){var r,o,i,s=a._getDomain,l=a._async,c=J("./errors").Warning,u=J("./util"),d=u.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,f=null,g=null,v=!1,e=!(0==u.env("BLUEBIRD_DEBUG")),t=!(0==u.env("BLUEBIRD_WARNINGS")||!e&&!u.env("BLUEBIRD_WARNINGS")),y=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!e&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(t||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));a.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},a.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},a.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",r,void 0,this)},a.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",o,e,this)}},a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},a.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},a.prototype._warn=function(e,t,n){return M(e,t,n||this)},a.onPossiblyUnhandledRejection=function(e){var t=s();o="function"==typeof e?null===t?e:u.domainBind(t,e):void 0},a.onUnhandledRejectionHandled=function(e){var t=s();r="function"==typeof e?null===t?e:u.domainBind(t,e):void 0};var _=function(){};a.longStackTraces=function(){if(l.haveItemsQueued()&&!G.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!G.longStackTraces&&z()){var e=a.prototype._captureStackTrace,t=a.prototype._attachExtraTrace;G.longStackTraces=!0,_=function(){if(l.haveItemsQueued()&&!G.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");a.prototype._captureStackTrace=e,a.prototype._attachExtraTrace=t,n.deactivateLongStackTraces(),l.enableTrampoline(),G.longStackTraces=!1},a.prototype._captureStackTrace=j,a.prototype._attachExtraTrace=F,n.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},a.hasLongStackTraces=function(){return G.longStackTraces&&z()};var w=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return u.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!u.global.dispatchEvent(n)}}if("function"==typeof Event){e=new Event("CustomEvent");return u.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!u.global.dispatchEvent(n)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!u.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),k=u.isNode?function(){return Q.emit.apply(Q,arguments)}:u.global?function(e){var t="on"+e.toLowerCase(),n=u.global[t];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function x(e,t){return{promise:t}}var E={promiseCreated:x,promiseFulfilled:x,promiseRejected:x,promiseResolved:x,promiseCancelled:x,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:x},C=function(e){var t=!1;try{t=k.apply(null,arguments)}catch(e){l.throwLater(e),t=!0}var n=!1;try{n=w(e,E[e].apply(null,arguments))}catch(e){l.throwLater(e),n=!0}return n||t};function S(){return!1}function T(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+u.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function N(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?u.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function A(){return this._onCancelField}function P(e){this._onCancelField=e}function O(){this._cancellationParent=void 0,this._onCancelField=void 0}function I(e,t){if(0!=(1&t)){var n=(this._cancellationParent=e)._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}a.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?a.longStackTraces():!e.longStackTraces&&a.hasLongStackTraces()&&_()),"warnings"in e){var t=e.warnings;G.warnings=!!t,b=G.warnings,u.isObject(t)&&"wForgottenReturn"in t&&(b=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!G.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");a.prototype._clearCancellationData=O,a.prototype._propagateFrom=I,a.prototype._onCancel=A,a.prototype._setOnCancel=P,a.prototype._attachCancellationCallback=N,a.prototype._execute=T,R=I,G.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!G.monitoring?(G.monitoring=!0,a.prototype._fireEvent=C):!e.monitoring&&G.monitoring&&(G.monitoring=!1,a.prototype._fireEvent=S)),a},a.prototype._fireEvent=S,a.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},a.prototype._onCancel=function(){},a.prototype._setOnCancel=function(e){},a.prototype._attachCancellationCallback=function(e){},a.prototype._captureStackTrace=function(){},a.prototype._attachExtraTrace=function(){},a.prototype._clearCancellationData=function(){},a.prototype._propagateFrom=function(e,t){};var R=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function D(){var e=this._boundTo;return void 0!==e&&e instanceof a?e.isFulfilled()?e.value():void 0:e}function j(){this._trace=new $(this._peekContext())}function F(e,t){if(d(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=U(e);u.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),u.notEnumerableProp(e,"__stackCleaned__",!0)}}}function M(e,t,n){if(G.warnings){var r,o=new c(e);if(t)n._attachExtraTrace(o);else if(G.longStackTraces&&(r=a._peekContext()))r.attachExtraTrace(o);else{var i=U(o);o.stack=i.message+"\n"+i.stack.join("\n")}C("warning",o)||B(o,"",!0)}}function L(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],o="    (No stack trace)"===r||f.test(r),i=o&&W(r);o&&!i&&(v&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function U(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&0<t.length?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||f.test(r))break}return 0<n&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:L(t)}}function B(e,t,n){if("undefined"!=typeof console){var r;if(u.isObject(e)){var o=e.stack;r=t+g(o,e)}else r=t+String(e);"function"==typeof i?i(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function H(e,t,n,r){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){l.throwLater(e)}"unhandledRejection"===e?C(e,n,r)||o||B(n,"Unhandled rejection "):C(e,r)}function q(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():u.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function z(){return"function"==typeof X}var W=function(){return!1},V=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function K(e){var t=e.match(V);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function $(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);X(this,$),32<t&&this.uncycle()}u.inherits($,Error),(n.CapturedTrace=$).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,o=this;void 0!==o;++r)t.push(o),o=o._parent;for(r=(e=this._length=r)-1;0<=r;--r){var i=t[r].stack;void 0===n[i]&&(n[i]=r)}for(r=0;r<e;++r){var a=n[t[r].stack];if(void 0!==a&&a!==r){0<a&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var s=0<r?t[r-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=r-2;0<=c;--c)t[c]._length=l,l++;return}}}},$.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=U(e),n=t.message,r=[t.stack],o=this;void 0!==o;)r.push(L(o.stack.split("\n"))),o=o._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],o=t.length-1,i=t[o],a=-1,s=r.length-1;0<=s;--s)if(r[s]===i){a=s;break}for(s=a;0<=s;--s){var l=r[s];if(t[o]!==l)break;t.pop(),o--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),u.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),u.notEnumerableProp(e,"__stackCleaned__",!0)}};var X=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():q(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,f=e,g=t;var n=Error.captureStackTrace;return W=function(e){return p.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,o=new Error;if("string"==typeof o.stack&&0<=o.stack.split("\n")[0].indexOf("stackDetection@"))return f=/@/,g=t,v=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in o||!r||"number"!=typeof Error.stackTraceLimit?(g=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?q(t):t.toString()},null):(f=e,g=t,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(i=function(e){console.warn(e)},u.isNode&&Q.stderr.isTTY?i=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(i=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var G={warnings:t,longStackTraces:!1,cancellation:!1,monitoring:!1};return y&&a.longStackTraces(),{longStackTraces:function(){return G.longStackTraces},warnings:function(){return G.warnings},cancellation:function(){return G.cancellation},monitoring:function(){return G.monitoring},propagateFromFunction:function(){return R},boundValueFunction:function(){return D},checkForgottenReturns:function(e,t,n,r,o){if(void 0===e&&null!==t&&b){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var i="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=L(s),c=l.length-1;0<=c;--c){var u=l[c];if(!h.test(u)){var d=u.match(m);d&&(i="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(0<l.length){var p=l[0];for(c=0;c<s.length;++c)if(s[c]===p){0<c&&(a="\n"+s[c-1]);break}}}var f="a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(f,!0,t)}},setBounds:function(e,t){if(z()){for(var n,r,o=e.stack.split("\n"),i=t.stack.split("\n"),a=-1,s=-1,l=0;l<o.length;++l)if(c=K(o[l])){n=c.fileName,a=c.line;break}for(l=0;l<i.length;++l){var c;if(c=K(i[l])){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||s<=a||(W=function(e){if(p.test(e))return!0;var t=K(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}},warn:M,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),M(n)},CapturedTrace:$,fireDomEvent:w,fireGlobalEvent:k}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(n){function r(){return this.value}function o(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(e){return e instanceof n&&e.suppressUnhandledRejections(),this._then(r,void 0,void 0,{value:e},void 0)},n.prototype.throw=n.prototype.thenThrow=function(e){return this._then(o,void 0,void 0,{reason:e},void 0)},n.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,o,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},n.prototype.catchReturn=function(e){if(arguments.length<=1)return e instanceof n&&e.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:e},void 0);var t=arguments[1];t instanceof n&&t.suppressUnhandledRejections();return this.caught(e,function(){return t})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,n){var r=e.reduce,t=e.all;function o(){return t(this)}e.prototype.each=function(e){return r(this,e,n,0)._then(o,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,n,n)},e.each=function(e,t){return r(e,t,n,0)._then(o,void 0,void 0,e,void 0)},e.mapSeries=function(e,t){return r(e,t,n,n)}}},{}],12:[function(e,t,n){"use strict";var r,o,i=e("./es5"),a=i.freeze,s=e("./util"),l=s.inherits,c=s.notEnumerableProp;function u(t,n){function r(e){if(!(this instanceof r))return new r(e);c(this,"message","string"==typeof e?e:n),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(r,Error),r}var d=u("Warning","warning"),p=u("CancellationError","cancellation error"),f=u("TimeoutError","timeout error"),h=u("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(e){r=u("TypeError","type error"),o=u("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(h.prototype[m[g]]=Array.prototype[m[g]]);i.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var v=0;function y(e){if(!(this instanceof y))return new y(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];t+=(r=o.join("\n"))+"\n"}return v--,t},l(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:p,TimeoutError:f,OperationalError:y,RejectionError:y,AggregateError:h}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,r){var o=e.map;e.prototype.filter=function(e,t){return o(this,e,t,r)},e.filter=function(e,t,n){return o(e,t,n,r)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(s,a,l){var c=e("./util"),u=s.CancellationError,d=c.errorObj,p=e("./catch_filter")(l);function o(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function f(e){this.finallyHandler=e}function h(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),!(e.cancelPromise=null))}function m(){return v.call(this,this.promise._target()._settledValue())}function g(e){if(!h(this,e))return d.e=e,d}function v(e){var t=this.promise,n=this.handler;if(!this.called){this.called=!0;var r=this.isFinallyHandler()?n.call(t._boundValue()):n.call(t._boundValue(),e);if(r===l)return r;if(void 0!==r){t._setReturnedNonUndefined();var o=a(r,t);if(o instanceof s){if(null!=this.cancelPromise){if(o._isCancelled()){var i=new u("late cancellation observer");return t._attachExtraTrace(i),d.e=i,d}o.isPending()&&o._attachCancellationCallback(new f(this))}return o._then(m,g,void 0,this,void 0)}}}return t.isRejected()?(h(this),d.e=e,d):(h(this),e)}return o.prototype.isFinallyHandler=function(){return 0===this.type},f.prototype._resultCancelled=function(){h(this.finallyHandler)},s.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new o(this,t,e),void 0)},s.prototype.lastly=s.prototype.finally=function(e){return this._passThrough(e,0,v,v)},s.prototype.tap=function(e){return this._passThrough(e,1,v)},s.prototype.tapCatch=function(e){var t=arguments.length;if(1===t)return this._passThrough(e,1,void 0,v);var n,r=new Array(t-1),o=0;for(n=0;n<t-1;++n){var i=arguments[n];if(!c.isObject(i))return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(i)));r[o++]=i}r.length=o;var a=arguments[n];return this._passThrough(p(r,a,this),1,void 0,v)},o}},{"./catch_filter":7,"./util":36}],16:[function(n,e,t){"use strict";e.exports=function(s,r,a,l,e,c){var u=n("./errors").TypeError,t=n("./util"),d=t.errorObj,p=t.tryCatch,f=[];function h(e,t,n,r){if(c.cancellation()){var o=new s(a),i=this._finallyPromise=new s(a);this._promise=o.lastly(function(){return i}),o._captureStackTrace(),o._setOnCancel(this)}else{(this._promise=new s(a))._captureStackTrace()}this._stack=r,this._generatorFunction=e,this._receiver=t,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}t.inherits(h,e),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,c.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var t=new s.CancellationError("generator .return() sentinel");s.coroutine.returnSentinel=t,this._promise._attachExtraTrace(t),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,t),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},h.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof s){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(e){var t=this._promise;if(e===d)return this._cleanup(),this._cancellationPhase?t.cancel():t._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?t.cancel():t._resolveCallback(n);var r=l(n,this._promise);if(r instanceof s||null!==(r=function(e,t,n){for(var r=0;r<t.length;++r){n._pushContext();var o=p(t[r])(e);if(n._popContext(),o===d){n._pushContext();var i=s.reject(d.e);return n._popContext(),i}var a=l(o,n);if(a instanceof s)return a}return null}(r,this._yieldHandlers,this._promise))){var o=(r=r._target())._bitField;0==(50397184&o)?(this._yieldedPromise=r)._proxy(this,null):0!=(33554432&o)?s._async.invoke(this._promiseFulfilled,this,r._value()):0!=(16777216&o)?s._async.invoke(this._promiseRejected,this,r._reason()):this._promiseCancelled()}else this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},s.coroutine=function(r,e){if("function"!=typeof r)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=Object(e).yieldHandler,i=h,a=(new Error).stack;return function(){var e=r.apply(this,arguments),t=new i(void 0,void 0,o,a),n=t.promise();return t._generator=e,t._promiseFulfilled(void 0),n}},s.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+t.classString(e));f.push(e)},s.spawn=function(e){if(c.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var t=new h(e,this),n=t.promise();return t._run(s.spawn),n}}},{"./errors":12,"./util":36}],17:[function(s,e,t){"use strict";e.exports=function(e,o,t,n,r,i){var a=s("./util");a.canEvaluate,a.tryCatch,a.errorObj;e.join=function(){var e,t=arguments.length-1;0<t&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var r=new o(n).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(f,e,i,h,a,m){var s=f._getDomain,l=t("./util"),g=l.tryCatch,v=l.errorObj,c=f._async;function u(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var o=s();this._callback=null===o?t:l.domainBind(o,t),this._preservedValues=r===a?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],c.invoke(this._asyncInit,this,void 0)}function o(e,t,n,r){if("function"!=typeof t)return i("expecting a function but got "+l.classString(t));var o=0;if(void 0!==n){if("object"!=typeof n||null===n)return f.reject(new TypeError("options argument must be an object but it is "+l.classString(n)));if("number"!=typeof n.concurrency)return f.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(n.concurrency)));o=n.concurrency}return new u(e,t,o="number"==typeof o&&isFinite(o)&&1<=o?o:0,r).promise()}l.inherits(u,e),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){var n=this._values,r=this.length(),o=this._preservedValues,i=this._limit;if(t<0){if(n[t=-1*t-1]=e,1<=i&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=i&&this._inFlight>=i)return n[t]=e,this._queue.push(t),!1;null!==o&&(o[t]=e);var a=this._promise,s=this._callback,l=a._boundValue();a._pushContext();var c=g(s).call(l,e,t,r),u=a._popContext();if(m.checkForgottenReturns(c,u,null!==o?"Promise.filter":"Promise.map",a),c===v)return this._reject(c.e),!0;var d=h(c,this._promise);if(d instanceof f){var p=(d=d._target())._bitField;if(0==(50397184&p))return 1<=i&&this._inFlight++,(n[t]=d)._proxy(this,-1*(t+1)),!1;if(0==(33554432&p))return 0!=(16777216&p)?this._reject(d._reason()):this._cancel(),!0;c=d._value()}n[t]=c}return r<=++this._totalResolved&&(null!==o?this._filter(n,o):this._resolve(n),!0)},u.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;0<e.length&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},u.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),o=0,i=0;i<n;++i)e[i]&&(r[o++]=t[i]);r.length=o,this._resolve(r)},u.prototype.preservedValues=function(){return this._preservedValues},f.prototype.map=function(e,t){return o(this,e,t,null)},f.map=function(e,t,n,r){return o(e,t,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(a,s,e,l,c){var u=t("./util"),d=u.tryCatch;a.method=function(r){if("function"!=typeof r)throw new a.TypeError("expecting a function but got "+u.classString(r));return function(){var e=new a(s);e._captureStackTrace(),e._pushContext();var t=d(r).apply(this,arguments),n=e._popContext();return c.checkForgottenReturns(t,n,"Promise.method",e),e._resolveFromSyncValue(t),e}},a.attempt=a.try=function(e){if("function"!=typeof e)return l("expecting a function but got "+u.classString(e));var t,n=new a(s);if(n._captureStackTrace(),n._pushContext(),1<arguments.length){c.deprecated("calling Promise.try with more than 1 argument");var r=arguments[1],o=arguments[2];t=u.isArray(r)?d(e).apply(o,r):d(e).call(o,r)}else t=d(e)();var i=n._popContext();return c.checkForgottenReturns(t,i,"Promise.try",n),n._resolveFromSyncValue(t),n},a.prototype._resolveFromSyncValue=function(e){e===u.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var a=e("./util"),s=a.maybeWrapAsError,l=e("./errors").OperationalError,c=e("./es5");var u=/^(?:name|message|stack|cause)$/;function d(e){var t,n;if((n=e)instanceof Error&&c.getPrototypeOf(n)===Error.prototype){(t=new l(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=c.keys(e),o=0;o<r.length;++o){var i=r[o];u.test(i)||(t[i]=e[i])}return t}return a.markAsOriginatingFromRejection(e),e}t.exports=function(o,i){return function(e,t){if(null!==o){if(e){var n=d(s(e));o._attachExtraTrace(n),o._reject(n)}else if(i){var r=[].slice.call(arguments,1);o._fulfill(r)}else o._fulfill(t);o=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var r=t("./util"),o=e._async,i=r.tryCatch,a=r.errorObj;function s(e,t){if(!r.isArray(e))return l.call(this,e,t);var n=i(t).apply(this._boundValue(),[null].concat(e));n===a&&o.throwLater(n.e)}function l(e,t){var n=this._boundValue(),r=void 0===e?i(t).call(n,null):i(t).call(n,null,e);r===a&&o.throwLater(r.e)}function c(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var r=i(t).call(this._boundValue(),e);r===a&&o.throwLater(r.e)}e.prototype.asCallback=e.prototype.nodeify=function(e,t){if("function"==typeof e){var n=l;void 0!==t&&Object(t).spread&&(n=s),this._then(n,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(P,O,e){"use strict";O.exports=function(){var l=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},s=function(){return new S.PromiseInspection(this._target())},a=function(e){return S.reject(new d(e))};function c(){}var f,u={},h=P("./util");f=h.isNode?function(){var e=Q.domain;return void 0===e&&(e=null),e}:function(){return null},h.notEnumerableProp(S,"_getDomain",f);var e=P("./es5"),t=P("./async"),m=new t;e.defineProperty(S,"_async",{value:m});var n=P("./errors"),d=S.TypeError=n.TypeError;S.RangeError=n.RangeError;var g=S.CancellationError=n.CancellationError;S.TimeoutError=n.TimeoutError,S.OperationalError=n.OperationalError,S.RejectionError=n.OperationalError,S.AggregateError=n.AggregateError;var v=function(){},p={},y={},b=P("./thenables")(S,v),_=P("./promise_array")(S,v,b,a,c),r=P("./context")(S),o=r.create,w=P("./debuggability")(S,r),k=(w.CapturedTrace,P("./finally")(S,b,y)),x=P("./catch_filter")(y),i=P("./nodeback"),E=h.errorObj,C=h.tryCatch;function S(e){e!==v&&function(e,t){if(null==e||e.constructor!==S)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new d("expecting a function but got "+h.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function T(e){this.promise._resolveCallback(e)}function N(e){this.promise._rejectCallback(e,!1)}function A(e){var t=new S(v);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return S.prototype.toString=function(){return"[object Promise]"},S.prototype.caught=S.prototype.catch=function(e){var t=arguments.length;if(1<t){var n,r=new Array(t-1),o=0;for(n=0;n<t-1;++n){var i=arguments[n];if(!h.isObject(i))return a("Catch statement predicate: expecting an object but got "+h.classString(i));r[o++]=i}return r.length=o,e=arguments[n],this.then(void 0,x(r,e,this))}return this.then(void 0,e)},S.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0)},S.prototype.then=function(e,t){if(w.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+h.classString(e);1<arguments.length&&(n+=", "+h.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},S.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},S.prototype.spread=function(e){return"function"!=typeof e?a("expecting a function but got "+h.classString(e)):this.all()._then(e,void 0,void 0,p,void 0)},S.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},S.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},S.prototype.error=function(e){return this.caught(h.originatesFromRejection,e)},S.getNewLibraryCopy=O.exports,S.is=function(e){return e instanceof S},S.fromNode=S.fromCallback=function(e){var t=new S(v);t._captureStackTrace();var n=1<arguments.length&&!!Object(arguments[1]).multiArgs,r=C(e)(i(t,n));return r===E&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},S.all=function(e){return new _(e).promise()},S.resolve=S.fulfilled=S.cast=function(e){var t=b(e);return t instanceof S||((t=new S(v))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},S.reject=S.rejected=function(e){var t=new S(v);return t._captureStackTrace(),t._rejectCallback(e,!0),t},S.setScheduler=function(e){if("function"!=typeof e)throw new d("expecting a function but got "+h.classString(e));return m.setScheduler(e)},S.prototype._then=function(e,t,n,r,o){var i=void 0!==o,a=i?o:new S(v),s=this._target(),l=s._bitField;i||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var c=f();if(0!=(50397184&l)){var u,d,p=s._settlePromiseCtx;0!=(33554432&l)?(d=s._rejectionHandler0,u=e):0!=(16777216&l)?(d=s._fulfillmentHandler0,u=t,s._unsetRejectionIsUnhandled()):(p=s._settlePromiseLateCancellationObserver,d=new g("late cancellation observer"),s._attachExtraTrace(d),u=t),m.invoke(p,s,{handler:null===c?u:"function"==typeof u&&h.domainBind(c,u),promise:a,receiver:r,value:d})}else s._addCallbacks(e,t,a,r,c);return a},S.prototype._length=function(){return 65535&this._bitField},S.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},S.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},S.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},S.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},S.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},S.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},S.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},S.prototype._isFinal=function(){return 0<(4194304&this._bitField)},S.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},S.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},S.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},S.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},S.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},S.prototype._promiseAt=function(e){return this[4*e-4+2]},S.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},S.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},S.prototype._boundValue=function(){},S.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,o=e._receiverAt(0);void 0===o&&(o=u),this._addCallbacks(t,n,r,o,null)},S.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=u),this._addCallbacks(n,r,o,i,null)},S.prototype._addCallbacks=function(e,t,n,r,o){var i=this._length();if(65531<=i&&(i=0,this._setLength(0)),0===i)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:h.domainBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:h.domainBind(o,t));else{var a=4*i-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===o?e:h.domainBind(o,e)),"function"==typeof t&&(this[a+1]=null===o?t:h.domainBind(o,t))}return this._setLength(i+1),i},S.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},S.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var n=b(e,this);if(!(n instanceof S))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var i=this._length();0<i&&r._migrateCallback0(this);for(var a=1;a<i;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var s=new g("late cancellation observer");r._attachExtraTrace(s),this._reject(s)}}else this._reject(l())}},S.prototype._rejectCallback=function(e,t,n){var r=h.ensureErrorObject(e),o=r===e;if(!o&&!n&&w.warnings()){var i="a promise was rejected with a non-error: "+h.classString(e);this._warn(i,!0)}this._attachExtraTrace(r,!!t&&o),this._reject(e)},S.prototype._resolveFromExecutor=function(e){if(e!==v){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},S.prototype._settlePromiseFromHandler=function(e,t,n,r){var o=r._bitField;if(0==(65536&o)){var i;r._pushContext(),t===p?n&&"number"==typeof n.length?i=C(e).apply(this._boundValue(),n):(i=E).e=new d("cannot .spread() a non-array: "+h.classString(n)):i=C(e).call(t,n);var a=r._popContext();0==(65536&(o=r._bitField))&&(i===y?r._reject(n):i===E?r._rejectCallback(i.e,!1):(w.checkForgottenReturns(i,a,"",r,this),r._resolveCallback(i)))}},S.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},S.prototype._followee=function(){return this._rejectionHandler0},S.prototype._setFollowee=function(e){this._rejectionHandler0=e},S.prototype._settlePromise=function(e,t,n,r){var o=e instanceof S,i=this._bitField,a=0!=(134217728&i);0!=(65536&i)?(o&&e._invokeInternalOnCancel(),n instanceof k&&n.isFinallyHandler()?(n.cancelPromise=e,C(t).call(n,r)===E&&e._reject(E.e)):t===s?e._fulfill(s.call(n)):n instanceof c?n._promiseCancelled(e):o||e instanceof _?e._cancel():n.cancel()):"function"==typeof t?o?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof c?n._isResolved()||(0!=(33554432&i)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(a&&e._setAsyncGuaranteed(),0!=(33554432&i)?e._fulfill(r):e._reject(r))},S.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,o=e.value;"function"==typeof t?n instanceof S?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof S&&n._reject(o)},S.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},S.prototype._settlePromise0=function(e,t,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,o,t)},S.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},S.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,0<(65535&t)&&(0!=(134217728&t)?this._settlePromises():m.settlePromises(this))}},S.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return m.fatalError(e,h.isNode);0<(65535&t)?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},S.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},S.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},S.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(0<t){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},S.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},S.defer=S.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new S(v),resolve:T,reject:N}},h.notEnumerableProp(S,"_makeSelfResolutionError",l),P("./method")(S,v,b,a,w),P("./bind")(S,v,b,w),P("./cancel")(S,_,a,w),P("./direct_resolve")(S),P("./synchronous_inspection")(S),P("./join")(S,_,b,v,m,f),(S.Promise=S).version="3.5.1",P("./map.js")(S,_,a,b,v,w),P("./call_get.js")(S),P("./using.js")(S,a,b,o,v,w),P("./timers.js")(S,v,w),P("./generators.js")(S,a,v,b,c,w),P("./nodeify.js")(S),P("./promisify.js")(S,v),P("./props.js")(S,_,b,a),P("./race.js")(S,v,b,a),P("./reduce.js")(S,_,a,b,v,w),P("./settle.js")(S,_,w),P("./some.js")(S,_,a),P("./filter.js")(S,v),P("./each.js")(S,v),P("./any.js")(S),h.toFastProperties(S),h.toFastProperties(S.prototype),A({a:1}),A({b:2}),A({c:3}),A(1),A(function(){}),A(void 0),A(!1),A(new S(v)),w.setBounds(t.firstLineError,h.lastLineError),S}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(r,e,t){"use strict";e.exports=function(s,n,l,a,e){var c=r("./util");c.isArray;function t(e){var t=this._promise=new s(n);e instanceof s&&t._propagateFrom(e,3),t._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return c.inherits(t,e),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function e(t,n){var r=l(this._values,this._promise);if(r instanceof s){var o=(r=r._target())._bitField;if(this._values=r,0==(50397184&o))return this._promise._setAsyncGuaranteed(),r._then(e,this._reject,void 0,this,n);if(0==(33554432&o))return 0!=(16777216&o)?this._reject(r._reason()):this._cancel();r=r._value()}if(null!==(r=c.asArray(r)))0!==r.length?this._iterate(r):-5===n?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(n));else{var i=a("expecting an array or an iterable object but got "+c.classString(r)).reason();this._promise._rejectCallback(i,!1)}},t.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values;for(var n=this._promise,r=!1,o=null,i=0;i<t;++i){var a=l(e[i],n);o=a instanceof s?(a=a._target())._bitField:null,r?null!==o&&a.suppressUnhandledRejections():null!==o?0==(50397184&o)?(a._proxy(this,i),this._values[i]=a):r=0!=(33554432&o)?this._promiseFulfilled(a._value(),i):0!=(16777216&o)?this._promiseRejected(a._reason(),i):this._promiseCancelled(i):r=this._promiseFulfilled(a,i)}r||n._setAsyncGuaranteed()},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},t.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},t.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},t.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},t.prototype._promiseCancelled=function(){return this._cancel(),!0},t.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},t.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof s)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof s&&e[t].cancel()}},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":36}],24:[function(r,e,t){"use strict";e.exports=function(c,u){var f={},h=r("./util"),d=r("./nodeback"),p=h.withAppended,m=h.maybeWrapAsError,e=h.canEvaluate,g=r("./errors").TypeError,v={__isPromisified__:!0},t=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),y=function(e){return h.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function a(e){return!t.test(e)}function b(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function _(e,t,n,r){for(var o,i,a,s,l=h.inheritedDataKeys(e),c=[],u=0;u<l.length;++u){var d=l[u],p=e[d],f=r===y||y(d,p,e);"function"!=typeof p||b(p)||(o=e,i=d,a=t,void 0,(s=h.getDataPropertyOrDefault(o,i+a,v))&&b(s))||!r(d,p,e,f)||c.push(d,p)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var o=e[r];if(n.test(o))for(var i=o.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===i)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(c,t,n),c}var n,w=function(e){return e.replace(/([$])/,"\\$")};var k=e?n:function(o,i,e,t,n,a){var s=function(){return this}(),l=o;function r(){var e=i;i===f&&(e=this);var t=new c(u);t._captureStackTrace();var n="string"==typeof l&&this!==s?this[l]:o,r=d(t,a);try{n.apply(e,p(arguments,r))}catch(e){t._rejectCallback(m(e),!0,!0)}return t._isFateSealed()||t._setAsyncGuaranteed(),t}return"string"==typeof l&&(o=t),h.notEnumerableProp(r,"__isPromisified__",!0),r};function x(e,t,n,r,o){for(var i=new RegExp(w(t)+"$"),a=_(e,t,i,n),s=0,l=a.length;s<l;s+=2){var c=a[s],u=a[s+1],d=c+t;if(r===k)e[d]=k(c,f,c,u,t,o);else{var p=r(u,function(){return k(c,f,c,u,t,o)});h.notEnumerableProp(p,"__isPromisified__",!0),e[d]=p}}return h.toFastProperties(e),e}c.promisify=function(e,t){if("function"!=typeof e)throw new g("expecting a function but got "+h.classString(e));if(b(e))return e;var n,r=void 0===(t=Object(t)).context?f:t.context,o=!!t.multiArgs,i=k(n=e,r,void 0,n,null,o);return h.copyDescriptors(e,i,a),i},c.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var o=t.filter;"function"!=typeof o&&(o=y);var i=t.promisifier;if("function"!=typeof i&&(i=k),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=h.inheritedDataKeys(e),s=0;s<a.length;++s){var l=e[a[s]];"constructor"!==a[s]&&h.isClass(l)&&(x(l.prototype,r,o,i,n),x(l,r,o,i,n))}return x(e,r,o,i,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(d,e,t){"use strict";e.exports=function(r,e,o,i){var s,t=d("./util"),a=t.isObject,l=d("./es5");"function"==typeof Map&&(s=Map);var c=function(){var n=0,r=0;function o(e,t){this[n]=e,this[n+r]=t,n++}return function(e){r=e.size,n=0;var t=new Array(2*e.size);return e.forEach(o,t),t}}();function u(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=c(e),n=!0;else{var r=l.keys(e),o=r.length;t=new Array(2*o);for(var i=0;i<o;++i){var a=r[i];t[i]=e[a],t[i+o]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function n(e){var t,n=o(e);return a(n)?(t=n instanceof r?n._then(r.props,void 0,void 0,void 0,void 0):new u(n).promise(),n instanceof r&&t._propagateFrom(n,2),t):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}t.inherits(u,e),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var o=e[n+r],i=e[r];t.set(o,i)}return t}(this._values);else{n={};for(var r=this.length(),o=0,i=this.length();o<i;++o)n[this._values[o+r]]=this._values[o]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(e){return e>>1},r.prototype.props=function(){return n(this)},r.props=function(e){return n(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,o){for(var i=0;i<o;++i)n[i+r]=e[i+t],e[i+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(c,u,d,p){var f=e("./util"),h=function(t){return t.then(function(e){return n(e,t)})};function n(e,t){var n=d(e);if(n instanceof c)return h(n);if(null===(e=f.asArray(e)))return p("expecting an array or an iterable object but got "+f.classString(e));var r=new c(u);void 0!==t&&r._propagateFrom(t,3);for(var o=r._fulfill,i=r._reject,a=0,s=e.length;a<s;++a){var l=e[a];(void 0!==l||a in e)&&c.cast(l)._then(o,i,void 0,r,null)}return r}c.race=function(e){return n(e,void 0)},c.prototype.race=function(){return n(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(a,e,o,n,i,s){var l=a._getDomain,c=t("./util"),u=c.tryCatch;function d(e,t,n,r){this.constructor$(e);var o=l();this._fn=null===o?t:c.domainBind(o,t),void 0!==n&&(n=a.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===i?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function f(e,t,n,r){return"function"!=typeof t?o("expecting a function but got "+c.classString(t)):new d(e,t,n,r).promise()}function h(e){this.accum=e,this.array._gotAccum(e);var t=n(this.value,this.array._promise);return t instanceof a?(this.array._currentCancellable=t)._then(r,void 0,void 0,this,void 0):r.call(this,t)}function r(e){var t,n=this.array,r=n._promise,o=u(n._fn);r._pushContext(),(t=void 0!==n._eachValues?o.call(r._boundValue(),e,this.index,this.length):o.call(r._boundValue(),this.accum,e,this.index,this.length))instanceof a&&(n._currentCancellable=t);var i=r._popContext();return s.checkForgottenReturns(t,i,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),t}c.inherits(d,e),d.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},d.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},d.prototype._init=function(){},d.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},d.prototype.shouldCopyValues=function(){return!1},d.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},d.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof a&&this._currentCancellable.cancel(),this._initialValue instanceof a&&this._initialValue.cancel())},d.prototype._iterate=function(e){var t,n,r=(this._values=e).length;if(void 0!==this._initialValue?(t=this._initialValue,n=0):(t=a.resolve(e[0]),n=1),!(this._currentCancellable=t).isRejected())for(;n<r;++n){var o={accum:null,value:e[n],index:n,length:r,array:this};t=t._then(h,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(t=t._then(this._eachComplete,void 0,void 0,this,void 0)),t._then(p,p,void 0,t,this)},a.prototype.reduce=function(e,t){return f(this,e,t,null)},a.reduce=function(e,t,n,r){return f(e,t,n,r)}}},{"./util":36}],29:[function(e,t,n){"use strict";var r,o=e("./util"),i=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var a=q.setImmediate,s=Q.nextTick;r=o.isRecentNode?function(e){a.call(q,e)}:function(e){s.call(Q,e)}}else if("function"==typeof i&&"function"==typeof i.resolve){var l=i.resolve();r=function(e){l.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var n=document.createElement("div"),r={attributes:!0},o=!1,i=document.createElement("div");new MutationObserver(function(){n.classList.toggle("foo"),o=!1}).observe(i,r);return function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(n,r),o||(o=!0,i.classList.toggle("foo"))}}();t.exports=r},{"./util":36}],30:[function(i,e,t){"use strict";e.exports=function(e,t,n){var r=e.PromiseInspection;function o(e){this.constructor$(e)}i("./util").inherits(o,t),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},e.settle=function(e){return n.deprecated(".settle()",".reflect()"),new o(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(u,e,t){"use strict";e.exports=function(e,t,o){var n=u("./util"),r=u("./errors").RangeError,i=u("./errors").AggregateError,a=n.isArray,s={};function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(e,t){if((0|t)!==t||t<0)return o("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(e),r=n.promise();return n.setHowMany(t),n.init(),r}n.inherits(l,t),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new i,t=this.length();t<this._values.length;++t)this._values[t]!==s&&e.push(this._values[t]);return 0<e.length?this._reject(e):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new r(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(e,t){return c(e,t)},e.prototype.some=function(e){return c(this,e)},e._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(s,l){var c=e("./util"),u=c.errorObj,o=c.isObject;var i={}.hasOwnProperty;return function(e,t){if(o(e)){if(e instanceof s)return e;var n=function(e){try{return e.then}catch(e){return u.e=e,u}}(e);if(n===u){t&&t._pushContext();var r=s.reject(n.e);return t&&t._popContext(),r}if("function"==typeof n)return function(e){try{return i.call(e,"_promise0")}catch(e){return!1}}(e)?(r=new s(l),e._then(r._fulfill,r._reject,void 0,r,null),r):function(e,t,n){var r=new s(l),o=r;n&&n._pushContext(),r._captureStackTrace(),n&&n._popContext();var i=!0,a=c.tryCatch(t).call(e,function(e){r&&(r._resolveCallback(e),r=null)},function(e){r&&(r._rejectCallback(e,i,!0),r=null)});return i=!1,r&&a===u&&(r._rejectCallback(a.e,!0,!0),r=null),o}(e,n,t)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(o,i,s){var l=e("./util"),c=o.TimeoutError;function u(e){this.handle=e}u.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return t(+this).thenReturn(e)},t=o.delay=function(e,t){var n,r;return void 0!==t?(n=o.resolve(t)._then(a,null,null,e,void 0),s.cancellation()&&t instanceof o&&n._setOnCancel(t)):(n=new o(i),r=setTimeout(function(){n._fulfill()},+e),s.cancellation()&&n._setOnCancel(new u(r)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};o.prototype.delay=function(e){return t(e,this)};function n(e){return clearTimeout(this.handle),e}function r(e){throw clearTimeout(this.handle),e}o.prototype.timeout=function(e,o){var i,a;e=+e;var t=new u(setTimeout(function(){var e,t,n,r;i.isPending()&&(e=i,n=a,r="string"!=typeof(t=o)?t instanceof Error?t:new c("operation timed out"):new c(t),l.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel())},e));return s.cancellation()?(a=this.then(),(i=a._then(n,r,void 0,t,void 0))._setOnCancel(t)):i=this._then(n,r,void 0,t,void 0),i}}},{"./util":36}],35:[function(a,e,t){"use strict";e.exports=function(p,f,h,t,e,m){var g=a("./util"),n=a("./errors").TypeError,r=a("./util").inherits,v=g.errorObj,y=g.tryCatch,o={};function c(e){setTimeout(function(){throw e},0)}function b(o,i){var a=0,s=o.length,l=new p(e);return function e(){if(s<=a)return l._fulfill();var t,n,r=(t=o[a++],(n=h(t))!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&n._setDisposable(t._getDisposer()),n);if(r instanceof p&&r._isDisposable()){try{r=h(r._getDisposer().tryDispose(i),o.promise)}catch(e){return c(e)}if(r instanceof p)return r._then(e,c,null,null,null)}e()}(),l}function _(e,t,n){this._data=e,this._promise=t,this._context=n}function i(e,t,n){this.constructor$(e,t,n)}function w(e){return _.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function k(e){this.length=e,this.promise=null,this[e-1]=null}_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():o},_.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==o?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},_.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},r(i,_),i.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},k.prototype._resultCancelled=function(){for(var e=this.length,t=0;t<e;++t){var n=this[t];n instanceof p&&n.cancel()}},p.using=function(){var e=arguments.length;if(e<2)return f("you must pass at least 2 arguments to Promise.using");var t,i=arguments[e-1];if("function"!=typeof i)return f("expecting a function but got "+g.classString(i));var a=!0;2===e&&Array.isArray(arguments[0])?(e=(t=arguments[0]).length,a=!1):(t=arguments,e--);for(var n=new k(e),r=0;r<e;++r){var o=t[r];if(_.isDisposer(o)){var s=o;(o=o.promise())._setDisposable(s)}else{var l=h(o);l instanceof p&&(o=l._then(w,null,null,{resources:n,index:r},void 0))}n[r]=o}var c=new Array(n.length);for(r=0;r<c.length;++r)c[r]=p.resolve(n[r]).reflect();var u=p.all(c).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void u.cancel();e[t]=n.value()}d._pushContext(),i=y(i);var r=a?i.apply(void 0,e):i(e),o=d._popContext();return m.checkForgottenReturns(r,o,"Promise.using",d),r}),d=u.lastly(function(){var e=new p.PromiseInspection(u);return b(n,e)});return(n.promise=d)._setOnCancel(n),d},p.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},p.prototype._isDisposable=function(){return 0<(131072&this._bitField)},p.prototype._getDisposer=function(){return this._disposer},p.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},p.prototype.disposer=function(e){if("function"==typeof e)return new i(e,this,t());throw new n}}},{"./errors":12,"./util":36}],36:[function(e,t,n){"use strict";var c=e("./es5"),r="undefined"==typeof navigator,o={e:{}},i,a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==q?q:void 0!==this?this:null;function s(){try{var e=i;return i=null,e.apply(this,arguments)}catch(e){return o.e=e,o}}function l(e){return i=e,s}var u=function(t,n){var r={}.hasOwnProperty;function e(){for(var e in this.constructor=t,(this.constructor$=n).prototype)r.call(n.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=n.prototype[e])}return e.prototype=n.prototype,t.prototype=new e,t.prototype};function d(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function p(e){return"function"==typeof e||"object"==typeof e&&null!==e}function f(e){return d(e)?new Error(C(e)):e}function h(e,t){var n,r=e.length,o=new Array(r+1);for(n=0;n<r;++n)o[n]=e[n];return o[n]=t,o}function m(e,t,n){if(!c.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function g(e,t,n){if(d(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return c.defineProperty(e,t,r),e}function v(e){throw e}var y=function(){var o=[Array.prototype,Object.prototype,Function.prototype],s=function(e){for(var t=0;t<o.length;++t)if(o[t]===e)return!0;return!1};if(c.isES5){var l=Object.getOwnPropertyNames;return function(e){for(var t=[],n=Object.create(null);null!=e&&!s(e);){var r;try{r=l(e)}catch(e){return t}for(var o=0;o<r.length;++o){var i=r[o];if(!n[i]){n[i]=!0;var a=Object.getOwnPropertyDescriptor(e,i);null!=a&&null==a.get&&null==a.set&&t.push(i)}}e=c.getPrototypeOf(e)}return t}}var i={}.hasOwnProperty;return function(e){if(s(e))return[];var t=[];e:for(var n in e)if(i.call(e,n))t.push(n);else{for(var r=0;r<o.length;++r)if(i.call(o[r],n))continue e;t.push(n)}return t}}(),b=/this\s*\.\s*\S+\s*=/;function _(e){try{if("function"==typeof e){var t=c.names(e.prototype),n=c.isES5&&1<t.length,r=0<t.length&&!(1===t.length&&"constructor"===t[0]),o=b.test(e+"")&&0<c.names(e).length;if(n||r||o)return!0}return!1}catch(e){return!1}}function w(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}var k=/^[a-z$_][a-z$_0-9]*$/i;function x(e){return k.test(e)}function E(e,t,n){for(var r=new Array(e),o=0;o<e;++o)r[o]=t+o+n;return r}function C(e){try{return e+""}catch(e){return"[no string representation]"}}function S(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function T(e){try{g(e,"isOperational",!0)}catch(e){}}function N(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function A(e){return S(e)&&c.propertyIsWritable(e,"stack")}var P="stack"in new Error?function(e){return A(e)?e:new Error(C(e))}:function(e){if(A(e))return e;try{throw new Error(C(e))}catch(e){return e}};function O(e){return{}.toString.call(e)}function I(e,t,n){for(var r=c.names(e),o=0;o<r.length;++o){var i=r[o];if(n(i))try{c.defineProperty(t,i,c.getDescriptor(e,i))}catch(e){}}}var R=function(e){return c.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var D="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};R=function(e){return c.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?D(e):null}}var j=void 0!==Q&&"[object process]"===O(Q).toLowerCase(),F=void 0!==Q&&void 0!==Q.env;function M(e){return F?Q.env[e]:void 0}function L(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function U(e,t){return e.bind(t)}var B={isClass:_,isIdentifier:x,inheritedDataKeys:y,getDataPropertyOrDefault:m,thrower:v,isArray:c.isArray,asArray:R,notEnumerableProp:g,isPrimitive:d,isObject:p,isError:S,canEvaluate:r,errorObj:o,tryCatch:l,inherits:u,withAppended:h,maybeWrapAsError:f,toFastProperties:w,filledRange:E,toString:C,canAttachTrace:A,ensureErrorObject:P,originatesFromRejection:N,markAsOriginatingFromRejection:T,classString:O,copyDescriptors:I,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:j,hasEnvVariables:F,env:M,global:a,getNativePromise:L,domainBind:U},H;B.isRecentNode=B.isNode&&(H=Q.versions.node.split(".").map(Number),0===H[0]&&10<H[1]||0<H[0]),B.isNode&&B.toFastProperties(Q);try{throw new Error}catch(e){B.lastLineError=e}t.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:136}],56:[function(e,t,n){},{}],57:[function(e,t,n){"use strict";var r=e("base64-js"),i=e("ieee754");n.Buffer=d,n.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(o<e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=d.prototype,t}function d(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(e)}return s(e,t,n)}function s(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return F(e)||e&&F(e.buffer)?function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=d.prototype,r}(e,t,n):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=a(n),o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t):function(e){if(d.isBuffer(e)){var t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||M(e.length)?a(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e){return l(e),a(e<0?0:0|p(e))}function u(e){for(var t=e.length<0?0:0|p(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e){if(o<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(r)return R(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),M(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){var i,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var u=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(s<n+l&&(n=s-l),i=n;0<=i;i--){for(var d=!0,p=0;p<l;p++)if(c(e,i+p)!==c(t,p)){d=!1;break}if(d)return i}return-1}function v(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?o<(r=Number(r))&&(r=o):r=o;var i=t.length;i/2<r&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(M(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,l,c=e[o],u=null,d=239<c?4:223<c?3:191<c?2:1;if(o+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[o+1]))&&127<(l=(31&c)<<6|63&i)&&(u=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&i)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=w));return n}(r)}n.kMaxLength=o,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{get:function(){if(this instanceof d)return this.buffer}}),Object.defineProperty(d.prototype,"offset",{get:function(){if(this instanceof d)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(e,t,n){return s(e,t,n)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,n){return o=t,i=n,l(r=e),r<=0?a(r):void 0!==o?"string"==typeof i?a(r).fill(o,i):a(r).fill(o):a(r);var r,o,i},d.allocUnsafe=function(e){return c(e)},d.allocUnsafeSlow=function(e){return c(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer},d.compare=function(e,t){if(!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(ArrayBuffer.isView(i)&&(i=d.from(i)),!d.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,o){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(r,o),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){i=l[u],a=c[u];break}return i<a?-1:a<i?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i,a,s,l,c,u,d,p,f,h=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return p=t,f=n,j(R(e,(d=this).length-p),d,p,f);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return l=this,c=t,u=n,j(D(e),l,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=n,j(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,(i=this).length-a),i,a,s);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var o="",i=t;i<n;++i)o+=I(e[i]);return o}function C(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,o,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,r,o){return t=+t,n>>>=0,o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,o){return t=+t,n>>>=0,o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=d.prototype,r},d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},d.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},d.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||T(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||T(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);T(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);T(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;0<=--i&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=o-1;0<=i;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return o},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=d.isBuffer(e)?e:new d(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function R(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function D(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function F(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function M(e){return e!=e}},{"base64-js":54,ieee754:87}],58:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":90}],59:[function(e,t,n){var r=e("util"),o=e("abstract-leveldown").AbstractIterator;function i(e){o.call(this,e),this._options=e,this._iterator=null,this._operations=[]}r.inherits(i,o),i.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach(function(e){t[e.method].apply(t,e.args)})},i.prototype._operation=function(e,t){if(this._iterator)return this._iterator[e].apply(this._iterator,t);this._operations.push({method:e,args:t})},"next end".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),t.exports=i},{"abstract-leveldown":64,util:197}],60:[function(a,s,e){(function(t,n){var e=a("util"),r=a("abstract-leveldown").AbstractLevelDOWN,o=a("./deferred-iterator");function i(e){r.call(this,"string"==typeof e?e:""),this._db=void 0,this._operations=[],this._iterators=[]}e.inherits(i,r),i.prototype.setDb=function(t){this._db=t,this._operations.forEach(function(e){t[e.method].apply(t,e.args)}),this._iterators.forEach(function(e){e.setDb(t)})},i.prototype._open=function(e,t){return n.nextTick(t)},i.prototype._operation=function(e,t){if(this._db)return this._db[e].apply(this._db,t);this._operations.push({method:e,args:t})},"put get del batch approximateSize".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype._isBuffer=function(e){return t.isBuffer(e)},i.prototype._iterator=function(e){if(this._db)return this._db.iterator.apply(this._db,arguments);var t=new o(e);return this._iterators.push(t),t},s.exports=i,s.exports.DeferredIterator=o}).call(this,{isBuffer:a("../is-buffer/index.js")},a("_process"))},{"../is-buffer/index.js":90,"./deferred-iterator":59,_process:136,"abstract-leveldown":64,util:197}],61:[function(e,t,n){(function(n){function e(e){this._db=e,this._operations=[],this._written=!1}e.prototype._serializeKey=function(e){return this._db._serializeKey(e)},e.prototype._serializeValue=function(e){return this._db._serializeValue(e)},e.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},e.prototype.put=function(e,t){this._checkWritten();var n=this._db._checkKey(e,"key",this._db._isBuffer);if(n)throw n;return e=this._serializeKey(e),t=this._serializeValue(t),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},e.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return e=this._serializeKey(e),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},e.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},e.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");return"object"!=typeof e&&(e={}),this._written=!0,"function"==typeof this._write?this._write(t):"function"==typeof this._db._batch?this._db._batch(this._operations,e,t):void n.nextTick(t)},t.exports=e}).call(this,e("_process"))},{_process:136}],62:[function(e,t,n){(function(n){function e(e){this.db=e,this._ended=!1,this._nexting=!1}e.prototype.next=function(e){var t=this;if("function"!=typeof e)throw new Error("next() requires a callback argument");return t._ended?e(new Error("cannot call next() after end()")):t._nexting?e(new Error("cannot call next() before previous next() has completed")):(t._nexting=!0,"function"==typeof t._next?t._next(function(){t._nexting=!1,e.apply(null,arguments)}):void n.nextTick(function(){t._nexting=!1,e()}))},e.prototype.end=function(e){if("function"!=typeof e)throw new Error("end() requires a callback argument");return this._ended?e(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(e):void n.nextTick(e))},t.exports=e}).call(this,e("_process"))},{_process:136}],63:[function(i,a,e){(function(t,s){var e=i("xtend"),n=i("./abstract-iterator"),r=i("./abstract-chained-batch");function o(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}o.prototype.open=function(e,t){var n=this,r=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){if(e)return n.status=r,t(e);n.status="open",t()})):(this.status="open",s.nextTick(t))},o.prototype.close=function(t){var n=this,r=this.status;if("function"!=typeof t)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(e){if(e)return n.status=r,t(e);n.status="closed",t()})):(this.status="closed",s.nextTick(t))},o.prototype.get=function(e,t,n){var r;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("get() requires a callback argument");return(r=this._checkKey(e,"key"))?n(r):(e=this._serializeKey(e),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,n):void s.nextTick(function(){n(new Error("NotFound"))}))},o.prototype.put=function(e,t,n,r){var o;if("function"==typeof n&&(r=n),"function"!=typeof r)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key"))?r(o):(e=this._serializeKey(e),t=this._serializeValue(t),"object"!=typeof n&&(n={}),"function"==typeof this._put?this._put(e,t,n,r):void s.nextTick(r))},o.prototype.del=function(e,t,n){var r;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("del() requires a callback argument");return(r=this._checkKey(e,"key"))?n(r):(e=this._serializeKey(e),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,n):void s.nextTick(n))},o.prototype.batch=function(e,t,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(n=t),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return n(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var r,o,i=0,a=e.length;i<a;i++)if("object"==typeof(r=e[i])){if(o=this._checkKey(r.type,"type"))return n(o);if(o=this._checkKey(r.key,"key"))return n(o)}if("function"==typeof this._batch)return this._batch(e,t,n);s.nextTick(n)},o.prototype.approximateSize=function(e,t,n){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof n)throw new Error("approximateSize() requires a callback argument");if(e=this._serializeKey(e),t=this._serializeKey(t),"function"==typeof this._approximateSize)return this._approximateSize(e,t,n);s.nextTick(function(){n(null,0)})},o.prototype._setupIteratorOptions=function(t){var n=this;return t=e(t),["start","end","gt","gte","lt","lte"].forEach(function(e){t[e]&&n._isBuffer(t[e])&&0===t[e].length&&delete t[e]}),t.reverse=!!t.reverse,t.keys=0!=t.keys,t.values=0!=t.values,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=0!=t.keyAsBuffer,t.valueAsBuffer=0!=t.valueAsBuffer,t},o.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new n(this)},o.prototype._chainedBatch=function(){return new r(this)},o.prototype._isBuffer=function(e){return t.isBuffer(e)},o.prototype._serializeKey=function(e){return this._isBuffer(e)?e:String(e)},o.prototype._serializeValue=function(e){return null==e?"":this._isBuffer(e)||s.browser?e:String(e)},o.prototype._checkKey=function(e,t){return null==e?new Error(t+" cannot be `null` or `undefined`"):this._isBuffer(e)&&0===e.length?new Error(t+" cannot be an empty Buffer"):""===String(e)?new Error(t+" cannot be an empty String"):void 0},a.exports=o}).call(this,{isBuffer:i("../../../is-buffer/index.js")},i("_process"))},{"../../../is-buffer/index.js":90,"./abstract-chained-batch":61,"./abstract-iterator":62,_process:136,xtend:200}],64:[function(e,t,n){n.AbstractLevelDOWN=e("./abstract-leveldown"),n.AbstractIterator=e("./abstract-iterator"),n.AbstractChainedBatch=e("./abstract-chained-batch"),n.isLevelDOWN=e("./is-leveldown")},{"./abstract-chained-batch":61,"./abstract-iterator":62,"./abstract-leveldown":63,"./is-leveldown":65}],65:[function(e,t,n){var r=e("./abstract-leveldown");t.exports=function(t){return!(!t||"object"!=typeof t)&&Object.keys(r.prototype).filter(function(e){return"_"!=e[0]&&"approximateSize"!=e}).every(function(e){return"function"==typeof t[e]})}},{"./abstract-leveldown":63}],66:[function(e,t,n){"use strict";function r(e){if(this._capacity=i(e),this._length=0,this._front=0,this._makeCapacity(),o(e)){for(var t=e.length,n=0;n<t;++n)this[n]=e[n];this._length=t}}r.prototype.toArray=function(){for(var e=this._length,t=new Array(e),n=this._front,r=this._capacity,o=0;o<e;++o)t[o]=this[n+o&r-1];return t},r.prototype.push=function(e){var t=arguments.length,n=this._length;if(1<t){var r=this._capacity;if(r<n+t){for(var o=0;o<t;++o){this._checkCapacity(n+1),this[i=this._front+n&this._capacity-1]=arguments[o],n++,this._length=n}return n}for(var i=this._front,o=0;o<t;++o)this[i+n&r-1]=arguments[o],i++;return this._length=n+t,n+t}return 0===t?n:(this._checkCapacity(n+1),this[o=this._front+n&this._capacity-1]=e,this._length=n+1,n+1)},r.prototype.pop=function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1,n=this[t];return this[t]=void 0,this._length=e-1,n}},r.prototype.shift=function(){var e=this._length;if(0!==e){var t=this._front,n=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length=e-1,n}},r.prototype.unshift=function(e){var t=this._length,n=arguments.length;if(1<n){if((o=this._capacity)<t+n){for(var r=n-1;0<=r;r--){this._checkCapacity(t+1);var o=this._capacity;this[a=(this._front-1&o-1^o)-o]=arguments[r],t++,this._length=t,this._front=a}return t}var i=this._front;for(r=n-1;0<=r;r--){var a;this[a=(i-1&o-1^o)-o]=arguments[r],i=a}return this._front=i,this._length=t+n,t+n}if(0===n)return t;this._checkCapacity(t+1);o=this._capacity;return this[r=(this._front-1&o-1^o)-o]=e,this._length=t+1,this._front=r,t+1},r.prototype.peekBack=function(){var e=this._length;if(0!==e)return this[this._front+e-1&this._capacity-1]},r.prototype.peekFront=function(){if(0!==this._length)return this[this._front]},r.prototype.get=function(e){var t=e;if(t===(0|t)){var n=this._length;if(t<0&&(t+=n),!(t<0||n<=t))return this[this._front+t&this._capacity-1]}},r.prototype.isEmpty=function(){return 0===this._length},r.prototype.clear=function(){this._length=0,this._front=0,this._makeCapacity()},r.prototype.valueOf=r.prototype.toString=function(){return this.toArray().toString()},r.prototype.removeFront=r.prototype.shift,r.prototype.removeBack=r.prototype.pop,r.prototype.insertFront=r.prototype.unshift,r.prototype.insertBack=r.prototype.push,r.prototype.enqueue=r.prototype.push,r.prototype.dequeue=r.prototype.shift,r.prototype.toJSON=r.prototype.toArray,Object.defineProperty(r.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}}),r.prototype._makeCapacity=function(){for(var e=this._capacity,t=0;t<e;++t)this[t]=void 0},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(i(1.5*this._capacity+16))},r.prototype._resizeTo=function(e){var t=this._front,n=this._capacity,r=new Array(n),o=this._length;if(a(this,0,r,0,n),this._capacity=e,this._makeCapacity(),this._front=0,t+o<=n)a(r,t,this,0,o);else{var i=o-(t+o&n-1);a(r,t,this,0,i),a(r,0,this,i,o-i)}};var o=Array.isArray;function a(e,t,n,r,o){for(var i=0;i<o;++i)n[i+r]=e[i+t]}function i(e){if("number"!=typeof e){if(!o(e))return 16;e=e.length}return t=Math.min(Math.max(16,e),1073741824),t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16);var t}t.exports=r},{}],67:[function(e,t,n){var r=e("prr");function s(e,t,n){t&&"string"!=typeof t&&(t=t.message||t.name),r(this,{type:e,name:e,cause:"string"!=typeof t?t:n,message:t},"ewr")}function l(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),s.call(this,"CustomError",e,t)}l.prototype=new Error,t.exports=function(a){var e=function(e,t){return n=a,r=e,(i=function(e,t){s.call(this,r,e,t),"FilesystemError"==r&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(n.errno[this.cause.errno]?n.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,i)}).prototype=(o=t)?new o:new l,i;var n,r,o,i};return{CustomError:l,FilesystemError:e("FilesystemError"),createError:e}}},{prr:142}],68:[function(e,t,n){var r=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},r.forEach(function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e}),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError},{"./custom":67}],69:[function(e,t,n){var r,o;r=this,o=function(){"use strict";var r=function(){this._listeners={}};r.prototype.addEventListener=function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].indexOf(t)<0&&this._listeners[e].push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners[e]){var n=this._listeners[e].indexOf(t);0<=n&&this._listeners[e].splice(n,1)}},r.prototype.dispatchEvent=function(e){if(this._listeners[e.type]&&this._listeners[e.type].length)for(var t=this._listeners[e.type].slice(),n=0,r=t.length;n<r;++n)t[n].call(this,e)};var i=function(e){var t=!1;return{next:function(){return t?{done:!0}:(t=!0,{value:e})}}},n=function(e,t,n){this.target=e,this.type=t,this.data=n},e=function(e,t,n){if(r.call(this),"number"!=typeof t||Math.floor(t)!==t||t<1)throw new Error("Invalid concurrency");this._concurrency=t,this._options=n||{},this._options.promise=this._options.promise||Promise,this._iterator=function(e,t){var n,r,o=typeof e;if("object"===o){if("function"==typeof e.next)return e;if("function"==typeof e.then)return i(e)}return"function"===o?"function"==typeof(r=e).constructor&&"GeneratorFunction"===r.constructor.name?e():(n=e,{next:function(){var e=n();return e?{value:e}:{done:!0}}}):i(t.resolve(e))}(e,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return((e.prototype=new r).constructor=e).prototype.concurrency=function(e){return void 0!==e&&(this._concurrency=e,this.active()&&this._proceed()),this._concurrency},e.prototype.size=function(){return this._size},e.prototype.active=function(){return!!this._promise},e.prototype.promise=function(){return this._promise},e.prototype.start=function(){var n=this,e=this._options.promise;return this._promise=new e(function(e,t){n._callbacks={reject:t,resolve:e},n._proceed()}),this._promise},e.prototype._fireEvent=function(e,t){this.dispatchEvent(new n(this,e,t))},e.prototype._settle=function(e){e?this._callbacks.reject(e):this._callbacks.resolve(),this._promise=null,this._callbacks=null},e.prototype._onPooledPromiseFulfilled=function(e,t){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:e,result:t}),this._proceed())},e.prototype._onPooledPromiseRejected=function(e,t){this._size--,this.active()&&(this._fireEvent("rejected",{promise:e,error:t}),this._settle(t||new Error("Unknown error")))},e.prototype._trackPromise=function(t){var n=this;t.then(function(e){n._onPooledPromiseFulfilled(t,e)},function(e){n._onPooledPromiseRejected(t,e)}).catch(function(e){n._settle(new Error("Promise processing failed: "+e))})},e.prototype._proceed=function(){if(!this._done){for(var e=null;this._size<this._concurrency&&!(e=this._iterator.next()).done;)this._size++,this._trackPromise(e.value);this._done=null===e||!!e.done}this._done&&0===this._size&&this._settle()},e.PromisePoolEvent=n,e.PromisePool=e},"function"==typeof define&&define.amd?define([],o):"object"==typeof n?t.exports=o():(r.PromisePool=o(),r.promisePool=r.PromisePool)},{}],70:[function(e,t,n){var l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(e){o=!1}function u(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=l(null),e._eventsCount=0),a){if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=u(e))&&0<o&&a.length>o){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=i[t]=n,++e._eventsCount;return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=i.call(p,r);return o.listener=n,r.wrapFn=o}function h(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(e){var t,n,r,o,i,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=m(e,r),i=0;i<r;++i)o[i].call(n)}(n,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=m(e,o),a=0;a<o;++a)i[a].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=m(e,i),s=0;s<i;++s)a[s].call(n,r,o)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,s=m(e,a),l=0;l<a;++l)s[l].call(n,r,o,i)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=m(e,o),a=0;a<o;++a)i[a].apply(n,r)}(n,c,this,o)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return d(this,e,t,!1)},r.prototype.prependListener=function(e,t){return d(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=l(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=l(null):delete n[e]),this;if(0===arguments.length){var o,i=a(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],71:[function(e,n,t){!function(){"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),t={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):void 0!==n&&n.exports?n.exports=t:window.ExecutionEnvironment=t}()},{}],72:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},{}],73:[function(e,t,n){"use strict";var r=/-(.)/g;t.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},{}],74:[function(e,t,n){"use strict";var r=e("./camelize"),o=/^-ms-/;t.exports=function(e){return r(e.replace(o,"ms-"))}},{"./camelize":73}],75:[function(e,t,n){"use strict";var r=e("./isTextNode");t.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},{"./isTextNode":83}],76:[function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],77:[function(e,n,t){(function(e){"use strict";var t={};"production"!==e.env.NODE_ENV&&Object.freeze(t),n.exports=t}).call(this,e("_process"))},{_process:136}],78:[function(e,t,n){"use strict";t.exports=function(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}},{}],79:[function(e,t,n){"use strict";var r=/([A-Z])/g;t.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},{}],80:[function(e,t,n){"use strict";var r=e("./hyphenate"),o=/^ms-/;t.exports=function(e){return r(e).replace(o,"-ms-")}},{"./hyphenate":79}],81:[function(e,t,n){(function(e){"use strict";var d=function(e){};"production"!==e.env.NODE_ENV&&(d=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),t.exports=function(e,t,n,r,o,i,a,s){if(d(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}}).call(this,e("_process"))},{_process:136}],82:[function(e,t,n){"use strict";t.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},{}],83:[function(e,t,n){"use strict";var r=e("./isNode");t.exports=function(e){return r(e)&&3==e.nodeType}},{"./isNode":82}],84:[function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty;function a(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.exports=function(e,t){if(a(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!i.call(t,n[o])||!a(e[n[o]],t[n[o]]))return!1;return!0}},{}],85:[function(n,r,e){(function(e){"use strict";var t=n("./emptyFunction");if("production"!==e.env.NODE_ENV){t=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(r))}}}r.exports=t}).call(this,n("_process"))},{"./emptyFunction":76,_process:136}],86:[function(e,t,n){"use strict";t.exports=function(e){return new v(e||i,null)};var p=0,f=1;function h(e,t,n,r,o,i){this._color=e,this.key=t,this.value=n,this.left=r,this.right=o,this._count=i}function l(e){return new h(e._color,e.key,e.value,e.left,e.right,e._count)}function m(e,t){return new h(e,t.key,t.value,t.left,t.right,t._count)}function g(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function v(e,t){this._compare=e,this.root=t}var r=v.prototype;function a(e,t){this.tree=e,this._stack=t}Object.defineProperty(r,"keys",{get:function(){var n=[];return this.forEach(function(e,t){n.push(e)}),n}}),Object.defineProperty(r,"values",{get:function(){var n=[];return this.forEach(function(e,t){n.push(t)}),n}}),Object.defineProperty(r,"length",{get:function(){return this.root?this.root._count:0}}),r.insert=function(e,t){for(var n=this._compare,r=this.root,o=[],i=[];r;){var a=n(e,r.key);o.push(r),i.push(a),r=a<=0?r.left:r.right}o.push(new h(p,e,t,null,null,1));for(var s=o.length-2;0<=s;--s){r=o[s];i[s]<=0?o[s]=new h(r._color,r.key,r.value,o[s+1],r.right,r._count+1):o[s]=new h(r._color,r.key,r.value,r.left,o[s+1],r._count+1)}for(s=o.length-1;1<s;--s){var l=o[s-1];r=o[s];if(l._color===f||r._color===f)break;var c=o[s-2];if(c.left===l)if(l.left===r){if(!(u=c.right)||u._color!==p){if(c._color=p,c.left=l.right,l._color=f,l.right=c,o[s-2]=l,o[s-1]=r,g(c),g(l),3<=s)(d=o[s-3]).left===c?d.left=l:d.right=l;break}l._color=f,c.right=m(f,u),c._color=p,s-=1}else{if(!(u=c.right)||u._color!==p){if(l.right=r.left,c._color=p,c.left=r.right,r._color=f,r.left=l,r.right=c,o[s-2]=r,o[s-1]=l,g(c),g(l),g(r),3<=s)(d=o[s-3]).left===c?d.left=r:d.right=r;break}l._color=f,c.right=m(f,u),c._color=p,s-=1}else if(l.right===r){if(!(u=c.left)||u._color!==p){if(c._color=p,c.right=l.left,l._color=f,l.left=c,o[s-2]=l,o[s-1]=r,g(c),g(l),3<=s)(d=o[s-3]).right===c?d.right=l:d.left=l;break}l._color=f,c.left=m(f,u),c._color=p,s-=1}else{var u;if(!(u=c.left)||u._color!==p){var d;if(l.left=r.right,c._color=p,c.right=r.left,r._color=f,r.right=l,r.left=c,o[s-2]=r,o[s-1]=l,g(c),g(l),g(r),3<=s)(d=o[s-3]).right===c?d.right=r:d.left=r;break}l._color=f,c.left=m(f,u),c._color=p,s-=1}}return o[0]._color=f,new v(n,o[0])},r.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return function e(t,n){var r;if(n.left&&(r=e(t,n.left)))return r;return(r=t(n.key,n.value))||(n.right?e(t,n.right):void 0)}(e,this.root);case 2:return function e(t,n,r,o){if(n(t,o.key)<=0){var i;if(o.left&&(i=e(t,n,r,o.left)))return i;if(i=r(o.key,o.value))return i}if(o.right)return e(t,n,r,o.right)}(t,this._compare,e,this.root);case 3:if(0<=this._compare(t,n))return;return function e(t,n,r,o,i){var a,s=r(t,i.key),l=r(n,i.key);if(s<=0){if(i.left&&(a=e(t,n,r,o,i.left)))return a;if(0<l&&(a=o(i.key,i.value)))return a}if(0<l&&i.right)return e(t,n,r,o,i.right)}(t,n,this._compare,e,this.root)}},Object.defineProperty(r,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new a(this,e)}}),Object.defineProperty(r,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new a(this,e)}}),r.at=function(e){if(e<0)return new a(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new a(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new a(this,[])},r.ge=function(e){for(var t=this._compare,n=this.root,r=[],o=0;n;){var i=t(e,n.key);r.push(n),i<=0&&(o=r.length),n=i<=0?n.left:n.right}return r.length=o,new a(this,r)},r.gt=function(e){for(var t=this._compare,n=this.root,r=[],o=0;n;){var i=t(e,n.key);r.push(n),i<0&&(o=r.length),n=i<0?n.left:n.right}return r.length=o,new a(this,r)},r.lt=function(e){for(var t=this._compare,n=this.root,r=[],o=0;n;){var i=t(e,n.key);r.push(n),0<i&&(o=r.length),n=i<=0?n.left:n.right}return r.length=o,new a(this,r)},r.le=function(e){for(var t=this._compare,n=this.root,r=[],o=0;n;){var i=t(e,n.key);r.push(n),0<=i&&(o=r.length),n=i<0?n.left:n.right}return r.length=o,new a(this,r)},r.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var o=t(e,n.key);if(r.push(n),0===o)return new a(this,r);n=o<=0?n.left:n.right}return new a(this,[])},r.remove=function(e){var t=this.find(e);return t?t.remove():this},r.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var o=a.prototype;function c(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function i(e,t){return e<t?-1:t<e?1:0}Object.defineProperty(o,"valid",{get:function(){return 0<this._stack.length}}),Object.defineProperty(o,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0}),o.clone=function(){return new a(this.tree,this._stack.slice())},o.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new h(n._color,n.key,n.value,n.left,n.right,n._count);for(var r=e.length-2;0<=r;--r){(n=e[r]).left===e[r+1]?t[r]=new h(n._color,n.key,n.value,t[r+1],n.right,n._count):t[r]=new h(n._color,n.key,n.value,n.left,t[r+1],n._count)}if((n=t[t.length-1]).left&&n.right){var o=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var i=t[o-1];t.push(new h(n._color,i.key,i.value,n.left,n.right,n._count)),t[o-1].key=n.key,t[o-1].value=n.value;for(r=t.length-2;o<=r;--r)n=t[r],t[r]=new h(n._color,n.key,n.value,n.left,t[r+1],n._count);t[o-1].left=t[o]}if((n=t[t.length-1])._color===p){var a=t[t.length-2];a.left===n?a.left=null:a.right===n&&(a.right=null),t.pop();for(r=0;r<t.length;++r)t[r]._count--;return new v(this.tree._compare,t[0])}if(n.left||n.right){n.left?c(n,n.left):n.right&&c(n,n.right),n._color=f;for(r=0;r<t.length-1;++r)t[r]._count--;return new v(this.tree._compare,t[0])}if(1===t.length)return new v(this.tree._compare,null);for(r=0;r<t.length;++r)t[r]._count--;var s=t[t.length-2];return function(e){for(var t,n,r,o,i=e.length-1;0<=i;--i){if(t=e[i],0===i)return t._color=f;if((n=e[i-1]).left===t){if((r=n.right).right&&r.right._color===p)return o=(r=n.right=l(r)).right=l(r.right),n.right=r.left,r.left=n,r.right=o,r._color=n._color,t._color=f,n._color=f,o._color=f,g(n),g(r),1<i&&((a=e[i-2]).left===n?a.left=r:a.right=r),e[i-1]=r;if(r.left&&r.left._color===p)return o=(r=n.right=l(r)).left=l(r.left),n.right=o.left,r.left=o.right,o.left=n,o.right=r,o._color=n._color,n._color=f,r._color=f,t._color=f,g(n),g(r),g(o),1<i&&((a=e[i-2]).left===n?a.left=o:a.right=o),e[i-1]=o;if(r._color===f){if(n._color===p)return n._color=f,n.right=m(p,r);n.right=m(p,r);continue}r=l(r),n.right=r.left,r.left=n,r._color=n._color,n._color=p,g(n),g(r),1<i&&((a=e[i-2]).left===n?a.left=r:a.right=r),e[i-1]=r,e[i]=n,i+1<e.length?e[i+1]=t:e.push(t),i+=2}else{if((r=n.left).left&&r.left._color===p)return o=(r=n.left=l(r)).left=l(r.left),n.left=r.right,r.right=n,r.left=o,r._color=n._color,t._color=f,n._color=f,o._color=f,g(n),g(r),1<i&&((a=e[i-2]).right===n?a.right=r:a.left=r),e[i-1]=r;if(r.right&&r.right._color===p)return o=(r=n.left=l(r)).right=l(r.right),n.left=o.right,r.right=o.left,o.right=n,o.left=r,o._color=n._color,n._color=f,r._color=f,t._color=f,g(n),g(r),g(o),1<i&&((a=e[i-2]).right===n?a.right=o:a.left=o),e[i-1]=o;if(r._color===f){if(n._color===p)return n._color=f,n.left=m(p,r);n.left=m(p,r);continue}var a;r=l(r),n.left=r.right,r.right=n,r._color=n._color,n._color=p,g(n),g(r),1<i&&((a=e[i-2]).right===n?a.right=r:a.left=r),e[i-1]=r,e[i]=n,i+1<e.length?e[i+1]=t:e.push(t),i+=2}}}(t),s.left===n?s.left=null:s.right=null,new v(this.tree._compare,t[0])},Object.defineProperty(o,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(o,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(o,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;0<=r;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),o.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();0<e.length&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(o,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;0<t;--t)if(e[t-1].left===e[t])return!0;return!1}}),o.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),r=t[t.length-1];n[n.length-1]=new h(r._color,r.key,e,r.left,r.right,r._count);for(var o=t.length-2;0<=o;--o)(r=t[o]).left===t[o+1]?n[o]=new h(r._color,r.key,r.value,n[o+1],r.right,r._count):n[o]=new h(r._color,r.key,r.value,r.left,n[o+1],r._count);return new v(this.tree._compare,n[0])},o.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();0<e.length&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(o,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;0<t;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],87:[function(e,t,n){n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?o-1:0,p=n?-1:1,f=e[t+d];for(d+=p,i=f&(1<<-u)-1,f>>=-u,u+=s;0<u;i=256*i+e[t+d],d+=p,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;0<u;a=256*a+e[t+d],d+=p,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=c}return(f?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+d?p/l:p*Math.pow(2,1-d))*l&&(a++,l/=2),u<=a+d?(s=0,a=u):1<=a+d?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));8<=o;e[n+f]=255&s,f+=h,s/=256,o-=8);for(a=a<<o|s,c+=o;0<c;e[n+f]=255&a,f+=h,a/=256,c-=8);e[n+f-h]|=128*m}},{}],88:[function(e,u,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var o=0,i=new e(c),a=t.document.createTextNode("");i.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var s=new t.MessageChannel;s.port1.onmessage=c,n=function(){s.port2.postMessage(0)}}var l=[];function c(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}u.exports=function(e){1!==l.push(e)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],89:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],90:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],91:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],92:[function(e,t,n){(function(){var t=Array.prototype.slice,r=Array.prototype.forEach,o=function(n){if("object"!=typeof n)throw n+" is not an object";var e=t.call(arguments,1);return r.call(e,function(e){if(e)for(var t in e)"object"==typeof e[t]&&n[t]?o.call(n,n[t],e[t]):n[t]=e[t]}),n};this.extend=o}).call(this)},{}],93:[function(e,t,n){var r=e("./lib/encodings");function o(e){this.opts=e||{},this.encodings=r}(t.exports=o).prototype._encoding=function(e){return"string"==typeof e&&(e=r[e]),e||(e=r.id),e},o.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},o.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},o.prototype.encodeKey=function(e,t,n){return this._keyEncoding(t,n).encode(e)},o.prototype.encodeValue=function(e,t,n){return this._valueEncoding(t,n).encode(e)},o.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},o.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},o.prototype.encodeBatch=function(e,n){var r=this;return e.map(function(e){var t={type:e.type,key:r.encodeKey(e.key,n,e)};return r.keyAsBuffer(n,e)&&(t.keyEncoding="binary"),e.prefix&&(t.prefix=e.prefix),"value"in e&&(t.value=r.encodeValue(e.value,n,e),r.valueAsBuffer(n,e)&&(t.valueEncoding="binary")),t})};var i=["lt","gt","lte","gte","start","end"];o.prototype.encodeLtgt=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=-1<i.indexOf(e)?n.encodeKey(t[e],t):t[e]}),r},o.prototype.createStreamDecoder=function(n){var r=this;return n.keys&&n.values?function(e,t){return{key:r.decodeKey(e,n),value:r.decodeValue(t,n)}}:n.keys?function(e){return r.decodeKey(e,n)}:n.values?function(e,t){return r.decodeValue(t,n)}:function(){}},o.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},o.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},{"./lib/encodings":94}],94:[function(e,t,o){(function(n){o.utf8=o["utf-8"]={encode:function(e){return r(e)?e:String(e)},decode:e,buffer:!1,type:"utf8"},o.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},o.binary={encode:function(e){return r(e)?e:new n(e)},decode:e,buffer:!0,type:"binary"},o.id={encode:function(e){return e},decode:function(e){return e},buffer:!1,type:"id"};function e(e){return e}function r(e){return null==e||n.isBuffer(e)}["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"].forEach(function(t){o[t]={encode:function(e){return r(e)?e:new n(e,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}})}).call(this,e("buffer").Buffer)},{buffer:57}],95:[function(e,t,n){var r=e("errno").create,o=r("LevelUPError"),i=r("NotFoundError",o);i.prototype.notFound=!0,i.prototype.status=404,t.exports={LevelUPError:o,InitializationError:r("InitializationError",o),OpenError:r("OpenError",o),ReadError:r("ReadError",o),WriteError:r("WriteError",o),NotFoundError:i,EncodingError:r("EncodingError",o)}},{errno:68}],96:[function(e,t,n){var r=e("inherits"),o=e("readable-stream").Readable,i=e("xtend"),a=e("level-errors").EncodingError;function s(e,t){if(!(this instanceof s))return new s(e,t);o.call(this,i(t,{objectMode:!0})),this._iterator=e,this._destroyed=!1,this._decoder=null,t&&t.decoder&&(this._decoder=t.decoder),this.on("end",this._cleanup.bind(this))}r(t.exports=s,o),s.prototype._read=function(){var r=this;this._destroyed||this._iterator.next(function(e,t,n){if(!r._destroyed){if(e)return r.emit("error",e);if(void 0===t&&void 0===n)r.push(null);else{if(!r._decoder)return r.push({key:t,value:n});try{n=r._decoder(t,n)}catch(e){return r.emit("error",new a(e)),void r.push(null)}r.push(n)}}})},s.prototype.destroy=s.prototype._cleanup=function(){var t=this;this._destroyed||(this._destroyed=!0,this._iterator.end(function(e){if(e)return t.emit("error",e);t.emit("close")}))}},{inherits:89,"level-errors":95,"readable-stream":103,xtend:200}],97:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],98:[function(s,l,e){(function(e){l.exports=i;var t=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},n=s("core-util-is");n.inherits=s("inherits");var r=s("./_stream_readable"),o=s("./_stream_writable");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}n.inherits(i,r),function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(t(o.prototype),function(e){i.prototype[e]||(i.prototype[e]=o.prototype[e])})}).call(this,s("_process"))},{"./_stream_readable":100,"./_stream_writable":102,_process:136,"core-util-is":58,inherits:89}],99:[function(e,t,n){t.exports=i;var r=e("./_stream_transform"),o=e("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=e("inherits"),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":101,"core-util-is":58,inherits:89}],100:[function(h,e,t){(function(m){e.exports=n;var g=h("isarray"),p=h("buffer").Buffer;n.ReadableState=t;var v=h("events").EventEmitter;v.listenerCount||(v.listenerCount=function(e,t){return e.listeners(t).length});var i,a=h("stream"),u=h("core-util-is");u.inherits=h("inherits");var y=h("util");function t(e,t){var n=h("./_stream_duplex"),r=(e=e||{}).highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(i||(i=h("string_decoder/").StringDecoder),this.decoder=new i(e.encoding),this.encoding=e.encoding)}function n(e){h("./_stream_duplex");if(!(this instanceof n))return new n(e);this._readableState=new t(e,this),this.readable=!0,a.call(this)}function r(e,t,n,r,o){var i,a,s,l=function(e,t){var n=null;u.isBuffer(t)||u.isString(t)||u.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(t,n);if(l)e.emit("error",l);else if(u.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}(e,t);else if(t.objectMode||n&&0<n.length)if(t.ended&&!o){var c=new Error("stream.push() after EOF");e.emit("error",c)}else if(t.endEmitted&&o){c=new Error("stream.unshift() after end event");e.emit("error",c)}else!t.decoder||o||r||(n=t.decoder.write(n)),o||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e)),i=e,(a=t).readingMore||(a.readingMore=!0,m.nextTick(function(){!function(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(y("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}(i,a)}));else o||(t.reading=!1);return!(s=t).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}y=y&&y.debuglog?y.debuglog("stream"):function(){},u.inherits(n,a),n.prototype.push=function(e,t){var n=this._readableState;return u.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding)!==n.encoding&&(e=new p(e,t),t=""),r(this,n,e,t,!1)},n.prototype.unshift=function(e){return r(this,this._readableState,e,"",!0)},n.prototype.setEncoding=function(e){return i||(i=h("string_decoder/").StringDecoder),this._readableState.decoder=new i(e),this._readableState.encoding=e,this};var o=8388608;function s(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||u.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(o<=e)e=o;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(y("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?m.nextTick(function(){l(e)}):l(e))}function l(e){y("emit readable"),e.emit("readable"),b(e)}function b(e){var t=e._readableState;if(y("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function c(e,t){var n,r=t.buffer,o=t.length,i=!!t.decoder,a=!!t.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(a)n=r.shift();else if(!e||o<=e)n=i?r.join(""):p.concat(r,o),r.length=0;else{if(e<r[0].length)n=(u=r[0]).slice(0,e),r[0]=u.slice(e);else if(e===r[0].length)n=r.shift();else{n=i?"":new p(e);for(var s=0,l=0,c=r.length;l<c&&s<e;l++){var u=r[0],d=Math.min(e-s,u.length);i?n+=u.slice(0,d):u.copy(n,s,0,d),d<u.length?r[0]=u.slice(d):r.shift(),s+=d}}}return n}function f(e){var t=e._readableState;if(0<t.length)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,m.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}n.prototype.read=function(e){y("read",e);var t=this._readableState,n=e;if((!u.isNumber(e)||0<e)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return y("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?f(this):d(this),null;if(0===(e=s(e,t))&&t.ended)return 0===t.length&&f(this),null;var r,o=t.needReadable;return y("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&y("length less than watermark",o=!0),(t.ended||t.reading)&&y("reading or ended",o=!1),o&&(y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),o&&!t.reading&&(e=s(n,t)),r=0<e?c(e,t):null,u.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&f(this),u.isNull(r)||this.emit("data",r),r},n.prototype._read=function(e){this.emit("error",new Error("not implemented"))},n.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,y("pipe count=%d opts=%j",r.pipesCount,e);var o=(!e||!1!==e.end)&&t!==m.stdout&&t!==m.stderr?a:c;function i(e){y("onunpipe"),e===n&&c()}function a(){y("onend"),t.end()}r.endEmitted?m.nextTick(o):n.once("end",o),t.on("unpipe",i);var s,l=(s=n,function(){var e=s._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&v.listenerCount(s,"data")&&(e.flowing=!0,b(s))});function c(){y("cleanup"),t.removeListener("close",p),t.removeListener("finish",f),t.removeListener("drain",l),t.removeListener("error",d),t.removeListener("unpipe",i),n.removeListener("end",a),n.removeListener("end",c),n.removeListener("data",u),!r.awaitDrain||t._writableState&&!t._writableState.needDrain||l()}function u(e){y("ondata"),!1===t.write(e)&&(y("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,n.pause())}function d(e){y("onerror",e),h(),t.removeListener("error",d),0===v.listenerCount(t,"error")&&t.emit("error",e)}function p(){t.removeListener("finish",f),h()}function f(){y("onfinish"),t.removeListener("close",p),h()}function h(){y("unpipe"),n.unpipe(t)}return t.on("drain",l),n.on("data",u),t._events&&t._events.error?g(t._events.error)?t._events.error.unshift(d):t._events.error=[d,t._events.error]:t.on("error",d),t.once("close",p),t.once("finish",f),t.emit("pipe",n),r.flowing||(y("pipe resume"),n.resume()),t},n.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}return-1===(o=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e))||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},n.prototype.addListener=n.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&d(this);else{var o=this;m.nextTick(function(){y("readable nexttick read 0"),o.read(0)})}}return n},n.prototype.resume=function(){var n,r,e=this._readableState;return e.flowing||(y("resume"),e.flowing=!0,e.reading||(y("resume read 0"),this.read(0)),n=this,(r=e).resumeScheduled||(r.resumeScheduled=!0,m.nextTick(function(){var e,t;e=n,(t=r).resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}))),this},n.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},n.prototype.wrap=function(t){var n=this._readableState,r=!1,o=this;for(var e in t.on("end",function(){if(y("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&o.push(e)}o.push(null)}),t.on("data",function(e){(y("wrapped data"),n.decoder&&(e=n.decoder.write(e)),e&&(n.objectMode||e.length))&&(o.push(e)||(r=!0,t.pause()))}),t)u.isFunction(t[e])&&u.isUndefined(this[e])&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(e){t.on(e,o.emit.bind(o,e))}),o._read=function(e){y("wrapped _read",e),r&&(r=!1,t.resume())},o},n._fromList=c}).call(this,h("_process"))},{"./_stream_duplex":98,_process:136,buffer:57,"core-util-is":58,events:70,inherits:89,isarray:97,stream:175,"string_decoder/":176,util:56}],101:[function(e,t,n){t.exports=i;var r=e("./_stream_duplex"),a=e("core-util-is");function o(e,n){this.afterTransform=function(e,t){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,a.isNullOrUndefined(n)||e.push(n);o&&o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(n,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState=new o(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){a.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}a.inherits=e("inherits"),a.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;a.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":98,"core-util-is":58,inherits:89}],102:[function(m,e,t){(function(l){e.exports=o;var u=m("buffer").Buffer;o.WritableState=r;var d=m("core-util-is");d.inherits=m("inherits");var n=m("stream");function p(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(e,t){var n=m("./_stream_duplex"),r=(e=e||{}).highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1;var i=(this.finished=!1)===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(a=n,a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,t)!function(e,t,n,r,o){n?l.nextTick(function(){t.pendingcb--,o(r)}):(t.pendingcb--,o(r));e._writableState.errorEmitted=!0,e.emit("error",r)}(e,n,r,t,o);else{var i=h(e,n);i||n.corked||n.bufferProcessing||!n.buffer.length||c(e,n),r?l.nextTick(function(){s(e,n,i,o)}):s(e,n,i,o)}var a}(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var t=m("./_stream_duplex");if(!(this instanceof o||this instanceof t))return new o(e);this._writableState=new r(e,this),this.writable=!0,n.call(this)}function f(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function s(e,t,n,r){var o,i;n||(o=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),t.pendingcb--,r(),a(e,t)}function c(e,n){if(n.bufferProcessing=!0,e._writev&&1<n.buffer.length){for(var r=[],t=0;t<n.buffer.length;t++)r.push(n.buffer[t].callback);n.pendingcb++,f(e,n,!0,n.length,n.buffer,"",function(e){for(var t=0;t<r.length;t++)n.pendingcb--,r[t](e)}),n.buffer=[]}else{for(t=0;t<n.buffer.length;t++){var o=n.buffer[t],i=o.chunk,a=o.encoding,s=o.callback,l=n.objectMode?1:i.length;if(f(e,n,!1,l,i,a,s),n.writing){t++;break}}t<n.buffer.length?n.buffer=n.buffer.slice(t):n.buffer.length=0}n.bufferProcessing=!1}function h(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function i(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function a(e,t){var n=h(0,t);return n&&(0===t.pendingcb?(i(e,t),t.finished=!0,e.emit("finish")):i(e,t)),n}d.inherits(o,n),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r,o,i,a=this._writableState,s=!1;return d.isFunction(t)&&(n=t,t=null),d.isBuffer(e)?t="buffer":t||(t=a.defaultEncoding),d.isFunction(n)||(n=function(){}),a.ended?(r=this,o=n,i=new Error("write after end"),r.emit("error",i),l.nextTick(function(){o(i)})):function(e,t,n,r){var o=!0;if(!(d.isBuffer(n)||d.isString(n)||d.isNullOrUndefined(n)||t.objectMode)){var i=new TypeError("Invalid non-string/buffer chunk");e.emit("error",i),l.nextTick(function(){r(i)}),o=!1}return o}(this,a,e,n)&&(a.pendingcb++,s=function(e,t,n,r,o){i=t,a=n,s=r,!i.objectMode&&!1!==i.decodeStrings&&d.isString(a)&&(a=new u(a,s)),n=a,d.isBuffer(n)&&(r="buffer");var i,a,s;var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);t.writing||t.corked?t.buffer.push(new p(n,r,o)):f(e,t,!1,l,n,r,o);return c}(this,a,e,t,n)),s},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||c(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var r=this._writableState;d.isFunction(e)?(n=e,t=e=null):d.isFunction(t)&&(n=t,t=null),d.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,a(e,t),n&&(t.finished?l.nextTick(n):e.once("finish",n));t.ended=!0}(this,r,n)}}).call(this,m("_process"))},{"./_stream_duplex":98,_process:136,buffer:57,"core-util-is":58,inherits:89,stream:175}],103:[function(t,n,r){(function(e){(r=n.exports=t("./lib/_stream_readable.js")).Stream=t("stream"),(r.Readable=r).Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js"),e.browser||"disable"!==e.env.READABLE_STREAM||(n.exports=t("stream"))}).call(this,t("_process"))},{"./lib/_stream_duplex.js":98,"./lib/_stream_passthrough.js":99,"./lib/_stream_readable.js":100,"./lib/_stream_transform.js":101,"./lib/_stream_writable.js":102,_process:136,stream:175}],104:[function(e,t,n){var r=e("./util"),i=e("level-errors").WriteError,a=r.getOptions,o=r.dispatchError;function s(e,t){this._levelup=e,this._codec=t,this.batch=e.db.batch(),this.ops=[],this.length=0}s.prototype.put=function(e,t,n){n=a(n);var r=this._codec.encodeKey(e,n),o=this._codec.encodeValue(t,n);try{this.batch.put(r,o)}catch(e){throw new i(e)}return this.ops.push({type:"put",key:r,value:o}),this.length++,this},s.prototype.del=function(e,t){t=a(t);var n=this._codec.encodeKey(e,t);try{this.batch.del(n)}catch(e){throw new i(e)}return this.ops.push({type:"del",key:n}),this.length++,this},s.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new i(e)}return this.ops=[],this.length=0,this},s.prototype.write=function(t){var n=this._levelup,r=this.ops;try{this.batch.write(function(e){if(e)return o(n,new i(e),t);n.emit("batch",r),t&&t()})}catch(e){throw new i(e)}},t.exports=s},{"./util":106,"level-errors":95}],105:[function(N,A,e){(function(o){var i=N("events").EventEmitter,e=N("util").inherits,t=N("util").deprecate,a=N("xtend"),s=N("prr"),l=N("deferred-leveldown"),n=N("level-iterator-stream"),r=N("level-errors"),c=r.WriteError,u=r.ReadError,d=r.NotFoundError,p=r.OpenError,f=r.EncodingError,h=r.InitializationError,m=N("./util"),g=N("./batch"),v=N("level-codec"),y=m.getOptions,b=m.defaultOptions,_=m.getLevelDOWN,w=m.dispatchError;m.isDefined;function k(e,t){return"function"==typeof e?e:t}function x(e,t,n){if(!(this instanceof x))return new x(e,t,n);var r;if(i.call(this),this.setMaxListeners(1/0),"function"==typeof e?((t="object"==typeof t?t:{}).db=e,e=null):"object"==typeof e&&"function"==typeof e.db&&(t=e,e=null),"function"==typeof t&&(n=t,t={}),(!t||"function"!=typeof t.db)&&"string"!=typeof e){if(r=new h("Must provide a location for the database"),n)return o.nextTick(function(){n(r)});throw r}t=y(t),this.options=a(b,t),this._codec=new v(this.options),this._status="new",s(this,"location",e,"e"),this.open(n)}function E(e,t,n){if(!e._isOpening()&&!e.isOpen())return w(e,new u("Database is not open"),n),!0}function C(e,t,n){w(e,new c(t),n)}function S(e,t,n){w(e,new u(t),n)}function T(n){return function(e,t){_()[n](e,t||function(){})}}e(x,i),x.prototype.open=function(t){var e,n,r=this;return this.isOpen()?(t&&o.nextTick(function(){t(null,r)}),this):this._isOpening()?t&&this.once("open",function(){t(null,r)}):(this.emit("opening"),this._status="opening",this.db=new l(this.location),e=this.options.db||_(),void(n=e(this.location)).open(this.options,function(e){if(e)return w(r,new p(e),t);r.db.setDb(n),r.db=n,r._status="open",t&&t(null,r),r.emit("open"),r.emit("ready")}))},x.prototype.close=function(e){var t=this;if(this.isOpen())this._status="closing",this.db.close(function(){t._status="closed",t.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=new l(this.location);else{if("closed"==this._status&&e)return o.nextTick(e);"closing"==this._status&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){t.close(e)})}},x.prototype.isOpen=function(){return"open"==this._status},x.prototype._isOpening=function(){return"opening"==this._status},x.prototype.isClosed=function(){return/^clos/.test(this._status)},x.prototype.get=function(n,r,o){var e,i=this;if(!E(this,0,o=k(r,o))){if(null==n||"function"!=typeof o)return S(this,"get() requires key and callback arguments",o);r=m.getOptions(r),e=this._codec.encodeKey(n,r),r.asBuffer=this._codec.valueAsBuffer(r),this.db.get(e,r,function(e,t){if(e)return e=/notfound/i.test(e)||e.notFound?new d("Key not found in database ["+n+"]",e):new u(e),w(i,e,o);if(o){try{t=i._codec.decodeValue(t,r)}catch(e){return o(new f(e))}o(null,t)}})}},x.prototype.put=function(t,n,e,r){var o,i,a=this;if(r=k(e,r),null==t)return C(this,"put() requires a key argument",r);E(this,0,r)||(e=y(e),o=this._codec.encodeKey(t,e),i=this._codec.encodeValue(n,e),this.db.put(o,i,e,function(e){if(e)return w(a,new c(e),r);a.emit("put",t,n),r&&r()}))},x.prototype.del=function(t,e,n){var r,o=this;if(n=k(e,n),null==t)return C(this,"del() requires a key argument",n);E(this,0,n)||(e=y(e),r=this._codec.encodeKey(t,e),this.db.del(r,e,function(e){if(e)return w(o,new c(e),n);o.emit("del",t),n&&n()}))},x.prototype.batch=function(t,e,n){var r,o=this;return arguments.length?(n=k(e,n),Array.isArray(t)?void(E(this,0,n)||(e=y(e),r=(r=o._codec.encodeBatch(t,e)).map(function(e){return e.type||void 0===e.key||void 0===e.value||(e.type="put"),e}),this.db.batch(r,e,function(e){if(e)return w(o,new c(e),n);o.emit("batch",t),n&&n()}))):C(this,"batch() requires an array argument",n)):new g(this,this._codec)},x.prototype.approximateSize=t(function(e,t,n,r){var o,i,a=this;if(r=k(n,r),n=y(n),null==e||null==t||"function"!=typeof r)return S(this,"approximateSize() requires start, end and callback arguments",r);o=this._codec.encodeKey(e,n),i=this._codec.encodeKey(t,n),this.db.approximateSize(o,i,function(e,t){if(e)return w(a,new p(e),r);r&&r(null,t)})},"db.approximateSize() is deprecated. Use db.db.approximateSize() instead"),x.prototype.readStream=x.prototype.createReadStream=function(e){return(e=a({keys:!0,values:!0},this.options,e)).keyEncoding=e.keyEncoding,e.valueEncoding=e.valueEncoding,(e=this._codec.encodeLtgt(e)).keyAsBuffer=this._codec.keyAsBuffer(e),e.valueAsBuffer=this._codec.valueAsBuffer(e),"number"!=typeof e.limit&&(e.limit=-1),new n(this.db.iterator(e),a(e,{decoder:this._codec.createStreamDecoder(e)}))},x.prototype.keyStream=x.prototype.createKeyStream=function(e){return this.createReadStream(a(e,{keys:!0,values:!1}))},x.prototype.valueStream=x.prototype.createValueStream=function(e){return this.createReadStream(a(e,{keys:!1,values:!0}))},x.prototype.toString=function(){return"LevelUP"},A.exports=x,A.exports.errors=N("level-errors"),A.exports.destroy=t(T("destroy"),"levelup.destroy() is deprecated. Use leveldown.destroy() instead"),A.exports.repair=t(T("repair"),"levelup.repair() is deprecated. Use leveldown.repair() instead")}).call(this,N("_process"))},{"./batch":104,"./util":106,_process:136,"deferred-leveldown":60,events:70,"level-codec":93,"level-errors":95,"level-iterator-stream":96,prr:142,util:197,xtend:200}],106:[function(n,e,t){n("xtend");var r,o=n("level-errors").LevelUPError,i=n("util").format;function a(e){return new o(i("Failed to require LevelDOWN (%s). Try `npm install leveldown` if it's missing",e.message))}e.exports={defaultOptions:{createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0},getOptions:function(e){return"string"==typeof e&&(e={valueEncoding:e}),"object"!=typeof e&&(e={}),e},getLevelDOWN:function(){if(r)return r;var e,t=n("../package.json").devDependencies.leveldown;try{e=n("leveldown/package").version}catch(e){throw a(e)}if(!n("semver").satisfies(e,t))throw new o("Installed version of LevelDOWN ("+e+") does not match required version ("+t+")");try{return r=n("leveldown")}catch(e){throw a(e)}},dispatchError:function(e,t,n){"function"==typeof n?n(t):e.emit("error",t)},isDefined:function(e){return void 0!==e}}},{"../package.json":107,"level-errors":95,leveldown:56,"leveldown/package":56,semver:56,util:197,xtend:200}],107:[function(e,t,n){t.exports={_args:[["levelup@1.3.2","/Users/lucas/Sandbox/makecode-sand/pxt"]],_development:!0,_from:"levelup@1.3.2",_id:"levelup@1.3.2",_inBundle:!1,_integrity:"sha1-syHTBx8OdcLfry8P6IZOW5o4e8k=",_location:"/levelup",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"levelup@1.3.2",name:"levelup",escapedName:"levelup",rawSpec:"1.3.2",saveSpec:null,fetchSpec:"1.3.2"},_requiredBy:["/pouchdb"],_resolved:"https://registry.npmjs.org/levelup/-/levelup-1.3.2.tgz",_spec:"1.3.2",_where:"/Users/lucas/Sandbox/makecode-sand/pxt",browser:{leveldown:!1,"leveldown/package":!1,semver:!1},bugs:{url:"https://github.com/level/levelup/issues"},contributors:[{name:"Rod Vagg",email:"r@va.gg",url:"https://github.com/rvagg"},{name:"John Chesley",email:"john@chesl.es",url:"https://github.com/chesles/"},{name:"Jake Verbaten",email:"raynos2@gmail.com",url:"https://github.com/raynos"},{name:"Dominic Tarr",email:"dominic.tarr@gmail.com",url:"https://github.com/dominictarr"},{name:"Max Ogden",email:"max@maxogden.com",url:"https://github.com/maxogden"},{name:"Lars-Magnus Skog",email:"ralphtheninja@riseup.net",url:"https://github.com/ralphtheninja"},{name:"David Björklund",email:"david.bjorklund@gmail.com",url:"https://github.com/kesla"},{name:"Julian Gruber",email:"julian@juliangruber.com",url:"https://github.com/juliangruber"},{name:"Paolo Fragomeni",email:"paolo@async.ly",url:"https://github.com/0x00a"},{name:"Anton Whalley",email:"anton.whalley@nearform.com",url:"https://github.com/No9"},{name:"Matteo Collina",email:"matteo.collina@gmail.com",url:"https://github.com/mcollina"},{name:"Pedro Teixeira",email:"pedro.teixeira@gmail.com",url:"https://github.com/pgte"},{name:"James Halliday",email:"mail@substack.net",url:"https://github.com/substack"},{name:"Jarrett Cruger",email:"jcrugzz@gmail.com",url:"https://github.com/jcrugzz"}],dependencies:{"deferred-leveldown":"~1.2.1","level-codec":"~6.1.0","level-errors":"~1.0.3","level-iterator-stream":"~1.3.0",prr:"~1.0.1",semver:"~5.1.0",xtend:"~4.0.0"},description:"Fast & simple storage - a Node.js-style LevelDB wrapper",devDependencies:{async:"~1.5.0",bustermove:"~1.0.0",delayed:"~1.0.1",faucet:"~0.0.1",leveldown:"^1.1.0",memdown:"~1.1.0","msgpack-js":"~0.3.0",referee:"~1.2.0",rimraf:"~2.4.3","slow-stream":"0.0.4",tap:"~2.3.1",tape:"~4.2.1"},homepage:"https://github.com/level/levelup",keywords:["leveldb","stream","database","db","store","storage","json"],license:"MIT",main:"lib/levelup.js",name:"levelup",repository:{type:"git",url:"git+https://github.com/level/levelup.git"},scripts:{test:"tape test/*-test.js | faucet"},version:"1.3.2"}},{}],108:[function(e,t,n){"use strict";var o=e("immediate");function c(){}var u={},i=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==c&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(t,n,r){o(function(){var e;try{e=n(r)}catch(e){return u.reject(t,e)}e===t?u.reject(t,new TypeError("Cannot resolve promise with itself")):u.resolve(t,e)})}function p(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(t,e){var n=!1;function r(e){n||(n=!0,u.reject(t,e))}function o(e){n||(n=!0,u.resolve(t,e))}var i=h(function(){e(o,r)});"error"===i.status&&r(i.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=s).prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(c);this.state!==r?d(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){u.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){u.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},u.resolve=function(e,t){var n=h(p,t);if("error"===n.status)return u.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},u.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},s.resolve=function(e){if(e instanceof this)return e;return u.resolve(new this(c),e)},s.reject=function(e){var t=new this(c);return u.reject(t,e)},s.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);var i=new Array(r),a=0,t=-1,s=new this(c);for(;++t<r;)l(e[t],t);return s;function l(e,t){n.resolve(e).then(function(e){i[t]=e,++a!==r||o||(o=!0,u.resolve(s,i))},function(e){o||(o=!0,u.reject(s,e))})}},s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=-1,i=new this(c);for(;++o<n;)a=e[o],t.resolve(a).then(function(e){r||(r=!0,u.resolve(i,e))},function(e){r||(r=!0,u.reject(i,e))});var a;return i}},{immediate:88}],109:[function(e,t,d){(function(i){function a(e){return null!=e&&""!==e}d.compare=function(e,t){if(i.isBuffer(e)){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=e[r]-t[r];if(o)return o}return e.length-t.length}return e<t?-1:t<e?1:0};var s=d.lowerBound=function(e){return a(e.gt)?e.gt:a(e.gte)?e.gte:a(e.min)?e.min:a(e.start)&&!e.reverse?e.start:a(e.end)&&e.reverse?e.end:void 0};d.lowerBoundInclusive=function(e){return!a(e.gt)},d.upperBoundInclusive=function(e){return!a(e.lt)};var l=d.lowerBoundExclusive=function(e){return!!a(e.gt)},c=d.upperBoundExclusive=function(e){return!!a(e.lt)},u=d.upperBound=function(e){return a(e.lt)?e.lt:a(e.lte)?e.lte:a(e.max)?e.max:a(e.start)&&e.reverse?e.start:a(e.end)&&!e.reverse?e.end:void 0};d.contains=function(e,t,n){n=n||d.compare;var r=s(e);if(a(r)&&((o=n(t,r))<0||0===o&&l(e)))return!1;var o,i=u(e);if(a(i)&&(0<(o=n(t,i))||0===o&&c(e)))return!1;return!0},d.filter=function(t,n){return function(e){return d.contains(t,e,n)}}}).call(this,{isBuffer:e("../is-buffer/index.js")})},{"../is-buffer/index.js":90}],110:[function(e,v,y){(function(e){!function(e){"use strict";var f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function l(e){this.tokens=[],this.tokens.links={},this.options=e||g.defaults,this.rules=f.normal,this.options.gfm&&(this.options.tables?this.rules=f.tables:this.rules=f.gfm)}f._label=/(?:\\[\[\]]|[^\[\]])+/,f._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,f.def=t(f.def).replace("label",f._label).replace("title",f._title).getRegex(),f.bullet=/(?:[*+-]|\d+\.)/,f.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,f.item=t(f.item,"gm").replace(/bull/g,f.bullet).getRegex(),f.list=t(f.list).replace(/bull/g,f.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+f.def.source+")").getRegex(),f._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",f.html=t(f.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,f._tag).getRegex(),f.paragraph=t(f.paragraph).replace("hr",f.hr).replace("heading",f.heading).replace("lheading",f.lheading).replace("tag","<"+f._tag).getRegex(),f.blockquote=t(f.blockquote).replace("paragraph",f.paragraph).getRegex(),f.normal=m({},f),f.gfm=m({},f.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),f.gfm.paragraph=t(f.paragraph).replace("(?!","(?!"+f.gfm.fences.source.replace("\\1","\\2")+"|"+f.list.source.replace("\\1","\\3")+"|").getRegex(),f.tables=m({},f.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),l.rules=f,l.lex=function(e,t){return new l(t).lex(e)},l.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},l.prototype.token=function(e,t){var n,r,o,i,a,s,l,c,u,d,p;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),1<o[0].length&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<s.align.length;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(c=0;c<s.cells.length;c++)s.cells[c]=s.cells[c].split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),p=1<(i=o[2]).length,this.tokens.push({type:"list_start",ordered:p,start:p?+i:""}),n=!1,d=(o=o[0].match(this.rules.item)).length,c=0;c<d;c++)l=(s=o[c]).length,~(s=s.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==d-1&&(i===(a=f.bullet.exec(o[c+1])[0])||1<i.length&&1<a.length||(e=o.slice(c+1).join("\n")+e,c=d-1)),r=n||/\n\n(?!\s*$)/.test(s),c!==d-1&&(n="\n"===s.charAt(s.length-1),r||(r=n)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(s,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),o[3]&&(o[3]=o[3].substring(1,o[3].length-1)),u=o[1].toLowerCase(),this.tokens.links[u]||(this.tokens.links[u]={href:o[2],title:o[3]});else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<s.align.length;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(c=0;c<s.cells.length;c++)s.cells[c]=s.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function r(e,t){if(this.options=t||g.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function o(e){this.options=e||{}}function i(){}function c(e){this.tokens=[],this.token=null,this.options=e||g.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function d(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function t(n,e){return n=n.source,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function a(e,t){return s[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?s[" "+e]=e+"/":s[" "+e]=e.replace(/[^/]*$/,"")),e=s[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=t(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=t(n.link).replace("inside",n._inside).replace("href",n._href).getRegex(),n.reflink=t(n.reflink).replace("inside",n._inside).getRegex(),n.normal=m({},n),n.pedantic=m({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=m({},n.normal,{escape:t(n.escape).replace("])","~|])").getRegex(),url:t(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",n._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:t(n.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),n.breaks=m({},n.gfm,{br:t(n.br).replace("{2,}","*").getRegex(),text:t(n.gfm.text).replace("{2,}","*").getRegex()}),r.rules=n,r.output=function(e,t,n){return new r(t,n).output(e)},r.prototype.output=function(e){for(var t,n,r,o,i="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),r="@"===o[2]?"mailto:"+(n=u(this.mangle(o[1]))):n=u(o[1]),i+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){i+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),i+=this.renderer.codespan(u(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),i+=this.renderer.text(u(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else o[0]=this.rules._backpedal.exec(o[0])[0],e=e.substring(o[0].length),"@"===o[2]?r="mailto:"+(n=u(o[0])):(n=u(o[0]),r="www."===o[1]?"http://"+n:n),i+=this.renderer.link(r,null,n);return i},r.prototype.outputLink=function(e,t){var n=u(t.href),r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},o.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+u(t,!0)+'">'+(n?e:u(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(d(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return n}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return n}this.options.baseUrl&&!p.test(e)&&(e=a(this.options.baseUrl,e));var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>"},o.prototype.image=function(e,t,n){this.options.baseUrl&&!p.test(e)&&(e=a(this.options.baseUrl,e));var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},o.prototype.text=function(e){return e},i.prototype.strong=i.prototype.em=i.prototype.codespan=i.prototype.del=i.prototype.text=function(e){return e},i.prototype.link=i.prototype.image=function(e,t,n){return""+n},i.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.inlineText=new r(e.links,m({},this.options,{renderer:new i})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,d(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,o="",i="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(o,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var a=this.token.ordered,s=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,a,s);case"list_item_start":for(i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var s={},p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function h(){}function m(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function g(e,n,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null);var o,i,a=(n=m({},g.defaults,n||{})).highlight,t=0;try{o=l.lex(e,n)}catch(e){return r(e)}i=o.length;var s=function(t){if(t)return n.highlight=a,r(t);var e;try{e=c.parse(o,n)}catch(e){t=e}return n.highlight=a,t?r(t):r(null,e)};if(!a||a.length<3)return s();if(delete n.highlight,!i)return s();for(;t<o.length;t++)!function(n){"code"!==n.type?--i||s():a(n.text,n.lang,function(e,t){return e?s(e):null==t||t===n.text?--i||s():(n.text=t,n.escaped=!0,void(--i||s()))})}(o[t])}else try{return n&&(n=m({},g.defaults,n)),c.parse(l.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||g.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}h.exec=h,g.options=g.setOptions=function(e){return m(g.defaults,e),g},g.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1,baseUrl:null},g.Parser=c,g.parser=c.parse,g.Renderer=o,g.TextRenderer=i,g.Lexer=l,g.lexer=l.lex,g.InlineLexer=r,g.inlineLexer=r.output,g.parse=g,void 0!==v&&"object"==typeof y?v.exports=g:"function"==typeof define&&define.amd?define(function(){return g}):e.marked=g}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(v,y,e){(function(e,t,i){var n=v("inherits"),r=v("abstract-leveldown").AbstractLevelDOWN,o=v("abstract-leveldown").AbstractIterator,a=v("ltgt"),u=t.setImmediate||e.nextTick,s=v("functional-red-black-tree"),l={};function c(e){return"string"==typeof e?"$"+e:JSON.stringify(e)}function d(e){return 0<a.compare(e,this._end)}function p(e){return 0<=a.compare(e,this._end)}function f(e){return a.compare(e,this._end)<0}function h(e){return a.compare(e,this._end)<=0}function m(e,t){o.call(this,e),this._limit=t.limit,-1===this._limit&&(this._limit=1/0);var n=e._store[e._location];this.keyAsBuffer=!1!==t.keyAsBuffer,this.valueAsBuffer=!1!==t.valueAsBuffer,this._reverse=t.reverse,this._options=t,this._done=0,this._reverse?(this._incr="prev",this._start=a.upperBound(t),this._end=a.lowerBound(t),void 0===this._start?this._tree=n.end:a.upperBoundInclusive(t)?this._tree=n.le(this._start):this._tree=n.lt(this._start),this._end&&(a.lowerBoundInclusive(t)?this._test=p:this._test=d)):(this._incr="next",this._start=a.lowerBound(t),this._end=a.upperBound(t),void 0===this._start?this._tree=n.begin:a.lowerBoundInclusive(t)?this._tree=n.ge(this._start):this._tree=n.gt(this._start),this._end&&(a.upperBoundInclusive(t)?this._test=h:this._test=f))}function g(e){if(!(this instanceof g))return new g(e);r.call(this,"string"==typeof e?e:""),this._location=this.location?c(this.location):"_tree",this._store=this.location?l:this,this._store[this._location]=this._store[this._location]||s(a.compare)}n(m,o),m.prototype._next=function(e){var t,n;return this._done++>=this._limit?u(e):this._tree.valid?(t=this._tree.key,n=this._tree.value,this._test(t)?(this.keyAsBuffer&&(t=new i(t)),this.valueAsBuffer&&(n=new i(n)),this._tree[this._incr](),void u(function(){e(null,t,n)})):u(e)):u(e)},m.prototype._test=function(){return!0},g.clearGlobalStore=function(e){e?Object.keys(l).forEach(function(e){delete l[e]}):l={}},n(g,r),g.prototype._open=function(e,t){var n=this;u(function(){t(null,n)})},g.prototype._put=function(e,t,n,r){null==t&&(t="");var o=this._store[this._location].find(e);o.valid?this._store[this._location]=o.update(t):this._store[this._location]=this._store[this._location].insert(e,t),u(r)},g.prototype._get=function(e,t,n){var r=this._store[this._location].get(e);if(void 0===r){var o=new Error("NotFound");return u(function(){n(o)})}!1===t.asBuffer||this._isBuffer(r)||(r=new i(String(r))),u(function(){n(null,r)})},g.prototype._del=function(e,t,n){this._store[this._location]=this._store[this._location].remove(e),u(n)},g.prototype._batch=function(e,t,n){for(var r,o,i,a,s=-1,l=e.length,c=this._store[this._location];++s<l;)if(e[s]){if(o=this._isBuffer(e[s].key)?e[s].key:String(e[s].key),r=this._checkKey(o,"key"))return u(function(){n(r)});if(a=c.find(o),"put"===e[s].type){if(i=this._isBuffer(e[s].value)?e[s].value:String(e[s].value),r=this._checkKey(i,"value"))return u(function(){n(r)});c=a.valid?a.update(i):c.insert(o,i)}else c=a.remove()}this._store[this._location]=c,u(n)},g.prototype._iterator=function(e){return new m(this,e)},g.prototype._isBuffer=function(e){return i.isBuffer(e)},g.destroy=function(e,t){var n=c(e);n in l&&delete l[n],u(t)},y.exports=g}).call(this,v("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},v("buffer").Buffer)},{_process:136,"abstract-leveldown":115,buffer:57,"functional-red-black-tree":86,inherits:89,ltgt:109}],112:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{_process:136,dup:61}],113:[function(e,t,n){arguments[4][62][0].apply(n,arguments)},{_process:136,dup:62}],114:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{"../../../is-buffer/index.js":90,"./abstract-chained-batch":112,"./abstract-iterator":113,_process:136,dup:63,xtend:200}],115:[function(e,t,n){arguments[4][64][0].apply(n,arguments)},{"./abstract-chained-batch":112,"./abstract-iterator":113,"./abstract-leveldown":114,"./is-leveldown":116,dup:64}],116:[function(e,t,n){arguments[4][65][0].apply(n,arguments)},{"./abstract-leveldown":114,dup:65}],117:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))c.call(n,a)&&(o[a]=n[a]);if(l){r=l(n);for(var s=0;s<r.length;s++)u.call(n,r[s])&&(o[r[s]]=n[r[s]])}}return o}},{}],118:[function(e,t,s){"use strict";var c=-324,u=3,d="",p=e("./utils");function n(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,o=r?"0":"2",i=(r?-n:n)-c,a=p.padLeft(i.toString(),"0",u);o+=d+a;var s=Math.abs(parseFloat(t[0]));r&&(s=10-s);var l=s.toFixed(20);return l=l.replace(/\.?0+$/,""),o+=d+l}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,o=n.length,i="";if(t)for(;++r<o;)i+=s.toIndexableString(n[r]);else for(;++r<o;){var a=n[r];i+=s.toIndexableString(a)+s.toIndexableString(e[a])}return i}return""}function f(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var o="0"===e[t];t++;var i="",a=e.substring(t,t+u),s=parseInt(a,10)+c;for(o&&(s=-s),t+=u;;){var l=e[t];if("\0"===l)break;i+=l,t++}n=1===(i=i.split(".")).length?parseInt(i,10):parseFloat(i[0]+"."+i[1]),o&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:t-r}}function h(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(n);else if(i===e.length-2){o[e.pop()]=n}else e.push(n)}}function a(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}s.collate=function(e,t){if(e===t)return 0;e=s.normalizeKey(e),t=s.normalizeKey(t);var n,r,o=a(e),i=a(t);if(o-i!=0)return o-i;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:e<t?-1:1;case"string":return(n=e)===(r=t)?0:r<n?1:-1}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=s.collate(e[r],t[r]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=s.collate(n[i],r[i]);if(0!==a)return a;if(0!==(a=s.collate(e[n[i]],t[r[i]])))return a}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)},s.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=s.normalizeKey(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var o in e={},t)if(t.hasOwnProperty(o)){var i=t[o];void 0!==i&&(e[o]=s.normalizeKey(i))}}}return e},s.toIndexableString=function(e){return a(e=s.normalizeKey(e))+d+n(e)+"\0"},s.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var o=e[r++];if("\0"!==o)switch(o){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var i=f(e,r);t.push(i.num),r+=i.length;break;case"4":for(var a="";;){var s=e[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var c={element:{},index:t.length};t.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+o)}else{if(1===t.length)return t.pop();h(t,n)}}}},{"./utils":119}],119:[function(e,t,n){"use strict";function r(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}n.padLeft=function(e,t,n){return r(e,t,n)+e},n.padRight=function(e,t,n){return e+r(e,t,n)},n.stringLexCompare=function(e,t){var n,r=e.length,o=t.length;for(n=0;n<r;n++){if(n===o)return 1;var i=e.charAt(n),a=t.charAt(n);if(i!==a)return i<a?-1:1}return r<o?-1:0},n.intToDecimalForm=function(e){var t=e<0,n="";do{n=(t?-Math.ceil(e%10):Math.floor(e%10))+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],120:[function(e,t,n){"use strict";function r(){this.store={}}function o(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}n.Map=r,n.Set=o,r.prototype.mangle=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);if(t in this.store)return this.store[t]},r.prototype.set=function(e,t){var n=this.mangle(e);return this.store[n]=t,!0},r.prototype.has=function(e){return this.mangle(e)in this.store},r.prototype.delete=function(e){var t=this.mangle(e);return t in this.store&&(delete this.store[t],!0)},r.prototype.forEach=function(e){for(var t=Object.keys(this.store),n=0,r=t.length;n<r;n++){var o=t[n];e(this.store[o],o=this.unmangle(o))}},o.prototype.add=function(e){return this.store.set(e,!0)},o.prototype.has=function(e){return this.store.has(e)},o.prototype.delete=function(e){return this.store.delete(e)}},{}],121:[function(e,t,n){t.exports=e("../lib/extras/memory")},{"../lib/extras/memory":122}],122:[function(Ve,e,t){(function(f,e,I){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var h=t(Ve("levelup")),m=t(Ve("sublevel-pouchdb")),b=Ve("through2"),g=t(Ve("argsarray")),R=Ve("pouchdb-collections"),v=t(Ve("double-ended-queue")),n=t(Ve("lie")),r=t(Ve("debug")),o=Ve("events"),i=t(Ve("inherits")),p=t(Ve("spark-md5")),a=t(Ve("vuvuzela")),s=Ve("js-extend"),l=t(Ve("memdown")),y={toSublevel:function(e,t,n){f.nextTick(function(){n()})},localAndMetaStores:function(e,t,n){f.nextTick(function(){n()})}},D="function"==typeof Promise?Promise:n;function c(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var u=Function.prototype.toString,d=u.call(Object);function _(e){var t,n,r,o;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=_(e[n]);return t}if(e instanceof Date)return e.toISOString();if((o=e)instanceof ArrayBuffer||"undefined"!=typeof Blob&&o instanceof Blob)return c(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=_(e[n]);void 0!==i&&(t[n]=i)}return t}var w;r("pouchdb:api");function k(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(k())w=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),w=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){w=!1}function x(){return w}function E(){var t;o.EventEmitter.call(this),this._listeners={},t=this,k()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):x()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function C(e){Error.call(this,e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}i(E,o.EventEmitter),E.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var o=this,i=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(o._listeners[t])if(i)i="waiting";else{i=!0;var e=function(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===i&&setTimeout(function(){a()},0),i=!1}).on("error",function(){i=!1})}}},E.prototype.removeListener=function(e,t){t in this._listeners&&o.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t])},E.prototype.notifyLocalWindows=function(e){k()?chrome.storage.local.set({dbName:e}):x()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},E.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},i(C,Error),C.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new C({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),new C({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"});var S=new C({status:404,error:"not_found",reason:"missing"}),j=new C({status:409,error:"conflict",reason:"Document update conflict"}),T=new C({status:400,error:"bad_request",reason:"_id field must contain a string"}),N=new C({status:412,error:"missing_id",reason:"_id is required for puts"}),A=new C({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),F=new C({status:412,error:"precondition_failed",reason:"Database not open"}),M=(new C({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),new C({status:500,error:"badarg",reason:"Some query argument is invalid"})),P=(new C({status:400,error:"invalid_request",reason:"Request was invalid"}),new C({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),new C({status:500,error:"doc_validation",reason:"Bad special document member"})),O=new C({status:400,error:"bad_request",reason:"Something wrong with the request"}),L=(new C({status:400,error:"bad_request",reason:"Document must be a JSON object"}),new C({status:404,error:"not_found",reason:"Database not found"}),new C({status:500,error:"indexed_db_went_bad",reason:"unknown"}),new C({status:500,error:"web_sql_went_bad",reason:"unknown"}),new C({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),new C({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),new C({status:400,error:"bad_request",reason:"Invalid rev format"})),U=(new C({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),new C({status:412,error:"missing_stub"}));new C({status:413,error:"invalid_url",reason:"Provided URL is invalid"});function B(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=C.prototype,new t(e)}function H(r){var o={},i=r.filter&&"function"==typeof r.filter;return o.query=r.query_params,function(e){e.doc||(e.doc={});var t=i&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return B(O,r)}}(r.filter,e.doc,o);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}}var q=function(){}.name?function(e){return e.name}:function(e){return e.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]};var z="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");function W(e){return 0|Math.random()*e}function V(e,t){t=t||z.length;var n="",r=-1;if(e){for(;++r<e;)n+=z[W(t)];return n}for(;++r<36;)switch(r){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=z[3&W(16)|8];break;default:n+=z[W(16)]}return n}function K(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}var $=K(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),X=K(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function G(e){if(!/^\d+\-./.test(e))return B(L);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function J(e,t){var n,r,o,i={status:"available"};if(e._deleted&&(i.deleted=!0),t)if(e._id||(e._id=V()),r=V(32,16).toLowerCase(),e._rev){if((o=G(e._rev)).error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[r,i,[]]]]}],n=o.prefix+1}else e._rev_tree=[{pos:1,ids:[r,i,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,a=r.length;i<a;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}(e._revisions,i),n=e._revisions.start,r=e._revisions.ids[0]),!e._rev_tree){if((o=G(e._rev)).error)return o;n=o.prefix,r=o.id,e._rev_tree=[{pos:n,ids:[r,i,[]]}]}!function(e){var t;if(e?"string"!=typeof e?t=B(T):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=B(A)):t=B(N),t)throw t}(e._id),e._rev=n+"-"+r;var a={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l="_"===s[0];if(l&&!$[s]){var c=B(P,s);throw c.message=P.message+": "+s,c}l&&!X[s]?a.metadata[s.slice(1)]=e[s]:a.data[s]=e[s]}return a}function Q(e){for(var t,n,r,o,i=e.rev_tree.slice();o=i.pop();){var a=o.ids,s=a[2],l=o.pos;if(s.length)for(var c=0,u=s.length;c<u;c++)i.push({pos:l+1,ids:s[c]});else{var d=!!a[1].deleted,p=a[0];t&&!(r!==d?r:n!==l?n<l:t<p)||(t=p,n=l,r=d)}}return n+"-"+t}function Y(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,a=i[2],s=t(0===a.length,o,i[0],n.ctx,i[1]),l=0,c=a.length;l<c;l++)r.push({pos:o+1,ids:a[l],ctx:s})}function Z(e,t){return e.pos-t.pos}function ee(e){for(var t=Q(e),n=function(e){var i=[];Y(e,function(e,t,n,r,o){e&&i.push({rev:t+"-"+n,pos:t,opts:o})}),i.sort(Z).reverse();for(var t=0,n=i.length;t<n;t++)delete i[t].pos;return i}(e.rev_tree),r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.rev===t||a.opts.deleted||r.push(a.rev)}return r}function te(e,t){return e.pos-t.pos}function ne(e,t){for(var n,r,o=t,i=e.length;o<i;o++){var a=e[o],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function re(e,t){return e[0]<t[0]?-1:1}function oe(e,t){for(var n,r,o,i=[{tree1:e,tree2:t}],a=!1;0<i.length;){var s=i.pop(),l=s.tree1,c=s.tree2;(l[1].status||c[1].status)&&(l[1].status="available"===l[1].status||"available"===c[1].status?"available":"missing");for(var u=0;u<c[2].length;u++)if(l[2][0]){for(var d=!1,p=0;p<l[2].length;p++)l[2][p][0]===c[2][u][0]&&(i.push({tree1:l[2][p],tree2:c[2][u]}),d=!0);d||(a="new_branch",n=l[2],r=c[2][u],void 0,o=function(e,t,n){for(var r,o=0,i=e.length;o<i;)n(e[r=o+i>>>1],t)<0?o=r+1:i=r;return o}(n,r,re),n.splice(o,0,r))}else a="new_leaf",l[2][0]=c[2][u]}return{conflicts:a,tree:e}}function ie(e,t,n){var r,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,l=e.length;s<l;s++){var c=e[s];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=oe(c.ids,t.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(!0!==n){var u=c.pos<t.pos?c:t,d=c.pos<t.pos?t:c,p=d.pos-u.pos,f=[],h=[];for(h.push({ids:u.ids,diff:p,parent:null,parentIdx:null});0<h.length;){var m=h.pop();if(0!==m.diff)for(var g=m.ids[2],v=0,y=g.length;v<y;v++)h.push({ids:g[v],diff:m.diff-1,parent:m.ids,parentIdx:v});else m.ids[0]===d.ids[0]&&f.push(m)}var b=f[0];b?(r=oe(b.ids,d.ids),b.parent[2][b.parentIdx]=r.tree,o.push({pos:u.pos,ids:u.ids}),i=i||r.conflicts,a=!0):o.push(c)}else o.push(c)}return a||o.push(t),o.sort(te),{tree:o,conflicts:i||"internal_node"}}function ae(e,t,n){var r=ie(e,t),o=function(e,t){for(var n,r=function(e){for(var t,n=[],r=e.slice();t=r.pop();){var o=t.pos,i=t.ids,a=i[0],s=i[1],l=i[2],c=0===l.length,u=t.history?t.history.slice():[];u.push({id:a,opts:s}),c&&n.push({pos:o+1-u.length,ids:u});for(var d=0,p=l.length;d<p;d++)r.push({pos:o+1,ids:l[d],history:u})}return n.reverse()}(e),o={},i=0,a=r.length;i<a;i++){for(var s=r[i],l=s.ids,c=Math.max(0,l.length-t),u={pos:s.pos+c,ids:ne(l,c)},d=0;d<c;d++){var p=s.pos+d+"-"+l[d].id;o[p]=!0}n=n?ie(n,u,!0).tree:[u]}return Y(n,function(e,t,n){delete o[t+"-"+n]}),{tree:n,revs:Object.keys(o)}}(r.tree,n);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function se(e){return e.ids}function le(e,t){t||(t=Q(e));for(var n,r=t.substring(t.indexOf("-")+1),o=e.rev_tree.map(se);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}}function ce(e){return/^_local/.test(e)}var ue=function(e){return atob(e)},de=function(e){return btoa(e)};function pe(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}function fe(e,t){return pe([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(e)],{type:t})}function he(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return t}var me=e.setImmediate||e.setTimeout,ge=32768;function ve(t,e,n,r,o){var i,a,s;(0<n||r<e.size)&&(a=n,s=r,e=(i=e).webkitSlice?i.webkitSlice(a,s):i.slice(a,s)),function(e,n){if("undefined"==typeof FileReader)return n((new FileReaderSync).readAsArrayBuffer(e));var t=new FileReader;t.onloadend=function(e){var t=e.target.result||new ArrayBuffer(0);n(t)},t.readAsArrayBuffer(e)}(e,function(e){t.append(e),o()})}function ye(e,t,n,r,o){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),o()}function be(n,r){var e="string"==typeof n,t=e?n.length:n.size,o=Math.min(ge,t),i=Math.ceil(t/o),a=0,s=e?new p:new p.ArrayBuffer,l=e?ye:ve;function c(){me(d)}function u(){var e=s.end(!0),t=de(e);r(t),s.destroy()}function d(){var e=a*o,t=e+o;l(s,n,e,t,++a<i?c:u)}d()}function _e(e,t,n,r,o,i,a,s){if(function(e,t){for(var n,r=e.slice(),o=t.split("-"),i=parseInt(o[0],10),a=o[1];n=r.pop();){if(n.pos===i&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,c=s.length;l<c;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1}(t.rev_tree,n.metadata.rev))return r[o]=n,i();var l=t.winningRev||Q(t),c="deleted"in t?t.deleted:le(t,l),u="deleted"in n.metadata?n.metadata.deleted:le(n.metadata),d=/^1-/.test(n.metadata.rev);if(c&&!u&&s&&d){var p=n.data;p._rev=l,p._id=n.metadata.id,n=J(p,s)}var f=ae(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(c&&u||!c&&"new_leaf"!==f.conflicts||c&&!u&&"new_branch"===f.conflicts)){var h=B(j);return r[o]=h,i()}var m=n.metadata.rev;n.metadata.rev_tree=f.tree,n.stemmedRevs=f.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var g=Q(n.metadata),v=le(n.metadata,g),y=c===v?0:c<v?-1:1;a(n,g,v,m===g?v:le(n.metadata,m),!0,y,o,i)}function we(l,e,o,c,i,u,d,p,t){l=l||1e3;var f=p.new_edits,a=new R.Map,n=0,s=e.length;function h(){++n===s&&t&&t()}e.forEach(function(e,n){if(e._id&&ce(e._id)){var t=e._deleted?"_removeLocal":"_putLocal";o[t](e,{ctx:i},function(e,t){u[n]=e||t,h()})}else{var r=e.metadata.id;a.has(r)?(s--,a.get(r).push([e,n])):a.set(r,[[e,n]])}}),a.forEach(function(o,i){var a=0;function s(){++a<o.length?e():h()}function e(){var e=o[a],t=e[0],n=e[1];if(c.has(i))_e(l,c.get(i),t,u,n,s,d,f);else{var r=ae([],t.metadata.rev_tree[0],l);t.metadata.rev_tree=r.tree,t.stemmedRevs=r.stemmedRevs||[],function(e,t,n){var r=Q(e.metadata),o=le(e.metadata,r);if("was_delete"in p&&o)return u[t]=B(S,"deleted"),n();if(f&&"missing"===e.metadata.rev_tree[0].ids[1].status){var i=B(j);return u[t]=i,n()}d(e,r,o,o,!1,o?0:1,t,n)}(t,n,s)}}e()})}function ke(e,t){return pe([new Uint8Array(e)],{type:t})}function xe(e,t){!function(e,n){if("undefined"==typeof FileReader)return n(he((new FileReaderSync).readAsArrayBuffer(e)));var t=new FileReader,r="function"==typeof t.readAsBinaryString;t.onloadend=function(e){var t=e.target.result||"";if(r)return n(t);n(he(t))},r?t.readAsBinaryString(e):t.readAsArrayBuffer(e)}(e,t)}function Ee(e,t){var n=t.prefix()[0],r=e._cache,o=r.get(n);return o||(o=new R.Map,r.set(n,o)),o}function Ce(){this._batch=[],this._cache=new R.Map}Ce.prototype.get=function(e,n,r){var o=Ee(this,e),t=o.get(n);return t?f.nextTick(function(){r(null,t)}):null===t?f.nextTick(function(){r({name:"NotFoundError"})}):void e.get(n,function(e,t){if(e)return"NotFoundError"===e.name&&o.set(n,null),r(e);o.set(n,t),r(null,t)})},Ce.prototype.batch=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],o=Ee(this,r.prefix);"put"===r.type?o.set(r.key,r.value):o.set(r.key,null)}this._batch=this._batch.concat(e)},Ce.prototype.execute=function(e,t){for(var n=new R.Set,r=[],o=this._batch.length-1;0<=o;o--){var i=this._batch[o],a=i.prefix.prefix()[0]+"ÿ"+i.key;n.has(a)||(n.add(a),r.push(i))}e.batch(r,t)};var Se="document-store",Te="by-sequence",Ne="attach-store",Ae="attach-binary-store",Pe="local-store",Oe="meta-store",Ie=new R.Map,Re="_local_last_update_seq",De="_local_doc_count",je="_local_uuid",Fe="md5-",Me={encode:function(t){try{return JSON.stringify(t)}catch(e){return a.stringify(t)}},decode:function(e){return e.length<5e4?JSON.parse(e):function(t){try{return JSON.parse(t)}catch(e){return a.parse(t)}}(e)},buffer:!1,type:"cheap-json"},Le=new E;function Ue(e){return"winningRev"in e?e.winningRev:Q(e)}function Be(e,t){return"deleted"in e?e.deleted:le(e,t)}function He(e,n,r){var o=[];return e.forEach(function(n){n.doc&&n.doc._attachments&&Object.keys(n.doc._attachments).forEach(function(e){var t=n.doc._attachments[e];"data"in t||o.push(t)})}),D.all(o.map(function(e){return t=n,a=r,s=(i=e).content_type,new D(function(r,o){t.binaryStore.get(i.digest,function(e,t){var n;if(e){if("NotFoundError"!==e.name)return o(e);n=a.binary?fe("",s):""}else n=a.binary?ke(t,s):t.toString("base64");delete i.stub,delete i.length,i.data=n,r()})});var i,t,a,s}))}function qe(t,n){t=_(t);var r,T,N=this,A={},p=t.revs_limit,P=t.name;void 0===t.createIfMissing&&(t.createIfMissing=!0);var o,i=t.db,e=q(i);function a(){A.docStore=T.sublevel(Se,{valueEncoding:Me}),A.bySeqStore=T.sublevel(Te,{valueEncoding:"json"}),A.attachmentStore=T.sublevel(Ne,{valueEncoding:"json"}),A.binaryStore=T.sublevel(Ae,{valueEncoding:"binary"}),A.localStore=T.sublevel(Pe,{valueEncoding:"json"}),A.metaStore=T.sublevel(Oe,{valueEncoding:"json"}),y.localAndMetaStores(T,A,function(){A.metaStore.get(Re,function(e,t){void 0===T._updateSeq&&(T._updateSeq=t||0),A.metaStore.get(De,function(e,t){T._docCount=e?0:t,A.metaStore.get(je,function(e,t){r=e?V():t,A.metaStore.put(je,r,function(){f.nextTick(function(){n(null,N)})})})})})})}function s(e,t){try{e.apply(null,t)}catch(e){t[t.length-1](e)}}function l(){var e,t,n,r=T._queue.peekFront();"read"===r.type?function(e){var r=[e],t=1,n=T._queue.get(t);for(;void 0!==n&&"read"===n.type;)r.push(n),t++,n=T._queue.get(t);var o=0;r.forEach(function(e){var t=e.args,n=t[t.length-1];t[t.length-1]=g(function(e){n.apply(null,e),++o===r.length&&f.nextTick(function(){r.forEach(function(){T._queue.shift()}),T._queue.length&&l()})}),s(e.fun,t)})}(r):(t=(e=r).args,n=t[t.length-1],t[t.length-1]=g(function(e){n.apply(null,e),f.nextTick(function(){T._queue.shift(),T._queue.length&&l()})}),s(e.fun,t))}function c(t){return g(function(e){T._queue.push({fun:t,args:e,type:"write"}),1===T._queue.length&&f.nextTick(l)})}function u(t){return g(function(e){T._queue.push({fun:t,args:e,type:"read"}),1===T._queue.length&&f.nextTick(l)})}function O(e){return("0000000000000000"+e).slice(-16)}function d(e,t){i.destroy(e,t)}Ie.has(e)?o=Ie.get(e):(o=new R.Map,Ie.set(e,o)),o.has(P)?(T=o.get(P),a()):o.set(P,m(h(P,t,function(e){if(e)return o.delete(P),n(e);(T=o.get(P))._docCount=-1,T._queue=new v,t.migrate?y.toSublevel(P,T,a):a()}))),N.type=function(){return"leveldb"},N._id=function(e){e(null,r)},N._info=function(e){var t={doc_count:T._docCount,update_seq:T._updateSeq,backend_adapter:q(i)};return f.nextTick(function(){e(null,t)})},N._get=u(function(e,o,i){o=_(o),A.docStore.get(e,function(e,n){if(e||!n)return i(B(S,"missing"));var r=Ue(n);if(Be(n,r)&&!o.rev)return i(B(S,"deleted"));r=o.rev?o.rev:r;var t=n.rev_map[r];A.bySeqStore.get(O(t),function(e,t){if(!t)return i(B(S));if("_id"in t&&t._id!==n.id)return i(new Error("wrong doc returned"));if(t._id=n.id,"_rev"in t){if(t._rev!==r)return i(new Error("wrong doc returned"))}else t._rev=r;return i(null,{doc:t,metadata:n})})})}),N._getAttachment=function(e,t,n,r,o){var i=n.digest,a=n.content_type;A.binaryStore.get(i,function(e,t){if(e)return"NotFoundError"!==e.name?o(e):o(null,r.binary?pe([""],{type:a}):"");r.binary?o(null,ke(t,a)):o(null,t.toString("base64"))})},N._bulkDocs=c(function(e,t,b){var n=t.new_edits,_=new Array(e.docs.length),w=new R.Map,k=new R.Map,x=new Ce,E=0,C=T._updateSeq,s=e.docs,r=s.map(function(e){if(e._id&&ce(e._id))return e;var t=J(e,n);return t.metadata&&!t.metadata.rev_map&&(t.metadata.rev_map={}),t}),o=r.filter(function(e){return e.error});if(o.length)return b(o[0]);function i(e,t){var n=D.resolve();e.forEach(function(e,r){n=n.then(function(){return new D(function(t,n){N._doCompactionNoLock(r,e,{ctx:x},function(e){if(e)return n(e);t()})})})}),n.then(function(){t()},t)}function a(e){var n=new R.Map;w.forEach(function(e,t){var i;n.set(t,(i=[],Y(e.rev_tree,function(e,t,n,r,o){"available"!==o.status||e||(i.push(t+"-"+n),o.status="missing")}),i))}),i(n,e)}function l(){i(k,function(e){if(e&&d(e),N.auto_compaction)return a(d);d()})}function c(n,r,e,t,o,i,a,s){E+=i;var l=null,c=0;n.metadata.winningRev=r,n.metadata.deleted=e,n.data._id=n.metadata.id,n.data._rev=n.metadata.rev,t&&(n.data._deleted=!0),n.stemmedRevs.length&&k.set(n.metadata.id,n.stemmedRevs);var u=n.data._attachments?Object.keys(n.data._attachments):[];function d(e){c++,l||(e?s(l=e):c===u.length&&y())}function p(t,n,r,o){return function(e){!function(e,n,t,r,o){var i=e.data._attachments[t];delete i.data,i.digest=n,i.length=r.length;var a=e.metadata.id,s=e.metadata.rev;i.revpos=parseInt(s,10),S(a,s,n,function(e,t){return e?o(e):0===r.length?o(e):t?(x.batch([{type:"put",prefix:A.binaryStore,key:n,value:new I(r,"binary")}]),void o()):o(e)})}(t,Fe+e,n,r,o)}}function f(t,n,r){return function(e){be(e,p(t,n,e,r))}}for(var h=0;h<u.length;h++){var m,g=u[h],v=n.data._attachments[g];if(v.stub)S(n.data._id,n.data._rev,v.digest,d);else if("string"==typeof v.data){try{m=ue(v.data)}catch(e){return void b(B(M,"Attachment is not a valid base64 string"))}f(n,g,d)(m)}else xe(v.data,f(n,g,d))}function y(){var e=n.metadata.rev_map[n.metadata.rev];if(e)return s();e=++C,n.metadata.rev_map[n.metadata.rev]=n.metadata.seq=e;var t=[{key:O(e),value:n.data,prefix:A.bySeqStore,type:"put"},{key:n.metadata.id,value:n.metadata,prefix:A.docStore,type:"put"}];x.batch(t),_[a]={ok:!0,id:n.metadata.id,rev:r},w.set(n.metadata.id,n.metadata),s()}u.length||y()}var u={};function S(r,o,i,t){function e(t){var e=[r,o].join("@"),n={};return t?t.refs&&(n.refs=t.refs,n.refs[e]=!0):(n.refs={},n.refs[e]=!0),new D(function(e){x.batch([{type:"put",prefix:A.attachmentStore,key:i,value:n}]),e(!t)})}var n=u[i]||D.resolve();u[i]=n.then(function(){return new D(function(n,r){x.get(A.attachmentStore,i,function(e,t){if(e&&"NotFoundError"!==e.name)return r(e);n(t)})}).then(e).then(function(e){t(null,e)},t)})}function d(e){if(e)return f.nextTick(function(){b(e)});x.batch([{prefix:A.metaStore,type:"put",key:Re,value:C},{prefix:A.metaStore,type:"put",key:De,value:T._docCount+E}]),x.execute(T,function(e){if(e)return b(e);T._docCount+=E,T._updateSeq=C,Le.notify(P),f.nextTick(function(){b(null,_)})})}if(!r.length)return b(null,[]);!function(t){var o=[];if(s.forEach(function(n){n&&n._attachments&&Object.keys(n._attachments).forEach(function(e){var t=n._attachments[e];t.stub&&o.push(t.digest)})}),!o.length)return t();var i,a=0;o.forEach(function(e){var n,r;n=e,r=function(e){e&&!i&&(i=e),++a===o.length&&t(i)},x.get(A.attachmentStore,n,function(e){if(e){var t=B(U,"unknown stub attachment with digest "+n);r(t)}else r()})})}(function(e){if(e)return b(e);!function(e){var r,t=0;function o(){if(++t===s.length)return e(r)}s.forEach(function(n){if(n._id&&ce(n._id))return o();x.get(A.docStore,n._id,function(e,t){e?"NotFoundError"!==e.name&&(r=e):w.set(n._id,t),o()})})}(function(e){if(e)return b(e);we(p,r,N,w,x,_,c,t,l)})})}),N._allDocs=u(function(p,i){var e;p=_(p),e=function(e,t){if(e)return i(e);var l,n={},c=p.skip||0;if(p.startkey&&(n.gte=p.startkey),p.endkey&&(n.lte=p.endkey),p.key&&(n.gte=n.lte=p.key),p.descending){n.reverse=!0;var r=n.lte;n.lte=n.gte,n.gte=r}if("number"==typeof p.limit&&(l=p.limit),0===l||"start"in n&&"end"in n&&n.start>n.end)return i(null,{total_rows:t,offset:p.skip,rows:[]});var u=[],d=A.docStore.readStream(n),o=b.obj(function(e,t,r){var o=e.value,i=Ue(o),a=Be(o,i);if(a){if("ok"!==p.deleted)return void r()}else{if(0<c--)return void r();if("number"==typeof l&&l--<=0)return d.unpipe(),d.destroy(),void r()}function n(e){var t={id:o.id,key:o.id,value:{rev:i}};if(p.include_docs)for(var n in t.doc=e,t.doc._rev=t.value.rev,p.conflicts&&(t.doc._conflicts=ee(o)),t.doc._attachments)t.doc._attachments.hasOwnProperty(n)&&(t.doc._attachments[n].stub=!0);if(!1===p.inclusive_end&&o.id===p.endkey)return r();if(a){if("ok"!==p.deleted)return r();t.value.deleted=!0,t.doc=null}u.push(t),r()}if(p.include_docs){var s=o.rev_map[i];A.bySeqStore.get(O(s),function(e,t){n(t)})}else n()},function(e){D.resolve().then(function(){if(p.include_docs&&p.attachments)return He(u,A,p)}).then(function(){i(null,{total_rows:t,offset:p.skip,rows:u})},i),e()}).on("unpipe",function(){o.end()});d.on("error",i),d.pipe(o)},T.isClosed()?e(new Error("database is closed")):e(null,T._docCount)}),N._changes=function(l){if((l=_(l)).continuous){var e=P+":"+V();return Le.addListener(P,e,N,l),Le.notify(P),{cancel:function(){Le.removeListener(P,e)}}}var c,u=l.descending,d=[],p=l.since||0,f=0,t={reverse:u};"limit"in l&&0<l.limit&&(c=l.limit),t.reverse||(t.start=O(l.since||0));var h,m=l.doc_ids&&new R.Set(l.doc_ids),g=H(l),v=new R.Map;function y(){l.done=!0,h&&l.limit&&l.limit<d.length&&(d.length=l.limit),n.unpipe(r),n.destroy(),l.continuous||l.cancelled||(l.include_docs&&l.attachments?He(d,A,l).then(function(){l.complete(null,{results:d,last_seq:p})}):l.complete(null,{results:d,last_seq:p}))}h="return_docs"in l?l.return_docs:!("returnDocs"in l)||l.returnDocs;var n=A.bySeqStore.readStream(t),r=b.obj(function(e,t,o){if(c&&c<=f)return y(),o();if(l.cancelled||l.done)return o();var n,r,i=(n=e.key,parseInt(n,10)),a=e.value;if(i===l.since&&!u)return o();if(m&&!m.has(a._id))return o();function s(r){var e=Ue(r);function n(e){var t=l.processChange(e,r,l);t.seq=r.seq;var n=g(t);if("object"==typeof n)return l.complete(n);n&&(f++,l.attachments&&l.include_docs?He([t],A,l).then(function(){l.onChange(t)}):l.onChange(t),h&&d.push(t)),o()}if(r.seq!==i)return o();if(p=i,e===a._rev)return n(a);var t=r.rev_map[e];A.bySeqStore.get(O(t),function(e,t){n(t)})}if(r=v.get(a._id))return s(r);A.docStore.get(a._id,function(e,t){if(l.cancelled||l.done||T.isClosed()||ce(t.id))return o();v.set(a._id,t),s(t)})},function(e){if(l.cancelled)return e();h&&l.limit&&l.limit<d.length&&(d.length=l.limit),e()}).on("unpipe",function(){r.end(),y()});return n.pipe(r),{cancel:function(){l.cancelled=!0,y()}}},N._close=function(t){if(T.isClosed())return t(B(F));T.close(function(e){e?t(e):(o.delete(P),t())})},N._getRevisionTree=function(e,n){A.docStore.get(e,function(e,t){e?n(B(S)):n(null,t.rev_tree)})},N._doCompaction=c(function(e,t,n,r){N._doCompactionNoLock(e,t,n,r)}),N._doCompactionNoLock=function(c,u,d,p){if("function"==typeof d&&(p=d,d={}),!u.length)return p();var f=d.ctx||new Ce;f.get(A.docStore,c,function(e,n){if(e)return p(e);var t=u.map(function(e){var t=n.rev_map[e];return delete n.rev_map[e],t});Y(n.rev_tree,function(e,t,n,r,o){var i=t+"-"+n;-1!==u.indexOf(i)&&(o.status="missing")});var s=[];s.push({key:n.id,value:n,type:"put",prefix:A.docStore});var r,o={},i=0;function a(e){if(e&&(r=e),++i===u.length){if(r)return p(r);!function(){var t=Object.keys(o);if(!t.length)return l();var n,r=0;function i(e){e&&(n=e),++r===t.length&&l(n)}var a=new R.Map;u.forEach(function(e){a.set(c+"@"+e,!0)}),t.forEach(function(o){f.get(A.attachmentStore,o,function(e,t){if(e)return"NotFoundError"===e.name?i():i(e);var n=Object.keys(t.refs||{}).filter(function(e){return!a.has(e)}),r={};n.forEach(function(e){r[e]=!0}),n.length?s.push({key:o,type:"put",value:{refs:r},prefix:A.attachmentStore}):s=s.concat([{key:o,type:"del",prefix:A.attachmentStore},{key:o,type:"del",prefix:A.binaryStore}]),i()})})}()}}function l(e){return e?p(e):(f.batch(s),d.ctx?p():void f.execute(T,p))}t.forEach(function(e){s.push({key:O(e),type:"del",prefix:A.bySeqStore}),f.get(A.bySeqStore,O(e),function(e,n){if(e)return"NotFoundError"===e.name?a():a(e);Object.keys(n._attachments||{}).forEach(function(e){var t=n._attachments[e].digest;o[t]=!0}),a()})})})},N._getLocal=function(e,n){A.localStore.get(e,function(e,t){e?n(B(S)):n(null,t)})},N._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),t.ctx?N._putLocalNoLock(e,t,n):N._putLocalWithLock(e,t,n)},N._putLocalWithLock=c(function(e,t,n){N._putLocalNoLock(e,t,n)}),N._putLocalNoLock=function(o,i,a){delete o._revisions;var s=o._rev,l=o._id,c=i.ctx||new Ce;c.get(A.localStore,l,function(e,t){if(e&&s)return a(B(j));if(t&&t._rev!==s)return a(B(j));o._rev=s?"0-"+(parseInt(s.split("-")[1],10)+1):"0-1";var n=[{type:"put",prefix:A.localStore,key:l,value:o}];c.batch(n);var r={ok:!0,id:o._id,rev:o._rev};if(i.ctx)return a(null,r);c.execute(T,function(e){if(e)return a(e);a(null,r)})})},N._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),t.ctx?N._removeLocalNoLock(e,t,n):N._removeLocalWithLock(e,t,n)},N._removeLocalWithLock=c(function(e,t,n){N._removeLocalNoLock(e,t,n)}),N._removeLocalNoLock=function(r,o,i){var a=o.ctx||new Ce;a.get(A.localStore,r._id,function(e,t){if(e)return"NotFoundError"!==e.name?i(e):i(B(S));if(t._rev!==r._rev)return i(B(j));a.batch([{prefix:A.localStore,type:"del",key:r._id}]);var n={ok:!0,id:r._id,rev:"0-0"};if(o.ctx)return i(null,n);a.execute(T,function(e){if(e)return i(e);i(null,n)})})},N._destroy=function(e,t){var n,r=q(i);if(!Ie.has(r))return d(P,t);(n=Ie.get(r)).has(P)?(Le.removeAllListeners(P),n.get(P).close(function(){n.delete(P),d(P,t)})):d(P,t)}}function ze(e,t){var n=s.extend({db:l},e);qe.call(this,n,t)}ze.valid=function(){return!0},ze.use_prefix=!1;var We="undefined"!=typeof PouchDB?PouchDB:Ve("pouchdb");We?We.adapter("memory",ze,!0):function(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}("error",'memory adapter plugin error: Cannot find global "PouchDB" object! Did you remember to include pouchdb.js?')}).call(this,Ve("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ve("buffer").Buffer)},{_process:136,argsarray:53,buffer:57,debug:124,"double-ended-queue":66,events:70,inherits:126,"js-extend":92,levelup:105,lie:108,memdown:111,pouchdb:123,"pouchdb-collections":120,"spark-md5":174,"sublevel-pouchdb":179,through2:134,vuvuzela:198}],123:[function(Mr,Lr,e){(function(d,t){"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var x=Mr("js-extend"),c=e(Mr("debug")),n=e(Mr("inherits")),r=e(Mr("lie")),C=Mr("pouchdb-collections"),p=e(Mr("argsarray")),s=Mr("events"),l=e(Mr("scope-eval")),f=e(Mr("spark-md5")),o=e(Mr("vuvuzela")),h=e(Mr("es6-promise-pool")),k=Mr("pouchdb-collate"),F="function"==typeof Promise?Promise:r;function a(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var u=Function.prototype.toString,m=u.call(Object);function M(e){var t,n,r,o;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=M(e[n]);return t}if(e instanceof Date)return e.toISOString();if((o=e)instanceof ArrayBuffer||"undefined"!=typeof Blob&&o instanceof Blob)return a(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==m}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=M(e[n]);void 0!==i&&(t[n]=i)}return t}function g(t){var n=!1;return p(function(e){if(n)throw new Error("once called more than once");n=!0,t.apply(this,e)})}function E(a){return p(function(o){o=M(o);var t,i=this,n="function"==typeof o[o.length-1]&&o.pop();n&&(t=function(e,t){d.nextTick(function(){n(e,t)})});var e=new F(function(n,r){var e;try{var t=g(function(e,t){e?r(e):n(t)});o.push(t),(e=a.apply(i,o))&&"function"==typeof e.then&&n(e)}catch(e){r(e)}});return t&&e.then(function(e){t(null,e)},t),e})}var v=c("pouchdb:api");function _(i,e){return E(p(function(r){if(this._closed)return F.reject(new Error("database is closed"));if(this._destroyed)return F.reject(new Error("database is destroyed"));var o=this;return function(r,o,e){if(v.enabled){for(var t=[r._db_name,o],n=0;n<e.length-1;n++)t.push(e[n]);v.apply(null,t);var i=e[e.length-1];e[e.length-1]=function(e,t){var n=[r._db_name,o];n=n.concat(e?["error",e]:["success",t]),v.apply(null,n),i(e,t)}}}(o,i,r),this.taskqueue.isReady?e.apply(this,r):new F(function(t,n){o.taskqueue.addTask(function(e){e?n(e):t(o[i].apply(o,r))})})}))}function w(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}var i,y=6;function b(e){return e}function S(e){return[{ok:e}]}function T(o,l,e){var t=l.docs,c={};t.forEach(function(e){e.id in c?c[e.id].push(e):c[e.id]=[e]});var r=Object.keys(c).length,i=0,u=new Array(r);function d(){var n;++i===r&&(n=[],u.forEach(function(t){t.docs.forEach(function(e){n.push({id:t.id,docs:[e]})})}),e(null,{results:n}))}var n=Object.keys(c),a=0;function p(){if(!(a>=n.length)){var r,e=Math.min(a+y,n.length),t=n.slice(a,e);r=a,t.forEach(function(i,e){var a=r+e,t=c[i],n=w(t[0],["atts_since","attachments"]);n.open_revs=t.map(function(e){return e.rev}),n.open_revs=n.open_revs.filter(b);var s=b;0===n.open_revs.length&&(delete n.open_revs,s=S),["revs","attachments","binary","ajax"].forEach(function(e){e in l&&(n[e]=l[e])}),o.get(i,n,function(e,t){var n,r,o;n=e?[{error:e}]:s(t),r=i,o=n,u[a]={id:r,docs:o},d(),p()})}),a+=t.length}}p()}function N(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(N())i=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),i=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){i=!1}function A(){return i}function P(){var t;s.EventEmitter.call(this),this._listeners={},t=this,N()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):A()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function O(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function L(e){var t,n,r=0;return e||(r=2e3),t=e,n=r,t=parseInt(t,10)||0,(n=parseInt(n,10))!=n||n<=t?n=(t||1)<<1:n+=1,6e5<n&&(t=3e5,n=6e5),~~((n-t)*Math.random()+t)}function I(e,t){O("info","The above "+e+" is totally normal. "+t)}function R(e){Error.call(this,e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}n(P,s.EventEmitter),P.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var o=this,i=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(o._listeners[t])if(i)i="waiting";else{i=!0;var e=w(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===i&&setTimeout(function(){a()},0),i=!1}).on("error",function(){i=!1})}}},P.prototype.removeListener=function(e,t){t in this._listeners&&s.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t])},P.prototype.notifyLocalWindows=function(e){N()?chrome.storage.local.set({dbName:e}):A()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},P.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},n(R,Error),R.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new R({status:401,error:"unauthorized",reason:"Name or password is incorrect."});var D=new R({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),j=new R({status:404,error:"not_found",reason:"missing"}),U=new R({status:409,error:"conflict",reason:"Document update conflict"}),B=new R({status:400,error:"bad_request",reason:"_id field must contain a string"}),H=new R({status:412,error:"missing_id",reason:"_id is required for puts"}),q=new R({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),z=new R({status:412,error:"precondition_failed",reason:"Database not open"}),W=new R({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),V=new R({status:500,error:"badarg",reason:"Some query argument is invalid"}),K=(new R({status:400,error:"invalid_request",reason:"Request was invalid"}),new R({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"})),$=new R({status:500,error:"doc_validation",reason:"Bad special document member"}),X=new R({status:400,error:"bad_request",reason:"Something wrong with the request"}),G=new R({status:400,error:"bad_request",reason:"Document must be a JSON object"}),J=(new R({status:404,error:"not_found",reason:"Database not found"}),new R({status:500,error:"indexed_db_went_bad",reason:"unknown"})),Q=new R({status:500,error:"web_sql_went_bad",reason:"unknown"}),Y=(new R({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),new R({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),new R({status:400,error:"bad_request",reason:"Invalid rev format"})),Z=(new R({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),new R({status:412,error:"missing_stub"}));new R({status:413,error:"invalid_url",reason:"Provided URL is invalid"});function ee(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=R.prototype,new t(e)}function te(e){if("object"!=typeof e){var t=e;(e=W).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function ne(r){var o={},i=r.filter&&"function"==typeof r.filter;return o.query=r.query_params,function(e){e.doc||(e.doc={});var t=i&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return ee(X,r)}}(r.filter,e.doc,o);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}}function re(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function oe(e){var t;if(e?"string"!=typeof e?t=ee(B):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=ee(q)):t=ee(H),t)throw t}function ie(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function ae(e){var t=ie(e);return t?t.join("/"):null}var se=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],le="queryKey",ce=/(?:^|&)([^&=]*)=?([^&]*)/g,ue=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function de(c,u,d){return new F(function(s,l){c.get(u,function(e,t){if(e){if(404!==e.status)return l(e);t={}}var n,r,o,i=t._rev,a=d(t);if(!a)return s({updated:!1,rev:i});a._id=u,a._rev=i,s((r=a,o=d,(n=c).put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return de(n,r._id,o)})))})})}var pe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");function fe(e){return 0|Math.random()*e}function he(e,t){t=t||pe.length;var n="",r=-1;if(e){for(;++r<e;)n+=pe[fe(t)];return n}for(;++r<36;)switch(r){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=pe[3&fe(16)|8];break;default:n+=pe[fe(16)]}return n}function me(e){for(var t,n,r,o,i=e.rev_tree.slice();o=i.pop();){var a=o.ids,s=a[2],l=o.pos;if(s.length)for(var c=0,u=s.length;c<u;c++)i.push({pos:l+1,ids:s[c]});else{var d=!!a[1].deleted,p=a[0];t&&!(r!==d?r:n!==l?n<l:t<p)||(t=p,n=l,r=d)}}return n+"-"+t}function ge(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,a=i[2],s=t(0===a.length,o,i[0],n.ctx,i[1]),l=0,c=a.length;l<c;l++)r.push({pos:o+1,ids:a[l],ctx:s})}function ve(e,t){return e.pos-t.pos}function ye(e){var i=[];ge(e,function(e,t,n,r,o){e&&i.push({rev:t+"-"+n,pos:t,opts:o})}),i.sort(ve).reverse();for(var t=0,n=i.length;t<n;t++)delete i[t].pos;return i}function be(e){for(var t=me(e),n=ye(e.rev_tree),r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.rev===t||a.opts.deleted||r.push(a.rev)}return r}function _e(e){var i=[];return ge(e.rev_tree,function(e,t,n,r,o){"available"!==o.status||e||(i.push(t+"-"+n),o.status="missing")}),i}function we(e){for(var t,n=[],r=e.slice();t=r.pop();){var o=t.pos,i=t.ids,a=i[0],s=i[1],l=i[2],c=0===l.length,u=t.history?t.history.slice():[];u.push({id:a,opts:s}),c&&n.push({pos:o+1-u.length,ids:u});for(var d=0,p=l.length;d<p;d++)r.push({pos:o+1,ids:l[d],history:u})}return n.reverse()}function ke(e,t){return e.pos-t.pos}function xe(e,t){for(var n,r,o=t,i=e.length;o<i;o++){var a=e[o],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function Ee(e,t){return e[0]<t[0]?-1:1}function Ce(e,t){for(var n,r,o,i=[{tree1:e,tree2:t}],a=!1;0<i.length;){var s=i.pop(),l=s.tree1,c=s.tree2;(l[1].status||c[1].status)&&(l[1].status="available"===l[1].status||"available"===c[1].status?"available":"missing");for(var u=0;u<c[2].length;u++)if(l[2][0]){for(var d=!1,p=0;p<l[2].length;p++)l[2][p][0]===c[2][u][0]&&(i.push({tree1:l[2][p],tree2:c[2][u]}),d=!0);d||(a="new_branch",n=l[2],r=c[2][u],void 0,o=function(e,t,n){for(var r,o=0,i=e.length;o<i;)n(e[r=o+i>>>1],t)<0?o=r+1:i=r;return o}(n,r,Ee),n.splice(o,0,r))}else a="new_leaf",l[2][0]=c[2][u]}return{conflicts:a,tree:e}}function Se(e,t,n){var r,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,l=e.length;s<l;s++){var c=e[s];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=Ce(c.ids,t.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(!0!==n){var u=c.pos<t.pos?c:t,d=c.pos<t.pos?t:c,p=d.pos-u.pos,f=[],h=[];for(h.push({ids:u.ids,diff:p,parent:null,parentIdx:null});0<h.length;){var m=h.pop();if(0!==m.diff)for(var g=m.ids[2],v=0,y=g.length;v<y;v++)h.push({ids:g[v],diff:m.diff-1,parent:m.ids,parentIdx:v});else m.ids[0]===d.ids[0]&&f.push(m)}var b=f[0];b?(r=Ce(b.ids,d.ids),b.parent[2][b.parentIdx]=r.tree,o.push({pos:u.pos,ids:u.ids}),i=i||r.conflicts,a=!0):o.push(c)}else o.push(c)}return a||o.push(t),o.sort(ke),{tree:o,conflicts:i||"internal_node"}}function Te(e,t,n){var r=Se(e,t),o=function(e,t){for(var n,r=we(e),o={},i=0,a=r.length;i<a;i++){for(var s=r[i],l=s.ids,c=Math.max(0,l.length-t),u={pos:s.pos+c,ids:xe(l,c)},d=0;d<c;d++){var p=s.pos+d+"-"+l[d].id;o[p]=!0}n=n?Se(n,u,!0).tree:[u]}return ge(n,function(e,t,n){delete o[t+"-"+n]}),{tree:n,revs:Object.keys(o)}}(r.tree,n);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function Ne(e){return e.ids}function Ae(e,t){t||(t=me(e));for(var n,r=t.substring(t.indexOf("-")+1),o=e.rev_tree.map(Ne);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}}function Pe(e){return/^_local/.test(e)}function Oe(o,t,n){s.EventEmitter.call(this);var i=this;this.db=o;var r=(t=t?M(t):{}).complete=g(function(e,t){var n,r;e?(r="error",0<("listenerCount"in(n=i)?n.listenerCount(r):s.EventEmitter.listenerCount(n,r))&&i.emit("error",e)):i.emit("complete",t),i.removeAllListeners(),o.removeListener("destroyed",a)});function a(){i.cancel()}n&&(i.on("complete",function(e){n(null,e)}),i.on("error",n)),o.once("destroyed",a),t.onChange=function(e){t.isCancelled||(!function(e,t){try{e.emit("change",t)}catch(e){O("error",'Error in .on("change", function):',e)}}(i,e),i.startSeq&&i.startSeq<=e.seq&&(i.startSeq=!1))};var e=new F(function(n,r){t.complete=function(e,t){e?r(e):n(t)}});i.once("cancel",function(){o.removeListener("destroyed",a),t.complete(null,{status:"cancelled"})}),this.then=e.then.bind(e),this.catch=e.catch.bind(e),this.then(function(e){r(null,e)},r),o.taskqueue.isReady?i.doChanges(t):o.taskqueue.addTask(function(){i.isCancelled?i.emit("cancel"):i.doChanges(t)})}function Ie(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=ye(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:r,doc:e};return Ae(t,e._rev)&&(o.deleted=!0),n.conflicts&&(o.doc._conflicts=be(t),o.doc._conflicts.length||delete o.doc._conflicts),o}function Re(e,t){return e<t?-1:t<e?1:0}function De(n){return function(e,t){e||t[0]&&t[0].error?n(e||t[0]):n(null,t.length?t[0]:t)}}function je(e,t){var n=Re(e._id,t._id);return 0!==n?n:Re(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function Fe(){s.EventEmitter.call(this)}function Me(){this.isReady=!1,this.failed=!1,this.queue=[]}function Le(e){e&&t.debug&&O("error",e)}function Ue(i,a,s){if(!(this instanceof Ue))return new Ue(i,a,s);var l=this;if("function"!=typeof a&&void 0!==a||(s=a,a={}),i&&"object"==typeof i&&(a=i,i=void 0),void 0===s)s=Le;else{var e=s;s=function(){return O("warn","Using a callback for new PouchDB()is deprecated."),e.apply(null,arguments)}}i=i||a.name,delete(a=M(a)).name,this.__opts=a;var t=s;l.auto_compaction=a.auto_compaction,l.prefix=Ue.prefix,Fe.call(l),l.taskqueue=new Me;var n=new F(function(n,r){var t,o;if(s=function(e,t){if(e)return r(e);delete t.then,n(t)},a=M(a),function(){try{if("string"!=typeof i)throw(o=new Error("Missing/invalid DB name")).code=400,o;var e=(a.prefix||"")+i;if(t=Ue.parseAdapter(e,a),a.originalName=i,a.name=t.name,a.adapter=a.adapter||t.adapter,l._adapter=a.adapter,c("pouchdb:adapter")("Picked adapter: "+a.adapter),l._db_name=i,!Ue.adapters[a.adapter])throw(o=new Error("Adapter is missing")).code=404,o;if(!Ue.adapters[a.adapter].valid())throw(o=new Error("Invalid Adapter")).code=404,o}catch(e){l.taskqueue.fail(e)}}(),o)return r(o);l.adapter=a.adapter,l.replicate={},l.replicate.from=function(e,t,n){return l.constructor.replicate(e,l,t,n)},l.replicate.to=function(e,t,n){return l.constructor.replicate(l,e,t,n)},l.sync=function(e,t,n){return l.constructor.sync(l,e,t,n)},l.replicate.sync=l.sync,Ue.adapters[a.adapter].call(l,a,function(e){if(e)return l.taskqueue.fail(e),void s(e);!function(e,t){var n=t.originalName,r=e.constructor,o=r._destructionListeners;function i(){r.emit("destroyed",n)}e.once("destroyed",i),o.has(n)||o.set(n,[]),o.get(n).push(function(){e.removeListener("destroyed",i),e.emit("destroyed",e)})}(l,a),l.emit("created",l),Ue.emit("created",a.originalName),l.taskqueue.ready(l),s(null,l)})});n.then(function(e){t(null,e)},t),l.then=n.then.bind(n),l.catch=n.catch.bind(n)}n(Oe,s.EventEmitter),Oe.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Oe.prototype.doChanges=function(t){var n=this,r=t.complete;if("live"in(t=M(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=Ie,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(t.continuous&&"now"!==t.since&&this.db.info().then(function(e){n.startSeq=e.update_seq},function(e){if("idbNull"!==e.id)throw e}),t.view&&!t.filter&&(t.filter="_view"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=ae(t.view):t.filter=ae(t.filter),"http"!==this.db.type()&&!t.doc_ids))return this.filterChanges(t);"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=r;var o=this.db._changes(t);if(o&&"function"==typeof o.cancel){var i=n.cancel;n.cancel=p(function(e){o.cancel(),i.apply(this,e)})}}else this.db.info().then(function(e){n.isCancelled?r(null,{status:"cancelled"}):(t.since=e.update_seq,n.doChanges(t))},r)},Oe.prototype.filterChanges=function(r){var o=this,i=r.complete;if("_view"===r.filter){if(!r.view||"string"!=typeof r.view){var e=ee(X,"`view` filter parameter not found or invalid.");return i(e)}var a=ie(r.view);this.db.get("_design/"+a[0],function(e,t){if(o.isCancelled)return i(null,{status:"cancelled"});if(e)return i(te(e));var n=t&&t.views&&t.views[a[1]]&&t.views[a[1]].map;if(!n)return i(ee(j,t.views?"missing json key: "+a[1]:"missing json key: views"));r.filter=new Function("doc",["var emitted = false;","var emit = function (a, b) {","  emitted = true;","};","var view = "+n+";","view(doc);","if (emitted) {","  return true;","}"].join("\n")),o.doChanges(r)})}else{var s=ie(r.filter);if(!s)return o.doChanges(r);this.db.get("_design/"+s[0],function(e,t){if(o.isCancelled)return i(null,{status:"cancelled"});if(e)return i(te(e));var n=t&&t.filters&&t.filters[s[1]];if(!n)return i(ee(j,t&&t.filters?"missing json key: "+s[1]:"missing json key: filters"));r.filter=l("return "+n+";",{}),o.doChanges(r)})}},n(Fe,s.EventEmitter),Fe.prototype.post=_("post",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(ee(G));this.bulkDocs({docs:[e]},t,De(n))}),Fe.prototype.put=_("put",p(function(e){var t,n,r,o,i=!1,a=e.shift(),s="_id"in a;if("object"!=typeof a||Array.isArray(a))return(o=e.pop())(ee(G));function l(){i||(O("warn","db.put(doc, id, rev) has been deprecated and will be removed in a future release, please use db.put({_id: id, _rev: rev}) instead"),i=!0)}for(;"string"!==(n=typeof(t=e.shift()))||s?"string"!==n||!s||"_rev"in a?"object"===n?r=t:"function"===n&&(o=t):(l(),a._rev=t):(l(),a._id=t,s=!0),e.length;);if(r=r||{},oe(a._id),Pe(a._id)&&"function"==typeof this._putLocal)return a._deleted?this._removeLocal(a,o):this._putLocal(a,o);this.bulkDocs({docs:[a]},r,De(o))})),Fe.prototype.putAttachment=_("putAttachment",function(t,n,r,o,i){var a=this;function s(e){var t="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[n]={content_type:i,data:o,revpos:++t},a.put(e)}return"function"==typeof i&&(i=o,o=r,r=null),void 0===i&&(i=o,o=r,r=null),a.get(t).then(function(e){if(e._rev!==r)throw ee(U);return s(e)},function(e){if(e.reason===j.message)return s({_id:t});throw e})}),Fe.prototype.removeAttachment=_("removeAttachment",function(e,n,r,o){var i=this;i.get(e,function(e,t){if(e)o(e);else if(t._rev===r){if(!t._attachments)return o();delete t._attachments[n],0===Object.keys(t._attachments).length&&delete t._attachments,i.put(t,o)}else o(ee(U))})}),Fe.prototype.remove=_("remove",function(e,t,n,r){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var i={_id:o._id,_rev:o._rev||n.rev,_deleted:!0};if(Pe(i._id)&&"function"==typeof this._removeLocal)return this._removeLocal(o,r);this.bulkDocs({docs:[i]},n,De(r))}),Fe.prototype.revsDiff=_("revsDiff",function(i,e,a){"function"==typeof e&&(a=e,e={});var c=Object.keys(i);if(!c.length)return a(null,{});var u=0,d=new C.Map;function p(e,t){d.has(e)||d.set(e,{missing:[]}),d.get(e).missing.push(t)}c.map(function(o){this._getRevisionTree(o,function(e,t){if(e&&404===e.status&&"missing"===e.message)d.set(o,{missing:i[o]});else{if(e)return a(e);n=t,l=i[s=o].slice(0),ge(n,function(e,t,n,r,o){var i=t+"-"+n,a=l.indexOf(i);-1!==a&&(l.splice(a,1),"available"!==o.status&&p(s,i))}),l.forEach(function(e){p(s,e)})}var s,n,l;if(++u===c.length){var r={};return d.forEach(function(e,t){r[t]=e}),a(null,r)}})},this)}),Fe.prototype.bulkGet=_("bulkGet",function(e,t){T(this,e,t)}),Fe.prototype.compactDocument=_("compactDocument",function(r,o,c){var u=this;this._getRevisionTree(r,function(e,t){if(e)return c(e);var i,a,n=(i={},a=[],ge(t,function(e,t,n,r){var o=t+"-"+n;return e&&(i[o]=0),void 0!==r&&a.push({from:r,to:o}),o}),a.reverse(),a.forEach(function(e){void 0===i[e.from]?i[e.from]=1+i[e.to]:i[e.from]=Math.min(i[e.from],1+i[e.to])}),i),s=[],l=[];Object.keys(n).forEach(function(e){n[e]>o&&s.push(e)}),ge(t,function(e,t,n,r,o){var i=t+"-"+n;"available"===o.status&&-1!==s.indexOf(i)&&l.push(i)}),u._doCompaction(r,l,c)})}),Fe.prototype.compact=_("compact",function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function n(r){var e=r._compactionQueue[0],t=e.opts,o=e.callback;r.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(t.last_seq=e.last_seq),r._compact(t,function(e,t){e?o(e):o(null,t),d.nextTick(function(){r._compactionQueue.shift(),r._compactionQueue.length&&n(r)})})})}(this)}),Fe.prototype._compact=function(e,n){var r=this,t={return_docs:!1,last_seq:e.last_seq||0},o=[];r.changes(t).on("change",function(e){o.push(r.compactDocument(e.id,0))}).on("complete",function(e){var t=e.last_seq;F.all(o).then(function(){return de(r,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<t)&&(e.last_seq=t,e)})}).then(function(){n(null,{ok:!0})}).catch(n)}).on("error",n)},Fe.prototype.get=_("get",function(e,f,h){if("function"==typeof f&&(h=f,f={}),"string"!=typeof e)return h(ee(B));if(Pe(e)&&"function"==typeof this._getLocal)return this._getLocal(e,h);var n=[],m=this;function r(){var r=[],o=n.length;if(!o)return h(null,r);n.forEach(function(n){m.get(e,{rev:n,revs:f.revs,attachments:f.attachments},function(e,t){e?r.push({missing:n}):r.push({ok:t}),--o||h(null,r)})})}if(!f.open_revs)return this._get(e,f,function(e,t){if(e)return h(e);var o=t.doc,n=t.metadata,i=t.ctx;if(f.conflicts){var r=be(n);r.length&&(o._conflicts=r)}if(Ae(n,o._rev)&&(o._deleted=!0),f.revs||f.revs_info){var a=function(e,t){for(var n=0;n<e.length;n++)if(!0===t(e[n],n))return e[n]}(we(n.rev_tree),function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])}),s=a.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,l=a.ids.length-s;if(a.ids.splice(s,l),a.ids.reverse(),f.revs&&(o._revisions={start:a.pos+a.ids.length-1,ids:a.ids.map(function(e){return e.id})}),f.revs_info){var c=a.pos+a.ids.length;o._revs_info=a.ids.map(function(e){return{rev:--c+"-"+e.id,status:e.opts.status}})}}if(f.attachments&&o._attachments){var u=o._attachments,d=Object.keys(u).length;if(0===d)return h(null,o);Object.keys(u).forEach(function(r){this._getAttachment(o._id,r,u[r],{rev:o._rev,binary:f.binary,ctx:i},function(e,t){var n=o._attachments[r];n.data=t,delete n.stub,delete n.length,--d||h(null,o)})},m)}else{if(o._attachments)for(var p in o._attachments)o._attachments.hasOwnProperty(p)&&(o._attachments[p].stub=!0);h(null,o)}});if("all"===f.open_revs)this._getRevisionTree(e,function(e,t){if(e)return h(e);n=ye(t).map(function(e){return e.rev}),r()});else{if(!Array.isArray(f.open_revs))return h(ee(W,"function_clause"));n=f.open_revs;for(var t=0;t<n.length;t++){var o=n[t];if("string"!=typeof o||!/^\d+-/.test(o))return h(ee(Y))}r()}}),Fe.prototype.getAttachment=_("getAttachment",function(n,r,o,i){var a=this;o instanceof Function&&(i=o,o={}),this._get(n,o,function(e,t){return e?i(e):t.doc._attachments&&t.doc._attachments[r]?(o.ctx=t.ctx,o.binary=!0,void a._getAttachment(n,r,t.doc._attachments[r],o,i)):i(ee(j))})}),Fe.prototype.allDocs=_("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(ee(K,"Query parameter `"+n+"` is not compatible with multi-get"));if("http"!==this.type())return function(e,n,t){var r="limit"in n?n.keys.slice(n.skip,n.limit+n.skip):0<n.skip?n.keys.slice(n.skip):n.keys;if(n.descending&&r.reverse(),!r.length)return e._allDocs({limit:0},t);var i={offset:n.skip};return F.all(r.map(function(o){var t=x.extend({key:o,deleted:"ok"},n);return["limit","skip","keys"].forEach(function(e){delete t[e]}),new F(function(n,r){e._allDocs(t,function(e,t){if(e)return r(e);i.total_rows=t.total_rows,n(t.rows[0]||{key:o,error:"not_found"})})})})).then(function(e){return i.rows=e,i})}(this,t,e)}return this._allDocs(t,e)}),Fe.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new Oe(this,e,t)},Fe.prototype.close=_("close",function(e){return this._closed=!0,this._close(e)}),Fe.prototype.info=_("info",function(n){var r=this;this._info(function(e,t){if(e)return n(e);t.db_name=t.db_name||r._db_name,t.auto_compaction=!(!r.auto_compaction||"http"===r.type()),t.adapter=r.type(),n(null,t)})}),Fe.prototype.id=_("id",function(e){return this._id(e)}),Fe.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Fe.prototype.bulkDocs=_("bulkDocs",function(e,n,r){if("function"==typeof n&&(r=n,n={}),n=n||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(ee(D));for(var t=0;t<e.docs.length;++t)if("object"!=typeof e.docs[t]||Array.isArray(e.docs[t]))return r(ee(G));var o;return e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(e){var t;o=o||"_"===(t=e).charAt(0)&&t+"is not a valid attachment name, attachment names cannot start with '_'"})}),o?r(ee(X,o)):("new_edits"in n||(n.new_edits=!("new_edits"in e)||e.new_edits),n.new_edits||"http"===this.type()||e.docs.sort(je),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),o=0;o<r.length;o++){var i=r[o];n._attachments[i]=w(n._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}(e.docs),this._bulkDocs(e,n,function(e,t){if(e)return r(e);n.new_edits||(t=t.filter(function(e){return e.error})),r(null,t)}))}),Fe.prototype.registerDependentDatabase=_("registerDependentDatabase",function(t,e){var n=new this.constructor(t,this.__opts);de(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:n})}).catch(e)}),Fe.prototype.destroy=_("destroy",function(e,i){"function"==typeof e&&(i=e,e={});var a=this,s=!("use_prefix"in a)||a.use_prefix;function l(){a._destroy(e,function(e,t){if(e)return i(e);a._destroyed=!0,a.emit("destroyed"),i(null,t||{ok:!0})})}if("http"===a.type())return l();a.get("_local/_pouch_dependentDbs",function(e,t){if(e)return 404!==e.status?i(e):l();var n=t.dependentDbs,r=a.constructor,o=Object.keys(n).map(function(e){var t=s?e.replace(new RegExp("^"+r.prefix),""):e;return new r(t,a.__opts).destroy()});F.all(o).then(l,i)})}),Me.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Me.prototype.fail=function(e){this.failed=e,this.execute()},Me.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Me.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},n(Ue,Fe),Ue.debug=c,Ue.adapters={},Ue.preferredAdapters=[],Ue.prefix="_pouch_";var Be=new s.EventEmitter;!function(t){Object.keys(s.EventEmitter.prototype).forEach(function(e){"function"==typeof s.EventEmitter.prototype[e]&&(t[e]=Be[e].bind(Be))});var n=t._destructionListeners=new C.Map;t.on("destroyed",function(e){n.get(e).forEach(function(e){e()}),n.delete(e)})}(Ue),Ue.parseAdapter=function(e,t){var n,r,o=e.match(/([a-z\-]*):\/\/(.*)/);if(o){if(e=/http(s?)/.test(o[1])?o[1]+"://"+o[2]:o[2],n=o[1],!Ue.adapters[n].valid())throw"Invalid adapter";return{name:e,adapter:o[1]}}var i="idb"in Ue.adapters&&"websql"in Ue.adapters&&A()&&localStorage["_pouch__websqldb_"+Ue.prefix+e];if(t.adapter)r=t.adapter;else if(void 0!==t&&t.db)r="leveldb";else for(var a=0;a<Ue.preferredAdapters.length;++a)if((r=Ue.preferredAdapters[a])in Ue.adapters){if(i&&"idb"===r){O("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}return{name:!((n=Ue.adapters[r])&&"use_prefix"in n)||n.use_prefix?Ue.prefix+e:e,adapter:r}},Ue.adapter=function(e,t,n){t.valid()&&(Ue.adapters[e]=t,n&&Ue.preferredAdapters.push(e))},Ue.plugin=function(t){return"function"==typeof t?t(Ue):Object.keys(t).forEach(function(e){Ue.prototype[e]=t[e]}),Ue},Ue.defaults=function(r){function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);"function"!=typeof t&&void 0!==t||(n=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),t=x.extend({},r,t),Ue.call(this,e,t,n)}return n(o,Ue),o.preferredAdapters=Ue.preferredAdapters.slice(),Object.keys(Ue).forEach(function(e){e in o||(o[e]=Ue[e])}),o};function He(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}Ue.version="5.4.5";var qe=He(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ze=He(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function We(e){if(!/^\d+\-./.test(e))return ee(Y);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Ve(e,t){var n,r,o,i={status:"available"};if(e._deleted&&(i.deleted=!0),t)if(e._id||(e._id=he()),r=he(32,16).toLowerCase(),e._rev){if((o=We(e._rev)).error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[r,i,[]]]]}],n=o.prefix+1}else e._rev_tree=[{pos:1,ids:[r,i,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,a=r.length;i<a;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}(e._revisions,i),n=e._revisions.start,r=e._revisions.ids[0]),!e._rev_tree){if((o=We(e._rev)).error)return o;n=o.prefix,r=o.id,e._rev_tree=[{pos:n,ids:[r,i,[]]}]}oe(e._id),e._rev=n+"-"+r;var a={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l="_"===s[0];if(l&&!qe[s]){var c=ee($,s);throw c.message=$.message+": "+s,c}l&&!ze[s]?a.metadata[s.slice(1)]=e[s]:a.data[s]=e[s]}return a}var Ke=function(e){return atob(e)},$e=function(e){return btoa(e)};function Xe(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}function Ge(e,t){return Xe([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(e)],{type:t})}function Je(e,t){return Ge(Ke(e),t)}function Qe(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return t}function Ye(e,n){if("undefined"==typeof FileReader)return n(Qe((new FileReaderSync).readAsArrayBuffer(e)));var t=new FileReader,r="function"==typeof t.readAsBinaryString;t.onloadend=function(e){var t=e.target.result||"";if(r)return n(t);n(Qe(t))},r?t.readAsBinaryString(e):t.readAsArrayBuffer(e)}function Ze(e,t){Ye(e,function(e){t(e)})}function et(e,t){Ze(e,function(e){t($e(e))})}function tt(e,n){if("undefined"==typeof FileReader)return n((new FileReaderSync).readAsArrayBuffer(e));var t=new FileReader;t.onloadend=function(e){var t=e.target.result||new ArrayBuffer(0);n(t)},t.readAsArrayBuffer(e)}var nt=t.setImmediate||t.setTimeout,rt=32768;function ot(t,e,n,r,o){var i,a,s;(0<n||r<e.size)&&(a=n,s=r,e=(i=e).webkitSlice?i.webkitSlice(a,s):i.slice(a,s)),tt(e,function(e){t.append(e),o()})}function it(e,t,n,r,o){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),o()}function at(n,r){var e="string"==typeof n,t=e?n.length:n.size,o=Math.min(rt,t),i=Math.ceil(t/o),a=0,s=e?new f:new f.ArrayBuffer,l=e?it:ot;function c(){nt(d)}function u(){var e=s.end(!0),t=$e(e);r(t),s.destroy()}function d(){var e=a*o,t=e+o;l(s,n,e,t,++a<i?c:u)}d()}function st(t,e,n){var r=function(e){try{return Ke(e)}catch(e){return{error:ee(V,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?Ge(r,t.content_type):"base64"===e?$e(r):r,at(r,function(e){t.digest="md5-"+e,n()})}function lt(e,t,n){if(e.stub)return n();var r,o,i;"string"==typeof e.data?st(e,t,n):(o=t,i=n,at((r=e).data,function(e){r.digest="md5-"+e,r.length=r.data.size||r.data.length||0,"binary"===o?Ze(r.data,function(e){r.data=e,i()}):"base64"===o?et(r.data,function(e){r.data=e,i()}):i()}))}function ct(e,i,t){if(!e.length)return t();var a,n=0;function s(){n++,e.length===n&&(a?t(a):t())}e.forEach(function(e){var t=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!t.length)return s();function r(e){a=e,++n===t.length&&s()}for(var o in e.data._attachments)e.data._attachments.hasOwnProperty(o)&&lt(e.data._attachments[o],i,r)})}function ut(e,t,n,r,o,i,a,s){if(function(e,t){for(var n,r=e.slice(),o=t.split("-"),i=parseInt(o[0],10),a=o[1];n=r.pop();){if(n.pos===i&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,c=s.length;l<c;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1}(t.rev_tree,n.metadata.rev))return r[o]=n,i();var l=t.winningRev||me(t),c="deleted"in t?t.deleted:Ae(t,l),u="deleted"in n.metadata?n.metadata.deleted:Ae(n.metadata),d=/^1-/.test(n.metadata.rev);if(c&&!u&&s&&d){var p=n.data;p._rev=l,p._id=n.metadata.id,n=Ve(p,s)}var f=Te(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(c&&u||!c&&"new_leaf"!==f.conflicts||c&&!u&&"new_branch"===f.conflicts)){var h=ee(U);return r[o]=h,i()}var m=n.metadata.rev;n.metadata.rev_tree=f.tree,n.stemmedRevs=f.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var g=me(n.metadata),v=Ae(n.metadata,g),y=c===v?0:c<v?-1:1;a(n,g,v,m===g?v:Ae(n.metadata,m),!0,y,o,i)}function dt(l,e,o,c,i,u,d,p,t){l=l||1e3;var f=p.new_edits,a=new C.Map,n=0,s=e.length;function h(){++n===s&&t&&t()}e.forEach(function(e,n){if(e._id&&Pe(e._id)){var t=e._deleted?"_removeLocal":"_putLocal";o[t](e,{ctx:i},function(e,t){u[n]=e||t,h()})}else{var r=e.metadata.id;a.has(r)?(s--,a.get(r).push([e,n])):a.set(r,[[e,n]])}}),a.forEach(function(o,i){var a=0;function s(){++a<o.length?e():h()}function e(){var e=o[a],t=e[0],n=e[1];if(c.has(i))ut(l,c.get(i),t,u,n,s,d,f);else{var r=Te([],t.metadata.rev_tree[0],l);t.metadata.rev_tree=r.tree,t.stemmedRevs=r.stemmedRevs||[],function(e,t,n){var r=me(e.metadata),o=Ae(e.metadata,r);if("was_delete"in p&&o)return u[t]=ee(j,"deleted"),n();if(f&&"missing"===e.metadata.rev_tree[0].ids[1].status){var i=ee(U);return u[t]=i,n()}d(e,r,o,o,!1,o?0:1,t,n)}(t,n,s)}}e()})}var pt=5,ft="document-store",ht="by-sequence",mt="attach-store",gt="attach-seq-store",vt="meta-store",yt="local-store",bt="detect-blob-support";function _t(e){return e.length<5e4?JSON.parse(e):function(t){try{return JSON.parse(t)}catch(e){return o.parse(t)}}(e)}function wt(t){try{return JSON.stringify(t)}catch(e){return o.stringify(t)}}var kt={running:!1,queue:[]};function xt(n){return function(e){var t="unknown_error";e.target&&e.target.error&&(t=e.target.error.name||e.target.error.message),n(ee(J,t,e.type))}}function Et(e,t,n){return{data:wt(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Ct(e){if(!e)return null;var t=_t(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function St(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Tt(e,t,n,r){n?r(e?"string"!=typeof e?e:Je(e,t):Xe([""],{type:t})):e?"string"!=typeof e?Ye(e,function(e){r($e(e))}):r(e):r("")}function Nt(o,i,a,e){var t=Object.keys(o._attachments||{});if(!t.length)return e&&e();var n=0;function s(){++n===t.length&&e&&e()}t.forEach(function(e){var t,n,r;i.attachments&&i.include_docs?(t=e,n=o._attachments[t],r=n.digest,a.objectStore(mt).get(r).onsuccess=function(e){n.body=e.target.result.body,s()}):(o._attachments[e].stub=!0,s())})}function At(e,a){return F.all(e.map(function(i){if(i.doc&&i.doc._attachments){var e=Object.keys(i.doc._attachments);return F.all(e.map(function(n){var r=i.doc._attachments[n];if("body"in r){var e=r.body,o=r.content_type;return new F(function(t){Tt(e,o,a,function(e){i.doc._attachments[n]=x.extend(w(r,["digest","content_type"]),{data:e}),t()})})}}))}}))}function Pt(e,r,t){var o=[],i=t.objectStore(ht),a=t.objectStore(mt),s=t.objectStore(gt),n=e.length;function l(){--n||function(){if(!o.length)return;o.forEach(function(n){var e=s.index("digestSeq").count(IDBKeyRange.bound(n+"::",n+"::￿",!1,!1));e.onsuccess=function(e){var t=e.target.result;t||a.delete(n)}})}()}e.forEach(function(e){var t=i.index("_doc_id_rev"),n=r+"::"+e;t.getKey(n).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return l();i.delete(t),s.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];o.push(n),s.delete(t.primaryKey),t.continue()}else l()}}})}function Ot(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}function It(s,e,l,d,t,n,r){for(var p,f,h,m,g,o,c=e.docs,u=0,i=0,a=c.length;i<a;i++){var v=c[i];v._id&&Pe(v._id)||(v=c[i]=Ve(v,l.new_edits)).error&&!o&&(o=v)}if(o)return r(o);var y=new Array(c.length),b=new C.Map,_=!1,w=d._meta.blobSupport?"blob":"base64";function k(){_||(n.notify(d._meta.name),d._meta.docCount+=u,r(null,y))}function x(e,t,n,r,o,i,a,s){u+=i,e.metadata.winningRev=t,e.metadata.deleted=n;var l=e.data;if(l._id=e.metadata.id,l._rev=e.metadata.rev,r&&(l._deleted=!0),l._attachments&&Object.keys(l._attachments).length)return function(s,l,e,t,n,r){var o=s.data,c=0,i=Object.keys(o._attachments);function u(){c===i.length&&E(s,l,e,t,n,r)}function d(){c++,u()}i.forEach(function(e){var o,i,a,t=s.data._attachments[e];if(t.stub)c++,u();else{var n=t.data;delete t.data,t.revpos=parseInt(l,10);var r=t.digest;o=r,i=n,a=d,m.count(o).onsuccess=function(e){var t=e.target.result;if(t)return a();var n={digest:o,body:i},r=m.put(n);r.onsuccess=a}}})}(e,t,n,o,a,s);E(e,t,n,o,a,s)}function E(r,o,i,a,e,t){var n=r.data,s=r.metadata;function l(e){var t=r.stemmedRevs||[];a&&d.auto_compaction&&(t=t.concat(_e(r.metadata))),t&&t.length&&Pt(t,r.metadata.id,p),s.seq=e.target.result,delete s.rev;var n=Et(s,o,i);f.put(n).onsuccess=c}function c(){y[e]={ok:!0,id:s.id,rev:o},b.set(r.metadata.id,r.metadata),function(r,o,e){var t=0,n=Object.keys(r.data._attachments||{});if(!n.length)return e();function i(){++t===n.length&&e()}function a(e){var t=r.data._attachments[e].digest,n=g.put({seq:o,digestSeq:t+"::"+o});n.onsuccess=i,n.onerror=function(e){e.preventDefault(),e.stopPropagation(),i()}}for(var s=0;s<n.length;s++)a(n[s])}(r,s.seq,t)}n._doc_id_rev=s.id+"::"+s.rev,delete n._id,delete n._rev;var u=h.put(n);u.onsuccess=l,u.onerror=function(e){e.preventDefault(),e.stopPropagation(),h.index("_doc_id_rev").getKey(n._doc_id_rev).onsuccess=function(e){h.put(n,e.target.result).onsuccess=l}}}ct(c,w,function(e){if(e)return r(e);!function(){var e=Ot(t,[ft,ht,mt,yt,gt],"readwrite");if(e.error)return r(e.error);(p=e.txn).onabort=xt(r),p.ontimeout=xt(r),p.oncomplete=k,f=p.objectStore(ft),h=p.objectStore(ht),m=p.objectStore(mt),g=p.objectStore(gt),function(t){var o=[];if(c.forEach(function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach(function(e){var t=n.data._attachments[e];t.stub&&o.push(t.digest)})}),!o.length)return t();var i,a=0;o.forEach(function(e){var n,r;n=e,r=function(e){e&&!i&&(i=e),++a===o.length&&t(i)},m.get(n).onsuccess=function(e){if(e.target.result)r();else{var t=ee(Z,"unknown stub attachment with digest "+n);t.status=412,r(t)}}})}(function(e){if(e)return _=!0,r(e);!function(){if(!c.length)return;var e=0;function n(){++e===c.length&&dt(s.revs_limit,c,d,b,p,y,x,l)}function t(e){var t=Ct(e.target.result);t&&b.set(t.id,t),n()}for(var r=0,o=c.length;r<o;r++){var i=c[r];if(i._id&&Pe(i._id))n();else{var a=f.get(i.metadata.id);a.onsuccess=t}}}()})}()})}function Rt(e,w,k,t){function n(i,e){var t="startkey"in i&&i.startkey,n="endkey"in i&&i.endkey,r="key"in i&&i.key,a=i.skip||0,s="number"==typeof i.limit?i.limit:-1,o=!1!==i.inclusive_end,l="descending"in i&&i.descending?"prev":null,c=function(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(t,n,o,r,l);if(c&&c.error)return function(e,t,n,r){if("DataError"===n.name&&0===n.code)return r(null,{total_rows:e._meta.docCount,offset:t.skip,rows:[]});r(ee(J,n.name,n.message))}(w,i,c.error,e);var u=[ft,ht];i.attachments&&u.push(mt);var d=Ot(k,u,"readonly");if(d.error)return e(d.error);var p=d.txn,f=p.objectStore(ft),h=p.objectStore(ht),m=l?f.openCursor(c,l):f.openCursor(c),g=h.index("_doc_id_rev"),v=[],y=0;function b(t,n,e){var r=t.id+"::"+e;g.get(r).onsuccess=function(e){n.doc=St(e.target.result),i.conflicts&&(n.doc._conflicts=be(t)),Nt(n.doc,i,p)}}function _(){e(null,{total_rows:y,offset:i.skip,rows:v})}p.oncomplete=function(){i.attachments?At(v,i.binary).then(_):_()},m.onsuccess=function(e){y=w._meta.docCount;var t=e.target.result;if(t){var n=Ct(t.value);!function(e,t,n){var r={id:n.id,key:n.id,value:{rev:t}},o=n.deleted;if("ok"===i.deleted)v.push(r),o?(r.value.deleted=!0,r.doc=null):i.include_docs&&b(n,r,t);else if(!o&&a--<=0&&(v.push(r),i.include_docs&&b(n,r,t),0==--s))return;e.continue()}(t,n.winningRev,n)}}}!function(e,t){if(0===e.limit)return t(null,{total_rows:w._meta.docCount,offset:e.skip,rows:[]});n(e,t)}(e,t)}var Dt,jt=new C.Map,Ft=new P,Mt=new C.Map;function Lt(t,e){var n=this;kt.queue.push({action:function(e){!function(b,r,c){var _=r.name,w=null;function a(e,o){var i=e.objectStore(ft);i.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),i.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,r=Ae(n);n.deletedOrLocal=r?"1":"0",i.put(n),t.continue()}else o()}}function s(e,p){var f=e.objectStore(yt),h=e.objectStore(ft),m=e.objectStore(ht),t=h.openCursor();t.onsuccess=function(e){var n=e.target.result;if(n){var t=n.value,r=t.id,o=Pe(r),i=me(t);if(o){var a=r+"::"+i,s=r+"::",l=r+"::~",c=m.index("_doc_id_rev"),u=IDBKeyRange.bound(s,l,!1,!1),d=c.openCursor(u);d.onsuccess=function(e){if(d=e.target.result){var t=d.value;t._doc_id_rev===a&&f.put(t),m.delete(d.primaryKey),d.continue()}else h.delete(n.primaryKey),n.continue()}}else n.continue()}else p&&p()}}function l(e,u){var n=e.objectStore(ht),t=e.objectStore(mt),d=e.objectStore(gt),r=t.count();r.onsuccess=function(e){var t=e.target.result;if(!t)return u();n.openCursor().onsuccess=function(e){var t=e.target.result;if(!t)return u();for(var n=t.value,r=t.primaryKey,o=Object.keys(n._attachments||{}),i={},a=0;a<o.length;a++){var s=n._attachments[o[a]];i[s.digest]=!0}var l=Object.keys(i);for(a=0;a<l.length;a++){var c=l[a];d.put({seq:r,digestSeq:c+"::"+r})}t.continue()}}}function u(e){var l=e.objectStore(ht),c=e.objectStore(ft),t=c.openCursor();t.onsuccess=function(e){var n=e.target.result;if(n){var t,r,o,i,a=function(e){if(!e.data)return e.deleted="1"===e.deletedOrLocal,e;return Ct(e)}(n.value);if(a.winningRev=a.winningRev||me(a),a.seq)return s();t=a.id+"::",r=a.id+"::￿",o=l.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,r)),i=0,o.onsuccess=function(e){var t=e.target.result;if(!t)return a.seq=i,s();var n=t.primaryKey;i<n&&(i=n),t.continue()}}function s(){var e=Et(a,a.winningRev,a.deleted),t=c.put(e);t.onsuccess=function(){n.continue()}}}}b._meta=null,b.type=function(){return"idb"},b._id=E(function(e){e(null,b._meta.instanceId)}),b._bulkDocs=function(e,t,n){It(r,e,t,b,w,Ft,n)},b._get=function(e,o,t){var i,a,s,l=o.ctx;if(!l){var n=Ot(w,[ft,ht,mt],"readonly");if(n.error)return t(n.error);l=n.txn}function c(){t(s,{doc:i,metadata:a,ctx:l})}l.objectStore(ft).get(e).onsuccess=function(e){if(!(a=Ct(e.target.result)))return s=ee(j,"missing"),c();if(Ae(a)&&!o.rev)return s=ee(j,"deleted"),c();var t=l.objectStore(ht),n=o.rev||a.winningRev,r=a.id+"::"+n;t.index("_doc_id_rev").get(r).onsuccess=function(e){if((i=e.target.result)&&(i=St(i)),!i)return s=ee(j,"missing"),c();c()}}},b._getAttachment=function(e,t,n,r,o){var i;if(r.ctx)i=r.ctx;else{var a=Ot(w,[ft,ht,mt],"readonly");if(a.error)return o(a.error);i=a.txn}var s=n.digest,l=n.content_type;i.objectStore(mt).get(s).onsuccess=function(e){var t=e.target.result.body;Tt(t,l,r.binary,function(e){o(null,e)})}},b._info=function(e){if(null===w||!jt.has(_)){var t=new Error("db isn't open");return t.id="idbNull",e(t)}var n,r,o=Ot(w,[ht],"readonly");if(o.error)return e(o.error);var i=o.txn,a=i.objectStore(ht).openCursor(null,"prev");a.onsuccess=function(e){var t=e.target.result;n=t?t.key:0,r=b._meta.docCount},i.oncomplete=function(){e(null,{doc_count:r,update_seq:n,idb_attachment_format:b._meta.blobSupport?"binary":"base64"})}},b._allDocs=function(e,t){Rt(e,b,w,t)},b._changes=function(s){if((s=M(s)).continuous){var e=_+":"+he();return Ft.addListener(_,e,b,s),Ft.notify(_),{cancel:function(){Ft.removeListener(_,e)}}}var l=s.doc_ids&&new C.Set(s.doc_ids);s.since=s.since||0;var c,u=s.since,d="limit"in s?s.limit:-1;0===d&&(d=1),c="return_docs"in s?s.return_docs:!("returnDocs"in s)||s.returnDocs;var p,r,f,h,m=[],g=0,v=ne(s),y=new C.Map;function n(r){var o,t=St(r.value),n=r.key;if(l&&!l.has(t._id))return r.continue();function i(){return o.seq!==n?r.continue():(u=n,o.winningRev===t._rev?a(t):(e=t._id+"::"+o.winningRev,void(h.get(e).onsuccess=function(e){a(St(e.target.result))})));var e}function a(e){var t=s.processChange(e,o,s);t.seq=o.seq;var n=v(t);if("object"==typeof n)return s.complete(n);n&&(g++,c&&m.push(t),s.attachments&&s.include_docs?Nt(e,s,p,function(){At([t],s.binary).then(function(){s.onChange(t)})}):s.onChange(t)),g!==d&&r.continue()}if(o=y.get(t._id))return i();f.get(t._id).onsuccess=function(e){o=Ct(e.target.result),y.set(t._id,o),i()}}function o(e){var t=e.target.result;t&&n(t)}function i(){function e(){s.complete(null,{results:m,last_seq:u})}!s.continuous&&s.attachments?At(m).then(e):e()}!function(){var e=[ft,ht];s.attachments&&e.push(mt);var t,n=Ot(w,e,"readonly");if(n.error)return s.complete(n.error);(p=n.txn).onabort=xt(s.complete),p.oncomplete=i,r=p.objectStore(ht),f=p.objectStore(ft),h=r.index("_doc_id_rev"),t=s.descending?r.openCursor(null,"prev"):r.openCursor(IDBKeyRange.lowerBound(s.since,!0));t.onsuccess=o}()},b._close=function(e){if(null===w)return e(ee(z));w.close(),jt.delete(_),w=null,e()},b._getRevisionTree=function(e,n){var t=Ot(w,[ft],"readonly");if(t.error)return n(t.error);var r=t.txn,o=r.objectStore(ft).get(e);o.onsuccess=function(e){var t=Ct(e.target.result);t?n(null,t.rev_tree):n(ee(j))}},b._doCompaction=function(o,a,e){var t=[ft,ht,mt,gt],n=Ot(w,t,"readwrite");if(n.error)return e(n.error);var i=n.txn,r=i.objectStore(ft);r.get(o).onsuccess=function(e){var t=Ct(e.target.result);ge(t.rev_tree,function(e,t,n,r,o){var i=t+"-"+n;-1!==a.indexOf(i)&&(o.status="missing")}),Pt(a,o,i);var n=t.winningRev,r=t.deleted;i.objectStore(ft).put(Et(t,n,r))},i.onabort=xt(e),i.oncomplete=function(){e()}},b._getLocal=function(e,n){var t=Ot(w,[yt],"readonly");if(t.error)return n(t.error);var r=t.txn,o=r.objectStore(yt).get(e);o.onerror=xt(n),o.onsuccess=function(e){var t=e.target.result;t?(delete t._doc_id_rev,n(null,t)):n(ee(j))}},b._putLocal=function(r,o,i){"function"==typeof o&&(i=o,o={}),delete r._revisions;var a=r._rev,e=r._id;r._rev=a?"0-"+(parseInt(a.split("-")[1],10)+1):"0-1";var s,t=o.ctx;if(!t){var n=Ot(w,[yt],"readwrite");if(n.error)return i(n.error);(t=n.txn).onerror=xt(i),t.oncomplete=function(){s&&i(null,s)}}var l,c=t.objectStore(yt);a?(l=c.get(e)).onsuccess=function(e){var t=e.target.result;if(t&&t._rev===a){var n=c.put(r);n.onsuccess=function(){s={ok:!0,id:r._id,rev:r._rev},o.ctx&&i(null,s)}}else i(ee(U))}:((l=c.add(r)).onerror=function(e){i(ee(U)),e.preventDefault(),e.stopPropagation()},l.onsuccess=function(){s={ok:!0,id:r._id,rev:r._rev},o.ctx&&i(null,s)})},b._removeLocal=function(n,r,o){"function"==typeof r&&(o=r,r={});var i,e=r.ctx;if(!e){var t=Ot(w,[yt],"readwrite");if(t.error)return o(t.error);(e=t.txn).oncomplete=function(){i&&o(null,i)}}var a=n._id,s=e.objectStore(yt),l=s.get(a);l.onerror=xt(o),l.onsuccess=function(e){var t=e.target.result;t&&t._rev===n._rev?(s.delete(a),i={ok:!0,id:a,rev:"0-0"},r.ctx&&o(null,i)):o(ee(j))}},b._destroy=function(e,t){Ft.removeAllListeners(_);var n=Mt.get(_);n&&n.result&&(n.result.close(),jt.delete(_));var r=indexedDB.deleteDatabase(_);r.onsuccess=function(){Mt.delete(_),A()&&_ in localStorage&&delete localStorage[_],t(null,{ok:!0})},r.onerror=xt(t)};var e,t=jt.get(_);if(t)return w=t.idb,b._meta=t.global,d.nextTick(function(){c(null,b)});e=r.storage?function(t,e){try{return indexedDB.open(t,{version:pt,storage:e})}catch(e){return indexedDB.open(t,pt)}}(_,r.storage):indexedDB.open(_,pt);Mt.set(_,e),e.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(ft,{keyPath:"id"});e.createObjectStore(ht,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(mt,{keyPath:"digest"}),e.createObjectStore(vt,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(bt),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(yt,{keyPath:"_id"});var n=e.createObjectStore(gt,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n,r=e.currentTarget.transaction;e.oldVersion<3&&t.createObjectStore(yt,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.oldVersion<4&&((n=t.createObjectStore(gt,{autoIncrement:!0})).createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0}));var o=[a,s,l,u],i=e.oldVersion;!function e(){var t=o[i-1];i++;t&&t(r,e)}()},e.onsuccess=function(e){(w=e.target.result).onversionchange=function(){w.close(),jt.delete(_)},w.onabort=function(e){O("error","Database has a global failure",e.target.error),w.close(),jt.delete(_)};var i=w.transaction([vt,bt,ft],"readwrite"),t=i.objectStore(vt).get(vt),a=null,s=null,l=null;t.onsuccess=function(e){var t,n=function(){null!==a&&null!==s&&null!==l&&(b._meta={name:_,instanceId:l,blobSupport:a,docCount:s},jt.set(_,{idb:w,global:b._meta}),c(null,b))},r=e.target.result||{id:vt};_+"_id"in r?(l=r[_+"_id"],n()):(l=he(),r[_+"_id"]=l,i.objectStore(vt).put(r).onsuccess=function(){n()}),Dt||(t=i,Dt=new F(function(n){var e=Xe([""]);t.objectStore(bt).put(e,"key"),t.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},t.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})),Dt.then(function(e){a=e,n()});var o=i.objectStore(ft).index("deletedOrLocal");o.count(IDBKeyRange.only("0")).onsuccess=function(e){s=e.target.result,n()}}},e.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";O("error",e),c(ee(J,e))}}(n,t,e)},callback:e}),function n(r){if(!kt.running&&kt.queue.length){kt.running=!0;var o=kt.queue.shift();o.action(function(e,t){!function(e,t,n,r){try{e.apply(t,n)}catch(e){r.emit("error",e)}}(o.callback,this,[e,t],r),kt.running=!1,d.nextTick(function(){n(r)})})}}(n.constructor)}function Ut(e){return e<65?e-48:e-55}function Bt(e,t){return"UTF-8"===t?(n=function(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(Ut(e.charCodeAt(t++))<<4|Ut(e.charCodeAt(t++)));return r}(e,0,e.length),decodeURIComponent(escape(n))):function(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(Ut(e.charCodeAt(t+2))<<12|Ut(e.charCodeAt(t+3))<<8|Ut(e.charCodeAt(t))<<4|Ut(e.charCodeAt(t+1))),t+=4;return r}(e,0,e.length);var n}function Ht(e){return"'"+e+"'"}Lt.valid=function(){return!("undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform))&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var qt=7,zt=Ht("document-store"),Wt=Ht("by-sequence"),Vt=Ht("attach-store"),Kt=Ht("local-store"),$t=Ht("metadata-store"),Xt=Ht("attach-seq-store");function Gt(e){return delete e._id,delete e._rev,JSON.stringify(e)}function Jt(e,t,n){return(e=JSON.parse(e))._id=t,e._rev=n,e}function Qt(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function Yt(e,t,n,r,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function Zt(e,n,r){if(e.length){var t=0,i=[];e.forEach(function(e){var t="SELECT seq FROM "+Wt+" WHERE doc_id=? AND rev=?";r.executeSql(t,[n,e],function(e,t){if(!t.rows.length)return o();var n=t.rows.item(0).seq;i.push(n),e.executeSql("DELETE FROM "+Wt+" WHERE seq=?",[n],o)})})}function o(){++t===e.length&&function(){if(!i.length)return;var e="SELECT DISTINCT digest AS digest FROM "+Xt+" WHERE seq IN "+Qt(i.length);r.executeSql(e,i,function(e,t){for(var o=[],n=0;n<t.rows.length;n++)o.push(t.rows.item(n).digest);if(o.length){var r="DELETE FROM "+Xt+" WHERE seq IN ("+i.map(function(){return"?"}).join(",")+")";e.executeSql(r,i,function(e){var t="SELECT digest FROM "+Xt+" WHERE digest IN ("+o.map(function(){return"?"}).join(",")+")";e.executeSql(t,o,function(t,e){for(var n=new C.Set,r=0;r<e.rows.length;r++)n.add(e.rows.item(r).digest);o.forEach(function(e){n.has(e)||(t.executeSql("DELETE FROM "+Xt+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+Vt+" WHERE digest=?",[e]))})})})}})}()}}function en(r){return function(e){O("error","WebSQL threw an error",e);var t=e&&e.constructor.toString().match(/function ([^\(]+)/),n=(t&&t[1]||e.type,e.target||e.message);r(ee(Q,n))}}function tn(e,t,n,g,r,o,i){var v,a=n.new_edits,l=t.docs.map(function(e){return e._id&&Pe(e._id)?e:Ve(e,a)}),s=l.filter(function(e){return e.error});if(s.length)return i(s[0]);var c,y=new Array(l.length),b=new C.Map;function u(){if(c)return i(c);o.notify(g._name),g._docCount=-1,i(null,y)}function d(n){var i=[];if(l.forEach(function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach(function(e){var t=n.data._attachments[e];t.stub&&i.push(t.digest)})}),!i.length)return n();var a,s=0;i.forEach(function(e){var r,o,t;r=e,o=function(e){e&&!a&&(a=e),++s===i.length&&n(a)},t="SELECT count(*) as cnt FROM "+Vt+" WHERE digest=?",v.executeSql(t,[r],function(e,t){if(0===t.rows.item(0).cnt){var n=ee(Z,"unknown stub attachment with digest "+r);o(n)}else o()})})}function p(d,l,e,n,s,t,c,u){function r(){var c=d.data,i=n?1:0,a=c._id,s=c._rev,l=Gt(c),e="INSERT INTO "+Wt+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",t=[a,s,l,i];function u(e,t){var n,r,o,i=0,a=Object.keys(c._attachments||{});if(!a.length)return t();function s(){return++i===a.length&&t(),!1}for(var l=0;l<a.length;l++)n=a[l],void 0,r="INSERT INTO "+Xt+" (digest, seq) VALUES (?,?)",o=[c._attachments[n].digest,e],v.executeSql(r,o,s,s)}v.executeSql(e,t,function(e,t){var n=t.insertId;u(n,function(){m(e,n)})},function(){var e=Yt("seq",Wt,null,"doc_id=? AND rev=?");return v.executeSql(e,[a,s],function(e,t){var n=t.rows.item(0).seq,r="UPDATE "+Wt+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",o=[l,i,a,s];e.executeSql(r,o,function(e){u(n,function(){m(e,n)})})}),!1})}function p(e){o||(e?u(o=e):f===i.length&&r())}var o=null,f=0;d.data._id=d.metadata.id,d.data._rev=d.metadata.rev;var i=Object.keys(d.data._attachments||{});function h(e){f++,p(e)}function m(e,t){var n=d.metadata.id,r=d.stemmedRevs||[];s&&g.auto_compaction&&(r=_e(d.metadata).concat(r)),r.length&&Zt(r,n,e),d.metadata.seq=t,delete d.metadata.rev;var o=s?"UPDATE "+zt+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Wt+" WHERE doc_id="+zt+".id AND rev=?) WHERE id=?":"INSERT INTO "+zt+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",i=wt(d.metadata),a=s?[i,t,l,n]:[n,t,t,i];e.executeSql(o,a,function(){y[c]={ok:!0,id:d.metadata.id,rev:l},b.set(n,d.metadata),u()})}n&&(d.data._deleted=!0),i.forEach(function(e){var r,o,i,a,t=d.data._attachments[e];if(t.stub)f++,p();else{var n=t.data;delete t.data,t.revpos=parseInt(l,10);var s=t.digest;r=s,o=n,i=h,a="SELECT digest FROM "+Vt+" WHERE digest=?",v.executeSql(a,[r],function(e,t){if(t.rows.length)return i();var n;a="INSERT INTO "+Vt+" (digest, body, escaped) VALUES (?,?,1)",e.executeSql(a,[r,(n=o,n.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,""))],function(){i()},function(){return i(),!1})})}}),i.length||r()}function f(){dt(e.revs_limit,l,g,b,v,y,p,n)}ct(l,"binary",function(e){if(e)return i(e);r.transaction(function(e){v=e,d(function(e){e?c=e:function(e){if(!l.length)return e();var t=0;function o(){++t===l.length&&e()}l.forEach(function(e){if(e._id&&Pe(e._id))return o();var r=e.metadata.id;v.executeSql("SELECT json FROM "+zt+" WHERE id = ?",[r],function(e,t){if(t.rows.length){var n=_t(t.rows.item(0).json);b.set(r,n)}o()})})}(f)})},en(i),u)})}var nn=new C.Map;var rn=new P;function on(i,a,s,l,e){var t=Object.keys(i._attachments||{});if(!t.length)return e&&e();var n=0;function c(){++n===t.length&&e&&e()}t.forEach(function(e){var n,r,o,t;a.attachments&&a.include_docs?(r=e,o=(n=i)._attachments[r],t={binary:a.binary,ctx:l},s._getAttachment(n._id,r,o,t,function(e,t){n._attachments[r]=x.extend(w(o,["digest","content_type"]),{data:t}),c()})):(i._attachments[e].stub=!0,c())})}var an=1,sn="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Wt+" (seq, deleted)",ln="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Wt+" (doc_id, rev)",cn="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+zt+" (winningseq)",un="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Xt+" (seq)",dn="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Xt+" (digest, seq)",pn=Wt+".seq = "+zt+".winningseq",fn=Wt+".seq AS seq, "+Wt+".deleted AS deleted, "+Wt+".json AS data, "+Wt+".rev AS rev, "+zt+".json AS metadata";function hn(r,e){var t,u,v=this,d=null,n="size"in(t=r)?1e6*t.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1,o=[];v._docCount=-1,v._name=r.name;var i,a,s=x.extend({},r,{version:an,description:r.name,size:n}),l=(i=s,(a=nn.get(i.name))||(a=function(e){try{return{db:(t=e,t.websql(t.name,t.version,t.description,t.size))}}catch(e){return{error:e}}var t}(i),nn.set(i.name,a),a.db&&(a.db._sqlitePlugin="undefined"!=typeof sqlitePlugin)),a);if(l.error)return en(e)(l.error);var y=l.db;function c(){A()&&(window.localStorage["_pouch__websqldb_"+v._name]=!0),e(null,v)}function p(t,l){t.executeSql(cn),t.executeSql("ALTER TABLE "+Wt+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(sn),t.executeSql("ALTER TABLE "+zt+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+zt+" (local, id)");var e="SELECT "+zt+".winningseq AS seq, "+zt+".json AS metadata FROM "+Wt+" JOIN "+zt+" ON "+Wt+".seq = "+zt+".winningseq";t.executeSql(e,[],function(e,t){for(var n=[],r=[],o=0;o<t.rows.length;o++){var i=t.rows.item(o),a=i.seq,s=JSON.parse(i.metadata);Ae(s)&&n.push(a),Pe(s.id)&&r.push(s.id)}e.executeSql("UPDATE "+zt+"SET local = 1 WHERE id IN "+Qt(r.length),r,function(){e.executeSql("UPDATE "+Wt+" SET deleted = 1 WHERE seq IN "+Qt(n.length),n,l)})})})})}function f(t,i){var e="CREATE TABLE IF NOT EXISTS "+Kt+" (id UNIQUE, rev, json)";t.executeSql(e,[],function(){var e="SELECT "+zt+".id AS id, "+Wt+".json AS data FROM "+Wt+" JOIN "+zt+" ON "+Wt+".seq = "+zt+".winningseq WHERE local = 1";t.executeSql(e,[],function(r,e){for(var o=[],t=0;t<e.rows.length;t++)o.push(e.rows.item(t));!function t(){if(!o.length)return i(r);var n=o.shift(),e=JSON.parse(n.data)._rev;r.executeSql("INSERT INTO "+Kt+" (id, rev, json) VALUES (?,?,?)",[n.id,e,n.data],function(e){e.executeSql("DELETE FROM "+zt+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+Wt+" WHERE seq=?",[n.seq],function(){t()})})})}()})})}function h(s,l){var e="ALTER TABLE "+Wt+" ADD COLUMN doc_id";s.executeSql(e,[],function(e){var t="ALTER TABLE "+Wt+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(ln,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+Wt;e.executeSql(t,[],function(e,t){for(var a,n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r));a=n,function e(){if(!a.length)return l(s);var t=Bt(a.shift().hex,u),n=t.lastIndexOf("::"),r=t.substring(0,n),o=t.substring(n+2),i="UPDATE "+Wt+" SET doc_id=?, rev=? WHERE doc_id_rev=?";s.executeSql(i,[r,o,t],function(){e()})}()})})})})}function m(e,m){function t(e){var t="SELECT COUNT(*) AS cnt FROM "+Vt;e.executeSql(t,[],function(t,e){if(!e.rows.item(0).cnt)return m(t);var n=0,r=10;!function h(){var e=Yt(fn+", "+zt+".id AS id",[zt,Wt],pn,null,zt+".id ");e+=" LIMIT "+r+" OFFSET "+n,n+=r,t.executeSql(e,[],function(n,e){if(!e.rows.length)return m(n);for(var t,r,o,i={},a=0;a<e.rows.length;a++)for(var s=e.rows.item(a),l=Jt(s.data,s.id,s.rev),c=Object.keys(l._attachments||{}),u=0;u<c.length;u++){var d=l._attachments[c[u]];t=d.digest,r=s.seq,o=void 0,-1===(o=i[t]=i[t]||[]).indexOf(r)&&o.push(r)}var p=[];if(Object.keys(i).forEach(function(t){i[t].forEach(function(e){p.push([t,e])})}),!p.length)return h();var f=0;p.forEach(function(e){var t="INSERT INTO "+Xt+" (digest, seq) VALUES (?,?)";n.executeSql(t,e,function(){++f===p.length&&h()})})})}()})}var n="CREATE TABLE IF NOT EXISTS "+Xt+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(dn,[],function(e){e.executeSql(un,[],t)})})}function g(e,t){var n="ALTER TABLE "+Vt+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function b(e,n){var t="ALTER TABLE "+zt+" ADD COLUMN max_seq INTEGER";e.executeSql(t,[],function(e){var t="UPDATE "+zt+" SET max_seq=(SELECT MAX(seq) FROM "+Wt+" WHERE doc_id=id)";e.executeSql(t,[],function(e){var t="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+zt+" (max_seq)";e.executeSql(t,[],n)})})}function _(){for(;0<o.length;){o.pop()(null,d)}}function w(n,t){if(0===t){var e="CREATE TABLE IF NOT EXISTS "+$t+" (dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+Vt+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",o="CREATE TABLE IF NOT EXISTS "+Xt+" (digest, seq INTEGER)",i="CREATE TABLE IF NOT EXISTS "+zt+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",a="CREATE TABLE IF NOT EXISTS "+Wt+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",s="CREATE TABLE IF NOT EXISTS "+Kt+" (id UNIQUE, rev, json)";n.executeSql(r),n.executeSql(s),n.executeSql(o,[],function(){n.executeSql(un),n.executeSql(dn)}),n.executeSql(i,[],function(){n.executeSql(cn),n.executeSql(a,[],function(){n.executeSql(sn),n.executeSql(ln),n.executeSql(e,[],function(){var e="INSERT INTO "+$t+" (db_version, dbid) VALUES (?,?)";d=he();var t=[qt,d];n.executeSql(e,t,function(){_()})})})})}else{var l=[p,f,h,m,g,b,function(){t<qt&&n.executeSql("UPDATE "+$t+" SET db_version = "+qt);var e="SELECT dbid FROM "+$t;n.executeSql(e,[],function(e,t){d=t.rows.item(0).dbid,_()})}],c=t,u=function(e){l[c-1](e,u),c++};u(n)}}function k(e,n){if(-1!==v._docCount)return n(v._docCount);var t=Yt("COUNT("+zt+".id) AS 'num'",[zt,Wt],pn,Wt+".deleted=0");e.executeSql(t,[],function(e,t){v._docCount=t.rows.item(0).num,n(v._docCount)})}"function"!=typeof y.readTransaction&&(y.readTransaction=y.transaction),y.transaction(function(t){var r;r=function(){var e;e="SELECT sql FROM sqlite_master WHERE tbl_name = "+$t,t.executeSql(e,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+$t,[],function(e,t){var n=t.rows.item(0).db_version;w(e,n)}):e.executeSql("ALTER TABLE "+$t+" ADD COLUMN db_version INTEGER",[],function(){w(e,1)}):w(e,0)})},t.executeSql('SELECT HEX("a") AS hex',[],function(e,t){var n=t.rows.item(0).hex;u=2===n.length?"UTF-8":"UTF-16",r()})},en(e),c),v.type=function(){return"websql"},v._id=E(function(e){e(null,d)}),v._info=function(o){y.readTransaction(function(t){k(t,function(r){var e="SELECT MAX(seq) AS seq FROM "+Wt;t.executeSql(e,[],function(e,t){var n=t.rows.item(0).seq||0;o(null,{doc_count:r,update_seq:n,sqlite_plugin:y._sqlitePlugin,websql_encoding:u})})})},en(o))},v._bulkDocs=function(e,t,n){tn(r,e,t,v,y,rn,n)},v._get=function(t,r,n){var o,i,a,e,s,l=r.ctx;if(!l)return y.readTransaction(function(e){v._get(t,x.extend({ctx:e},r),n)});function c(){n(a,{doc:o,metadata:i,ctx:l})}r.rev?(e=Yt(fn,[zt,Wt],zt+".id="+Wt+".doc_id",[Wt+".doc_id=?",Wt+".rev=?"]),s=[t,r.rev]):(e=Yt(fn,[zt,Wt],pn,zt+".id=?"),s=[t]),l.executeSql(e,s,function(e,t){if(!t.rows.length)return a=ee(j,"missing"),c();var n=t.rows.item(0);if(i=_t(n.metadata),n.deleted&&!r.rev)return a=ee(j,"deleted"),c();o=Jt(n.data,i.id,n.rev),c()})},v._allDocs=function(u,e){var r,d=[],t="startkey"in u&&u.startkey,n="endkey"in u&&u.endkey,o="key"in u&&u.key,i="descending"in u&&u.descending,a="limit"in u?u.limit:-1,s="skip"in u?u.skip:0,l=!1!==u.inclusive_end,c=[],p=[];if(!1!==o)p.push(zt+".id = ?"),c.push(o);else if(!1!==t||!1!==n){if(!1!==t&&(p.push(zt+".id "+(i?"<=":">=")+" ?"),c.push(t)),!1!==n){var f=i?">":"<";l&&(f+="="),p.push(zt+".id "+f+" ?"),c.push(n)}!1!==o&&(p.push(zt+".id = ?"),c.push(o))}"ok"!==u.deleted&&p.push(Wt+".deleted = 0"),y.readTransaction(function(n){k(n,function(e){if(r=e,0!==a){var t=Yt(fn,[zt,Wt],pn,p,zt+".id "+(i?"DESC":"ASC"));t+=" LIMIT "+a+" OFFSET "+s,n.executeSql(t,c,function(e,t){for(var n=0,r=t.rows.length;n<r;n++){var o=t.rows.item(n),i=_t(o.metadata),a=i.id,s=Jt(o.data,a,o.rev),l=s._rev,c={id:a,key:a,value:{rev:l}};if(u.include_docs&&(c.doc=s,c.doc._rev=l,u.conflicts&&(c.doc._conflicts=be(i)),on(c.doc,u,v,e)),o.deleted){if("ok"!==u.deleted)continue;c.value.deleted=!0,c.doc=null}d.push(c)}})}})},en(e),function(){e(null,{total_rows:r,offset:u.skip,rows:d})})},v._changes=function(p){if((p=M(p)).continuous){var e=v._name+":"+he();return rn.addListener(v._name,e,v,p),rn.notify(v._name),{cancel:function(){rn.removeListener(v._name,e)}}}var a=p.descending;p.since=p.since&&!a?p.since:0;var f,h="limit"in p?p.limit:-1;0===h&&(h=1),f="return_docs"in p?p.return_docs:!("returnDocs"in p)||p.returnDocs;var m=[],g=0;!function(){var e=zt+".json AS metadata, "+zt+".max_seq AS maxSeq, "+Wt+".json AS winningDoc, "+Wt+".rev AS winningRev ",t=zt+" JOIN "+Wt,n=zt+".id="+Wt+".doc_id AND "+zt+".winningseq="+Wt+".seq",r=["maxSeq > ?"],o=[p.since];p.doc_ids&&(r.push(zt+".id IN "+Qt(p.doc_ids.length)),o=o.concat(p.doc_ids));var i=Yt(e,t,n,r,"maxSeq "+(a?"DESC":"ASC")),u=ne(p);p.view||p.filter||(i+=" LIMIT "+h);var d=p.since||0;y.readTransaction(function(e){e.executeSql(i,o,function(e,t){function n(e){return function(){p.onChange(e)}}for(var r=0,o=t.rows.length;r<o;r++){var i=t.rows.item(r),a=_t(i.metadata);d=i.maxSeq;var s=Jt(i.winningDoc,a.id,i.winningRev),l=p.processChange(s,a,p);l.seq=i.maxSeq;var c=u(l);if("object"==typeof c)return p.complete(c);if(c&&(g++,f&&m.push(l),p.attachments&&p.include_docs?on(s,p,v,e,n(l)):n(l)()),g===h)break}})},en(p.complete),function(){p.continuous||p.complete(null,{results:m,last_seq:d})})}()},v._close=function(e){e()},v._getAttachment=function(e,t,n,o,i){var a,r=o.ctx,s=n.digest,l=n.content_type,c="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+Vt+" WHERE digest=?";r.executeSql(c,[s],function(e,t){var n=t.rows.item(0),r=n.escaped?n.body.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""):Bt(n.body,u);a=o.binary?Ge(r,l):$e(r),i(null,a)})},v._getRevisionTree=function(n,r){y.readTransaction(function(e){var t="SELECT json AS metadata FROM "+zt+" WHERE id = ?";e.executeSql(t,[n],function(e,t){if(t.rows.length){var n=_t(t.rows.item(0).metadata);r(null,n.rev_tree)}else r(ee(j))})})},v._doCompaction=function(o,a,e){if(!a.length)return e();y.transaction(function(e){var t="SELECT json AS metadata FROM "+zt+" WHERE id = ?";e.executeSql(t,[o],function(e,t){var n=_t(t.rows.item(0).metadata);ge(n.rev_tree,function(e,t,n,r,o){var i=t+"-"+n;-1!==a.indexOf(i)&&(o.status="missing")});var r="UPDATE "+zt+" SET json = ? WHERE id = ?";e.executeSql(r,[wt(n),o])}),Zt(a,o,e)},en(e),function(){e()})},v._getLocal=function(o,i){y.readTransaction(function(e){var t="SELECT json, rev FROM "+Kt+" WHERE id=?";e.executeSql(t,[o],function(e,t){if(t.rows.length){var n=t.rows.item(0),r=Jt(n.json,o,n.rev);i(null,r)}else i(ee(j))})})},v._putLocal=function(e,r,o){"function"==typeof r&&(o=r,r={}),delete e._revisions;var i,a=e._rev,s=e._id;i=e._rev=a?"0-"+(parseInt(a.split("-")[1],10)+1):"0-1";var l,c=Gt(e);function t(e){var t,n;a?(t="UPDATE "+Kt+" SET rev=?, json=? WHERE id=? AND rev=?",n=[i,c,s,a]):(t="INSERT INTO "+Kt+" (id, rev, json) VALUES (?,?,?)",n=[s,i,c]),e.executeSql(t,n,function(e,t){t.rowsAffected?(l={ok:!0,id:s,rev:i},r.ctx&&o(null,l)):o(ee(U))},function(){return o(ee(U)),!1})}r.ctx?t(r.ctx):y.transaction(t,en(o),function(){l&&o(null,l)})},v._removeLocal=function(r,o,i){var a;function e(e){var t="DELETE FROM "+Kt+" WHERE id=? AND rev=?",n=[r._id,r._rev];e.executeSql(t,n,function(e,t){if(!t.rowsAffected)return i(ee(j));a={ok:!0,id:r._id,rev:"0-0"},o.ctx&&i(null,a)})}"function"==typeof o&&(i=o,o={}),o.ctx?e(o.ctx):y.transaction(e,en(i),function(){a&&i(null,a)})},v._destroy=function(e,t){rn.removeAllListeners(v._name),y.transaction(function(t){[zt,Wt,Vt,$t,Kt,Xt].forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},en(t),function(){A()&&(delete window.localStorage["_pouch__websqldb_"+v._name],delete window.localStorage[v._name]),t(null,{ok:!0})})}}function mn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=A(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var n=function(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}();return e&&(localStorage[t]=n?"1":"0"),n}function gn(){return"undefined"!=typeof openDatabase&&("undefined"!=typeof sqlitePlugin||mn())}function vn(e,t){var i,n=(i=e,function(e,t,n,r){if("undefined"!=typeof sqlitePlugin){var o=x.extend({},i,{name:e,version:t,description:n,size:r});return sqlitePlugin.openDatabase(o)}return openDatabase(e,t,n,r)}),r=x.extend({websql:n},e);"undefined"==typeof cordova||gn()||O("error","PouchDB error: you must install a SQLite plugin in order for PouchDB to work on this platform. Options:\n - https://github.com/nolanlawson/cordova-plugin-sqlite-2\n - https://github.com/litehelpers/Cordova-sqlite-storage\n - https://github.com/Microsoft/cordova-plugin-websql"),hn.call(this,r,t)}function yn(t,n){var e,r,o,i=new Headers,a={method:t.method,credentials:"include",headers:i};return t.json&&(i.set("Accept","application/json"),i.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.body instanceof Blob?tt(t.body,function(e){a.body=e}):t.body&&t.processData&&"string"!=typeof t.body?a.body=JSON.stringify(t.body):a.body="body"in t?t.body:null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&i.set(e,t.headers[e])}),e=function(){for(var n={},e=new F(function(e,t){n.resolve=e,n.reject=t}),t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return n.promise=e,F.resolve().then(function(){return fetch.apply(null,t)}).then(function(e){n.resolve(e)}).catch(function(e){n.reject(e)}),n}(t.url,a),0<t.timeout&&(r=setTimeout(function(){e.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),e.promise.then(function(e){return o={statusCode:e.status},0<t.timeout&&clearTimeout(r),200<=o.statusCode&&o.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(e){200<=o.statusCode&&o.statusCode<300?n(null,o,e):n(e,o)}).catch(function(e){n(e,o)}),{abort:e.reject}}vn.valid=function(){return"undefined"!=typeof cordova||gn()},vn.use_prefix=!0;var bn=function(){try{return new XMLHttpRequest,!0}catch(e){return!1}}();function _n(e,t){return bn||e.xhr?function(r,o){var i,e,a=!1,t=function(){a=!0,i.abort()};i=r.xhr?new r.xhr:new XMLHttpRequest;try{i.open(r.method,r.url)}catch(e){return o(new Error(e.name||"Url is invalid"))}for(var n in i.withCredentials=!("withCredentials"in r)||r.withCredentials,"GET"===r.method?delete r.headers["Content-Type"]:r.json&&(r.headers.Accept="application/json",r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.body&&r.processData&&"string"!=typeof r.body&&(r.body=JSON.stringify(r.body))),r.binary&&(i.responseType="arraybuffer"),"body"in r||(r.body=null),r.headers)r.headers.hasOwnProperty(n)&&i.setRequestHeader(n,r.headers[n]);return 0<r.timeout&&(e=setTimeout(t,r.timeout),i.onprogress=function(){clearTimeout(e),4!==i.readyState&&(e=setTimeout(t,r.timeout))},void 0!==i.upload&&(i.upload.onprogress=i.onprogress)),i.onreadystatechange=function(){if(4===i.readyState){var e={statusCode:i.status};if(200<=i.status&&i.status<300){var t;t=r.binary?Xe([i.response||""],{type:i.getResponseHeader("Content-Type")}):i.responseText,o(null,e,t)}else{var n={};if(a)(n=new Error("ETIMEDOUT")).code="ETIMEDOUT";else try{n=JSON.parse(i.response)}catch(e){}n.status=i.status,o(n)}}},r.body&&r.body instanceof Blob?tt(r.body,function(e){i.send(e)}):i.send(r.body),{abort:function(){i.abort()}}}(e,t):yn(e,t)}var wn=function(){};function kn(a,s){a=M(a);return(a=x.extend({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},a)).json&&(a.binary||(a.headers.Accept="application/json"),a.headers["Content-Type"]=a.headers["Content-Type"]||"application/json"),a.binary&&(a.encoding=null,a.json=!1),a.processData||(a.json=!1),_n(a,function(e,t,n){if(e)return s(te(e));var r,o=t.headers&&t.headers["content-type"],i=n||"";if(!a.binary&&(a.json||!a.processData)&&"object"!=typeof i&&(/json/.test(o)||/^[\s]*\{/.test(i)&&/\}[\s]*$/.test(i)))try{i=JSON.parse(i.toString())}catch(e){}200<=t.statusCode&&t.statusCode<300?function(e,t,n){if(!a.binary&&a.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){return n(e)}Array.isArray(e)&&(e=e.map(function(e){return e.error||e.missing?te(e):e})),a.binary&&wn(e,t),n(null,e,t)}(i,t,s):((r=te(i)).status=t.statusCode,s(r))})}function xn(e,t){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),o=-1!==n.indexOf("msie"),i=-1!==n.indexOf("edge"),a=r||(o||i)&&"GET"===e.method,s=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(a||!s)){var l=-1!==e.url.indexOf("?");e.url+=(l?"&":"?")+"_nonce="+Date.now()}return kn(e,t)}var En=25,Cn=50,Sn={},Tn=1800,Nn=c("pouchdb:http");function An(e){var n=e.doc&&e.doc._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];t.data=Je(t.data,t.content_type)})}function Pn(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function On(n){return n._attachments&&Object.keys(n._attachments)?F.all(Object.keys(n._attachments).map(function(e){var t=n._attachments[e];if(t.data&&"string"!=typeof t.data)return new F(function(e){et(t.data,e)}).then(function(e){t.data=e})})):F.resolve()}function In(e){var t=function(e){for(var t=ue.exec(e),r={},n=14;n--;){var o=se[n],i=t[n]||"",a=-1!==["user","password"].indexOf(o);r[o]=a?decodeURIComponent(i):i}return r[le]={},r[se[12]].replace(ce,function(e,t,n){t&&(r[le][t]=n)}),r}(e);(t.user||t.password)&&(t.auth={username:t.user,password:t.password});var n=t.path.replace(/(^\/|\/$)/g,"").split("/");return t.db=n.pop(),-1===t.db.indexOf("%")&&(t.db=encodeURIComponent(t.db)),t.path=n.join("/"),t}function Rn(e,t){return Dn(e,e.db+"/"+t)}function Dn(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function jn(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function Fn(e,t){var i=this,n=In;e.getHost&&(n=e.getHost);var r,g=n(e.name,e),o=Rn(g,""),v=(e=M(e)).ajax||{};if(i.getUrl=function(){return o},i.getHeaders=function(){return v.headers||{}},e.auth||g.auth){var a=e.auth||g.auth,s=a.username+":"+a.password,l=$e(unescape(encodeURIComponent(s)));v.headers=v.headers||{},v.headers.Authorization="Basic "+l}function y(e,t,n){var r=e.ajax||{},o=x.extend(M(v),r,t);return Nn(o.method+" "+o.url),i._ajax(o,n)}function c(e,t){return new F(function(n,r){y(e,t,function(e,t){if(e)return r(e);n(t)})})}function u(e,n){return _(e,p(function(t){b().then(function(){return n.apply(this,t)}).catch(function(e){t.pop()(e)})}))}function b(){return e.skipSetup||e.skip_setup?F.resolve():r||((r=c({},{method:"GET",url:o}).catch(function(e){return e&&e.status&&404===e.status?(I(404,"PouchDB is just detecting if the remote exists."),c({},{method:"PUT",url:o})):F.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||F.reject(e)})).catch(function(){r=null}),r)}function d(e){return e.split("/").map(encodeURIComponent).join("/")}i._ajax=xn,setTimeout(function(){t(null,i)}),i.type=function(){return"http"},i.id=u("id",function(r){y({},{method:"GET",url:Dn(g,"")},function(e,t){var n=t&&t.uuid?t.uuid+g.db:Rn(g,"");r(null,n)})}),i.request=u("request",function(e,t){e.url=Rn(g,e.url),y({},e,t)}),i.compact=u("compact",function(r,o){"function"==typeof r&&(o=r,r={}),y(r=M(r),{url:Rn(g,"_compact"),method:"POST"},function(){!function n(){i.info(function(e,t){t&&!t.compact_running?o(null,{ok:!0}):setTimeout(n,r.interval||200)})}()})}),i.bulkGet=_("bulkGet",function(s,l){var c=this;function e(e){var t={};s.revs&&(t.revs=!0),s.attachments&&(t.attachments=!0),y({},{url:Rn(g,"_bulk_get"+jn(t)),method:"POST",body:{docs:s.docs}},e)}function r(){var e=Cn,r=Math.ceil(s.docs.length/e),o=0,i=new Array(r);function t(n){return function(e,t){i[n]=t.results,++o===r&&l(null,{results:re(i)})}}for(var n=0;n<r;n++){var a=w(s,["revs","attachments"]);a.ajax=v,a.docs=s.docs.slice(n*e,Math.min(s.docs.length,(n+1)*e)),T(c,a,t(n))}}var o=Dn(g,""),t=Sn[o];"boolean"!=typeof t?e(function(e,t){if(e){var n=Math.floor(e.status/100);4===n||5===n?(Sn[o]=!1,I(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),r()):l(e)}else Sn[o]=!0,l(null,t)}):t?e(l):r()}),i._info=function(n){b().then(function(){y({},{method:"GET",url:Rn(g,"")},function(e,t){if(e)return n(e);t.host=Rn(g,""),n(null,t)})}).catch(n)},i.get=u("get",function(e,a,n){"function"==typeof a&&(n=a,a={});var t={};(a=M(a)).revs&&(t.revs=!0),a.revs_info&&(t.revs_info=!0),a.open_revs&&("all"!==a.open_revs&&(a.open_revs=JSON.stringify(a.open_revs)),t.open_revs=a.open_revs),a.rev&&(t.rev=a.rev),a.conflicts&&(t.conflicts=a.conflicts),e=Pn(e);var r={method:"GET",url:Rn(g,e+jn(t))};function o(r){var o=r._attachments,i=o&&Object.keys(o);if(o&&i.length)return new h(function(){if(!i.length)return null;var e=i.pop(),t=o[e],n=Pn(r._id)+"/"+d(e)+"?rev="+r._rev;return c(a,{method:"GET",url:Rn(g,n),binary:!0}).then(function(t){return a.binary?t:new F(function(e){et(t,e)})}).then(function(e){delete t.stub,delete t.length,t.data=e})},5,{promise:F}).start()}c(a,r).then(function(t){return F.resolve().then(function(){if(a.attachments)return e=t,Array.isArray(e)?F.all(e.map(function(e){if(e.ok)return o(e.ok)})):o(e);var e}).then(function(){n(null,t)})}).catch(n)}),i.remove=u("remove",function(e,t,n,r){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,"function"==typeof t?(r=t,n={}):(r=n,n=t));var i=o._rev||n.rev;y(n,{method:"DELETE",url:Rn(g,Pn(o._id))+"?rev="+i},r)}),i.getAttachment=u("getAttachment",function(e,t,n,r){"function"==typeof n&&(r=n,n={});var o=n.rev?"?rev="+n.rev:"";y(n,{method:"GET",url:Rn(g,Pn(e))+"/"+d(t)+o,binary:!0},r)}),i.removeAttachment=u("removeAttachment",function(e,t,n,r){y({},{method:"DELETE",url:Rn(g,Pn(e)+"/"+d(t))+"?rev="+n},r)}),i.putAttachment=u("putAttachment",function(e,t,n,r,o,i){"function"==typeof o&&(i=o,o=r,r=n,n=null);var a=Pn(e)+"/"+d(t),s=Rn(g,a);if(n&&(s+="?rev="+n),"string"==typeof r){var l;try{l=Ke(r)}catch(e){return i(ee(V,"Attachment is not a valid base64 string"))}r=l?Ge(l,o):""}y({},{headers:{"Content-Type":o},method:"PUT",url:s,processData:!1,body:r,timeout:v.timeout||6e4},i)}),i._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,b().then(function(){return F.all(e.docs.map(On))}).then(function(){y(t,{method:"POST",url:Rn(g,"_bulk_docs"),body:e},function(e,t){if(e)return n(e);t.forEach(function(e){e.ok=!0}),n(null,t)})}).catch(n)},i.allDocs=u("allDocs",function(t,n){"function"==typeof t&&(n=t,t={});var e,r={},o="GET";(t=M(t)).conflicts&&(r.conflicts=!0),t.descending&&(r.descending=!0),t.include_docs&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.key&&(r.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(r.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(r.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(r.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(r.limit=t.limit),void 0!==t.skip&&(r.skip=t.skip);var i=jn(r);if(void 0!==t.keys){var a="keys="+encodeURIComponent(JSON.stringify(t.keys));a.length+i.length+1<=Tn?i+="&"+a:(o="POST",e={keys:t.keys})}c(t,{method:o,url:Rn(g,"_all_docs"+i),body:e}).then(function(e){t.include_docs&&t.attachments&&t.binary&&e.rows.forEach(An),n(null,e)}).catch(n)}),i._changes=function(o){var i="batch_size"in o?o.batch_size:En;(o=M(o)).timeout="timeout"in o?o.timeout:"timeout"in v?v.timeout:3e4;var a,r=o.timeout?{timeout:o.timeout-5e3}:{},s=void 0!==o.limit&&o.limit;a="return_docs"in o?o.return_docs:!("returnDocs"in o)||o.returnDocs;var l=s;if(o.style&&(r.style=o.style),(o.include_docs||o.filter&&"function"==typeof o.filter)&&(r.include_docs=!0),o.attachments&&(r.attachments=!0),o.continuous&&(r.feed="longpoll"),o.conflicts&&(r.conflicts=!0),o.descending&&(r.descending=!0),"heartbeat"in o?o.heartbeat&&(r.heartbeat=o.heartbeat):r.heartbeat=1e4,o.filter&&"string"==typeof o.filter&&(r.filter=o.filter),o.view&&"string"==typeof o.view&&(r.filter="_view",r.view=o.view),o.query_params&&"object"==typeof o.query_params)for(var e in o.query_params)o.query_params.hasOwnProperty(e)&&(r[e]=o.query_params[e]);var c,u,d,p="GET";if(o.doc_ids){r.filter="_doc_ids";var t=JSON.stringify(o.doc_ids);t.length<Tn?r.doc_ids=t:(p="POST",c={doc_ids:o.doc_ids})}var f=function(e,t){if(!o.aborted){r.since=e,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),o.descending?s&&(r.limit=l):r.limit=!s||i<l?i:l;var n={method:p,url:Rn(g,"_changes"+jn(r)),timeout:o.timeout,body:c};d=e,o.aborted||b().then(function(){u=y(o,n,t)}).catch(t)}},h={results:[]},m=function(e,t){if(!o.aborted){var n=0;if(t&&t.results){n=t.results.length,h.last_seq=t.last_seq;o.query_params,t.results=t.results.filter(function(e){l--;var t=ne(o)(e);return t&&(o.include_docs&&o.attachments&&o.binary&&An(e),a&&h.results.push(e),o.onChange(e)),t})}else if(e)return o.aborted=!0,void o.complete(e);t&&t.last_seq&&(d=t.last_seq);var r=s&&l<=0||t&&n<i||o.descending;(!o.continuous||s&&l<=0)&&r?o.complete(null,h):setTimeout(function(){f(d,m)},0)}};return f(o.since||0,m),{cancel:function(){o.aborted=!0,u&&u.abort()}}},i.revsDiff=u("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),y(t,{method:"POST",url:Rn(g,"_revs_diff"),body:e},n)}),i._close=function(e){e()},i._destroy=function(e,n){y(e,{url:Rn(g,""),method:"DELETE"},function(e,t){if(e&&e.status&&404!==e.status)return n(e);n(null,t)})}}function Mn(){this.promise=new F(function(e){e()})}function Ln(e){var o,i=e.db,a=e.viewName,s=e.map,l=e.reduce,n=e.temporary,c=s.toString()+(l&&l.toString())+"undefined";if(!n&&(o=i._cachedViews=i._cachedViews||{})[c])return o[c];var t=i.info().then(function(e){var t,r=e.db_name+"-mrview-"+(n?"temp":(t=c,f.hash(t)));return de(i,"_local/mrviews",function(e){e.views=e.views||{};var t=a;-1===t.indexOf("/")&&(t=a+"/"+a);var n=e.views[t]=e.views[t]||{};if(!n[r])return n[r]=!0,e}).then(function(){return i.registerDependentDatabase(r).then(function(e){var t=e.db;t.auto_compaction=!0;var n={name:r,db:t,sourceDB:i,adapter:i.adapter,mapFun:s,reduceFun:l};return n.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return n.seq=e?e.seq:0,o&&n.db.once("destroyed",function(){delete o[c]}),n})})})});return o&&(o[c]=t),t}function Un(e,t,n,r,o,i){return l("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:n,log:r,isArray:o,toJSON:i})}Fn.valid=function(){return!0},Mn.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},Mn.prototype.finish=function(){return this.promise};var Bn=function(e,t){return t&&e.then(function(e){d.nextTick(function(){t(null,e)})},function(e){d.nextTick(function(){t(e)})}),e},Hn=function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})},qn=function(n,r){return function(){var e=arguments,t=this;return n.add(function(){return r.apply(t,e)})}},zn=function(e){for(var t={},n=0,r=e.length;n<r;n++)t["$"+e[n]]=!0;var o=Object.keys(t),i=new Array(o.length);for(n=0,r=o.length;n<r;n++)i[n]=o[n].substring(1);return i},Wn={},Vn=new Mn,Kn=50,$n=O.bind(null,"log");function Xn(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Gn(t,e,n){try{return{output:e.apply(null,n)}}catch(e){return function(e,t){try{e.emit("error",t)}catch(e){O("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),O("error",t)}}(t,e),{error:e}}}function Jn(e,t){var n=k.collate(e.key,t.key);return 0!==n?n:k.collate(e.value,t.value)}function Qn(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function Yn(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&e.rows.forEach(function(e){var n=e.doc&&e.doc._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];n[e].data=Je(t.data,t.content_type)})}),e}}function Zn(e){return new mr("builtin "+e+" function requires map values to be numbers or number arrays")}function er(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e[n];if("number"!=typeof o){if(!Array.isArray(o))throw Zn("_sum");t="number"==typeof t?[t]:t;for(var i=0,a=o.length;i<a;i++){var s=o[i];if("number"!=typeof s)throw Zn("_sum");void 0===t[i]?t.push(s):t[i]+=s}}else"number"==typeof t?t+=o:t[0]+=o}return t}var tr={_sum:function(e,t){return er(t)},_count:function(e,t){return t.length},_stats:function(e,t){return{sum:er(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e[n];t+=o*o}return t}(t)}}};function nr(e,t,n,r){var o=t[e];void 0!==o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),n.push(e+"="+o))}function rr(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function or(n,e){var t=n.descending?"endkey":"startkey",r=n.descending?"startkey":"endkey";if(void 0!==n[t]&&void 0!==n[r]&&0<k.collate(n[t],n[r]))throw new fr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==n.reduce){if(n.include_docs)throw new fr("{include_docs:true} is invalid for reduce");if(n.keys&&1<n.keys.length&&!n.group&&!n.group_level)throw new fr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var t=function(e){if(e){if("number"!=typeof e)return new fr('Invalid value for integer: "'+e+'"');if(e<0)return new fr('Invalid value for positive integer: "'+e+'"')}}(n[e]);if(t)throw t})}function ir(t){return function(e){if(404===e.status)return t;throw e}}function ar(e,n,t){var r,o="_local/doc_"+e,i={_id:o,keys:[]},a=t[e],c=a.indexableKeysToKeyValues,s=a.changes;return(1===(r=s).length&&/^1-/.test(r[0].rev)?F.resolve(i):n.db.get(o).catch(ir(i))).then(function(t){return(e=t,e.keys.length?n.db.allDocs({keys:e.keys,include_docs:!0}):F.resolve({rows:[]})).then(function(e){return function(e,t){for(var r=[],o={},n=0,i=t.rows.length;n<i;n++){var a=t.rows[n].doc;if(a&&(r.push(a),o[a._id]=!0,a._deleted=!c[a._id],!a._deleted)){var s=c[a._id];"value"in s&&(a.value=s.value)}}var l=Object.keys(c);return l.forEach(function(e){if(!o[e]){var t={_id:e},n=c[e];"value"in n&&(t.value=n.value),r.push(t)}}),e.keys=zn(l.concat(e.keys)),r.push(e),r}(t,e)});var e})}function sr(e){var t="string"==typeof e?e:e.name,n=Wn[t];return n||(n=Wn[t]=new Mn),n}function lr(e){return qn(sr(e),function(){return function(m){var g,v,y;function t(e,t){var n={id:v._id,key:k.normalizeKey(e)};null!=t&&(n.value=k.normalizeKey(t)),g.push(n)}if("function"==typeof m.mapFun&&2===m.mapFun.length){var n=m.mapFun;y=function(e){return n(e,t)}}else y=Un(m.mapFun.toString(),t,er,$n,Array.isArray,JSON.parse);var b=m.seq||0;function _(n,i){return function(){return t=n,o=i,e="_local/lastSeq",(r=m).db.get(e).catch(ir({_id:e,seq:0})).then(function(n){var e=Object.keys(t);return F.all(e.map(function(e){return ar(e,r,t)})).then(function(e){var t=re(e);return n.seq=o,t.push(n),r.db.bulkDocs({docs:t})})});var r,t,o,e}}var w=new Mn;return new F(function(e,t){function h(){w.finish().then(function(){m.seq=b,e()})}!function f(){m.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:b,limit:Kn}).on("complete",function(e){var t=e.results;if(!t.length)return h();for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];if("_"!==i.doc._id[0]){g=[],(v=i.doc)._deleted||Gn(m.sourceDB,y,[v]),g.sort(Jn);for(var a,s={},l=0,c=g.length;l<c;l++){var u=g[l],d=[u.key,u.id];0===k.collate(u.key,a)&&d.push(l);var p=k.toIndexableString(d);s[p]=u,a=u.key}n[i.doc._id]={indexableKeysToKeyValues:s,changes:i.changes}}b=i.seq}return w.add(_(n,b)),t.length<Kn?h():f()}).on("error",function(e){t(e)})}()})}(e)})()}function cr(e,t){return qn(sr(e),function(){return function(r,o){var i,a=r.reduceFun&&!1!==o.reduce,s=o.skip||0;void 0===o.keys||o.keys.length||(o.limit=0,delete o.keys);function n(e){return e.include_docs=!0,r.db.allDocs(e).then(function(e){return i=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||n<t))return e.doc.value}var r=k.parseIndexableString(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function e(t){var n;if(n=a?function(e,t,n){0===n.group_level&&delete n.group_level;var r,o=n.group||n.group_level;r=tr[e.reduceFun]?tr[e.reduceFun]:Un(e.reduceFun.toString(),null,er,$n,Array.isArray,JSON.parse);var i,a,s,l=[],c=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;t.forEach(function(e){var t=l[l.length-1],n=o?e.key:null;if(o&&Array.isArray(n)&&(n=n.slice(0,c)),t&&0===k.collate(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);l.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}),t=[];for(var u=0,d=l.length;u<d;u++){var p=l[u],f=Gn(e.sourceDB,r,[p.keys,p.values,!1]);if(f.error&&f.error instanceof mr)throw f.error;t.push({value:f.error?null:f.output,key:p.groupKey})}return{rows:(i=t,a=n.limit,s=n.skip,s=s||0,"number"==typeof a?i.slice(s,a+s):0<s?i.slice(s):i)}}(r,t,o):{total_rows:i,offset:s,rows:t},o.include_docs){var e=zn(t.map(Qn));return r.sourceDB.allDocs({keys:e,include_docs:!0,conflicts:o.conflicts,attachments:o.attachments,binary:o.binary}).then(function(e){var r={};return e.rows.forEach(function(e){e.doc&&(r["$"+e.id]=e.doc)}),t.forEach(function(e){var t=Qn(e),n=r["$"+t];n&&(e.doc=n)}),n})}return n}{if(void 0!==o.keys){var t=o.keys,l=t.map(function(e){var t={startkey:k.toIndexableString([e]),endkey:k.toIndexableString([e,{}])};return n(t)});return F.all(l).then(re).then(e)}var c={descending:o.descending};if(o.start_key&&(o.startkey=o.start_key),o.end_key&&(o.endkey=o.end_key),void 0!==o.startkey&&(c.startkey=o.descending?k.toIndexableString([o.startkey,{}]):k.toIndexableString([o.startkey])),void 0!==o.endkey){var u=!1!==o.inclusive_end;o.descending&&(u=!u),c.endkey=k.toIndexableString(u?[o.endkey,{}]:[o.endkey])}if(void 0!==o.key){var d=k.toIndexableString([o.key]),p=k.toIndexableString([o.key,{}]);c.descending?(c.endkey=d,c.startkey=p):(c.startkey=d,c.endkey=p)}return a||("number"==typeof o.limit&&(c.limit=o.limit),c.skip=s),n(c).then(e)}}(e,t)})()}var ur,dr=(ur=function(){var e,n;return"http"===this.type()?this.request({method:"POST",url:"_view_cleanup"}):"function"==typeof this._viewCleanup?(e=this,new F(function(n,r){e._viewCleanup(function(e,t){if(e)return r(e);n(t)})})):(n=this).get("_local/mrviews").then(function(s){var l={};Object.keys(s.views).forEach(function(e){var t=Xn(e),n="_design/"+t[0],r=t[1];l[n]=l[n]||{},l[n][r]=!0});var e={keys:Object.keys(l),include_docs:!0};return n.allDocs(e).then(function(e){var a={};e.rows.forEach(function(o){var i=o.key.substring(8);Object.keys(l[o.key]).forEach(function(e){var t=i+"/"+e;s.views[t]||(t=e);var n=Object.keys(s.views[t]),r=o.doc&&o.doc.views&&o.doc.views[e];n.forEach(function(e){a[e]=a[e]||r})})});var t=Object.keys(a).filter(function(e){return!a[e]}).map(function(e){return qn(sr(e),function(){return new n.constructor(e,n.__opts).destroy()})()});return F.all(t).then(function(){return{ok:!0}})})},ir({ok:!0}))},p(function(e){var t=e.pop(),n=ur.apply(this,e);return"function"==typeof t&&Bn(n,t),n}));function pr(n,e,r){if("http"===n.type())return function(e,t,n){var r,o=[],i="GET";if(nr("reduce",n,o),nr("include_docs",n,o),nr("attachments",n,o),nr("limit",n,o),nr("descending",n,o),nr("group",n,o),nr("group_level",n,o),nr("skip",n,o),nr("stale",n,o),nr("conflicts",n,o),nr("startkey",n,o,!0),nr("start_key",n,o,!0),nr("endkey",n,o,!0),nr("end_key",n,o,!0),nr("inclusive_end",n,o),nr("key",n,o,!0),o=""===(o=o.join("&"))?"":"?"+o,void 0!==n.keys){var a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+o.length+1<=2e3?o+=("?"===o[0]?"&":"?")+a:(i="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var s=Xn(t);return e.request({method:i,url:"_design/"+s[0]+"/_view/"+s[1]+o,body:r}).then(Yn(n))}return r=r||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+o,body:r}).then(Yn(n))}(n,e,r);if("function"==typeof n._query)return t=n,o=e,i=r,new F(function(n,r){t._query(o,i,function(e,t){if(e)return r(e);n(t)})});var t,o,i;if("string"!=typeof e){or(r,e);var a={db:n,viewName:"temp_view/temp_view",map:e.map,reduce:e.reduce,temporary:!0};return Vn.add(function(){return Ln(a).then(function(e){return Hn(lr(e).then(function(){return cr(e,r)}),function(){return e.db.destroy()})})}),Vn.finish()}var s=e,l=Xn(s),c=l[0],u=l[1];return n.get("_design/"+c).then(function(e){var t=e.views&&e.views[u];if(!t||"string"!=typeof t.map)throw new hr("ddoc "+c+" has no view named "+u);return or(r,t),Ln({db:n,viewName:s,map:t.map,reduce:t.reduce}).then(function(e){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&d.nextTick(function(){lr(e)}),cr(e,r)):lr(e).then(function(){return cr(e,r)})})})}function fr(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,fr)}catch(e){}}function hr(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,hr)}catch(e){}}function mr(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,mr)}catch(e){}}n(fr,Error),n(hr,Error),n(mr,Error);var gr={query:function(e,t,n){var r;"function"==typeof t&&(n=t,t={}),t=t?((r=t).group_level=rr(r.group_level),r.limit=rr(r.limit),r.skip=rr(r.skip),r):{},"function"==typeof e&&(e={map:e});var o=this,i=F.resolve().then(function(){return pr(o,e,t)});return Bn(i,n),i},viewCleanup:dr};function vr(e){return/^1-/.test(e)}function yr(t,n){var e=Object.keys(n._attachments);return F.all(e.map(function(e){return t.getAttachment(n._id,e,{rev:n._rev})}))}function br(r,l,o,i){o=M(o);var a=[],c=!0;function t(e){return r.allDocs({keys:e,include_docs:!0}).then(function(e){if(i.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){var t;e.deleted||!e.doc||!vr(e.value.rev)||(t=e.doc)._attachments&&0<Object.keys(t._attachments).length||(a.push(e.doc),delete o[e.id])})})}return F.resolve().then(function(){var e=Object.keys(o).filter(function(e){var t=o[e].missing;return 1===t.length&&vr(t[0])});if(0<e.length)return t(e)}).then(function(){var e,n,t=(e=o,n=[],Object.keys(e).forEach(function(t){e[t].missing.forEach(function(e){n.push({id:t,rev:e})})}),{docs:n,revs:!0});if(t.docs.length)return r.bulkGet(t).then(function(e){if(i.cancelled)throw new Error("cancelled");return F.all(e.results.map(function(e){return F.all(e.docs.map(function(e){var i,a,s,t,n,o=e.ok;return e.error&&(c=!1),o&&o._attachments?(i=l,a=r,s=o,t="http"===a.type()&&"http"!==i.type(),n=Object.keys(s._attachments),t?i.get(s._id).then(function(o){return F.all(n.map(function(e){return n=s,r=e,(t=o)._attachments&&t._attachments[r]&&t._attachments[r].digest===n._attachments[r].digest?i.getAttachment(o._id,e):a.getAttachment(s._id,e);var t,n,r}))}).catch(function(e){if(404!==e.status)throw e;return yr(a,s)}):yr(a,s)).then(function(e){var r=Object.keys(o._attachments);return e.forEach(function(e,t){var n=o._attachments[r[t]];delete n.stub,delete n.length,n.data=e}),o}):o}))})).then(function(e){a=a.concat(re(e).filter(Boolean))})})}).then(function(){return{ok:c,docs:a}})}var _r=1,wr="pouchdb",kr=5,xr=0;function Er(t,n,r,o,i){return t.get(n).catch(function(e){if(404===e.status)return"http"===t.type()&&I(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:o,_id:n,history:[],replicator:wr,version:_r};throw e}).then(function(e){if(!i.cancelled)return e.history=(e.history||[]).filter(function(e){return e.session_id!==o}),e.history.unshift({last_seq:r,session_id:o}),e.history=e.history.slice(0,kr),e.version=_r,e.replicator=wr,e.session_id=o,e.last_seq=r,t.put(e).catch(function(e){if(409===e.status)return Er(t,n,r,o,i);throw e})})}function Cr(e,t,n,r){this.src=e,this.target=t,this.id=n,this.returnValue=r}Cr.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},Cr.prototype.updateTarget=function(e,t){return Er(this.target,this.id,e,t,this.returnValue)},Cr.prototype.updateSource=function(e,t){var n=this;return this.readOnlySource?F.resolve(!0):Er(this.src,this.id,e,t,this.returnValue).catch(function(e){if(Nr(e))return n.readOnlySource=!0;throw e})};var Sr={undefined:function(e,t){return 0===k.collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return function(e,t){if(e.session_id===t.session_id)return{last_seq:e.last_seq,history:e.history};return function e(t,n){var r=t[0];var o=t.slice(1);var i=n[0];var a=n.slice(1);if(!r||0===n.length)return{last_seq:xr,history:[]};var s=r.session_id;if(Tr(s,n))return{last_seq:r.last_seq,history:t};var l=i.session_id;if(Tr(l,o))return{last_seq:i.last_seq,history:a};return e(o,a)}(e.history,t.history)}(t,e).last_seq}};function Tr(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||Tr(e,r))}function Nr(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}Cr.prototype.getCheckpoint=function(){var t=this;return t.target.get(t.id).then(function(n){return t.readOnlySource?F.resolve(n.last_seq):t.src.get(t.id).then(function(e){return n.version!==e.version?xr:(t=n.version?n.version.toString():"undefined")in Sr?Sr[t](n,e):xr;var t},function(e){if(404===e.status&&n.last_seq)return t.src.put({_id:t.id,last_seq:xr}).then(function(){return xr},function(e){return Nr(e)?(t.readOnlySource=!0,n.last_seq):xr});throw e})}).catch(function(e){if(404!==e.status)throw e;return xr})};var Ar=0;function Pr(e,t,n){var r,o=n.doc_ids?n.doc_ids.sort(k.collate):"",i=n.filter?n.filter.toString():"",a="",s="";return n.filter&&n.query_params&&(a=JSON.stringify((r=n.query_params,Object.keys(r).sort(k.collate).reduce(function(e,t){return e[t]=r[t],e},{})))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),F.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+s+a+o;return new F(function(e){at(t,e)})}).then(function(e){return"_local/"+(e=e.replace(/\//g,".").replace(/\+/g,"_"))})}function Or(r,n,o,a,s){var l,i,c=[],u={seq:0,changes:[],docs:[]},d=!1,p=!1,f=!1,h=0,m=o.continuous||o.live||!1,t=o.batch_size||100,g=o.batches_limit||10,v=!1,y=o.doc_ids,b=[],_=[],w=he();s=s||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};function e(){return i?F.resolve():Pr(r,n,o).then(function(e){i=new Cr(r,n,e,a)})}function x(){if(_=[],0!==l.docs.length){var i=l.docs;return n.bulkDocs({docs:i,new_edits:!1}).then(function(e){if(a.cancelled)throw A(),new Error("cancelled");var t=[],n={};e.forEach(function(e){e.error&&(s.doc_write_failures++,t.push(e),n[e.id]=e)}),b=b.concat(t),s.docs_written+=l.docs.length-t.length;var r=t.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(i.forEach(function(e){var t=n[e._id];t?a.emit("denied",M(t)):_.push(e)}),0<r.length){var o=new Error("bulkDocs error");throw o.other_errors=t,N("target.bulkDocs failed to write docs",o),new Error("bulkWrite partial failure")}},function(e){throw s.doc_write_failures+=i.length,e})}}function E(){if(l.error)throw new Error("There was a problem getting docs.");s.last_seq=h=l.seq;var e=M(s);return _.length&&(e.docs=_,a.emit("change",e)),d=!0,i.writeCheckpoint(l.seq,w).then(function(){if(d=!1,a.cancelled)throw A(),new Error("cancelled");l=void 0,R()}).catch(j)}function C(){return br(r,n,l.diffs,a).then(function(e){l.error=!e.ok,e.docs.forEach(function(e){delete l.diffs[e._id],s.docs_read++,l.docs.push(e)})})}function S(){var t;a.cancelled||l||(0!==c.length?(l=c.shift(),(t={},l.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(e){return e.rev}))}),n.revsDiff(t).then(function(e){if(a.cancelled)throw A(),new Error("cancelled");l.diffs=e})).then(C).then(x).then(E).then(S).catch(function(e){N("batch processing terminated with error",e)})):T(!0))}function T(e){0!==u.changes.length?(e||p||u.changes.length>=t)&&(c.push(u),u={seq:0,changes:[],docs:[]},"pending"!==a.state&&"stopped"!==a.state||(a.state="active",a.emit("active")),S()):0!==c.length||l||((m&&k.live||p)&&(a.state="pending",a.emit("paused")),p&&A())}function N(e,t){f||(t.message||(t.message=e),s.ok=!1,s.status="aborting",s.errors.push(t),b=b.concat(t),c=[],u={seq:0,changes:[],docs:[]},A())}function A(){if(!f&&(!a.cancelled||(s.status="cancelled",!d)))if(s.status=s.status||"complete",s.end_time=new Date,s.last_seq=h,f=!0,0<b.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name}).length){var e=b.pop();0<b.length&&(e.other_errors=b),e.result=s,function(e,t,n,r){if(!1===e.retry)return t.emit("error",n),t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=L),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var o=function(){e.current_back_off=Ar};t.once("paused",function(){t.removeListener("active",o)}),t.once("active",o)}e.current_back_off=e.current_back_off||Ar,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}(o,a,e,function(){Or(r,n,o,a)})}else s.errors=b,a.emit("complete",s),a.removeAllListeners()}function P(e){if(a.cancelled)return A();ne(o)(e)&&(u.seq=e.seq,u.changes.push(e),T(0===c.length&&k.live))}function O(e){if(v=!1,a.cancelled)return A();if(0<e.results.length)k.since=e.last_seq,R(),T(!0);else{var t=function(){m?(k.live=!0,R()):p=!0,T(!0)};l||0!==e.results.length?t():(d=!0,i.writeCheckpoint(e.last_seq,w).then(function(){d=!1,s.last_seq=h=e.last_seq,t()}).catch(j))}}function I(e){if(v=!1,a.cancelled)return A();N("changes rejected",e)}function R(){if(!v&&!p&&c.length<g){v=!0,a._changes&&(a.removeListener("cancel",a._abortChanges),a._changes.cancel()),a.once("cancel",t);var e=r.changes(k).on("change",P);e.then(n,n),e.then(O).catch(I),o.retry&&(a._changes=e,a._abortChanges=t)}function t(){e.cancel()}function n(){a.removeListener("cancel",t)}}function D(){e().then(function(){if(!a.cancelled)return i.getCheckpoint().then(function(e){k={since:h=e,limit:t,batch_size:t,style:"all_docs",doc_ids:y,return_docs:!0},o.filter&&("string"!=typeof o.filter?k.include_docs=!0:k.filter=o.filter),"heartbeat"in o&&(k.heartbeat=o.heartbeat),"timeout"in o&&(k.timeout=o.timeout),o.query_params&&(k.query_params=o.query_params),o.view&&(k.view=o.view),R()});A()}).catch(function(e){N("getCheckpoint rejected with ",e)})}function j(e){throw d=!1,N("writeCheckpoint completed with error",e),e}a.ready(r,n),a.cancelled?A():(a._addedListeners||(a.once("cancel",A),"function"==typeof o.complete&&(a.once("error",o.complete),a.once("complete",function(e){o.complete(null,e)})),a._addedListeners=!0),void 0===o.since?D():e().then(function(){return d=!0,i.writeCheckpoint(o.since,w)}).then(function(){d=!1,a.cancelled?A():(h=o.since,D())}).catch(j))}function Ir(){s.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var n=this,r=new F(function(e,t){n.once("complete",e),n.once("error",t)});n.then=function(e,t){return r.then(e,t)},n.catch=function(e){return r.catch(e)},n.catch(function(){})}function Rr(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function Dr(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw ee(X,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=M(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var o=new Ir(n);return Or(Rr(e,n),Rr(t,n),n,o),o}function jr(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=M(n)).PouchConstructor=n.PouchConstructor||this,new Fr(e=Rr(e,n),t=Rr(t,n),n,r)}function Fr(e,t,n,r){var o=this;this.canceled=!1;var i=n.push?x.extend({},n,n.push):n,a=n.pull?x.extend({},n,n.pull):n;function s(e){o.emit("change",{direction:"pull",change:e})}function l(e){o.emit("change",{direction:"push",change:e})}function c(e){o.emit("denied",{direction:"push",doc:e})}function u(e){o.emit("denied",{direction:"pull",doc:e})}function d(){o.pushPaused=!0,o.pullPaused&&o.emit("paused")}function p(){o.pullPaused=!0,o.pushPaused&&o.emit("paused")}function f(){o.pushPaused=!1,o.pullPaused&&o.emit("active",{direction:"push"})}function h(){o.pullPaused=!1,o.pushPaused&&o.emit("active",{direction:"pull"})}this.push=Dr(e,t,i),this.pull=Dr(t,e,a),this.pushPaused=!0,this.pullPaused=!0;var m={};function g(n){return function(e,t){("change"===e&&(t===s||t===l)||"denied"===e&&(t===u||t===c)||"paused"===e&&(t===p||t===d)||"active"===e&&(t===h||t===f))&&(e in m||(m[e]={}),m[e][n]=!0,2===Object.keys(m[e]).length&&o.removeAllListeners(e))}}n.live&&(this.push.on("complete",o.pull.cancel.bind(o.pull)),this.pull.on("complete",o.push.cancel.bind(o.push))),this.on("newListener",function(e){"change"===e?(o.pull.on("change",s),o.push.on("change",l)):"denied"===e?(o.pull.on("denied",u),o.push.on("denied",c)):"active"===e?(o.pull.on("active",h),o.push.on("active",f)):"paused"===e&&(o.pull.on("paused",p),o.push.on("paused",d))}),this.on("removeListener",function(e){"change"===e?(o.pull.removeListener("change",s),o.push.removeListener("change",l)):"denied"===e?(o.pull.removeListener("denied",u),o.push.removeListener("denied",c)):"active"===e?(o.pull.removeListener("active",h),o.push.removeListener("active",f)):"paused"===e&&(o.pull.removeListener("paused",p),o.push.removeListener("paused",d))}),this.pull.on("removeListener",g("pull")),this.push.on("removeListener",g("push"));var v=F.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return o.emit("complete",t),r&&r(null,t),o.removeAllListeners(),t},function(e){if(o.cancel(),r?r(e):o.emit("error",e),o.removeAllListeners(),r)throw e});this.then=function(e,t){return v.then(e,t)},this.catch=function(e){return v.catch(e)}}n(Ir,s.EventEmitter),Ir.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Ir.prototype.ready=function(e,t){var n=this;function r(){n.cancel()}n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",function(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}))},n(Fr,s.EventEmitter),Fr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Ue.plugin(function(e){e.adapter("idb",Lt,!0)}).plugin(function(e){e.adapter("websql",vn,!0)}).plugin(function(e){e.adapter("http",Fn,!1),e.adapter("https",Fn,!1)}).plugin(gr).plugin(function(e){e.replicate=Dr,e.sync=jr}),Lr.exports=Ue}).call(this,Mr("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:136,argsarray:53,debug:124,"es6-promise-pool":69,events:70,inherits:126,"js-extend":92,lie:108,"pouchdb-collate":118,"pouchdb-collections":120,"scope-eval":173,"spark-md5":174,vuvuzela:198}],124:[function(e,t,i){function n(){var e;try{e=i.storage.debug}catch(e){}return e}(i=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n),e},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=n,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){return JSON.stringify(e)},i.enable(n())},{"./debug":125}],125:[function(e,t,s){(s=t.exports=function(e){function t(){}function r(){var o=r,e=+new Date,t=e-(l||e);o.diff=t,o.prev=l,o.curr=e,l=e,null==o.useColors&&(o.useColors=s.useColors()),null==o.color&&o.useColors&&(o.color=s.colors[c++%s.colors.length]);var i=Array.prototype.slice.call(arguments);i[0]=s.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var a=0;i[0]=i[0].replace(/%([a-z%])/g,function(e,t){if("%%"===e)return e;a++;var n=s.formatters[t];if("function"==typeof n){var r=i[a];e=n.call(o,r),i.splice(a,1),a--}return e}),"function"==typeof s.formatArgs&&(i=s.formatArgs.apply(o,i));var n=r.log||s.log||console.log.bind(console);n.apply(o,i)}t.enabled=!1,r.enabled=!0;var n=s.enabled(e)?r:t;return n.namespace=e,n}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){var t,n;for(t=0,n=s.skips.length;t<n;t++)if(s.skips[t].test(e))return!1;for(t=0,n=s.names.length;t<n;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=e("ms"),s.names=[],s.skips=[],s.formatters={};var l,c=0},{ms:127}],126:[function(e,t,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],127:[function(e,t,n){var o=1e3,i=60*o,a=60*i,s=24*a,l=365.25*s;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if(1e4<(e=""+e).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(e):t.long?c(r=e,s,"day")||c(r,a,"hour")||c(r,i,"minute")||c(r,o,"second")||r+" ms":s<=(n=e)?Math.round(n/s)+"d":a<=n?Math.round(n/a)+"h":i<=n?Math.round(n/i)+"m":o<=n?Math.round(n/o)+"s":n+"ms";var n,r}},{}],128:[function(e,t,n){(function(s){"use strict";!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports=function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(o=new Array(a-1),i=0;i<o.length;)o[i++]=arguments[i];return s.nextTick(function(){e.apply(null,o)})}}:t.exports=s.nextTick}).call(this,e("_process"))},{_process:136}],129:[function(e,t,n){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=d;var o=e("process-nextick-args"),i=e("core-util-is");i.inherits=e("inherits");var a=e("./_stream_readable"),s=e("./_stream_writable");i.inherits(d,a);for(var l=r(s.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||o(f,this)}function f(e){e.end()}},{"./_stream_readable":130,"./_stream_writable":132,"core-util-is":58,inherits:126,"process-nextick-args":128}],130:[function(C,S,e){(function(g){"use strict";S.exports=r;var v=C("process-nextick-args"),y=C("isarray"),p=C("buffer").Buffer;r.ReadableState=n;C("events");var o,b=function(e,t){return e.listeners(t).length};!function(){try{o=C("stream")}catch(e){}finally{o||(o=C("events").EventEmitter)}}();p=C("buffer").Buffer;var e=C("core-util-is");e.inherits=C("inherits");var i,a,t=C("util"),_=void 0;function n(e,t){a=a||C("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,t instanceof a&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(i||(i=C("string_decoder/").StringDecoder),this.decoder=new i(e.encoding),this.encoding=e.encoding)}function r(e){if(a=a||C("./_stream_duplex"),!(this instanceof r))return new r(e);this._readableState=new n(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),o.call(this)}function s(e,t,n,r,o){var i,a,s,l=function(e,t){var n=null;p.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(t,n);if(l)e.emit("error",l);else if(null===n)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}(e,t);else if(t.objectMode||n&&0<n.length)if(t.ended&&!o){var c=new Error("stream.push() after EOF");e.emit("error",c)}else if(t.endEmitted&&o){c=new Error("stream.unshift() after end event");e.emit("error",c)}else{var u;!t.decoder||o||r||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),o||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e))),i=e,(a=t).readingMore||(a.readingMore=!0,v(f,i,a))}else o||(t.reading=!1);return!(s=t).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}_=t&&t.debuglog?t.debuglog("stream"):function(){},e.inherits(r,o),r.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=new p(e,t),t=""),s(this,n,e,t,!1)},r.prototype.unshift=function(e){return s(this,this._readableState,e,"",!0)},r.prototype.isPaused=function(){return!1===this._readableState.flowing},r.prototype.setEncoding=function(e){return i||(i=C("string_decoder/").StringDecoder),this._readableState.decoder=new i(e),this._readableState.encoding=e,this};var l=8388608;function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=(l<=(n=e)?n=l:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e);var n}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?v(u,e):u(e))}function u(e){_("emit readable"),e.emit("readable"),w(e)}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function h(e){_("readable nexttick read 0"),e.read(0)}function m(e,t){t.reading||(_("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;if(_("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function k(e,t){var n,r=t.buffer,o=t.length,i=!!t.decoder,a=!!t.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(a)n=r.shift();else if(!e||o<=e)n=i?r.join(""):1===r.length?r[0]:p.concat(r,o),r.length=0;else{if(e<r[0].length)n=(u=r[0]).slice(0,e),r[0]=u.slice(e);else if(e===r[0].length)n=r.shift();else{n=i?"":new p(e);for(var s=0,l=0,c=r.length;l<c&&s<e;l++){var u=r[0],d=Math.min(e-s,u.length);i?n+=u.slice(0,d):u.copy(n,s,0,d),d<u.length?r[0]=u.slice(d):r.shift(),s+=d}}}return n}function x(e){var t=e._readableState;if(0<t.length)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,v(E,t,e))}function E(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}r.prototype.read=function(e){_("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||0<e)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):d(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&x(this),null;var r,o=t.needReadable;return _("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&_("length less than watermark",o=!0),(t.ended||t.reading)&&_("reading or ended",o=!1),o&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),o&&!t.reading&&(e=c(n,t)),null===(r=0<e?k(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&x(this),null!==r&&this.emit("data",r),r},r.prototype._read=function(e){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,_("pipe count=%d opts=%j",r.pipesCount,e);var o=(!e||!1!==e.end)&&t!==g.stdout&&t!==g.stderr?a:u;function i(e){_("onunpipe"),e===n&&u()}function a(){_("onend"),t.end()}r.endEmitted?v(o):n.once("end",o),t.on("unpipe",i);var s,l=(s=n,function(){var e=s._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b(s,"data")&&(e.flowing=!0,w(s))});t.on("drain",l);var c=!1;function u(){_("cleanup"),t.removeListener("close",f),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",p),t.removeListener("unpipe",i),n.removeListener("end",a),n.removeListener("end",u),n.removeListener("data",d),c=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||l()}function d(e){_("ondata"),!1===t.write(e)&&(1!==r.pipesCount||r.pipes[0]!==t||1!==n.listenerCount("data")||c||(_("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++),n.pause())}function p(e){_("onerror",e),m(),t.removeListener("error",p),0===b(t,"error")&&t.emit("error",e)}function f(){t.removeListener("finish",h),m()}function h(){_("onfinish"),t.removeListener("close",f),m()}function m(){_("unpipe"),n.unpipe(t)}return n.on("data",d),t._events&&t._events.error?y(t._events.error)?t._events.error.unshift(p):t._events.error=[p,t._events.error]:t.on("error",p),t.once("close",f),t.once("finish",h),t.emit("pipe",n),r.flowing||(_("pipe resume"),n.resume()),t},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}var i=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},r.prototype.addListener=r.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&d(this):v(h,this))}return n},r.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(_("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,v(m,e,t))),this},r.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var n=this._readableState,r=!1,o=this;for(var e in t.on("end",function(){if(_("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&o.push(e)}o.push(null)}),t.on("data",function(e){(_("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e)||(n.objectMode||e&&e.length)&&(o.push(e)||(r=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(e){t.on(e,o.emit.bind(o,e))}),o._read=function(e){_("wrapped _read",e),r&&(r=!1,t.resume())},o},r._fromList=k}).call(this,C("_process"))},{"./_stream_duplex":129,_process:136,buffer:57,"core-util-is":58,events:70,inherits:126,isarray:91,"process-nextick-args":128,"string_decoder/":176,util:56}],131:[function(e,t,n){"use strict";t.exports=a;var r=e("./_stream_duplex"),o=e("core-util-is");function i(n){this.afterTransform=function(e,t){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,(r.writecb=null)!=n&&e.push(n);o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(n,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}o.inherits=e("inherits"),o.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":129,"core-util-is":58,inherits:126}],132:[function(b,_,e){(function(e){"use strict";_.exports=a;var l=b("process-nextick-args"),s=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?setImmediate:l,d=b("buffer").Buffer;a.WritableState=o;var t=b("core-util-is");t.inherits=b("inherits");var n,r={deprecate:b("util-deprecate")};!function(){try{n=b("stream")}catch(e){}finally{n||(n=b("events").EventEmitter)}}();var i;d=b("buffer").Buffer;function c(){}function p(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(e,t){i=i||b("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1;var o=(this.finished=!1)===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(a=n,a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,t)!function(e,t,n,r,o){--t.pendingcb,n?l(o,r):o(r);e._writableState.errorEmitted=!0,e.emit("error",r)}(e,n,r,t,o);else{var i=m(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||h(e,n),r?s(u,e,n,i,o):u(e,n,i,o)}var a}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new y(this),this.corkedRequestsFree.next=new y(this)}function a(e){if(i=i||b("./_stream_duplex"),!(this instanceof a||this instanceof i))return new a(e);this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),n.call(this)}function f(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function u(e,t,n,r){var o,i;n||(o=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),t.pendingcb--,r(),v(e,t)}function h(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var a=0;n;)n=(o[a]=n).next,a+=1;f(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=i.next,i.next=null}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback;if(f(e,t,!1,t.objectMode?1:s.length,s,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function g(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function v(e,t){var n=m(t);return n&&(0===t.pendingcb?(g(e,t),t.finished=!0,e.emit("finish")):g(e,t)),n}function y(r){var o=this;this.next=null,this.entry=null,this.finish=function(e){var t=o.entry;for(o.entry=null;t;){var n=t.callback;r.pendingcb--,n(e),t=t.next}r.corkedRequestsFree?r.corkedRequestsFree.next=o:r.corkedRequestsFree=o}}t.inherits(a,n),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,n){var r,o,i,a=this._writableState,s=!1;return"function"==typeof t&&(n=t,t=null),d.isBuffer(e)?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=c),a.ended?(r=this,o=n,i=new Error("write after end"),r.emit("error",i),l(o,i)):function(e,t,n,r){var o=!0;if(!d.isBuffer(n)&&"string"!=typeof n&&null!=n&&!t.objectMode){var i=new TypeError("Invalid non-string/buffer chunk");e.emit("error",i),l(r,i),o=!1}return o}(this,a,e,n)&&(a.pendingcb++,s=function(e,t,n,r,o){i=t,a=n,s=r,i.objectMode||!1===i.decodeStrings||"string"!=typeof a||(a=new d(a,s)),n=a,d.isBuffer(n)&&(r="buffer");var i,a,s;var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new p(n,r,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,l,n,r,o);return c}(this,a,e,t,n)),s},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||h(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},a.prototype._write=function(e,t,n){n(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,v(e,t),n&&(t.finished?l(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)}}).call(this,b("_process"))},{"./_stream_duplex":129,_process:136,buffer:57,"core-util-is":58,events:70,inherits:126,"process-nextick-args":128,"util-deprecate":194}],133:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":131}],134:[function(r,l,e){(function(n){var t=r("readable-stream/transform"),o=r("util").inherits,i=r("xtend");function a(e){t.call(this,e),this._destroyed=!1}function s(e,t,n){n(null,e)}function e(r){return function(e,t,n){return"function"==typeof e&&(n=t,t=e,e={}),"function"!=typeof t&&(t=s),"function"!=typeof n&&(n=null),r(e,t,n)}}o(a,t),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},l.exports=e(function(e,t,n){var r=new a(e);return r._transform=t,n&&(r._flush=n),r}),l.exports.ctor=e(function(t,e,n){function r(e){if(!(this instanceof r))return new r(e);this.options=i(t,e),a.call(this,this.options)}return o(r,a),r.prototype._transform=e,n&&(r.prototype._flush=n),r}),l.exports.obj=e(function(e,t,n){var r=new a(i({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r})}).call(this,r("_process"))},{_process:136,"readable-stream/transform":133,util:197,xtend:200}],135:[function(e,t,n){(function(s){"use strict";!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(o=new Array(a-1),i=0;i<o.length;)o[i++]=arguments[i];return s.nextTick(function(){e.apply(null,o)})}}}:t.exports=s}).call(this,e("_process"))},{_process:136}],136:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,u=[],d=!1,p=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!d){var e=l(f);d=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||d||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],137:[function(e,t,n){(function(l){"use strict";if("production"!==l.env.NODE_ENV)var c=e("fbjs/lib/invariant"),u=e("fbjs/lib/warning"),d=e("./lib/ReactPropTypesSecret"),p={};t.exports=function(e,t,n,r,o){if("production"!==l.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var a;try{c("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",r||"React class",n,i,typeof e[i]),a=e[i](t,i,r,n,null,d)}catch(e){a=e}if(u(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,i,typeof a),a instanceof Error&&!(a.message in p)){p[a.message]=!0;var s=o?o():"";u(!1,"Failed %s type: %s%s",n,a.message,null!=s?s:"")}}}}).call(this,e("_process"))},{"./lib/ReactPropTypesSecret":141,_process:136,"fbjs/lib/invariant":81,"fbjs/lib/warning":85}],138:[function(e,t,n){"use strict";var r=e("fbjs/lib/emptyFunction"),a=e("fbjs/lib/invariant"),s=e("./lib/ReactPropTypesSecret");t.exports=function(){function e(e,t,n,r,o,i){i!==s&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},{"./lib/ReactPropTypesSecret":141,"fbjs/lib/emptyFunction":76,"fbjs/lib/invariant":81}],139:[function(e,t,n){(function(m){"use strict";var o=e("fbjs/lib/emptyFunction"),g=e("fbjs/lib/invariant"),v=e("fbjs/lib/warning"),y=e("object-assign"),b=e("./lib/ReactPropTypesSecret"),_=e("./checkPropTypes");t.exports=function(s,d){var i="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";var p="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(o.thatReturnsNull),arrayOf:function(c){return n(function(e,t,n,r,o){if("function"!=typeof c)return new f("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i)){var a=h(i);return new f("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected an array.")}for(var s=0;s<i.length;s++){var l=c(i,s,n,r,o+"["+s+"]",b);if(l instanceof Error)return l}return null})},element:n(function(e,t,n,r,o){var i=e[t];if(!s(i)){var a=h(i);return new f("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}),instanceOf:function(s){return n(function(e,t,n,r,o){if(!(e[t]instanceof s)){var i=s.name||p,a=function(e){if(!e.constructor||!e.constructor.name)return p;return e.constructor.name}(e[t]);return new f("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected instance of `"+i+"`.")}return null})},node:n(function(e,t,n,r,o){return l(e[t])?null:new f("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(c){return n(function(e,t,n,r,o){if("function"!=typeof c)return new f("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i=e[t],a=h(i);if("object"!==a)return new f("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected an object.");for(var s in i)if(i.hasOwnProperty(s)){var l=c(i,s,n,r,o+"."+s,b);if(l instanceof Error)return l}return null})},oneOf:function(l){if(!Array.isArray(l))return"production"!==m.env.NODE_ENV&&v(!1,"Invalid argument supplied to oneOf, expected an instance of array."),o.thatReturnsNull;return n(function(e,t,n,r,o){for(var i=e[t],a=0;a<l.length;a++)if(c(i,l[a]))return null;var s=JSON.stringify(l);return new f("Invalid "+r+" `"+o+"` of value `"+i+"` supplied to `"+n+"`, expected one of "+s+".")})},oneOfType:function(s){if(!Array.isArray(s))return"production"!==m.env.NODE_ENV&&v(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),o.thatReturnsNull;for(var e=0;e<s.length;e++){var t=s[e];if("function"!=typeof t)return v(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",r(t),e),o.thatReturnsNull}return n(function(e,t,n,r,o){for(var i=0;i<s.length;i++){var a=s[i];if(null==a(e,t,n,r,o,b))return null}return new f("Invalid "+r+" `"+o+"` supplied to `"+n+"`.")})},shape:function(u){return n(function(e,t,n,r,o){var i=e[t],a=h(i);if("object"!==a)return new f("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");for(var s in u){var l=u[s];if(l){var c=l(i,s,n,r,o+"."+s,b);if(c)return c}}return null})},exact:function(d){return n(function(e,t,n,r,o){var i=e[t],a=h(i);if("object"!==a)return new f("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");var s=y({},e[t],d);for(var l in s){var c=d[l];if(!c)return new f("Invalid "+r+" `"+o+"` key `"+l+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(d),null,"  "));var u=c(i,l,n,r,o+"."+l,b);if(u)return u}return null})}};function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){this.message=e,this.stack=""}function n(l){if("production"!==m.env.NODE_ENV)var c={},u=0;function e(e,t,n,r,o,i,a){if(r=r||p,i=i||n,a!==b)if(d)g(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==m.env.NODE_ENV&&"undefined"!=typeof console){var s=r+":"+n;!c[s]&&u<3&&(v(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",i,r),c[s]=!0,u++)}return null==t[n]?e?null===t[n]?new f("The "+o+" `"+i+"` is marked as required in `"+r+"`, but its value is `null`."):new f("The "+o+" `"+i+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:l(t,n,r,o,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(s){return n(function(e,t,n,r,o,i){var a=e[t];return h(a)!==s?new f("Invalid "+r+" `"+o+"` of type `"+u(a)+"` supplied to `"+n+"`, expected `"+s+"`."):null})}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null===e||s(e))return!0;var t=function(e){var t=e&&(i&&e[i]||e[a]);if("function"==typeof t)return t}(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!l(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!l(o[1]))return!1}return!0;default:return!1}}function h(e){var t,n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(t=e,"symbol"===n||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol?"symbol":n)}function u(e){if(null==e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function r(e){var t=u(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,e.checkPropTypes=_,e.PropTypes=e}}).call(this,e("_process"))},{"./checkPropTypes":137,"./lib/ReactPropTypesSecret":141,_process:136,"fbjs/lib/emptyFunction":76,"fbjs/lib/invariant":81,"fbjs/lib/warning":85,"object-assign":117}],140:[function(n,r,e){(function(e){if("production"!==e.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;r.exports=n("./factoryWithTypeCheckers")(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},!0)}else r.exports=n("./factoryWithThrowingShims")()}).call(this,n("_process"))},{"./factoryWithThrowingShims":138,"./factoryWithTypeCheckers":139,_process:136}],141:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],142:[function(e,t,n){var r,o;r=this,o=function(){var u="function"==typeof Object.defineProperty?function(e,t,n){return Object.defineProperty(e,t,n),e}:function(e,t,n){return e[t]=n.value,e};return function(e,t,n,r){var o,i,a,s,l,c;if(i=n,l=!(s="object"==typeof(a=r))&&"string"==typeof a,r={enumerable:(c=function(e){return s?!!a[e]:!!l&&-1<a.indexOf(e[0])})("enumerable"),configurable:c("configurable"),writable:c("writable"),value:i},"object"==typeof t){for(o in t)Object.hasOwnProperty.call(t,o)&&(r.value=t[o],u(e,o,r));return e}return u(e,t,r)}},void 0!==t&&t.exports?t.exports=o():r.prr=o()},{}],143:[function(Nu,Au,e){(function(e){"use strict";"production"!==e.env.NODE_ENV&&function(){var a=Nu("react"),st=Nu("fbjs/lib/invariant"),lt=Nu("fbjs/lib/warning"),i=Nu("fbjs/lib/ExecutionEnvironment"),ct=Nu("object-assign"),l=Nu("fbjs/lib/emptyFunction"),ut=Nu("prop-types/checkPropTypes"),c=Nu("fbjs/lib/getActiveElement"),u=Nu("fbjs/lib/shallowEqual"),d=Nu("fbjs/lib/containsNode"),dt=Nu("fbjs/lib/emptyObject"),s=Nu("fbjs/lib/hyphenateStyleName"),h=Nu("fbjs/lib/camelizeStyleName");a||st(!1,"ReactDOM was loaded before React. Make sure you load the React package before loading ReactDOM.");var e=function(e,t,n,r,o,i,a,s,l){this._hasCaughtError=!1,this._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this._caughtError=e,this._hasCaughtError=!0}};if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var v=document.createElement("react");e=function(e,t,n,r,o,i,a,s,l){"undefined"==typeof document&&st(!1,"The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var c=document.createEvent("Event"),u=!0,d=Array.prototype.slice.call(arguments,3);var p=void 0,f=!1,h=!1;function m(e){p=e.error,f=!0,null===p&&0===e.colno&&0===e.lineno&&(h=!0)}var g="react-"+(e||"invokeguardedcallback");window.addEventListener("error",m),v.addEventListener(g,function e(){v.removeEventListener(g,e,!1),t.apply(n,d),u=!1},!1),c.initEvent(g,!1,!1),v.dispatchEvent(c),u?(f?h&&(p=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://fb.me/react-crossorigin-error for more information.")):p=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this._hasCaughtError=!0,this._caughtError=p):(this._hasCaughtError=!1,this._caughtError=null),window.removeEventListener("error",m)}}var p=e,f={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,o,i,a,s,l){p.apply(f,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,i,a,s,l){if(f.invokeGuardedCallback.apply(this,arguments),f.hasCaughtError()){var c=f.clearCaughtError();f._hasRethrowError||(f._hasRethrowError=!0,f._rethrowError=c)}},rethrowCaughtError:function(){return t.apply(f,arguments)},hasCaughtError:function(){return f._hasCaughtError},clearCaughtError:function(){if(f._hasCaughtError){var e=f._caughtError;return f._caughtError=null,f._hasCaughtError=!1,e}st(!1,"clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}},t=function(){if(f._hasRethrowError){var e=f._rethrowError;throw f._rethrowError=null,f._hasRethrowError=!1,e}},m=null,g={};function o(){if(m)for(var e in g){var t=g[e],n=m.indexOf(e);if(-1<n||st(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!_[n]){t.extractEvents||st(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e);var r=(_[n]=t).eventTypes;for(var o in r)y(r[o],t,o)||st(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",o,e)}}}function y(e,t,n){w.hasOwnProperty(n)&&st(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n);var r=(w[n]=e).phasedRegistrationNames;if(r){for(var o in r){if(r.hasOwnProperty(o))b(r[o],t,n)}return!0}return!!e.registrationName&&(b(e.registrationName,t,n),!0)}function b(e,t,n){x[e]&&st(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),x[e]=t,k[e]=t.eventTypes[n].dependencies;var r=e.toLowerCase();"onDoubleClick"===(E[r]=e)&&(E.ondblclick=e)}var _=[],w={},x={},k={},E={};function n(e){m&&st(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),m=Array.prototype.slice.call(e),o()}function r(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];g.hasOwnProperty(n)&&g[n]===r||(g[n]&&st(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),g[n]=r,t=!0)}t&&o()}var C=Object.freeze({plugins:_,eventNameDispatchConfigs:w,registrationNameModules:x,registrationNameDependencies:k,possibleRegistrationNames:E,injectEventPluginOrder:n,injectEventPluginsByName:r}),S=null,T=null,N=null,A=function(e){S=e.getFiberCurrentPropsFromNode,T=e.getInstanceFromNode,N=e.getNodeFromInstance,lt(N&&T,"EventPluginUtils.injection.injectComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode.")},P=void 0;function O(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=N(r),f.invokeGuardedCallbackAndCatchFirstError(o,n,void 0,e),e.currentTarget=null}function I(e,t){return null==t&&st(!1,"accumulateInto(...): Accumulated items must not be null or undefined."),null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function R(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}P=function(e){var t=e._dispatchListeners,n=e._dispatchInstances,r=Array.isArray(t),o=r?t.length:t?1:0,i=Array.isArray(n),a=i?n.length:n?1:0;lt(i===r&&a===o,"EventPluginUtils: Invalid `event`.")};var D=null,j=function(e,t){e&&(!function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(P(e),Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)O(e,0,n[o],r[o]);else n&&O(e,0,n,r);e._dispatchListeners=null,e._dispatchInstances=null}(e),e.isPersistent()||e.constructor.release(e))},F=function(e){return j(e)},M=function(e){return j(e)};var L={injectEventPluginOrder:n,injectEventPluginsByName:r};function U(e,t){var n,r=e.stateNode;if(!r)return null;var o=S(r);return o?(n=o[t],function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||"button"!==(r=t)&&"input"!==r&&"select"!==r&&"textarea"!==r);default:return!1}var r}(t,e.type,o)?null:(n&&"function"!=typeof n&&st(!1,"Expected `%s` listener to be a function, instead got a value of `%s` type.",t,typeof n),n)):null}function B(e,t){null!==e&&(D=I(D,e));var n=D;D=null,n&&(R(n,t?F:M),D&&st(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."),f.rethrowCaughtError())}function H(e,t,n,r){B(function(e,t,n,r){for(var o=null,i=0;i<_.length;i++){var a=_[i];if(a){var s=a.extractEvents(e,t,n,r);s&&(o=I(o,s))}}return o}(e,t,n,r),!1)}var q=Object.freeze({injection:L,getListener:U,runEventsInBatch:B,runExtractedEventsInBatch:H}),z=0,W=1,pt=2,ft=3,ht=4,mt=5,V=6,K=7,$=8,X=9,G=10,J=11,Q=12,gt=13,Y=14,Z=Math.random().toString(36).slice(2),ee="__reactInternalInstance$"+Z,te="__reactEventHandlers$"+Z;function ne(e,t){t[ee]=e}function re(e){if(e[ee])return e[ee];for(;!e[ee];){if(!e.parentNode)return null;e=e.parentNode}var t=e[ee];return t.tag===mt||t.tag===V?t:null}function oe(e){var t=e[ee];return t&&(t.tag===mt||t.tag===V)?t:null}function ie(e){if(e.tag===mt||e.tag===V)return e.stateNode;st(!1,"getNodeFromInstance: Invalid argument.")}function ae(e){return e[te]||null}function se(e,t){e[te]=t}var le=Object.freeze({precacheFiberNode:ne,getClosestInstanceFromNode:re,getInstanceFromNode:oe,getNodeFromInstance:ie,getFiberCurrentPropsFromNode:ae,updateFiberProps:se});function ce(e){for(;(e=e.return)&&e.tag!==mt;);return e||null}function ue(e,t,n){for(var r=[];e;)r.push(e),e=ce(e);var o=void 0;for(o=r.length;0<o--;)t(r[o],"captured",n);for(o=0;o<r.length;o++)t(r[o],"bubbled",n)}function de(e,t,n,r,o){for(var i=e&&t?function(e,t){for(var n=0,r=e;r;r=ce(r))n++;for(var o=0,i=t;i;i=ce(i))o++;for(;0<n-o;)e=ce(e),n--;for(;0<o-n;)t=ce(t),o--;for(var a=n;a--;){if(e===t||e===t.alternate)return e;e=ce(e),t=ce(t)}return null}(e,t):null,a=[];e&&e!==i;){var s=e.alternate;if(null!==s&&s===i)break;a.push(e),e=ce(e)}for(var l=[];t&&t!==i;){var c=t.alternate;if(null!==c&&c===i)break;l.push(t),t=ce(t)}for(var u=0;u<a.length;u++)n(a[u],"bubbled",r);for(var d=l.length;0<d--;)n(l[d],"captured",o)}function pe(e,t,n){lt(e,"Dispatching inst must not be null");var r,o=(r=t,U(e,n.dispatchConfig.phasedRegistrationNames[r]));o&&(n._dispatchListeners=I(n._dispatchListeners,o),n._dispatchInstances=I(n._dispatchInstances,e))}function fe(e){e&&e.dispatchConfig.phasedRegistrationNames&&ue(e._targetInst,pe,e)}function he(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;ue(t?ce(t):null,pe,e)}}function me(e,t,n){if(e&&n&&n.dispatchConfig.registrationName){var r=U(e,n.dispatchConfig.registrationName);r&&(n._dispatchListeners=I(n._dispatchListeners,r),n._dispatchInstances=I(n._dispatchInstances,e))}}function ge(e){e&&e.dispatchConfig.registrationName&&me(e._targetInst,0,e)}function ve(e){R(e,fe)}function ye(e,t,n,r){de(n,r,me,e,t)}var be=Object.freeze({accumulateTwoPhaseDispatches:ve,accumulateTwoPhaseDispatchesSkipTarget:function(e){R(e,he)},accumulateEnterLeaveDispatches:ye,accumulateDirectDispatches:function(e){R(e,ge)}}),_e=null;function we(){return!_e&&i.canUseDOM&&(_e="textContent"in document.documentElement?"textContent":"innerText"),_e}var ke={_root:null,_startText:null,_fallbackText:null};function xe(){if(ke._fallbackText)return ke._fallbackText;var e=void 0,t=ke._startText,n=t.length,r=void 0,o=Ee(),i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);var s=1<r?1-r:void 0;return ke._fallbackText=o.slice(e,s),ke._fallbackText}function Ee(){return"value"in ke._root?ke._root.value:ke._root[we()]}var Ce=!1,Se=10,Te=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"],Ne={type:null,target:null,currentTarget:l.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function Ae(e,t,n,r){delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation,this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var i in o)if(o.hasOwnProperty(i)){delete this[i];var a=o[i];a?this[i]=a(n):"target"===i?this.target=r:this[i]=n[i]}var s=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=s?l.thatReturnsTrue:l.thatReturnsFalse,this.isPropagationStopped=l.thatReturnsFalse,this}function Pe(n,e){var t="function"==typeof e;return{configurable:!0,set:function(e){return r(t?"setting the method":"setting the property","This is effectively a no-op"),e},get:function(){return r(t?"accessing the method":"accessing the property",t?"This is a no-op function":"This is set to null"),e}};function r(e,t){lt(!1,"This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",e,n,t)}}function Oe(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function Ie(e){e instanceof this||st(!1,"Trying to release an event instance  into a pool of a different type."),e.destructor(),this.eventPool.length<Se&&this.eventPool.push(e)}function Re(e){e.eventPool=[],e.getPooled=Oe,e.release=Ie}ct(Ae.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=l.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=l.thatReturnsTrue)},persist:function(){this.isPersistent=l.thatReturnsTrue},isPersistent:l.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)Object.defineProperty(this,t,Pe(t,e[t]));for(var n=0;n<Te.length;n++)this[Te[n]]=null;Object.defineProperty(this,"nativeEvent",Pe("nativeEvent",null)),Object.defineProperty(this,"preventDefault",Pe("preventDefault",l)),Object.defineProperty(this,"stopPropagation",Pe("stopPropagation",l))}}),Ae.Interface=Ne,Ae.extend=function(e){var t=this,n=function(){};n.prototype=t.prototype;var r=new n;function o(){return t.apply(this,arguments)}return ct(r,o.prototype),((o.prototype=r).constructor=o).Interface=ct({},t.Interface,e),o.extend=t.extend,Re(o),o},"function"==typeof Proxy&&!Object.isSealed(new Proxy({},{}))&&(Ae=new Proxy(Ae,{construct:function(e,t){return this.apply(e,Object.create(e.prototype),t)},apply:function(e,t,n){return new Proxy(e.apply(t,n),{set:function(e,t,n){return"isPersistent"===t||e.constructor.Interface.hasOwnProperty(t)||-1!==Te.indexOf(t)||(lt(Ce||e.isPersistent(),"This synthetic event is reused for performance reasons. If you're seeing this, you're adding a new property in the synthetic event object. The property is never released. See https://fb.me/react-event-pooling for more information."),Ce=!0),e[t]=n,!0}})}})),Re(Ae);var De=Ae,je=De.extend({data:null}),Fe=De.extend({data:null}),Me=[9,13,27,32],Le=229,Ue=i.canUseDOM&&"CompositionEvent"in window,Be=null;i.canUseDOM&&"documentMode"in document&&(Be=document.documentMode);var He=i.canUseDOM&&"TextEvent"in window&&!Be,qe=i.canUseDOM&&(!Ue||Be&&8<Be&&Be<=11),ze=32,We=String.fromCharCode(ze),Ve={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},Ke=!1;function $e(e,t){switch(e){case"topKeyUp":return-1!==Me.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==Le;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Xe(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}var Ge=!1;function Je(e,t,n,r){var o,i,a=void 0,s=void 0;if(Ue?a=function(e){switch(e){case"topCompositionStart":return Ve.compositionStart;case"topCompositionEnd":return Ve.compositionEnd;case"topCompositionUpdate":return Ve.compositionUpdate}}(e):Ge?$e(e,n)&&(a=Ve.compositionEnd):(o=n,"topKeyDown"===e&&o.keyCode===Le&&(a=Ve.compositionStart)),!a)return null;qe&&(Ge||a!==Ve.compositionStart?a===Ve.compositionEnd&&Ge&&(s=xe()):(i=r,ke._root=i,ke._startText=Ee(),Ge=!0));var l=je.getPooled(a,t,n,r);if(s)l.data=s;else{var c=Xe(n);null!==c&&(l.data=c)}return ve(l),l}function Qe(e,t){if(Ge){if("topCompositionEnd"===e||!Ue&&$e(e,t)){var n=xe();return ke._root=null,ke._startText=null,ke._fallbackText=null,Ge=!1,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":if(!((r=t).ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return qe?null:t.data;default:return null}var r}function Ye(e,t,n,r){var o=void 0;if(!(o=He?function(e,t){switch(e){case"topCompositionEnd":return Xe(t);case"topKeyPress":return t.which!==ze?null:(Ke=!0,We);case"topTextInput":var n=t.data;return n===We&&Ke?null:n;default:return null}}(e,n):Qe(e,n)))return null;var i=Fe.getPooled(Ve.beforeInput,t,n,r);return i.data=o,ve(i),i}var Ze={eventTypes:Ve,extractEvents:function(e,t,n,r){var o=Je(e,t,n,r),i=Ye(e,t,n,r);return null===o?i:null===i?o:[o,i]}},et=null,tt=null,nt=null;function rt(e){var t=T(e);if(t){et&&"function"==typeof et.restoreControlledState||st(!1,"Fiber needs to be injected to handle a fiber target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var n=S(t.stateNode);et.restoreControlledState(t.stateNode,t.type,n)}}var ot={injectFiberControlledHostComponent:function(e){et=e}};function it(e){tt?nt?nt.push(e):nt=[e]:tt=e}function at(){return null!==tt||null!==nt}function vt(){if(tt){var e=tt,t=nt;if(nt=tt=null,rt(e),t)for(var n=0;n<t.length;n++)rt(t[n])}}var yt=Object.freeze({injection:ot,enqueueStateRestore:it,needsStateRestore:at,restoreStateIfNeeded:vt}),bt=function(e,t){return e(t)},_t=function(e,t,n){return e(t,n)},wt=function(){},kt=!1;function xt(e,t){if(kt)return e(t);kt=!0;try{return bt(e,t)}finally{kt=!1,at()&&(wt(),vt())}}var Et=function(e){bt=e.batchedUpdates,_t=e.interactiveUpdates,wt=e.flushInteractiveUpdates},Ct={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function St(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ct[e.type]:"textarea"===t}var Tt=1,Nt=3,At=8,Pt=9,Ot=11;function It(e){var t=e.target||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===Nt?t.parentNode:t}function Rt(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var o=document.createElement("div");o.setAttribute(n,"return;"),r="function"==typeof o[n]}return r}function Dt(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function jt(e){return e._valueTracker}function Ft(e){jt(e)||(e._valueTracker=function(e){var t=Dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}(e))}function Mt(e){if(!e)return!1;var t=jt(e);if(!t)return!0;var n,r,o=t.getValue(),i=(r="",(n=e)?r=Dt(n)?n.checked?"true":"false":n.value:r);return i!==o&&(t.setValue(i),!0)}var Lt=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ut=Lt.ReactCurrentOwner,Bt=Lt.ReactDebugCurrentFrame,Ht=function(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")},qt="function"==typeof Symbol&&Symbol.for,zt=qt?Symbol.for("react.element"):60103,Wt=qt?Symbol.for("react.call"):60104,Vt=qt?Symbol.for("react.return"):60105,Kt=qt?Symbol.for("react.portal"):60106,$t=qt?Symbol.for("react.fragment"):60107,Xt=qt?Symbol.for("react.strict_mode"):60108,Gt=qt?Symbol.for("react.provider"):60109,Jt=qt?Symbol.for("react.context"):60110,Qt=qt?Symbol.for("react.async_mode"):60111,Yt=qt?Symbol.for("react.forward_ref"):60112,Zt="function"==typeof Symbol&&Symbol.iterator,en="@@iterator";function tn(e){if(null==e)return null;var t=Zt&&e[Zt]||e[en];return"function"==typeof t?t:null}function nn(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case $t:return"ReactFragment";case Kt:return"ReactPortal";case Wt:return"ReactCall";case Vt:return"ReactReturn"}return null}function rn(e){switch(e.tag){case z:case W:case pt:case mt:var t=e._debugOwner,n=e._debugSource,r=nn(e),o=null;return t&&(o=nn(t)),Ht(r,n,o);default:return""}}function on(e){for(var t="",n=e;t+=rn(n),n=n.return;);return t}function an(){var e=sn.current;return null===e?null:on(e)}var sn={current:null,phase:null,resetCurrentFiber:function(){Bt.getCurrentStack=null,sn.current=null,sn.phase=null},setCurrentFiber:function(e){Bt.getCurrentStack=an,sn.current=e,sn.phase=null},setCurrentPhase:function(e){sn.phase=e},getCurrentFiberOwnerName:function(){var e=sn.current;if(null===e)return null;var t=e._debugOwner;return null!=t?nn(t):null},getCurrentFiberStackAddendum:an},ln=0,cn=2,un=3,dn=4,pn=5,fn=6,hn=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",mn=hn+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",gn="data-reactroot",vn=new RegExp("^["+hn+"]["+mn+"]*$"),yn={},bn={};function _n(e){return!!bn.hasOwnProperty(e)||!yn.hasOwnProperty(e)&&(vn.test(e)?bn[e]=!0:(yn[e]=!0,lt(!1,"Invalid attribute name: `%s`",e),!1))}function wn(e,t,n){return null!==t?t.type===ln:!n&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))}function kn(e,t,n,r){if(null!==n&&n.type===ln)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var o=e.toLowerCase().slice(0,5);return"data-"!==o&&"aria-"!==o;default:return!1}}function xn(e,t,n,r){if(null==t)return!0;if(kn(e,t,n,r))return!0;if(null!==n)switch(n.type){case un:return!t;case dn:return!1===t;case pn:return isNaN(t);case fn:return isNaN(t)||t<1}return!1}function En(e){return Sn.hasOwnProperty(e)?Sn[e]:null}function Cn(e,t,n,r,o){this.acceptsBooleans=t===cn||t===un||t===dn,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var Sn={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(function(e){Sn[e]=new Cn(e,ln,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0],n=e[1];Sn[t]=new Cn(t,1,!1,n,null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Sn[e]=new Cn(e,cn,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){Sn[e]=new Cn(e,cn,!1,e,null)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){Sn[e]=new Cn(e,un,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Sn[e]=new Cn(e,un,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){Sn[e]=new Cn(e,dn,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){Sn[e]=new Cn(e,fn,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){Sn[e]=new Cn(e,pn,!1,e.toLowerCase(),null)});var Tn=/[\-\:]([a-z])/g,Nn=function(e){return e[1].toUpperCase()};function An(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];var o=r.attributeName,i=null;if(r.type===dn){if(e.hasAttribute(o)){var a=e.getAttribute(o);return""===a||(xn(t,n,r,!1)?a:a===""+n?n:a)}}else if(e.hasAttribute(o)){if(xn(t,n,r,!1))return e.getAttribute(o);if(r.type===un)return n;i=e.getAttribute(o)}return xn(t,n,r,!1)?null===i?n:i:i===""+n?n:i}function Pn(e,t,n){if(_n(t)){if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return r===""+n?n:r}}function On(e,t,n,r){var o=En(t);if(!wn(t,o,r))if(xn(t,n,o,r)&&(n=null),r||null===o){if(_n(t)){var i=t;null===n?e.removeAttribute(i):e.setAttribute(i,""+n)}}else if(o.mustUseProperty){var a=o.propertyName;if(null===n){var s=o.type;e[a]=s!==un&&""}else e[a]=n}else{var l=o.attributeName,c=o.attributeNamespace;if(null===n)e.removeAttribute(l);else{var u=o.type,d=void 0;d=u===un||u===dn&&!0===n?"":""+n,c?e.setAttributeNS(c,l,d):e.setAttribute(l,d)}}}["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var t=e.replace(Tn,Nn);Sn[t]=new Cn(t,1,!1,e,null)}),["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var t=e.replace(Tn,Nn);Sn[t]=new Cn(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tn,Nn);Sn[t]=new Cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),Sn.tabIndex=new Cn("tabIndex",1,!1,"tabindex",null);var In={checkPropTypes:null},Rn={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},Dn={value:function(e,t,n){return!e[t]||Rn[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}};In.checkPropTypes=function(e,t,n){ut(Dn,t,"prop",e,n)};var jn=sn.getCurrentFiberOwnerName,Fn=sn.getCurrentFiberStackAddendum,Mn=!1,Ln=!1,Un=!1,Bn=!1;function Hn(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function qn(e,t){var n=e,r=t.checked;return ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:n._wrapperState.initialChecked})}function zn(e,t){In.checkPropTypes("input",t,Fn),void 0===t.checked||void 0===t.defaultChecked||Ln||(lt(!1,"%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",jn()||"A component",t.type),Ln=!0),void 0===t.value||void 0===t.defaultValue||Mn||(lt(!1,"%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",jn()||"A component",t.type),Mn=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:Gn(null!=t.value?t.value:r),controlled:Hn(t)}}function Wn(e,t){var n=e,r=t.checked;null!=r&&On(n,"checked",r,!1)}function Vn(e,t){var n=e,r=Hn(t);n._wrapperState.controlled||!r||Bn||(lt(!1,"A component is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components%s",t.type,Fn()),Bn=!0),!n._wrapperState.controlled||r||Un||(lt(!1,"A component is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components%s",t.type,Fn()),Un=!0),Wn(e,t);var o=Gn(t.value);null!=o&&("number"===t.type?(0===o&&""===n.value||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o)),t.hasOwnProperty("value")?Xn(n,t.type,o):t.hasOwnProperty("defaultValue")&&Xn(n,t.type,Gn(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function Kn(e,t){var n=e;(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===n.value&&(n.value=""+n._wrapperState.initialValue),n.defaultValue=""+n._wrapperState.initialValue);var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}function $n(e,t){var n=e;Vn(n,t),function(e,t){var n=t.name;if("radio"===t.type&&null!=n){for(var r=e;r.parentNode;)r=r.parentNode;for(var o=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),i=0;i<o.length;i++){var a=o[i];if(a!==e&&a.form===e.form){var s=ae(a);s||st(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."),Mt(a),Vn(a,s)}}}}(n,t)}function Xn(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Gn(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}var Jn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}};function Qn(e,t,n){var r=De.getPooled(Jn.change,e,t,n);return r.type="change",it(n),ve(r),r}var Yn=null,Zn=null;function er(e){B(e,!1)}function tr(e){if(Mt(ie(e)))return e}function nr(e,t){if("topChange"===e)return t}var rr=!1;function or(){Yn&&(Yn.detachEvent("onpropertychange",ir),Zn=Yn=null)}function ir(e){var t;"value"===e.propertyName&&(tr(Zn)&&xt(er,Qn(Zn,t=e,It(t))))}function ar(e,t,n){"topFocus"===e?(or(),Zn=n,(Yn=t).attachEvent("onpropertychange",ir)):"topBlur"===e&&or()}function sr(e,t){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return tr(Zn)}function lr(e,t){if("topClick"===e)return tr(t)}function cr(e,t){if("topInput"===e||"topChange"===e)return tr(t)}i.canUseDOM&&(rr=Rt("input")&&(!document.documentMode||9<document.documentMode));var ur={eventTypes:Jn,_isInputEventSupported:rr,extractEvents:function(e,t,n,r){var o,i,a,s,l=t?ie(t):window,c=void 0,u=void 0;if("select"===(s=(a=l).nodeName&&a.nodeName.toLowerCase())||"input"===s&&"file"===a.type?c=nr:St(l)?rr?c=cr:(c=sr,u=ar):!(i=(o=l).nodeName)||"input"!==i.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type||(c=lr),c){var d=c(e,t);if(d)return Qn(d,n,r)}u&&u(e,l,t),"topBlur"===e&&function(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;n&&n.controlled&&"number"===t.type&&Xn(t,"number",t.value)}}(t,l)}},dr=De.extend({view:null,detail:null}),pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fr(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=pr[e];return!!n&&!!t[n]}function hr(e){return fr}var mr=dr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:hr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),gr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},vr={eventTypes:gr,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=void 0;if(r.window===r)o=r;else{var i=r.ownerDocument;o=i?i.defaultView||i.parentWindow:window}var a=void 0,s=void 0;if("topMouseOut"===e){a=t;var l=n.relatedTarget||n.toElement;s=l?re(l):null}else a=null,s=t;if(a===s)return null;var c=null==a?o:ie(a),u=null==s?o:ie(s),d=mr.getPooled(gr.mouseLeave,a,n,r);d.type="mouseleave",d.target=c,d.relatedTarget=u;var p=mr.getPooled(gr.mouseEnter,s,n,r);return p.type="mouseenter",p.target=u,p.relatedTarget=c,ye(d,p,a,s),[d,p]}};function yr(e){return e._reactInternalFiber}var br=0,_r=1,wr=2,kr=4,xr=6,Er=8,Cr=16,Sr=32,Tr=64,Nr=128,Ar=256,Pr=2048,Or=2559,Ir=512,Rr=1024,Dr=1,jr=2,Fr=3;function Mr(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&wr)!==br)return Dr;for(;t.return;)if(((t=t.return).effectTag&wr)!==br)return Dr}return t.tag===ft?jr:Fr}function Lr(e){return Mr(e)===jr}function Ur(e){var t=Ut.current;if(null!==t&&t.tag===pt){var n=t,r=n.stateNode;lt(r._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",nn(n)||"A component"),r._warnedAboutRefsInRender=!0}var o=yr(e);return!!o&&Mr(o)===jr}function Br(e){Mr(e)!==jr&&st(!1,"Unable to find node on an unmounted component.")}function Hr(e){var t=e.alternate;if(!t){var n=Mr(e);return n===Fr&&st(!1,"Unable to find node on an unmounted component."),n===Dr?null:e}for(var r=e,o=t;;){var i=r.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var s=i.child;s;){if(s===r)return Br(i),e;if(s===o)return Br(i),t;s=s.sibling}st(!1,"Unable to find node on an unmounted component.")}if(r.return!==o.return)r=i,o=a;else{for(var l=!1,c=i.child;c;){if(c===r){l=!0,r=i,o=a;break}if(c===o){l=!0,o=i,r=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===r){l=!0,r=a,o=i;break}if(c===o){l=!0,o=a,r=i;break}c=c.sibling}l||st(!1,"Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}r.alternate!==o&&st(!1,"Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}return r.tag!==ft&&st(!1,"Unable to find node on an unmounted component."),r.stateNode.current===r?e:t}var qr=De.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zr=De.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wr=dr.extend({relatedTarget:null});function Vr(e){var t=void 0,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),32<=t||13===t?t:0}var Kr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};var Xr=dr.extend({key:function(e){if(e.key){var t=Kr[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=Vr(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?$r[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:hr,charCode:function(e){return"keypress"===e.type?Vr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Gr=mr.extend({dataTransfer:null}),Jr=dr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:hr}),Qr=De.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Yr=mr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Zr={},eo={};function to(e,t){var n=e[0].toUpperCase()+e.slice(1),r="on"+n,o="top"+n,i={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[o],isInteractive:t};Zr[e]=i,eo[o]=i}["blur","cancel","click","close","contextMenu","copy","cut","doubleClick","dragEnd","dragStart","drop","focus","input","invalid","keyDown","keyPress","keyUp","mouseDown","mouseUp","paste","pause","play","rateChange","reset","seeked","submit","touchCancel","touchEnd","touchStart","volumeChange"].forEach(function(e){to(e,!0)}),["abort","animationEnd","animationIteration","animationStart","canPlay","canPlayThrough","drag","dragEnter","dragExit","dragLeave","dragOver","durationChange","emptied","encrypted","ended","error","load","loadedData","loadedMetadata","loadStart","mouseMove","mouseOut","mouseOver","playing","progress","scroll","seeking","stalled","suspend","timeUpdate","toggle","touchMove","transitionEnd","waiting","wheel"].forEach(function(e){to(e,!1)});var no=["topAbort","topCancel","topCanPlay","topCanPlayThrough","topClose","topDurationChange","topEmptied","topEncrypted","topEnded","topError","topInput","topInvalid","topLoad","topLoadedData","topLoadedMetadata","topLoadStart","topPause","topPlay","topPlaying","topProgress","topRateChange","topReset","topSeeked","topSeeking","topStalled","topSubmit","topSuspend","topTimeUpdate","topToggle","topVolumeChange","topWaiting"],ro={eventTypes:Zr,isInteractiveTopLevelEventType:function(e){var t=eo[e];return void 0!==t&&!0===t.isInteractive},extractEvents:function(e,t,n,r){var o=eo[e];if(!o)return null;var i=void 0;switch(e){case"topKeyPress":if(0===Vr(n))return null;case"topKeyDown":case"topKeyUp":i=Xr;break;case"topBlur":case"topFocus":i=Wr;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":i=mr;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":i=Gr;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":i=Jr;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":i=qr;break;case"topTransitionEnd":i=Qr;break;case"topScroll":i=dr;break;case"topWheel":i=Yr;break;case"topCopy":case"topCut":case"topPaste":i=zr;break;default:-1===no.indexOf(e)&&lt(!1,"SimpleEventPlugin: Unhandled event type, `%s`. This warning is likely caused by a bug in React. Please file an issue.",e),i=De}var a=i.getPooled(o,t,n,r);return ve(a),a}},oo=ro.isInteractiveTopLevelEventType,io=10,ao=[];function so(e){for(;e.return;)e=e.return;return e.tag!==ft?null:e.stateNode.containerInfo}function lo(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=so(n);if(!r)break;e.ancestors.push(n),n=re(r)}while(n);for(var o=0;o<e.ancestors.length;o++)t=e.ancestors[o],H(e.topLevelType,t,e.nativeEvent,It(e.nativeEvent))}var co=!0;function uo(e){co=!!e}function po(){return co}function fo(e,t,n){if(!n)return null;var r,o,i,a=oo(e)?mo:go;r=n,o=t,i=a.bind(null,e),r.addEventListener(o,i,!1)}function ho(e,t,n){if(!n)return null;var r,o,i,a=oo(e)?mo:go;r=n,o=t,i=a.bind(null,e),r.addEventListener(o,i,!0)}function mo(e,t){_t(go,e,t)}function go(e,t){if(co){var n=re(It(t));null===n||"number"!=typeof n.tag||Lr(n)||(n=null);var r,o=function(e,t,n){if(ao.length){var r=ao.pop();return r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,r}return{topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]}}(e,t,n);try{xt(lo,o)}finally{(r=o).topLevelType=null,r.nativeEvent=null,r.targetInst=null,r.ancestors.length=0,ao.length<io&&ao.push(r)}}}var vo=Object.freeze({get _enabled(){return co},setEnabled:uo,isEnabled:po,trapBubbledEvent:fo,trapCapturedEvent:ho,dispatchEvent:go});function yo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var bo={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},_o={},wo={};function ko(e){if(_o[e])return _o[e];if(!bo[e])return e;var t=bo[e];for(var n in t)if(t.hasOwnProperty(n)&&n in wo)return _o[e]=t[n];return e}i.canUseDOM&&(wo=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);var xo={topAnimationEnd:ko("animationend"),topAnimationIteration:ko("animationiteration"),topAnimationStart:ko("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:ko("transitionend"),topWheel:"wheel"},Eo={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Co={},So=0,To="_reactListenersID"+(""+Math.random()).slice(2);function No(e){return Object.prototype.hasOwnProperty.call(e,To)||(e[To]=So++,Co[e[To]]={}),Co[e[To]]}function Ao(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Po(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Oo(e,t){for(var n=Ao(e),r=0,o=0;n;){if(n.nodeType===Nt){if(o=r+n.textContent.length,r<=t&&t<=o)return{node:n,offset:t-r};r=o}n=Ao(Po(n))}}function Io(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,i=t.focusOffset;try{n.nodeType,o.nodeType}catch(e){return null}return function(e,t,n,r,o){var i=0,a=-1,s=-1,l=0,c=0,u=e,d=null;e:for(;;){for(var p=null;u!==t||0!==n&&u.nodeType!==Nt||(a=i+n),u!==r||0!==o&&u.nodeType!==Nt||(s=i+o),u.nodeType===Nt&&(i+=u.nodeValue.length),null!==(p=u.firstChild);)d=u,u=p;for(;;){if(u===e)break e;if(d===t&&++l===n&&(a=i),d===r&&++c===o&&(s=i),null!==(p=u.nextSibling))break;d=(u=d).parentNode}u=p}if(-1===a||-1===s)return null;return{start:a,end:s}}(e,n,r,o,i)}function Ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function Do(){var e=c();return{focusedElem:e,selectionRange:Ro(e)?function(e){var t=void 0;t="selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:Io(e);return t||{start:0,end:0}}(e):null}}function jo(e){var t,n=c(),r=e.focusedElem,o=e.selectionRange;if(n!==r&&(t=r,d(document.documentElement,t))){Ro(r)&&function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n);"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[we()].length,o=Math.min(t.start,r),i=void 0===t.end?o:Math.min(t.end,r);if(!n.extend&&i<o){var a=i;i=o,o=a}var s=Oo(e,o),l=Oo(e,i);if(s&&l){if(1===n.rangeCount&&n.anchorNode===s.node&&n.anchorOffset===s.offset&&n.focusNode===l.node&&n.focusOffset===l.offset)return;var c=document.createRange();c.setStart(s.node,s.offset),n.removeAllRanges(),i<o?(n.addRange(c),n.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),n.addRange(c))}}}(e,t)}(r,o);for(var i=[],a=r;a=a.parentNode;)a.nodeType===Tt&&i.push({element:a,left:a.scrollLeft,top:a.scrollTop});r.focus();for(var s=0;s<i.length;s++){var l=i[s];l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}}var Fo=i.canUseDOM&&"documentMode"in document&&document.documentMode<=11,Mo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},Lo=null,Uo=null,Bo=null,Ho=!1;function qo(e,t){if(Ho||null==Lo||Lo!==c())return null;var n=function(e){if("selectionStart"in e&&Ro(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}}(Lo);if(!Bo||!u(Bo,n)){Bo=n;var r=De.getPooled(Mo.select,Uo,e,t);return r.type="select",r.target=Lo,ve(r),r}return null}var zo={eventTypes:Mo,extractEvents:function(e,t,n,r){var o=r.window===r?r.document:r.nodeType===Pt?r:r.ownerDocument;if(!o||!function(e,t){for(var n=No(t),r=k[e],o=0;o<r.length;o++){var i=r[o];if(!n.hasOwnProperty(i)||!n[i])return!1}return!0}("onSelect",o))return null;var i=t?ie(t):window;switch(e){case"topFocus":(St(i)||"true"===i.contentEditable)&&(Lo=i,Uo=t,Bo=null);break;case"topBlur":Bo=Uo=Lo=null;break;case"topMouseDown":Ho=!0;break;case"topContextMenu":case"topMouseUp":return Ho=!1,qo(n,r);case"topSelectionChange":if(Fo)break;case"topKeyDown":case"topKeyUp":return qo(n,r)}return null}};L.injectEventPluginOrder(["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"]),A(le),L.injectEventPluginsByName({SimpleEventPlugin:ro,EnterLeaveEventPlugin:vr,ChangeEventPlugin:ur,SelectEventPlugin:zo,BeforeInputEventPlugin:Ze});var Wo=1073741823,Vo=0,Ko=1,$o=Wo,Xo=10,Go=2;function Jo(e){return(e/Xo|0)+Go}function Qo(e){return(e-Go)*Xo}function Yo(e,t,n){return(1+((e+t/Xo)/(r=n/Xo)|0))*r;var r}var Zo=0,ei=1,ti=2,ni=void 0;ni=!1;try{var ri=Object.preventExtensions({}),oi=new Map([[ri,null]]),ii=new Set([ri]);oi.set(0,0),ii.add(0)}catch(e){ni=!0}var ai=void 0;function si(e,t,n,r){this.tag=e,this.key=n,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.mode=r,this.effectTag=br,this.nextEffect=null,this.firstEffect=null,this.lastEffect=null,this.expirationTime=Vo,this.alternate=null,this._debugID=ai++,this._debugSource=null,this._debugOwner=null,this._debugIsCurrentlyTiming=!1,ni||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}var li=function(e,t,n,r){return new si(e,t,n,r)};function ci(e,t,n){var r=e.alternate;return null===r?((r=li(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r._debugID=e._debugID,r._debugSource=e._debugSource,r._debugOwner=e._debugOwner,(r.alternate=e).alternate=r):(r.pendingProps=t,r.effectTag=br,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ui(e,t,n){var r;r=e._owner;var o,i=void 0,a=e.type,s=e.key,l=e.props,c=void 0;if("function"==typeof a)c=(o=a).prototype&&o.prototype.isReactComponent?pt:z;else if("string"==typeof a)c=mt;else switch(a){case $t:return pi(l.children,t,n,s);case Qt:c=J,t|=ei|ti;break;case Xt:c=J,t|=ti;break;case Wt:c=K;break;case Vt:c=X;break;default:if("object"==typeof a&&null!==a)switch(a.$$typeof){case Gt:c=gt;break;case Jt:c=Q;break;case Yt:c=Y;break;default:if("number"==typeof a.tag)return(i=a).pendingProps=l,i.expirationTime=n,i;di(a,r)}else di(a,r)}return(i=li(c,l,s,t)).type=a,i.expirationTime=n,i._debugSource=e._source,i._debugOwner=e._owner,i}function di(e,t){var n="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(n+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var r=t?nn(t):null;r&&(n+="\n\nCheck the render method of `"+r+"`."),st(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==e?e:typeof e,n)}function pi(e,t,n,r){var o=li(G,e,r,t);return o.expirationTime=n,o}function fi(e,t,n){var r=li(V,e,null,t);return r.expirationTime=n,r}function hi(e,t,n){var r=null!==e.children?e.children:[],o=li(ht,r,e.key,t);return o.expirationTime=n,o.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},o}function mi(e,t){return null===e&&(e=li(z,null,null,Zo)),e.tag=t.tag,e.key=t.key,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.mode=t.mode,e.effectTag=t.effectTag,e.nextEffect=t.nextEffect,e.firstEffect=t.firstEffect,e.lastEffect=t.lastEffect,e.expirationTime=t.expirationTime,e.alternate=t.alternate,e._debugID=t._debugID,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugIsCurrentlyTiming=t._debugIsCurrentlyTiming,e}function gi(e,t,n){var r=li(ft,null,null,t?ei|ti:Zo),o={current:r,containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:Vo,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:Vo,firstBatch:null,nextScheduledRoot:null};return r.stateNode=o}var vi=null,yi=null,bi=!(ai=1);function _i(t){return function(e){try{return t(e)}catch(e){bi||lt(!(bi=!0),"React DevTools encountered an error: %s",e)}}}function wi(e){"function"==typeof vi&&vi(e)}function ki(e){"function"==typeof yi&&yi(e)}var xi=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.warn(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(r))}},Ei={discardPendingWarnings:function(){},flushPendingDeprecationWarnings:function(){},flushPendingUnsafeLifecycleWarnings:function(){},recordDeprecationWarnings:function(e,t){},recordUnsafeLifecycleWarnings:function(e,t){}},Ci={UNSAFE_componentWillMount:"componentDidMount",UNSAFE_componentWillReceiveProps:"static getDerivedStateFromProps",UNSAFE_componentWillUpdate:"componentDidUpdate"},Si=[],Ti=[],Ni=[],Ai=new Map,Pi=new Set,Oi=new Set;Ei.discardPendingWarnings=function(){Si=[],Ti=[],Ni=[],Ai=new Map},Ei.flushPendingUnsafeLifecycleWarnings=function(){Ai.forEach(function(a,e){var s=[];if(Object.keys(a).forEach(function(e){var t=a[e];if(0<t.length){var n=new Set;t.forEach(function(e){n.add(nn(e)||"Component"),Oi.add(e.type)});var r=e.replace("UNSAFE_",""),o=Ci[e],i=Array.from(n).sort().join(", ");s.push(r+": Please update the following components to use "+o+" instead: "+i)}}),0<s.length){var t=on(e);lt(!1,"Unsafe lifecycle methods were found within a strict-mode tree:%s\n\n%s\n\nLearn more about this warning here:\nhttps://fb.me/react-strict-mode-warnings",t,s.join("\n\n"))}}),Ai=new Map};Ei.flushPendingDeprecationWarnings=function(){if(0<Si.length){var t=new Set;Si.forEach(function(e){t.add(nn(e)||"Component"),Pi.add(e.type)});var e=Array.from(t).sort().join(", ");xi(!1,"componentWillMount is deprecated and will be removed in the next major version. Use componentDidMount instead. As a temporary workaround, you can rename to UNSAFE_componentWillMount.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",e),Si=[]}if(0<Ti.length){var n=new Set;Ti.forEach(function(e){n.add(nn(e)||"Component"),Pi.add(e.type)});var r=Array.from(n).sort().join(", ");xi(!1,"componentWillReceiveProps is deprecated and will be removed in the next major version. Use static getDerivedStateFromProps instead.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",r),Ti=[]}if(0<Ni.length){var o=new Set;Ni.forEach(function(e){o.add(nn(e)||"Component"),Pi.add(e.type)});var i=Array.from(o).sort().join(", ");xi(!1,"componentWillUpdate is deprecated and will be removed in the next major version. Use componentDidUpdate instead. As a temporary workaround, you can rename to UNSAFE_componentWillUpdate.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",i),Ni=[]}},Ei.recordDeprecationWarnings=function(e,t){Pi.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&Si.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&Ti.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Ni.push(e))},Ei.recordUnsafeLifecycleWarnings=function(t,e){var n=function(e){for(var t=null;null!==e;)e.mode&ti&&(t=e),e=e.return;return t}(t);if(!Oi.has(t.type)&&("function"!=typeof e.componentWillMount||!0!==e.componentWillMount.__suppressDeprecationWarning)){var r=void 0;Ai.has(n)?r=Ai.get(n):(r={UNSAFE_componentWillMount:[],UNSAFE_componentWillReceiveProps:[],UNSAFE_componentWillUpdate:[]},Ai.set(n,r));var o=[];"function"!=typeof e.componentWillMount&&"function"!=typeof e.UNSAFE_componentWillMount||o.push("UNSAFE_componentWillMount"),"function"!=typeof e.componentWillReceiveProps&&"function"!=typeof e.UNSAFE_componentWillReceiveProps||o.push("UNSAFE_componentWillReceiveProps"),"function"!=typeof e.componentWillUpdate&&"function"!=typeof e.UNSAFE_componentWillUpdate||o.push("UNSAFE_componentWillUpdate"),0<o.length&&o.forEach(function(e){r[e].push(t)})}};var Ii=!0,Ri=!0,Di=!1,ji=!1,Fi=!1,Mi=!0,Li=!0,Ui=!1,Bi="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,Hi=null,qi=null,zi=null,Wi=!1,Vi=!1,Ki=!1,$i=0,Xi=0,Gi=!1,Ji=new Set,Qi=function(e){return"⚛ "+e},Yi=function(e){performance.mark(Qi(e))},Zi=function(e,t,n){var r,o=Qi(t),i=((r=n)?"⛔ ":"⚛ ")+e+(r?" Warning: "+r:"");try{performance.measure(i,o)}catch(e){}performance.clearMarks(o),performance.clearMeasures(i)},ea=function(e,t){return e+" (#"+t+")"},ta=function(e,t,n){return null===n?e+" ["+(t?"update":"mount")+"]":e+"."+n},na=function(e,t){var n=nn(e)||"Unknown",r=e._debugID,o=null!==e.alternate,i=ta(n,o,t);if(Wi&&Ji.has(i))return!1;Ji.add(i);var a=ea(i,r);return Yi(a),!0},ra=function(e,t){var n,r=nn(e)||"Unknown",o=e._debugID,i=null!==e.alternate,a=ta(r,i,t),s=ea(a,o);n=s,performance.clearMarks(Qi(n))},oa=function(e,t,n){var r=nn(e)||"Unknown",o=e._debugID,i=null!==e.alternate,a=ta(r,i,t),s=ea(a,o);Zi(a,s,n)},ia=function(e){switch(e.tag){case ft:case mt:case V:case ht:case K:case X:case G:case gt:case Q:return!0;default:return!1}},aa=function(){null!==qi&&null!==zi&&ra(zi,qi),qi=zi=null,Ki=!1},sa=function(){for(var e=Hi;e;)e._debugIsCurrentlyTiming&&oa(e,null,null),e=e.return},la=function(e){null!==e.return&&la(e.return),e._debugIsCurrentlyTiming&&na(e,null)},ca=function(){null!==Hi&&la(Hi)};function ua(){Ii&&Xi++}function da(e){if(Ii){if(!Bi||ia(e))return;e._debugIsCurrentlyTiming=!1,ra(e,null)}}function pa(e){if(Ii){if(!Bi||ia(e))return;if(Hi=e.return,!e._debugIsCurrentlyTiming)return;e._debugIsCurrentlyTiming=!1,oa(e,null,null)}}function fa(e){if(Ii){if(!Bi||ia(e))return;if(Hi=e.return,!e._debugIsCurrentlyTiming)return;e._debugIsCurrentlyTiming=!1;oa(e,null,"An error was thrown inside this error boundary")}}function ha(e,t){if(Ii){if(!Bi)return;if(aa(),!na(e,t))return;zi=e,qi=t}}function ma(){if(Ii){if(!Bi)return;if(null!==qi&&null!==zi)oa(zi,qi,Ki?"Scheduled a cascading update":null);zi=qi=null}}function ga(e,t){if(Ii){if(!Bi)return;var n=null;if(null!==e)if(e.tag===ft)n="A top-level update interrupted the previous render";else n="An update to "+(nn(e)||"Unknown")+" interrupted the previous render";else 1<$i&&(n="There were cascading updates");$i=0;var r=t?"(React Tree Reconciliation: Completed Root)":"(React Tree Reconciliation: Yielded)";sa(),Zi(r,"(React Tree Reconciliation)",n)}}var va=void 0;function ya(e){var t={baseState:e,expirationTime:Vo,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null,isProcessing:!1};return t}function ba(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(e.expirationTime===Vo||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}va=!1;var _a=void 0,wa=void 0;function ka(e){_a=wa=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=ya(null));var r=void 0;null!==t?null===(r=t.updateQueue)&&(r=t.updateQueue=ya(null)):r=null,wa=r=r!==(_a=n)?r:null}function xa(e,t){ka(e);var n=_a,r=wa;if((n.isProcessing||null!==r&&r.isProcessing)&&!va&&(lt(!1,"An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),va=!0),null!==r){if(null===n.last||null===r.last)return ba(n,t),void ba(r,t);ba(n,t),r.last=t}else ba(n,t)}function Ea(e,t,n,r){var o=e.partialState;return"function"==typeof o?o.call(t,n,r):o}function Ca(e,t,n,r,o,i){if(null!==e&&e.updateQueue===n){var a=n;n=t.updateQueue={baseState:a.baseState,expirationTime:a.expirationTime,first:a.first,last:a.last,isInitialized:a.isInitialized,capturedValues:a.capturedValues,callbackList:null,hasForceUpdate:!1}}n.isProcessing=!0,n.expirationTime=Vo;var s=void 0;n.isInitialized?s=n.baseState:(s=n.baseState=t.memoizedState,n.isInitialized=!0);for(var l=!0,c=n.first,u=!1;null!==c;){var d=c.expirationTime;if(i<d){var p=n.expirationTime;(p===Vo||d<p)&&(n.expirationTime=d),u||(u=!0,n.baseState=s),c=c.next}else{u||(n.first=c.next,null===n.first&&(n.last=null)),(Fi||Mi&&t.mode&ti)&&Ea(c,r,s,o);var f=void 0;if(c.isReplace?(s=Ea(c,r,s,o),l=!0):(f=Ea(c,r,s,o))&&(s=l?ct({},s,f):ct(s,f),l=!1),c.isForced&&(n.hasForceUpdate=!0),null!==c.callback){var h=n.callbackList;null===h&&(h=n.callbackList=[]),h.push(c)}if(null!==c.capturedValue){var m=n.capturedValues;null===m?n.capturedValues=[c.capturedValue]:m.push(c.capturedValue)}c=c.next}}return null!==n.callbackList?t.effectTag|=Sr:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),u||(u=!0,n.baseState=s),n.isProcessing=!1,s}function Sa(e,t){var n=e.callbackList;if(null!==n){e.callbackList=null;for(var r=0;r<n.length;r++){var o=n[r],i=o.callback;o.callback=null,"function"!=typeof i&&st(!1,"Invalid argument passed as callback. Expected a function. Instead received: %s",i),i.call(t)}}}var Ta,Na={},Aa=Array.isArray,Pa=void 0,Oa=void 0,Ia=void 0,Ra=void 0,Da=void 0;Pa=new Set,Oa=new Set,Ia=new Set,Ra=new Set,Da=new Set;var ja=new Set;function Fa(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r].value,i=e.getDerivedStateFromCatch.call(null,o);null!=i&&ct(n,i)}return n}Ta=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;ja.has(n)||(ja.add(n),lt(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},Object.defineProperty(Na,"_processChildContext",{enumerable:!1,value:function(){st(!1,"_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(Na);var Ma=function(e,i,a,b,_){var m=e.cacheContext,w=e.getMaskedContext,k=e.getUnmaskedContext,g=e.isContextConsumer,x=e.hasContextChanged,l={isMounted:Ur,enqueueSetState:function(e,t,n){var r=yr(e);Ta(n=void 0===n?null:n,"setState");var o=a(r);xa(r,{expirationTime:o,partialState:t,callback:n,isReplace:!1,isForced:!1,capturedValue:null,next:null}),i(r,o)},enqueueReplaceState:function(e,t,n){var r=yr(e);Ta(n=void 0===n?null:n,"replaceState");var o=a(r);xa(r,{expirationTime:o,partialState:t,callback:n,isReplace:!0,isForced:!1,capturedValue:null,next:null}),i(r,o)},enqueueForceUpdate:function(e,t){var n=yr(e);Ta(t=void 0===t?null:t,"forceUpdate");var r=a(n);xa(n,{expirationTime:r,partialState:null,callback:t,isReplace:!1,isForced:!0,capturedValue:null,next:null}),i(n,r)}};function E(e,t,n,r,o,i){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var a=e.stateNode,s=e.type;if("function"==typeof a.shouldComponentUpdate){ha(e,"shouldComponentUpdate");var l=a.shouldComponentUpdate(n,o,i);return ma(),lt(void 0!==l,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",nn(e)||"Component"),l}return!s.prototype||!s.prototype.isPureReactComponent||(!u(t,n)||!u(r,o))}function C(e,t){t.props=e.memoizedProps,t.state=e.memoizedState}function v(e,t){var n;t.updater=l,e.stateNode=t,n=e,t._reactInternalFiber=n,t._reactInternalInstance=Na}function S(e,t,n,r){var o=t.state;if(ha(e,"componentWillReceiveProps"),"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),ma(),t.state!==o){var i=nn(e)||"Component";Pa.has(i)||(Pa.add(i),lt(!1,"%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",i)),l.enqueueReplaceState(t,t.state,null)}}function T(e,t,n,r){var o=e.type;if("function"==typeof o.getDerivedStateFromProps){(Fi||Mi&&e.mode&ti)&&o.getDerivedStateFromProps.call(null,n,r);var i=o.getDerivedStateFromProps.call(null,n,r);if(void 0===i){var a=nn(e)||"Component";Oa.has(a)||(Oa.add(a),lt(!1,"%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",a))}return i}}return{adoptClassInstance:v,callGetDerivedStateFromProps:T,constructClassInstance:function(e,t){var n=e.type,r=k(e),o=g(e),i=o?w(e,r):dt;(Fi||Mi&&e.mode&ti)&&new n(t,i);var a=new n(t,i),s=null!==a.state&&void 0!==a.state?a.state:null;if(v(e,a),"function"==typeof n.getDerivedStateFromProps&&null===s){var l=nn(e)||"Component";Ia.has(l)||(Ia.add(l),lt(!1,"%s: Did not properly initialize state during construction. Expected state to be an object, but it was %s.",l,null===a.state?"null":"undefined"))}if("function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate){var c=null,u=null,d=null;if("function"==typeof a.componentWillMount&&!0!==a.componentWillMount.__suppressDeprecationWarning?c="componentWillMount":"function"==typeof a.UNSAFE_componentWillMount&&(c="UNSAFE_componentWillMount"),"function"==typeof a.componentWillReceiveProps&&!0!==a.componentWillReceiveProps.__suppressDeprecationWarning?u="componentWillReceiveProps":"function"==typeof a.UNSAFE_componentWillReceiveProps&&(u="UNSAFE_componentWillReceiveProps"),"function"==typeof a.componentWillUpdate&&!0!==a.componentWillUpdate.__suppressDeprecationWarning?d="componentWillUpdate":"function"==typeof a.UNSAFE_componentWillUpdate&&(d="UNSAFE_componentWillUpdate"),null!==c||null!==u||null!==d){var p=nn(e)||"Component",f="function"==typeof n.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Da.has(p)||(Da.add(p),lt(!1,"Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",p,f,null!==c?"\n  "+c:"",null!==u?"\n  "+u:"",null!==d?"\n  "+d:""))}}e.memoizedState=s;var h=T(e,0,t,s);return null!=h&&(e.memoizedState=ct({},e.memoizedState,h)),o&&m(e,r,i),a},mountClassInstance:function(e,t){var n=e.type,r=e.alternate;!function(e){var t=e.stateNode,n=e.type,r=nn(e)||"Component";t.render||(n.prototype&&"function"==typeof n.prototype.render?lt(!1,"%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",r):lt(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",r));var o=!t.getInitialState||t.getInitialState.isReactClassApproved||t.state;lt(o,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",r);var i=!t.getDefaultProps||t.getDefaultProps.isReactClassApproved;lt(i,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",r);var a=!t.propTypes;lt(a,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",r);var s=!t.contextTypes;lt(s,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",r);var l="function"!=typeof t.componentShouldUpdate;lt(l,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",r),n.prototype&&n.prototype.isPureReactComponent&&void 0!==t.shouldComponentUpdate&&lt(!1,"%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",nn(e)||"A pure component");var c="function"!=typeof t.componentDidUnmount;lt(c,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",r);var u="function"!=typeof t.componentDidReceiveProps;lt(u,"%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",r);var d="function"!=typeof t.componentWillRecieveProps;lt(d,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",r);var p="function"!=typeof t.UNSAFE_componentWillRecieveProps;lt(p,"%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",r);var f=t.props!==e.pendingProps;lt(void 0===t.props||!f,"%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",r,r);var h=!t.defaultProps;lt(h,"Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",r,r),"function"!=typeof t.getSnapshotBeforeUpdate||"function"==typeof t.componentDidUpdate||"function"==typeof t.componentDidUpdate||Ra.has(n)||(Ra.add(n),lt(!1,"%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",nn(e)));var m="function"!=typeof t.getDerivedStateFromProps;lt(m,"%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",r);var g="function"!=typeof t.getDerivedStateFromCatch;lt(g,"%s: getDerivedStateFromCatch() is defined as an instance method and will be ignored. Instead, declare it as a static method.",r);var v="function"!=typeof n.getSnapshotBeforeUpdate;lt(v,"%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",r);var y=t.state;y&&("object"!=typeof y||Aa(y))&&lt(!1,"%s.state: must be set to an object or null",r),"function"==typeof t.getChildContext&&lt("object"==typeof n.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",r)}(e);var o=e.stateNode,i=e.pendingProps,a=k(e);if(o.props=i,o.state=e.memoizedState,o.refs=dt,o.context=w(e,a),e.mode&ti&&Ei.recordUnsafeLifecycleWarnings(e,o),Ui&&Ei.recordDeprecationWarnings(e,o),"function"!=typeof n.getDerivedStateFromProps&&"function"!=typeof o.getSnapshotBeforeUpdate&&("function"==typeof o.UNSAFE_componentWillMount||"function"==typeof o.componentWillMount)){!function(e,t){ha(e,"componentWillMount");var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),ma(),n!==t.state&&(lt(!1,"%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",nn(e)||"Component"),l.enqueueReplaceState(t,t.state,null))}(e,o);var s=e.updateQueue;null!==s&&(o.state=Ca(r,e,s,o,i,t))}"function"==typeof o.componentDidMount&&(e.effectTag|=kr)},resumeMountClassInstance:function(e,t){var n=e.type,r=e.stateNode;C(e,r);var o=e.memoizedProps,i=e.pendingProps,a=r.context,s=k(e),l=w(e,s),c="function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate;c||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||o===i&&a===l||S(e,r,i,l);var u=e.memoizedState,d=void 0,p=void 0;if(null!==e.updateQueue){d=Ca(null,e,e.updateQueue,r,i,t);var f=e.updateQueue;null!==f&&null!==f.capturedValues&&ji&&"function"==typeof n.getDerivedStateFromCatch&&(p=Fa(n,f.capturedValues))}else d=u;var h=void 0;if(o!==i&&(h=T(e,0,i,d)),null!=h){d=null==d?h:ct({},d,h);var m=e.updateQueue;null!==m&&(m.baseState=ct({},m.baseState,h))}if(null!=p){d=null==d?p:ct({},d,p);var g=e.updateQueue;null!==g&&(g.baseState=ct({},g.baseState,p))}if(!(o!==i||u!==d||x()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate))return"function"==typeof r.componentDidMount&&(e.effectTag|=kr),!1;var v=E(e,o,i,u,d,l);return v?(c||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(ha(e,"componentWillMount"),"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),ma()),"function"==typeof r.componentDidMount&&(e.effectTag|=kr)):("function"==typeof r.componentDidMount&&(e.effectTag|=kr),b(e,i),_(e,d)),r.props=i,r.state=d,r.context=l,v},updateClassInstance:function(e,t,n){var r=t.type,o=t.stateNode;C(t,o);var i=t.memoizedProps,a=t.pendingProps,s=o.context,l=k(t),c=w(t,l),u="function"==typeof r.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate;u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||i===a&&s===c||S(t,o,a,c);var d=t.memoizedState,p=void 0,f=void 0;if(null!==t.updateQueue){p=Ca(e,t,t.updateQueue,o,a,n);var h=t.updateQueue;null!==h&&null!==h.capturedValues&&ji&&"function"==typeof r.getDerivedStateFromCatch&&(f=Fa(r,h.capturedValues))}else p=d;var m=void 0;if(i!==a&&(m=T(t,0,a,p)),null!=m){p=null==p?m:ct({},p,m);var g=t.updateQueue;null!==g&&(g.baseState=ct({},g.baseState,m))}if(null!=f){p=null==p?f:ct({},p,f);var v=t.updateQueue;null!==v&&(v.baseState=ct({},v.baseState,f))}if(!(i!==a||d!==p||x()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"==typeof o.componentDidUpdate&&(i===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=kr)),"function"==typeof o.getSnapshotBeforeUpdate&&(i===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=Pr)),!1;var y=E(t,i,a,d,p,c);return y?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||(ha(t,"componentWillUpdate"),"function"==typeof o.componentWillUpdate&&o.componentWillUpdate(a,p,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(a,p,c),ma()),"function"==typeof o.componentDidUpdate&&(t.effectTag|=kr),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=Pr)):("function"==typeof o.componentDidUpdate&&(i===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=kr)),"function"==typeof o.getSnapshotBeforeUpdate&&(i===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=Pr)),b(t,a),_(t,p)),o.props=a,o.state=p,o.context=c,y}}},La=sn.getCurrentFiberStackAddendum,Ua=void 0,Ba=void 0,Ha=void 0,qa=void 0,za=function(e){};Ua=!1,Ba={},Ha={},qa={},za=function(e){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){"object"!=typeof e._store&&st(!1,"React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue."),e._store.validated=!0;var t='Each child in an array or iterator should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.'+(La()||"");Ha[t]||(Ha[t]=!0,lt(!1,'Each child in an array or iterator should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.%s',La()))}};var Wa=Array.isArray;function Va(e,t,n){var r=n.ref;if(null!==r&&"function"!=typeof r&&"object"!=typeof r){if(e.mode&ti){var o=nn(e)||"Component";Ba[o]||(lt(!1,'A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using createRef() instead.\n%s\n\nLearn more about using refs safely here:\nhttps://fb.me/react-strict-mode-string-ref',r,on(e)),Ba[o]=!0)}if(n._owner){var i=n._owner,a=void 0;if(i){var s=i;s.tag!==pt&&st(!1,"Stateless function components cannot have refs."),a=s.stateNode}a||st(!1,"Missing owner for string ref %s. This error is likely caused by a bug in React. Please file an issue.",r);var l=""+r;if(null!==t&&null!==t.ref&&t.ref._stringRef===l)return t.ref;var c=function(e){var t=a.refs===dt?a.refs={}:a.refs;null===e?delete t[l]:t[l]=e};return c._stringRef=l,c}"string"!=typeof r&&st(!1,"Expected ref to be a function or a string."),n._owner||st(!1,"Element ref was specified as a string (%s) but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a functional component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://fb.me/react-refs-must-have-owner for more information.",r)}return r}function Ka(e,t){if("textarea"!==e.type){var n;n=" If you meant to render a collection of children, use an array instead."+(La()||""),st(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,n)}}function $a(){var e="Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."+(La()||"");qa[e]||(qa[e]=!0,lt(!1,"Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.%s",La()||""))}function Xa(_){function w(e,t){if(_){var n=e.lastEffect;null!==n?(n.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=Er}}function k(e,t){if(!_)return null;for(var n=t;null!==n;)w(e,n),n=n.sibling;return null}function x(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function c(e,t,n){var r=ci(e,t,n);return r.index=0,r.sibling=null,r}function E(e,t,n){if(e.index=n,!_)return t;var r=e.alternate;if(null!==r){var o=r.index;return o<t?(e.effectTag=wr,t):o}return e.effectTag=wr,t}function a(e){return _&&null===e.alternate&&(e.effectTag=wr),e}function s(e,t,n,r){if(null===t||t.tag!==V){var o=fi(n,e.mode,r);return o.return=e,o}var i=c(t,n,r);return i.return=e,i}function l(e,t,n,r){if(null!==t&&t.type===n.type){var o=c(t,n.props,r);return o.ref=Va(e,t,n),o.return=e,o._debugSource=n._source,o._debugOwner=n._owner,o}var i=ui(n,e.mode,r);return i.ref=Va(e,t,n),i.return=e,i}function u(e,t,n,r){if(null===t||t.tag!==ht||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var o=hi(n,e.mode,r);return o.return=e,o}var i=c(t,n.children||[],r);return i.return=e,i}function d(e,t,n,r,o){if(null===t||t.tag!==G){var i=pi(n,e.mode,r,o);return i.return=e,i}var a=c(t,n,r);return a.return=e,a}function C(e,t,n){if("string"==typeof t||"number"==typeof t){var r=fi(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case zt:var o=ui(t,e.mode,n);return o.ref=Va(e,null,t),o.return=e,o;case Kt:var i=hi(t,e.mode,n);return i.return=e,i}if(Wa(t)||tn(t)){var a=pi(t,e.mode,n,null);return a.return=e,a}Ka(e,t)}return"function"==typeof t&&$a(),null}function S(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case zt:return n.key===o?n.type===$t?d(e,t,n.props.children,r,o):l(e,t,n,r):null;case Kt:return n.key===o?u(e,t,n,r):null}if(Wa(n)||tn(n))return null!==o?null:d(e,t,n,r,null);Ka(e,n)}return"function"==typeof n&&$a(),null}function T(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return s(t,e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case zt:var i=e.get(null===r.key?n:r.key)||null;return r.type===$t?d(t,i,r.props.children,o,r.key):l(t,i,r,o);case Kt:return u(t,e.get(null===r.key?n:r.key)||null,r,o)}if(Wa(r)||tn(r))return d(t,e.get(n)||null,r,o,null);Ka(t,r)}return"function"==typeof r&&$a(),null}function N(e,t){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case zt:case Kt:za(e);var n=e.key;if("string"!=typeof n)break;if(null===t){(t=new Set).add(n);break}if(!t.has(n)){t.add(n);break}lt(!1,"Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.%s",n,La())}return t}return function(e,t,n,r){"object"==typeof n&&null!==n&&n.type===$t&&null===n.key&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case zt:return a(function(e,t,n,r){for(var o=n.key,i=t;null!==i;){if(i.key===o){if(i.tag===G?n.type===$t:i.type===n.type){k(e,i.sibling);var a=c(i,n.type===$t?n.props.children:n.props,r);return a.ref=Va(e,i,n),a.return=e,a._debugSource=n._source,a._debugOwner=n._owner,a}k(e,i);break}w(e,i),i=i.sibling}if(n.type===$t){var s=pi(n.props.children,e.mode,r,n.key);return s.return=e,s}var l=ui(n,e.mode,r);return l.ref=Va(e,t,n),l.return=e,l}(e,t,n,r));case Kt:return a(function(e,t,n,r){for(var o=n.key,i=t;null!==i;){if(i.key===o){if(i.tag===ht&&i.stateNode.containerInfo===n.containerInfo&&i.stateNode.implementation===n.implementation){k(e,i.sibling);var a=c(i,n.children||[],r);return a.return=e,a}k(e,i);break}w(e,i),i=i.sibling}var s=hi(n,e.mode,r);return s.return=e,s}(e,t,n,r))}if("string"==typeof n||"number"==typeof n)return a(function(e,t,n,r){if(null!==t&&t.tag===V){k(e,t.sibling);var o=c(t,n,r);return o.return=e,o}k(e,t);var i=fi(n,e.mode,r);return i.return=e,i}(e,t,""+n,r));if(Wa(n))return function(t,e,n,r){for(var o=null,i=0;i<n.length;i++)o=N(n[i],o);for(var a=null,s=null,l=e,c=0,u=0,d=null;null!==l&&u<n.length;u++){l.index>u?(d=l,l=null):d=l.sibling;var p=S(t,l,n[u],r);if(null===p){null===l&&(l=d);break}_&&l&&null===p.alternate&&w(t,l),c=E(p,c,u),null===s?a=p:s.sibling=p,s=p,l=d}if(u===n.length)return k(t,l),a;if(null===l){for(;u<n.length;u++){var f=C(t,n[u],r);f&&(c=E(f,c,u),null===s?a=f:s.sibling=f,s=f)}return a}for(var h=x(0,l);u<n.length;u++){var m=T(h,t,u,n[u],r);m&&(_&&null!==m.alternate&&h.delete(null===m.key?u:m.key),c=E(m,c,u),null===s?a=m:s.sibling=m,s=m)}return _&&h.forEach(function(e){return w(t,e)}),a}(e,t,n,r);if(tn(n))return function(t,e,n,r){var o=tn(n);"function"!=typeof o&&st(!1,"An object is not an iterable. This error is likely caused by a bug in React. Please file an issue."),"function"==typeof n.entries&&n.entries===o&&(lt(Ua,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",La()),Ua=!0);var i=o.call(n);if(i)for(var a=null,s=i.next();!s.done;s=i.next())a=N(s.value,a);var l=o.call(n);null==l&&st(!1,"An iterable object provided no iterator.");for(var c=null,u=null,d=e,p=0,f=0,h=null,m=l.next();null!==d&&!m.done;f++,m=l.next()){d.index>f?(h=d,d=null):h=d.sibling;var g=S(t,d,m.value,r);if(null===g){d||(d=h);break}_&&d&&null===g.alternate&&w(t,d),p=E(g,p,f),null===u?c=g:u.sibling=g,u=g,d=h}if(m.done)return k(t,d),c;if(null===d){for(;!m.done;f++,m=l.next()){var v=C(t,m.value,r);null!==v&&(p=E(v,p,f),null===u?c=v:u.sibling=v,u=v)}return c}for(var y=x(0,d);!m.done;f++,m=l.next()){var b=T(y,t,f,m.value,r);null!==b&&(_&&null!==b.alternate&&y.delete(null===b.key?f:b.key),p=E(b,p,f),null===u?c=b:u.sibling=b,u=b)}return _&&y.forEach(function(e){return w(t,e)}),c}(e,t,n,r);if(o&&Ka(e,n),"function"==typeof n&&$a(),void 0===n)switch(e.tag){case pt:if(e.stateNode.render._isMockFunction)break;case W:var i=e.type;st(!1,"%s(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.",i.displayName||i.name||"Component")}return k(e,t)}}var Ga=Xa(!0),Ja=Xa(!1);var Qa=void 0,Ya=void 0,Za=void 0;Qa={},Ya={},Za={};var es=function(e,t,n,r,o,i,a){var c=e.shouldSetTextContent,u=e.shouldDeprioritizeSubtree,d=t.pushHostContext,s=t.pushHostContainer,p=r.pushProvider,y=n.getMaskedContext,b=n.getUnmaskedContext,f=n.hasContextChanged,_=n.pushContextProvider,l=n.pushTopLevelContextObject,h=n.invalidateContextProvider,m=o.enterHydrationState,g=o.resetHydrationState,v=o.tryToClaimNextHydratableInstance,w=Ma(n,i,a,j,F),k=w.adoptClassInstance,x=w.callGetDerivedStateFromProps,E=w.constructClassInstance,C=w.mountClassInstance,S=w.resumeMountClassInstance,T=w.updateClassInstance;function N(e,t,n){A(e,t,n,t.expirationTime)}function A(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ga(t,e.child,n,r)}function P(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=Nr)}function O(e,t,n,r,o,i){if(P(e,t),!n&&!o)return r&&h(t,!1),D(e,t);var a=t.type,s=t.stateNode;Ut.current=t;var l=void 0;return!o||ji&&"function"==typeof a.getDerivedStateFromCatch?(sn.setCurrentPhase("render"),l=s.render(),(Fi||Mi&&t.mode&ti)&&s.render(),sn.setCurrentPhase(null)):l=null,t.effectTag|=_r,o&&(A(e,t,null,i),t.child=null),A(e,t,l,i),F(t,s.state),j(t,s.props),r&&h(t,!0),t.child}function I(e){var t=e.stateNode;t.pendingContext?l(e,t.pendingContext,t.pendingContext!==t.context):t.context&&l(e,t.context,!1),s(e,t.containerInfo)}function R(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=void 0;switch(o.tag){case Q:var a=0|o.stateNode;if(o.type===t&&0!=(a&n)){for(var s=o;null!==s;){var l=s.alternate;if(s.expirationTime===Vo||s.expirationTime>r)s.expirationTime=r,null!==l&&(l.expirationTime===Vo||l.expirationTime>r)&&(l.expirationTime=r);else{if(null===l||!(l.expirationTime===Vo||l.expirationTime>r))break;l.expirationTime=r}s=s.return}i=null}else i=o.child;break;case gt:i=o.type===e.type?null:o.child;break;default:i=o.child}if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===e){i=null;break}var c=i.sibling;if(null!==c){i=c;break}i=i.return}o=i}}function D(e,t){return da(t),function(e,t){if(null!==e&&t.child!==e.child&&st(!1,"Resuming work not yet implemented."),null!==t.child){var n=t.child,r=ci(n,n.pendingProps,n.expirationTime);for((t.child=r).return=t;null!==n.sibling;)n=n.sibling,(r=r.sibling=ci(n,n.pendingProps,n.expirationTime)).return=t;r.sibling=null}}(e,t),t.child}function j(e,t){e.memoizedProps=t}function F(e,t){e.memoizedState=t}return{beginWork:function(e,t,n){if(t.expirationTime===Vo||t.expirationTime>n)return function(e,t){switch(da(t),t.tag){case ft:I(t);break;case pt:_(t);break;case ht:s(t,t.stateNode.containerInfo);break;case gt:p(t)}return null}(0,t);switch(t.tag){case z:return function(e,t,n){null!==e&&st(!1,"An indeterminate component should never have mounted. This error is likely caused by a bug in React. Please file an issue.");var r,o=t.type,i=t.pendingProps,a=b(t),s=y(t,a);if(o.prototype&&"function"==typeof o.prototype.render){var l=nn(t)||"Unknown";Qa[l]||(lt(!1,"The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",l,l),Qa[l]=!0)}if(Ut.current=t,r=o(i,s),t.effectTag|=_r,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){var c=t.type;if(t.tag=pt,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"==typeof c.getDerivedStateFromProps){var u=x(t,r,i,t.memoizedState);null!=u&&(t.memoizedState=ct({},t.memoizedState,u))}var d=_(t);return k(t,r),C(t,n),O(e,t,!0,d,!1,n)}t.tag=W;var p=t.type;if(p&&lt(!p.childContextTypes,"%s(...): childContextTypes cannot be defined on a functional component.",p.displayName||p.name||"Component"),null!==t.ref){var f="",h=sn.getCurrentFiberOwnerName();h&&(f+="\n\nCheck the render method of `"+h+"`.");var m=h||t._debugID||"",g=t._debugSource;g&&(m=g.fileName+":"+g.lineNumber),Za[m]||(Za[m]=!0,lt(!1,"Stateless function components cannot be given refs. Attempts to access this ref will fail.%s%s",f,sn.getCurrentFiberStackAddendum()))}if("function"==typeof o.getDerivedStateFromProps){var v=nn(t)||"Unknown";Ya[v]||(lt(!1,"%s: Stateless functional components do not support getDerivedStateFromProps.",v),Ya[v]=!0)}return N(e,t,r),j(t,i),t.child}(e,t,n);case W:return function(e,t){var n=t.type,r=t.pendingProps;if(f());else if(t.memoizedProps===r)return D(e,t);var o,i=b(t),a=y(t,i);return Ut.current=t,sn.setCurrentPhase("render"),o=n(r,a),sn.setCurrentPhase(null),t.effectTag|=_r,N(e,t,o),j(t,r),t.child}(e,t);case pt:return function(e,t,n){var r=_(t),o=void 0;null===e?null===t.stateNode?(E(t,t.pendingProps),C(t,n),o=!0):o=S(t,n):o=T(e,t,n);var i=!1,a=t.updateQueue;return null!==a&&null!==a.capturedValues&&(i=o=!0),O(e,t,o,r,i,n)}(e,t,n);case ft:return function(e,t,n){I(t);var r=t.updateQueue;if(null!==r){var o=t.memoizedState,i=Ca(e,t,r,null,null,n);F(t,i);var a=void 0;if(null!==(r=t.updateQueue)&&null!==r.capturedValues)a=null;else{if(o===i)return g(),D(e,t);a=i.element}var s=t.stateNode;return(null===e||null===e.child)&&s.hydrate&&m(t)?(t.effectTag|=wr,t.child=Ja(t,null,a,n)):(g(),N(e,t,a)),F(t,i),t.child}return g(),D(e,t)}(e,t,n);case mt:return function(e,t,n){d(t),null===e&&v(t);var r=t.type,o=t.memoizedProps,i=t.pendingProps,a=null!==e?e.memoizedProps:null;if(f());else if(o===i){var s=t.mode&ei&&u(r,i);if(s&&(t.expirationTime=$o),!s||n!==$o)return D(e,t)}var l=i.children;return c(r,i)?l=null:a&&c(r,a)&&(t.effectTag|=Cr),P(e,t),n!==$o&&t.mode&ei&&u(r,i)?(t.expirationTime=$o,t.memoizedProps=i,null):(N(e,t,l),j(t,i),t.child)}(e,t,n);case V:return a=t,null===e&&v(a),j(a,a.pendingProps),null;case $:t.tag=K;case K:return function(e,t,n){var r=t.pendingProps;f()||t.memoizedProps===r&&(r=t.memoizedProps);var o=r.children;return t.stateNode=null===e?Ja(t,t.stateNode,o,n):Ga(t,e.stateNode,o,n),j(t,r),t.stateNode}(e,t,n);case X:return null;case ht:return function(e,t,n){s(t,t.stateNode.containerInfo);var r=t.pendingProps;if(f());else if(t.memoizedProps===r)return D(e,t);return null===e?t.child=Ga(t,null,r,n):N(e,t,r),j(t,r),t.child}(e,t,n);case Y:return r=e,i=(0,(o=t).type.render)(o.pendingProps,o.ref),N(r,o,i),j(o,i),o.child;case G:return function(e,t){var n=t.pendingProps;if(f());else if(t.memoizedProps===n)return D(e,t);return N(e,t,n),j(t,n),t.child}(e,t);case J:return function(e,t){var n=t.pendingProps.children;if(f());else if(null===n||t.memoizedProps===n)return D(e,t);return N(e,t,n),j(t,n),t.child}(e,t);case gt:return function(e,t,n){var r=t.type._context,o=t.pendingProps,i=t.memoizedProps;if(f());else if(i===o)return t.stateNode=0,p(t),D(e,t);var a=o.value;t.memoizedProps=o;var s=void 0;if(null===i)s=Wo;else if(i.value===o.value){if(i.children===o.children)return t.stateNode=0,p(t),D(e,t);s=0}else{var l=i.value;if(l===a&&(0!==l||1/l==1/a)||l!=l&&a!=a){if(i.children===o.children)return t.stateNode=0,p(t),D(e,t);s=0}else if(s="function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):Wo,lt((s&Wo)===s,"calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",s),0==(s|=0)){if(i.children===o.children)return t.stateNode=0,p(t),D(e,t)}else R(t,r,s,n)}return t.stateNode=s,p(t),N(e,t,o.children),t.child}(e,t,n);case Q:return function(e,t,n){var r=t.type,o=t.pendingProps,i=t.memoizedProps,a=r._currentValue,s=r._changedBits;if(f());else if(0===s&&i===o)return D(e,t);var l=(t.memoizedProps=o).unstable_observedBits;null==l&&(l=Wo),0!=(s&(t.stateNode=l))&&R(t,r,s,n);var c=o.children;return lt("function"==typeof c,"A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),N(e,t,c(a)),t.child}(e,t,n);default:st(!1,"Unknown unit of work tag. This error is likely caused by a bug in React. Please file an issue.")}var r,o,i,a}}},ts=function(e,t,n,r,o){var _=e.createInstance,w=e.createTextInstance,i=e.appendInitialChild,k=e.finalizeInitialChildren,x=e.prepareUpdate,a=e.mutation,s=e.persistence,E=t.getRootHostContainer,C=t.popHostContext,S=t.getHostContext,T=t.popHostContainer,N=n.popContextProvider,A=n.popTopLevelContextObject,P=r.popProvider,O=o.prepareToHydrateHostInstance,I=o.prepareToHydrateHostTextInstance,R=o.popHydrationState;function D(e){e.effectTag|=kr}function j(e){e.effectTag|=Nr}function F(e,t,n){var r=t.memoizedProps;r||st(!1,"Should be resolved by now. This error is likely caused by a bug in React. Please file an issue."),t.tag=$;var o=[];!function(e,t){var n=t.stateNode;for(n&&(n.return=t);null!==n;){if(n.tag===mt||n.tag===V||n.tag===ht)st(!1,"A call cannot have host component children.");else if(n.tag===X)e.push(n.pendingProps.value);else if(null!==n.child){n=(n.child.return=n).child;continue}for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(o,t);var i=(0,r.handler)(r.props,o),a=null!==e?e.child:null;return t.child=Ga(t,a,i,n),t.child}function M(e,t){for(var n=t.child;null!==n;){if(n.tag===mt||n.tag===V)i(e,n.stateNode);else if(n.tag===ht);else if(null!==n.child){n=(n.child.return=n).child;continue}if(n===t)return;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}var L=void 0,U=void 0,B=void 0;if(a)Ri?(L=function(e){},U=function(e,t,n,r,o,i,a,s){(t.updateQueue=n)&&D(t)},B=function(e,t,n,r){n!==r&&D(t)}):st(!1,"Mutating reconciler is disabled.");else if(s)if(Di){var p=s.cloneInstance,l=s.createContainerChildSet,c=s.appendChildToContainerChildSet,u=s.finalizeContainerChildren;L=function(e){var t=e.stateNode;if(null===e.firstEffect);else{var n=t.containerInfo,r=l(n);!function(e,t){for(var n=t.child;null!==n;){if(n.tag===mt||n.tag===V)c(e,n.stateNode);else if(n.tag===ht);else if(null!==n.child){n=(n.child.return=n).child;continue}if(n===t)return;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(r,e),t.pendingChildren=r,D(e),u(n,r)}},U=function(e,t,n,r,o,i,a,s){var l=null===t.firstEffect,c=e.stateNode;if(l&&null===n)t.stateNode=c;else{var u=t.stateNode,d=p(c,n,r,o,i,t,l,u);k(d,r,i,a,s)&&D(t),t.stateNode=d,l?D(t):M(d,t)}},B=function(e,t,n,r){if(n!==r){var o=E(),i=S();t.stateNode=w(r,o,i,t),D(t)}}}else st(!1,"Persistent reconciler is disabled.");else st(!1,"Noop reconciler is disabled.");return{completeWork:function(e,t,n){var r=t.pendingProps;switch(t.tag){case W:return null;case pt:N(t);var o=t.stateNode,i=t.updateQueue;return null!==i&&null!==i.capturedValues&&(t.effectTag&=~Tr,"function"==typeof o.componentDidCatch?t.effectTag|=Ar:i.capturedValues=null),null;case ft:T(t),A(t);var a=t.stateNode;a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(R(t),t.effectTag&=~wr),L(t);var s=t.updateQueue;return null!==s&&null!==s.capturedValues&&(t.effectTag|=Ar),null;case mt:C(t);var l=E(),c=t.type;if(null!==e&&null!=t.stateNode){var u=e.memoizedProps,d=t.stateNode,p=S(),f=x(d,c,u,r,l,p);U(e,t,f,c,u,r,l,p),e.ref!==t.ref&&j(t)}else{if(!r)return null===t.stateNode&&st(!1,"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."),null;var h=S();if(R(t))O(t,l,h)&&D(t);else{var m=_(c,r,l,h,t);M(m,t),k(m,c,r,l,h)&&D(t),t.stateNode=m}null!==t.ref&&j(t)}return null;case V:var g=r;if(e&&null!=t.stateNode){var v=e.memoizedProps;B(e,t,v,g)}else{if("string"!=typeof g)return null===t.stateNode&&st(!1,"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."),null;var y=E(),b=S();R(t)?I(t)&&D(t):t.stateNode=w(g,y,b,t)}return null;case K:return F(e,t,n);case $:return t.tag=K,null;case X:case Y:case G:case J:return null;case ht:return T(t),L(t),null;case gt:return P(t),null;case Q:return null;case z:st(!1,"An indeterminate component should have become determinate before completing. This error is likely caused by a bug in React. Please file an issue.");default:st(!1,"Unknown unit of work tag. This error is likely caused by a bug in React. Please file an issue.")}}}};function ns(e,t){return{value:e,source:t,stack:on(t)}}var rs=f.invokeGuardedCallback,os=f.hasCaughtError,is=f.clearCaughtError,as=null;function ss(e,t){var n=t.source,r=t.stack;null===r&&(r=on(n));var o={componentName:null!==n?nn(n):null,componentStack:null!==r?r:"",error:t.value,errorBoundary:null,errorBoundaryName:null,errorBoundaryFound:!1,willRetry:!1};null!==e&&e.tag===pt&&(o.errorBoundary=e.stateNode,o.errorBoundaryName=nn(e),o.errorBoundaryFound=!0,o.willRetry=!0);try{!function(e){var t=e.error;if(!t||!t.suppressReactErrorLogging){var n=e.componentName,r=e.componentStack,o=e.errorBoundaryName,i=e.errorBoundaryFound,a=e.willRetry,s=(n?"The above error occurred in the <"+n+"> component:":"The above error occurred in one of your React components:")+r+"\n\n"+(i&&o?a?"React will try to recreate this component tree from scratch using the error boundary you provided, "+o+".":"This error was initially handled by the error boundary "+o+".\nRecreating the tree from scratch failed so React will unmount the tree.":"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://fb.me/react-error-boundaries to learn more about error boundaries.");console.error(s)}}(o)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}as=new Set;var ls=function(e,r,t,n,h,o){var m=e.getPublicInstance,i=e.mutation,a=e.persistence,s=function(e,t){ha(e,"componentWillUnmount"),t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount(),ma()};function l(e){var t=e.ref;if(null!==t)if("function"==typeof t){if(rs(null,t,null,null),os()){var n=is();r(e,n)}}else t.current=null}function c(e,t){switch(t.tag){case pt:if(t.effectTag&Pr&&null!==e){var n=e.memoizedProps,r=e.memoizedState;ha(t,"getSnapshotBeforeUpdate");var o=t.stateNode;o.props=t.memoizedProps,o.state=t.memoizedState;var i=o.getSnapshotBeforeUpdate(n,r),a=as;void 0!==i||a.has(t.type)||(a.add(t.type),lt(!1,"%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",nn(t))),o.__reactInternalSnapshotBeforeUpdate=i,ma()}return;case ft:case mt:case V:case ht:return;default:st(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function u(e,t,n,r,o){switch(n.tag){case pt:var i=n.stateNode;if(n.effectTag&kr)if(null===t)ha(n,"componentDidMount"),i.props=n.memoizedProps,i.state=n.memoizedState,i.componentDidMount(),ma();else{var a=t.memoizedProps,s=t.memoizedState;ha(n,"componentDidUpdate"),i.props=n.memoizedProps,i.state=n.memoizedState,i.componentDidUpdate(a,s,i.__reactInternalSnapshotBeforeUpdate),ma()}var l=n.updateQueue;return void(null!==l&&Sa(l,i));case ft:var c=n.updateQueue;if(null!==c){var u=null;if(null!==n.child)switch(n.child.tag){case mt:u=m(n.child.stateNode);break;case pt:u=n.child.stateNode}Sa(c,u)}return;case mt:var d=n.stateNode;if(null===t&&n.effectTag&kr){var p=n.type,f=n.memoizedProps;x(d,p,f,n)}return;case V:case ht:return;default:st(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function d(e,t){switch(e.tag){case pt:var n=e.type,r=e.stateNode,o=e.updateQueue;(null===o||null===o.capturedValues)&&st(!1,"An error logging effect should not have been scheduled if no errors were captured. This error is likely caused by a bug in React. Please file an issue.");var i=o.capturedValues;o.capturedValues=null,"function"!=typeof n.getDerivedStateFromCatch&&h(r),r.props=e.memoizedProps,r.state=e.memoizedState;for(var a=0;a<i.length;a++){var s=i[a],l=s.value,c=s.stack;ss(e,s),r.componentDidCatch(l,{componentStack:null!==c?c:""})}break;case ft:var u=e.updateQueue;(null===u||null===u.capturedValues)&&st(!1,"An error logging effect should not have been scheduled if no errors were captured. This error is likely caused by a bug in React. Please file an issue.");var d=u.capturedValues;u.capturedValues=null;for(var p=0;p<d.length;p++){var f=d[p];ss(e,f),t(f.value)}break;default:st(!1,"This unit of work tag cannot capture errors.  This error is likely caused by a bug in React. Please file an issue.")}}function p(e){var t=e.ref;if(null!==t){var n=e.stateNode,r=void 0;switch(e.tag){case mt:r=m(n);break;default:r=n}"function"==typeof t?t(r):(t.hasOwnProperty("current")||lt(!1,"Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().%s",nn(e),on(e)),t.current=r)}}function f(e){var t=e.ref;null!==t&&("function"==typeof t?t(null):t.current=null)}function g(e){switch(ki(e),e.tag){case pt:l(e);var t=e.stateNode;return void("function"==typeof t.componentWillUnmount&&function(e,t){if(rs(null,s,null,e,t),os()){var n=is();r(e,n)}}(e,t));case mt:return void l(e);case K:return void v(e.stateNode);case ht:return void(Ri&&i?D(e):Di&&a&&b(e))}}function v(e){for(var t=e;;)if(g(t),null===t.child||i&&t.tag===ht){if(t===e)return;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t=(t.child.return=t).child}function y(e){e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)}var b=void 0;if(!i){var _=void 0;if(a){var w=a.replaceContainerChildren,k=a.createContainerChildSet;b=function(e){var t=e.stateNode.containerInfo,n=k(t);w(t,n)},_=function(e){switch(e.tag){case pt:case mt:case V:return;case ft:case ht:var t=e.stateNode,n=t.containerInfo,r=t.pendingChildren;return void w(n,r);default:st(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}}else _=function(e){};if(Di)return{commitResetTextContent:function(e){},commitPlacement:function(e){},commitDeletion:function(e){v(e),y(e)},commitWork:function(e,t){_(t)},commitLifeCycles:u,commitBeforeMutationLifeCycles:c,commitErrorLogging:d,commitAttachRef:p,commitDetachRef:f};st(!1,a?"Persistent reconciler is disabled.":"Noop reconciler is disabled.")}var x=i.commitMount,E=i.commitUpdate,C=i.resetTextContent,S=i.commitTextUpdate,T=i.appendChild,N=i.appendChildToContainer,A=i.insertBefore,P=i.insertInContainerBefore,O=i.removeChild,I=i.removeChildFromContainer;function R(e){return e.tag===mt||e.tag===ft||e.tag===ht}function D(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){var i=t.return;e:for(;;){switch(null===i&&st(!1,"Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue."),i.tag){case mt:r=i.stateNode,o=!1;break e;case ft:case ht:r=i.stateNode.containerInfo,o=!0;break e}i=i.return}n=!0}if(t.tag===mt||t.tag===V)v(t),o?I(r,t.stateNode):O(r,t.stateNode);else if(t.tag===ht){if(r=t.stateNode.containerInfo,null!==t.child){t=(t.child.return=t).child;continue}}else if(g(t),null!==t.child){t=(t.child.return=t).child;continue}if(t===e)return;for(;null===t.sibling;){if(null===t.return||t.return===e)return;(t=t.return).tag===ht&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}if(Ri)return{commitBeforeMutationLifeCycles:c,commitResetTextContent:function(e){C(e.stateNode)},commitPlacement:function(e){var t=function(e){for(var t=e.return;null!==t;){if(R(t))return t;t=t.return}st(!1,"Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e),n=void 0,r=void 0;switch(t.tag){case mt:n=t.stateNode,r=!1;break;case ft:case ht:n=t.stateNode.containerInfo,r=!0;break;default:st(!1,"Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}t.effectTag&Cr&&(C(n),t.effectTag&=~Cr);for(var o=function(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||R(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==mt&&t.tag!==V;){if(t.effectTag&wr)continue e;if(null===t.child||t.tag===ht)continue e;t=(t.child.return=t).child}if(!(t.effectTag&wr))return t.stateNode}}(e),i=e;;){if(i.tag===mt||i.tag===V)o?r?P(n,i.stateNode,o):A(n,i.stateNode,o):r?N(n,i.stateNode):T(n,i.stateNode);else if(i.tag===ht);else if(null!==i.child){i=(i.child.return=i).child;continue}if(i===e)return;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},commitDeletion:function(e){D(e),y(e)},commitWork:function(e,t){switch(t.tag){case pt:return;case mt:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,o=null!==e?e.memoizedProps:r,i=t.type,a=t.updateQueue;(t.updateQueue=null)!==a&&E(n,a,i,o,r,t)}return;case V:null===t.stateNode&&st(!1,"This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var s=t.stateNode,l=t.memoizedProps,c=null!==e?e.memoizedProps:l;return void S(s,c,l);case ft:return;default:st(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}},commitLifeCycles:u,commitErrorLogging:d,commitAttachRef:p,commitDetachRef:f};st(!1,"Mutating reconciler is disabled.")},cs={},us=function(e){var r=e.shouldSetTextContent,t=e.hydration;if(!t)return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){st(!1,"Expected prepareToHydrateHostInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.")},prepareToHydrateHostTextInstance:function(){st(!1,"Expected prepareToHydrateHostTextInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.")},popHydrationState:function(e){return!1}};var s=t.canHydrateInstance,l=t.canHydrateTextInstance,o=t.getNextHydratableSibling,n=t.getFirstHydratableChild,i=t.hydrateInstance,c=t.hydrateTextInstance,u=t.didNotMatchHydratedContainerTextInstance,d=t.didNotMatchHydratedTextInstance,a=t.didNotHydrateContainerInstance,p=t.didNotHydrateInstance,f=t.didNotFindHydratableContainerInstance,h=t.didNotFindHydratableContainerTextInstance,m=t.didNotFindHydratableInstance,g=t.didNotFindHydratableTextInstance,v=null,y=null,b=!1;function _(e,t){switch(e.tag){case ft:a(e.stateNode.containerInfo,t);break;case mt:p(e.type,e.memoizedProps,e.stateNode,t)}var n,r=((n=li(mt,null,null,Zo)).type="DELETED",n);r.stateNode=t,r.return=e,r.effectTag=Er,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function w(e,t){switch(t.effectTag|=wr,e.tag){case ft:var n=e.stateNode.containerInfo;switch(t.tag){case mt:var r=t.type,o=t.pendingProps;f(n,r,o);break;case V:var i=t.pendingProps;h(n,i)}break;case mt:var a=e.type,s=e.memoizedProps,l=e.stateNode;switch(t.tag){case mt:var c=t.type,u=t.pendingProps;m(a,s,l,c,u);break;case V:var d=t.pendingProps;g(a,s,l,d)}break;default:return}}function k(e,t){switch(e.tag){case mt:var n=e.type,r=e.pendingProps,o=s(t,n,r);return null!==o&&(e.stateNode=o,!0);case V:var i=e.pendingProps,a=l(t,i);return null!==a&&(e.stateNode=a,!0);default:return!1}}function x(e){for(var t=e.return;null!==t&&t.tag!==mt&&t.tag!==ft;)t=t.return;v=t}return{enterHydrationState:function(e){var t=e.stateNode.containerInfo;return y=n(t),v=e,b=!0},resetHydrationState:function(){y=v=null,b=!1},tryToClaimNextHydratableInstance:function(e){if(b){var t=y;if(!t)return w(v,e),b=!1,void(v=e);if(!k(e,t)){if(!(t=o(t))||!k(e,t))return w(v,e),b=!1,void(v=e);_(v,y)}v=e,y=n(t)}},prepareToHydrateHostInstance:function(e,t,n){var r=e.stateNode,o=i(r,e.type,e.memoizedProps,t,n,e);return null!==(e.updateQueue=o)},prepareToHydrateHostTextInstance:function(e){var t=e.stateNode,n=e.memoizedProps,r=c(t,n,e);if(r){var o=v;if(null!==o)switch(o.tag){case ft:var i=o.stateNode.containerInfo;u(i,t,n);break;case mt:var a=o.type,s=o.memoizedProps,l=o.stateNode;d(a,s,l,t,n)}}return r},popHydrationState:function(e){if(e!==v)return!1;if(!b)return x(e),!(b=!0);var t=e.type;if(e.tag!==mt||"head"!==t&&"body"!==t&&!r(t,e.memoizedProps))for(var n=y;n;)_(e,n),n=o(n);return x(e),y=v?o(e.stateNode):null,!0}}},ds={debugTool:null},ps=void 0;ps={};var fs=f.invokeGuardedCallback,hs=f.hasCaughtError,ms=f.clearCaughtError,gs=void 0,vs=void 0,ys=void 0,bs=void 0;vs=gs=!1;var _s={};ys=function(e){var t=nn(e)||"ReactClass";_s[t]||(lt(!1,"Can't call setState (or forceUpdate) on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.%s",on(e)),_s[t]=!0)};var ws=function(e){var t,n,r,o,i,a,s,l,c,u,d,p,f,h,m,g,v,y=function(){var r=[],o=void 0;o=[];var i=-1;return{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===i},pop:function(e,t){i<0?lt(!1,"Unexpected pop."):(t!==o[i]&&lt(!1,"Unexpected Fiber popped."),e.current=r[i],r[i]=null,o[i]=null,i--)},push:function(e,t,n){r[++i]=e.current,o[i]=n,e.current=t},checkThatStackIsEmpty:function(){-1!==i&&lt(!1,"Expected an empty stack. Something was not reset properly.")},resetStackAfterFatalErrorInDev:function(){i=-1,r.length=0,o.length=0}}}(),b=function(e,t){var o=e.getChildHostContext,r=e.getRootHostContext,n=t.createCursor,i=t.push,a=t.pop,s=n(cs),l=n(cs),c=n(cs);function u(e){return e===cs&&st(!1,"Expected host context to exist. This error is likely caused by a bug in React. Please file an issue."),e}return{getHostContext:function(){return u(s.current)},getRootHostContainer:function(){return u(c.current)},popHostContainer:function(e){a(s,e),a(l,e),a(c,e)},popHostContext:function(e){l.current===e&&(a(s,e),a(l,e))},pushHostContainer:function(e,t){i(c,t,e),i(l,e,e),i(s,cs,e);var n=r(t);a(s,e),i(s,n,e)},pushHostContext:function(e){var t=u(c.current),n=u(s.current),r=o(n,e.type,t);n!==r&&(i(l,e,e),i(s,r,e))}}}(e,y),_=function(e){var t=e.createCursor,o=e.push,i=e.pop,a=t(dt),s=t(!1),l=dt;function c(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function r(e){return e.tag===pt&&null!=e.type.childContextTypes}function u(e,t){var n,r=e.stateNode,o=e.type.childContextTypes;if("function"!=typeof r.getChildContext){var i=nn(e)||"Unknown";return ps[i]||(ps[i]=!0,lt(!1,"%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",i,i)),t}for(var a in sn.setCurrentPhase("getChildContext"),ha(e,"getChildContext"),n=r.getChildContext(),ma(),sn.setCurrentPhase(null),n)a in o||st(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',nn(e)||"Unknown",a);var s=nn(e)||"Unknown";return ut(o,n,"child context",s,sn.getCurrentFiberStackAddendum),ct({},t,n)}return{getUnmaskedContext:function(e){return r(e)?l:a.current},cacheContext:c,getMaskedContext:function(e,t){var n=e.type.contextTypes;if(!n)return dt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={};for(var i in n)o[i]=t[i];var a=nn(e)||"Unknown";return ut(n,o,"context",a,sn.getCurrentFiberStackAddendum),r&&c(e,t,o),o},hasContextChanged:function(){return s.current},isContextConsumer:function(e){return e.tag===pt&&null!=e.type.contextTypes},isContextProvider:r,popContextProvider:function(e){r(e)&&(i(s,e),i(a,e))},popTopLevelContextObject:function(e){i(s,e),i(a,e)},pushTopLevelContextObject:function(e,t,n){null!=a.cursor&&st(!1,"Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue."),o(a,t,e),o(s,n,e)},processChildContext:u,pushContextProvider:function(e){if(!r(e))return!1;var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||dt;return l=a.current,o(a,n,e),o(s,s.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||st(!1,"Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue."),t){var r=u(e,l);n.__reactInternalMemoizedMergedChildContext=r,i(s,e),i(a,e),o(a,r,e),o(s,t,e)}else i(s,e),o(s,t,e)},findCurrentUnmaskedContext:function(e){Lr(e)&&e.tag===pt||st(!1,"Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");for(var t=e;t.tag!==ft;){if(r(t))return t.stateNode.__reactInternalMemoizedMergedChildContext;var n=t.return;n||st(!1,"Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue."),t=n}return t.stateNode.context}}}(y),w=(n=(t=y).createCursor,r=t.push,o=t.pop,i=n(null),a=n(null),s=n(0),l=void 0,l={},{pushProvider:function(e){var t=e.type._context;r(s,t._changedBits,e),r(a,t._currentValue,e),r(i,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode,lt(null===t._currentRenderer||t._currentRenderer===l,"Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer=l},popProvider:function(e){var t=s.current,n=a.current;o(i,e),o(a,e),o(s,e);var r=e.type._context;r._currentValue=n,r._changedBits=t}}),k=b.popHostContext,x=b.popHostContainer,E=_.popTopLevelContextObject,C=_.popContextProvider,S=w.popProvider,T=us(e),N=es(e,b,_,w,T,Ne,Te).beginWork,A=ts(e,b,_,w,T).completeWork,P=(u=_,d=w,p=ve,f=(c=b).popHostContainer,h=c.popHostContext,m=u.popContextProvider,g=u.popTopLevelContextObject,v=d.popProvider,{throwException:function(e,t,n){t.effectTag|=Ir,t.firstEffect=t.lastEffect=null;var r=ns(n,t),o=e;do{switch(o.tag){case ft:var i=r;return ka(o),o.updateQueue.capturedValues=[i],void(o.effectTag|=Rr);case pt:var a=o.type,s=o.stateNode;if((o.effectTag&Tr)===br&&("function"==typeof a.getDerivedStateFromCatch&&ji||null!==s&&"function"==typeof s.componentDidCatch&&!p(s))){ka(o);var l=o.updateQueue,c=l.capturedValues;return null===c?l.capturedValues=[r]:c.push(r),void(o.effectTag|=Rr)}}o=o.return}while(null!==o)},unwindWork:function(e){switch(e.tag){case pt:m(e);var t=e.effectTag;return t&Rr?(e.effectTag=t&~Rr|Tr,e):null;case ft:f(e),g(e);var n=e.effectTag;return n&Rr?(e.effectTag=n&~Rr|Tr,e):null;case mt:return h(e),null;case ht:return f(e),null;case gt:return v(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case pt:m(e);break;case ft:f(e),g(e);break;case mt:h(e);break;case ht:f(e);break;case gt:v(e)}}}),O=P.throwException,I=P.unwindWork,R=P.unwindInterruptedWork,D=ls(e,Ce,0,0,function(e){null===ae?ae=new Set([e]):ae.add(e)}),j=D.commitBeforeMutationLifeCycles,F=D.commitResetTextContent,M=D.commitPlacement,L=D.commitDeletion,U=D.commitWork,B=D.commitLifeCycles,H=D.commitErrorLogging,q=D.commitAttachRef,z=D.commitDetachRef,W=e.now,V=e.scheduleDeferredCallback,K=e.cancelDeferredCallback,$=e.prepareForCommit,X=e.resetAfterCommit,G=W(),J=(Jo(0),G),Q=0,Y=Vo,Z=!1,ee=null,te=null,ne=Vo,re=null,oe=!1,ie=!1,ae=null,se=null,le=void 0,ce=void 0,ue=void 0,de=void 0,pe=void 0;function fe(){if(null!==ee)for(var e=ee.return;null!==e;)R(e),e=e.return;Ei.discardPendingWarnings(),y.checkThatStackIsEmpty(),ne=Vo,ee=te=null,ie=!1}function he(){for(;null!==re;){sn.setCurrentFiber(re),ua();var e=re.effectTag;if(e&Cr&&F(re),e&Nr){var t=re.alternate;null!==t&&z(t)}switch(e&(wr|kr|Er)){case wr:M(re),re.effectTag&=~wr;break;case xr:M(re),re.effectTag&=~wr;var n=re.alternate;U(n,re);break;case kr:var r=re.alternate;U(r,re);break;case Er:L(re)}re=re.nextEffect}sn.resetCurrentFiber()}function me(){for(;null!==re;){if(re.effectTag&Pr){ua();var e=re.alternate;j(e,re)}re=re.nextEffect}}function ge(e,t,n){for(Ei.flushPendingUnsafeLifecycleWarnings(),Ui&&Ei.flushPendingDeprecationWarnings();null!==re;){var r=re.effectTag;if(r&(kr|Sr)){ua();var o=re.alternate;B(e,o,re,t,n)}r&Ar&&H(re,at),r&Nr&&(ua(),q(re));var i=re.nextEffect;re.nextEffect=null,re=i}}function ve(e){return null!==ae&&ae.has(e)}function ye(e){oe=Z=!0,function(){if(Ii){if(!Bi)return;Vi=!(Wi=!0),Ji.clear(),Yi("(Committing Changes)")}}();var t=e.stateNode;t.current===e&&st(!1,"Cannot commit the same tree as before. This is probably a bug related to the return field. This error is likely caused by a bug in React. Please file an issue.");var n=t.pendingCommitExpirationTime;n===Vo&&st(!1,"Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue."),t.pendingCommitExpirationTime=Vo;var r=Ae();Ut.current=null;var o=void 0;for(o=e.effectTag>_r?null!==e.lastEffect?(e.lastEffect.nextEffect=e).firstEffect:e:e.firstEffect,$(t.containerInfo),re=o,function(){if(Ii){if(!Bi)return;Xi=0,Yi("(Committing Snapshot Effects)")}}();null!==re;){var i=!1,a=void 0;fs(null,me,null),hs()&&(i=!0,a=ms()),i&&(null===re&&st(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),Ce(re,a),null!==re&&(re=re.nextEffect))}for(!function(){if(Ii){if(!Bi)return;var e=Xi;Xi=0,Zi("(Committing Snapshot Effects: "+e+" Total)","(Committing Snapshot Effects)",null)}}(),re=o,function(){if(Ii){if(!Bi)return;Xi=0,Yi("(Committing Host Effects)")}}();null!==re;){var s=!1,l=void 0;fs(null,he,null),hs()&&(s=!0,l=ms()),s&&(null===re&&st(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),Ce(re,l),null!==re&&(re=re.nextEffect))}for(!function(){if(Ii){if(!Bi)return;var e=Xi;Xi=0,Zi("(Committing Host Effects: "+e+" Total)","(Committing Host Effects)",null)}}(),X(t.containerInfo),t.current=e,re=o,function(){if(Ii){if(!Bi)return;Xi=0,Yi("(Calling Lifecycle Methods)")}}();null!==re;){var c=!1,u=void 0;fs(null,ge,null,t,r,n),hs()&&(c=!0,u=ms()),c&&(null===re&&st(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),Ce(re,u),null!==re&&(re=re.nextEffect))}Z=oe=!1,function(){if(Ii){if(!Bi)return;var e=Xi;Xi=0,Zi("(Calling Lifecycle Methods: "+e+" Total)","(Calling Lifecycle Methods)",null)}}(),function(){if(Ii){if(!Bi)return;var e=null;Vi?e="Lifecycle hook scheduled a cascading update":0<$i&&(e="Caused by a cascading update in earlier commit"),$i++,Wi=Vi=!1,Ji.clear(),Zi("(Committing Changes)","(Committing Changes)",e)}}(),wi(e.stateNode),ds.debugTool&&ds.debugTool.onCommitWork(e);var d=t.current.expirationTime;return d===Vo&&(ae=null),d}function be(e,t){if(t===$o||e.expirationTime!==$o){for(var n=function(e){switch(e.tag){case ft:case pt:var t=e.updateQueue;return null===t?Vo:t.expirationTime;default:return Vo}}(e),r=e.child;null!==r;)r.expirationTime!==Vo&&(n===Vo||n>r.expirationTime)&&(n=r.expirationTime),r=r.sibling;e.expirationTime=n}}function _e(e){for(;;){var t=e.alternate;sn.setCurrentFiber(e);var n=e.return,r=e.sibling;if((e.effectTag&Ir)===br){var o=A(t,e,ne);if(pa(e),be(e,ne),sn.resetCurrentFiber(),null!==o)return pa(e),ds.debugTool&&ds.debugTool.onCompleteWork(e),o;if(null!==n&&(n.effectTag&Ir)===br){null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect);var i=e.effectTag;_r<i&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)}if(ds.debugTool&&ds.debugTool.onCompleteWork(e),null!==r)return r;if(null!==n){e=n;continue}return ie=!0,null}var a=I(e);if(e.effectTag&Tr?fa(e):pa(e),sn.resetCurrentFiber(),null!==a)return pa(e),ds.debugTool&&ds.debugTool.onCompleteWork(e),a.effectTag&=Or,a;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=Ir),ds.debugTool&&ds.debugTool.onCompleteWork(e),null!==r)return r;if(null===n)return null;e=n}return null}function we(e){var t=e.alternate;!function(e){if(Ii){if(!Bi||ia(e))return;if(!na(Hi=e,null))return;e._debugIsCurrentlyTiming=!0}}(e),sn.setCurrentFiber(e),Li&&(le=mi(le,e));var n=N(t,e,ne);return sn.resetCurrentFiber(),ue&&pe(),ds.debugTool&&ds.debugTool.onBeginWork(e),null===n&&(n=_e(e)),Ut.current=null,n}function ke(e){if(e)for(;null!==ee&&!it();)ee=we(ee);else for(;null!==ee;)ee=we(ee)}function xe(e,t,n){Z&&st(!1,"renderRoot was called recursively. This error is likely caused by a bug in React. Please file an issue."),Z=!0,t===ne&&e===te&&null!==ee||(fe(),ne=t,ee=ci((te=e).current,null,ne),e.pendingCommitExpirationTime=Vo);var r=!1;for(!function(e){if(Ii){if(Hi=e,!Bi)return;$i=0,Yi("(React Tree Reconciliation)"),ca()}}(ee);;){try{ke(n)}catch(e){if(null===ee){r=!0,at(e);break}if(Li)ce(ee,e,n);var o=ee,i=o.return;if(null===i){r=!0,at(e);break}O(i,o,e),ee=_e(o)}break}var a=!1;return Z=!1,r?(ga(se,a),se=null,y.resetStackAfterFatalErrorInDev(),null):null!==ee?(ga(se,a),se=null):ie?(ga(se,a=!0),se=null,e.pendingCommitExpirationTime=t,e.current.alternate):(ga(se,a),se=null,void st(!1,"Expired work should have completed. This error is likely caused by a bug in React. Please file an issue."))}function Ee(e,t,n,r){xa(t,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:ns(n,e),next:null}),Ne(t,r)}function Ce(e,t){return function(e,t,n){Z&&!oe&&st(!1,"dispatch: Cannot dispatch during the render phase.");for(var r=e.return;null!==r;){switch(r.tag){case pt:var o=r.type,i=r.stateNode;if("function"==typeof o.getDerivedStateFromCatch||"function"==typeof i.componentDidCatch&&!ve(i))return void Ee(e,r,t,n);break;case ft:return void Ee(e,r,t,n)}r=r.return}e.tag===ft&&Ee(e,e,t,n)}(e,t,Ko)}function Se(e){return Yo(e,5e3,250)}function Te(e){var t=void 0;if(Y!==Vo)t=Y;else if(Z)t=oe?Ko:ne;else if(e.mode&ei)if(Ve){var n=Ae();t=Yo(n,500,100)}else{t=Se(Ae())}else t=Ko;return Ve&&(Le===Vo||Le<t)&&(Le=t),t}function Ne(e,t){return function(e,t,n){if(Ii&&(Wi&&(Vi=!0),null!==qi&&"componentWillMount"!==qi&&"componentWillReceiveProps"!==qi&&(Ki=!0)),!n&&e.tag===pt){var r=e.stateNode;bs(r)}var o=e;for(;null!==o;){if((o.expirationTime===Vo||o.expirationTime>t)&&(o.expirationTime=t),null!==o.alternate&&(o.alternate.expirationTime===Vo||o.alternate.expirationTime>t)&&(o.alternate.expirationTime=t),null===o.return){if(o.tag!==ft)return void(n||e.tag!==pt||ys(e));var i=o.stateNode;!Z&&ne!==Vo&&t<ne&&(se=e,fe()),Z&&!oe&&te===i||Qe(i,t),$e<Xe&&st(!1,"Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.")}o=o.return}}(e,t,!1)}function Ae(){return J=W()-G,Jo(J)}function Pe(e,t,n,r,o){var i=Y;Y=Ko;try{return e(t,n,r,o)}finally{Y=i}}Li&&(ue=!1,de=le=null,ce=function(e,t,n){switch(mi(e,le),e.tag){case ft:x(e),E(e);break;case mt:k(e);break;case pt:C(e);break;case ht:x(e);break;case gt:S(e)}ue=!0,de=t,fs(null,ke,null,n),ue=!1,de=null,hs()?ms():ee=e},pe=function(){throw de});var Oe=null,Ie=null,Re=Vo,De=-1,je=!1,Fe=null,Me=Vo,Le=Vo,Ue=!1,Be=!1,He=null,qe=null,ze=!1,We=!1,Ve=!1,Ke=null,$e=1e3,Xe=0,Ge=1;function Je(e){if(Re!==Vo){if(Re<e)return;K(De)}else Ii&&Bi&&!Gi&&(Gi=!0,Yi("(Waiting for async callback...)"));var t=W()-G,n=Qo(e);Re=e,De=V(Ze,{timeout:n-t})}function Qe(e,t){!function(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===Ie?(Oe=Ie=e,e.nextScheduledRoot=e):(Ie.nextScheduledRoot=e,(Ie=e).nextScheduledRoot=Oe);else{var n=e.remainingExpirationTime;(n===Vo||t<n)&&(e.remainingExpirationTime=t)}}(e,t),je||(ze?We&&rt(Fe=e,Me=Ko,!1):t===Ko?et():Je(t))}function Ye(){var e=Vo,t=null;if(null!==Ie)for(var n=Ie,r=Oe;null!==r;){var o=r.remainingExpirationTime;if(o===Vo){if((null===n||null===Ie)&&st(!1,"Should have a previous and last root. This error is likely caused by a bug in React. Please file an issue."),r===r.nextScheduledRoot){r.nextScheduledRoot=null,Oe=Ie=null;break}if(r===Oe){var i=r.nextScheduledRoot;Oe=i,Ie.nextScheduledRoot=i,r.nextScheduledRoot=null}else{if(r===Ie){(Ie=n).nextScheduledRoot=Oe,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((e===Vo||o<e)&&(e=o,t=r),r===Ie)break;r=(n=r).nextScheduledRoot}}null!==Fe&&Fe===t&&e===Ko?Xe++:Xe=0,Fe=t,Me=e}function Ze(e){tt(Vo,!0,e)}function et(){tt(Ko,!1,null)}function tt(e,t,n){if(qe=n,Ye(),Ii&&null!==qe){var r=Me<Ae(),o=Qo(Me);i=r,a=o,Ii&&Bi&&(Gi=!1,Zi("(Waiting for async callback... will force flush in "+a+" ms)","(Waiting for async callback...)",i?"React was blocked by main thread":null))}var i,a;if(t)for(;null!==Fe&&Me!==Vo&&(e===Vo||Me<=e)&&(!Ue||Ae()>=Me);)rt(Fe,Me,!Ue),Ye();else for(;null!==Fe&&Me!==Vo&&(e===Vo||Me<=e);)rt(Fe,Me,!1),Ye();null!==qe&&(Re=Vo,De=-1),Me!==Vo&&Je(Me),qe=null,Ue=!1,nt()}function nt(){if(Xe=0,null!==Ke){var e=Ke;Ke=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){Be||(Be=!0,He=r)}}}if(Be){var r=He;throw He=null,Be=!1,r}}function rt(e,t,n){if(je&&st(!1,"performWorkOnRoot was called recursively. This error is likely caused by a bug in React. Please file an issue."),je=!0,n){var r=e.finishedWork;null!==r?ot(e,r,t):(e.finishedWork=null)!==(r=xe(e,t,!0))&&(it()?e.finishedWork=r:ot(e,r,t))}else{var o=e.finishedWork;null!==o?ot(e,o,t):(e.finishedWork=null)!==(o=xe(e,t,!1))&&ot(e,o,t)}je=!1}function ot(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Ke?Ke=[r]:Ke.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=Vo);e.finishedWork=null,e.remainingExpirationTime=ye(t)}function it(){return null!==qe&&(!(qe.timeRemaining()>Ge)&&(Ue=!0))}function at(e){null===Fe&&st(!1,"Should be working on a root. This error is likely caused by a bug in React. Please file an issue."),Fe.remainingExpirationTime=Vo,Be||(Be=!0,He=e)}return{recalculateCurrentTime:Ae,computeExpirationForFiber:Te,scheduleWork:Ne,requestWork:Qe,flushRoot:function(e,t){je&&st(!1,"work.commit(): Cannot commit while already rendering. This likely means you attempted to commit from inside a lifecycle method."),rt(Fe=e,Me=t,!1),et(),nt()},batchedUpdates:function(e,t){var n=ze;ze=!0;try{return e(t)}finally{(ze=n)||je||et()}},unbatchedUpdates:function(e,t){if(ze&&!We){We=!0;try{return e(t)}finally{We=!1}}return e(t)},flushSync:function(e,t){je&&st(!1,"flushSync was called from inside a lifecycle method. It cannot be called when React is already rendering.");var n=ze;ze=!0;try{return Pe(e,t)}finally{ze=n,et()}},flushControlled:function(e){var t=ze;ze=!0;try{Pe(e)}finally{(ze=t)||je||tt(Ko,!1,null)}},deferredUpdates:function(e){var t=Y,n=Ae();Y=Se(n);try{return e()}finally{Y=t}},syncUpdates:Pe,interactiveUpdates:function(e,t,n){if(Ve)return e(t,n);ze||je||Le===Vo||(tt(Le,!1,null),Le=Vo);var r=Ve,o=ze;ze=Ve=!0;try{return e(t,n)}finally{Ve=r,(ze=o)||je||et()}},flushInteractiveUpdates:function(){je||Le===Vo||(tt(Le,!1,null),Le=Vo)},computeUniqueAsyncExpiration:function(){var e=Se(Ae());return e<=Q&&(e=Q+1),Q=e},legacyContext:_}},ks=void 0;ks=!(bs=function(e){switch(sn.phase){case"getChildContext":if(vs)return;lt(!1,"setState(...): Cannot call setState() inside getChildContext()"),vs=!0;break;case"render":if(gs)return;lt(!1,"Cannot update during an existing state transition (such as within `render` or another component's constructor). Render methods should be a pure function of props and state; constructor side-effects are an anti-pattern, but can be moved to `componentWillMount`."),gs=!0}});var xs=function(e){var n=e.getPublicInstance,t=ws(e),r=t.computeUniqueAsyncExpiration,i=t.recalculateCurrentTime,a=t.computeExpirationForFiber,p=t.scheduleWork,o=t.requestWork,s=t.flushRoot,l=t.batchedUpdates,c=t.unbatchedUpdates,u=t.flushSync,d=t.flushControlled,f=t.deferredUpdates,h=t.syncUpdates,m=t.interactiveUpdates,g=t.flushInteractiveUpdates,v=t.legacyContext,y=v.findCurrentUnmaskedContext,b=v.isContextProvider,_=v.processChildContext;function w(e,t,n,r,o,i){var a=t.current;ds.debugTool&&(null===a.alternate?ds.debugTool.onMountContainer(t):null===e?ds.debugTool.onUnmountContainer(t):ds.debugTool.onUpdateContainer(t));var s,l,c,u,d=function(e){if(!e)return dt;var t=yr(e),n=y(t);return b(t)?_(t,n):n}(n);return null===t.context?t.context=d:t.pendingContext=d,s=a,l=e,c=o,u=i,"render"!==sn.phase||null===sn.current||ks||lt(!(ks=!0),"Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",nn(sn.current)||"Unknown"),lt(null===(u=void 0===u?null:u)||"function"==typeof u,"render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",u),xa(s,{expirationTime:c,partialState:{element:l},callback:u,isReplace:!1,isForced:!1,capturedValue:null,next:null}),p(s,c),c}function k(e){var t=function(e){var t=Hr(e);if(!t)return null;for(var n=t;;){if(n.tag===mt||n.tag===V)return n;if(n.child)n=(n.child.return=n).child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:t.stateNode}return{createContainer:function(e,t,n){return gi(e,t,n)},updateContainer:function(e,t,n,r){var o=t.current;i();return w(e,t,n,0,a(o),r)},updateContainerAtExpirationTime:function(e,t,n,r,o){i();return w(e,t,n,0,r,o)},flushRoot:s,requestWork:o,computeUniqueAsyncExpiration:r,batchedUpdates:l,unbatchedUpdates:c,deferredUpdates:f,syncUpdates:h,interactiveUpdates:m,flushInteractiveUpdates:g,flushControlled:d,flushSync:u,getPublicRootInstance:function(e){var t=e.current;if(!t.child)return null;switch(t.child.tag){case mt:return n(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:k,findHostInstanceWithNoPortals:function(e){var t=function(e){var t=Hr(e);if(!t)return null;for(var n=t;;){if(n.tag===mt||n.tag===V)return n;if(n.child&&n.tag!==ht)n=(n.child.return=n).child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:t.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return lt(!1,"The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://fb.me/react-devtools"),!0;try{var n=t.inject(e);vi=_i(function(e){return t.onCommitFiberRoot(n,e)}),yi=_i(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){lt(!1,"React DevTools encountered an error: %s.",e)}return!0}(ct({},e,{findHostInstanceByFiber:function(e){return k(e)},findFiberByHostInstance:function(e){return t?t(e):null}}))}}},Es=Object.freeze({default:xs}),Cs=Es&&xs||Es,Ss=Cs.default?Cs.default:Cs;i.canUseDOM&&"function"!=typeof requestAnimationFrame&&lt(!1,"React depends on requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills");var Ts="object"==typeof performance&&"function"==typeof performance.now,Ns=void 0;Ns=Ts?function(){return performance.now()}:function(){return Date.now()};var As=void 0,Ps=void 0;if(i.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Os=null,Is=!1,Rs=-1,Ds=!1,js=0,Fs=33,Ms=33,Ls=void 0;Ls=Ts?{didTimeout:!1,timeRemaining:function(){var e=js-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=js-Date.now();return 0<e?e:0}};var Us="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Us){Is=!1;var t=Ns();if(js-t<=0){if(!(-1!==Rs&&Rs<=t))return void(Ds||(Ds=!0,requestAnimationFrame(Bs)));Ls.didTimeout=!0}else Ls.didTimeout=!1;Rs=-1;var n=Os;(Os=null)!==n&&n(Ls)}},!1);var Bs=function(e){Ds=!1;var t=e-js+Ms;t<Ms&&Fs<Ms?(t<8&&(t=8),Ms=t<Fs?Fs:t):Fs=t,js=e+Ms,Is||(Is=!0,window.postMessage(Us,"*"))};As=function(e,t){return Os=e,null!=t&&"number"==typeof t.timeout&&(Rs=Ns()+t.timeout),Ds||(Ds=!0,requestAnimationFrame(Bs)),0},Ps=function(){Os=null,Is=!1,Rs=-1}}else As=window.requestIdleCallback,Ps=window.cancelIdleCallback;else As=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},Ps=function(e){clearTimeout(e)};var Hs=!1;function qs(e,t){null==t.selected||Hs||(lt(!1,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Hs=!0)}function zs(e,t){var n,r,o=ct({children:void 0},t),i=(n=t.children,r="",a.Children.forEach(n,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(r+=e))}),r);return i&&(o.children=i),o}var Ws=sn.getCurrentFiberOwnerName,Vs=sn.getCurrentFiberStackAddendum,Ks=void 0;function $s(){var e=Ws();return e?"\n\nCheck the render method of `"+e+"`.":""}Ks=!1;var Xs=["value","defaultValue"];function Gs(e,t,n,r){var o=e.options;if(t){for(var i=n,a={},s=0;s<i.length;s++)a["$"+i[s]]=!0;for(var l=0;l<o.length;l++){var c=a.hasOwnProperty("$"+o[l].value);o[l].selected!==c&&(o[l].selected=c),c&&r&&(o[l].defaultSelected=!0)}}else{for(var u=""+n,d=null,p=0;p<o.length;p++){if(o[p].value===u)return o[p].selected=!0,void(r&&(o[p].defaultSelected=!0));null!==d||o[p].disabled||(d=o[p])}null!==d&&(d.selected=!0)}}function Js(e,t){return ct({},t,{value:void 0})}function Qs(e,t){var n=e;!function(e){In.checkPropTypes("select",e,Vs);for(var t=0;t<Xs.length;t++){var n=Xs[t];if(null!=e[n]){var r=Array.isArray(e[n]);e.multiple&&!r?lt(!1,"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,$s()):!e.multiple&&r&&lt(!1,"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,$s())}}}(t);var r=t.value;n._wrapperState={initialValue:null!=r?r:t.defaultValue,wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||Ks||(lt(!1,"Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"),Ks=!0)}var Ys=sn.getCurrentFiberStackAddendum,Zs=!1;function el(e,t){var n=e;return null!=t.dangerouslySetInnerHTML&&st(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),ct({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tl(e,t){var n=e;In.checkPropTypes("textarea",t,Ys),void 0===t.value||void 0===t.defaultValue||Zs||(lt(!1,"Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components"),Zs=!0);var r=t.value;if(null==r){var o=t.defaultValue,i=t.children;null!=i&&(lt(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=o&&st(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(i)&&(i.length<=1||st(!1,"<textarea> can only have at most one child."),i=i[0]),o=""+i),null==o&&(o=""),r=o}n._wrapperState={initialValue:""+r}}function nl(e,t){var n=e,r=t.value;if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)}function rl(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&(n.value=r)}var ol="http://www.w3.org/1999/xhtml",il="http://www.w3.org/1998/Math/MathML",al="http://www.w3.org/2000/svg",sl={html:ol,mathml:il,svg:al};function ll(e){switch(e){case"svg":return al;case"math":return il;default:return ol}}function cl(e,t){return null==e||e===ol?ll(t):e===al&&"foreignObject"===t?ol:e}var ul,dl=void 0,pl=(ul=function(e,t){if(e.namespaceURI!==sl.svg||"innerHTML"in e)e.innerHTML=t;else{(dl=dl||document.createElement("div")).innerHTML="<svg>"+t+"</svg>";for(var n=dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ul(e,t,n,r)})}:ul),fl=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===Nt)return void(n.nodeValue=t)}e.textContent=t},hl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var ml=["Webkit","ms","Moz","O"];function gl(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||hl.hasOwnProperty(e)&&hl[e]?(""+t).trim():t+"px"}Object.keys(hl).forEach(function(r){ml.forEach(function(e){var t,n;hl[(t=e,n=r,t+n.charAt(0).toUpperCase()+n.substring(1))]=hl[r]})});var vl=/^(?:webkit|moz|o)[A-Z]/,yl=/;\s*$/,bl={},_l={},wl=!1,kl=!1,xl=function(e,t,n){var r,o,i,a,s,l,c,u,d,p,f;-1<e.indexOf("-")?(l=e,c=n,bl.hasOwnProperty(l)&&bl[l]||(bl[l]=!0,lt(!1,"Unsupported style property %s. Did you mean %s?%s",l,h(l),c()))):vl.test(e)?(a=e,s=n,bl.hasOwnProperty(a)&&bl[a]||(bl[a]=!0,lt(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",a,a.charAt(0).toUpperCase()+a.slice(1),s()))):yl.test(t)&&(r=e,o=t,i=n,_l.hasOwnProperty(o)&&_l[o]||(_l[o]=!0,lt(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.%s',r,o.replace(yl,""),i()))),"number"==typeof t&&(isNaN(t)?(p=e,f=n,wl||lt(!(wl=!0),"`NaN` is an invalid value for the `%s` css style property.%s",p,f())):isFinite(t)||(u=e,d=n,kl||lt(!(kl=!0),"`Infinity` is an invalid value for the `%s` css style property.%s",u,d())))};function El(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(null!=o){var i=0===r.indexOf("--");t+=n+s(r)+":",t+=gl(r,o,i),n=";"}}return t||null}function Cl(e,t,n){var r=e.style;for(var o in t)if(t.hasOwnProperty(o)){var i=0===o.indexOf("--");i||xl(o,t[o],n);var a=gl(o,t[o],i);"float"===o&&(o="cssFloat"),i?r.setProperty(o,a):r[o]=a}}var Sl=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Tl="__html";function Nl(e,t,n){t&&(Sl[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&st(!1,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&st(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),"object"==typeof t.dangerouslySetInnerHTML&&Tl in t.dangerouslySetInnerHTML||st(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),lt(t.suppressContentEditableWarning||!t.contentEditable||null==t.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional.%s",n()),null!=t.style&&"object"!=typeof t.style&&st(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",n()))}function Al(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pl={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",enctype:"encType",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Ol={"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Il={},Rl=new RegExp("^(aria)-["+mn+"]*$"),Dl=new RegExp("^(aria)[A-Z]["+mn+"]*$"),jl=Object.prototype.hasOwnProperty;function Fl(){var e=Bt.getStackAddendum();return null!=e?e:""}function Ml(e,t){if(jl.call(Il,t)&&Il[t])return!0;if(Dl.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=Ol.hasOwnProperty(n)?n:null;if(null==r)return lt(!1,"Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.%s",t,Fl()),Il[t]=!0;if(t!==r)return lt(!1,"Invalid ARIA attribute `%s`. Did you mean `%s`?%s",t,r,Fl()),Il[t]=!0}if(Rl.test(t)){var o=t.toLowerCase(),i=Ol.hasOwnProperty(o)?o:null;if(null==i)return!(Il[t]=!0);if(t!==i)return lt(!1,"Unknown ARIA attribute `%s`. Did you mean `%s`?%s",t,i,Fl()),Il[t]=!0}return!0}function Ll(e,t){Al(e,t)||function(e,t){var n=[];for(var r in t)Ml(0,r)||n.push(r);var o=n.map(function(e){return"`"+e+"`"}).join(", ");1===n.length?lt(!1,"Invalid aria prop %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",o,e,Fl()):1<n.length&&lt(!1,"Invalid aria props %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",o,e,Fl())}(e,t)}var Ul=!1;function Bl(){var e=Bt.getStackAddendum();return null!=e?e:""}function Hl(){var e=Bt.getStackAddendum();return null!=e?e:""}var ql,zl={},Wl=Object.prototype.hasOwnProperty,Vl=/^on./,Kl=/^on[^A-Z]/,$l=new RegExp("^(aria)-["+mn+"]*$"),Xl=new RegExp("^(aria)[A-Z]["+mn+"]*$");ql=function(e,t,n,r){if(Wl.call(zl,t)&&zl[t])return!0;var o=t.toLowerCase();if("onfocusin"===o||"onfocusout"===o)return lt(!1,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),zl[t]=!0;if(r){if(x.hasOwnProperty(t))return!0;var i=E.hasOwnProperty(o)?E[o]:null;if(null!=i)return lt(!1,"Invalid event handler property `%s`. Did you mean `%s`?%s",t,i,Hl()),zl[t]=!0;if(Vl.test(t))return lt(!1,"Unknown event handler property `%s`. It will be ignored.%s",t,Hl()),zl[t]=!0}else if(Vl.test(t))return Kl.test(t)&&lt(!1,"Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.%s",t,Hl()),zl[t]=!0;if($l.test(t)||Xl.test(t))return!0;if("innerhtml"===o)return lt(!1,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),zl[t]=!0;if("aria"===o)return lt(!1,"The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),zl[t]=!0;if("is"===o&&null!=n&&"string"!=typeof n)return lt(!1,"Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.%s",typeof n,Hl()),zl[t]=!0;if("number"==typeof n&&isNaN(n))return lt(!1,"Received NaN for the `%s` attribute. If this is expected, cast the value to a string.%s",t,Hl()),zl[t]=!0;var a=En(t),s=null!==a&&a.type===ln;if(Pl.hasOwnProperty(o)){var l=Pl[o];if(l!==t)return lt(!1,"Invalid DOM property `%s`. Did you mean `%s`?%s",t,l,Hl()),zl[t]=!0}else if(!s&&t!==o)return lt(!1,"React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.%s",t,o,Hl()),zl[t]=!0;return"boolean"==typeof n&&kn(t,n,a,!1)?(n?lt(!1,'Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.%s',n,t,t,n,t,Hl()):lt(!1,'Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.%s',n,t,t,n,t,t,t,Hl()),zl[t]=!0):!!s||(!kn(t,n,a,!1)||!(zl[t]=!0))};var Gl=function(e,t,n){var r=[];for(var o in t){ql(0,o,t[o],n)||r.push(o)}var i=r.map(function(e){return"`"+e+"`"}).join(", ");1===r.length?lt(!1,"Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://fb.me/react-attribute-behavior%s",i,e,Hl()):1<r.length&&lt(!1,"Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://fb.me/react-attribute-behavior%s",i,e,Hl())};var Jl,Ql=sn.getCurrentFiberOwnerName,Yl=sn.getCurrentFiberStackAddendum,Zl=!1,ec=!1,tc="dangerouslySetInnerHTML",nc="suppressContentEditableWarning",rc="suppressHydrationWarning",oc="autoFocus",ic="children",ac="style",sc="__html",lc=sl.html,cc=l.thatReturns(""),uc=void 0,dc=void 0,pc=void 0,fc=void 0,hc=void 0,mc=void 0,gc=void 0,vc=void 0;cc=Yl,uc={time:!0,dialog:!0},pc=function(e,t){var n,r,o,i,a;Ll(e,t),r=t,"input"!==(n=e)&&"textarea"!==n&&"select"!==n||null==r||null!==r.value||Ul||(Ul=!0,"select"===n&&r.multiple?lt(!1,"`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.%s",n,Bl()):lt(!1,"`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.%s",n,Bl())),a=!0,Al(o=e,i=t)||Gl(o,i,a)};var yc=/\r\n?/g,bc=/\u0000|\uFFFD/g;function _c(e,t){!function(e,t){for(var n=t,r=No(n),o=k[e],i=0;i<o.length;i++){var a=o[i];r.hasOwnProperty(a)&&r[a]||("topScroll"===a?ho("topScroll","scroll",n):"topFocus"===a||"topBlur"===a?(ho("topFocus","focus",n),ho("topBlur","blur",n),r.topBlur=!0,r.topFocus=!0):"topCancel"===a?(Rt("cancel",!0)&&ho("topCancel","cancel",n),r.topCancel=!0):"topClose"===a?(Rt("close",!0)&&ho("topClose","close",n),r.topClose=!0):xo.hasOwnProperty(a)&&fo(a,xo[a],n),r[a]=!0)}}(t,e.nodeType===Pt||e.nodeType===Ot?e:e.ownerDocument)}function wc(e){return e.nodeType===Pt?e:e.ownerDocument}function kc(e){e.onclick=l}function xc(e,t,n,r){var o=void 0,i=wc(n),a=void 0,s=r;if(s===lc&&(s=ll(e)),s===lc)if(o=Al(e,t),lt(o||e===e.toLowerCase(),"<%s /> is using uppercase HTML. Always use lowercase HTML tags in React.",e),"script"===e){var l=i.createElement("div");l.innerHTML="<script><\/script>";var c=l.firstChild;a=l.removeChild(c)}else a="string"==typeof t.is?i.createElement(e,{is:t.is}):i.createElement(e);else a=i.createElementNS(s,e);return s===lc&&(o||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(a)||Object.prototype.hasOwnProperty.call(uc,e)||(uc[e]=!0,lt(!1,"The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),a}function Ec(e,t){return wc(t).createTextNode(e)}function Cc(e,t,n,r){var o=Al(t,n);pc(t,n),o&&!ec&&e.shadyRoot&&(lt(!1,"%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",Ql()||"A component"),ec=!0);var i,a,s=void 0;switch(t){case"iframe":case"object":fo("topLoad","load",e),s=n;break;case"video":case"audio":for(var l in Eo)Eo.hasOwnProperty(l)&&fo(l,Eo[l],e);s=n;break;case"source":fo("topError","error",e),s=n;break;case"img":case"image":case"link":fo("topError","error",e),fo("topLoad","load",e),s=n;break;case"form":fo("topReset","reset",e),fo("topSubmit","submit",e),s=n;break;case"details":fo("topToggle","toggle",e),s=n;break;case"input":zn(e,n),s=qn(e,n),fo("topInvalid","invalid",e),_c(r,"onChange");break;case"option":qs(0,n),s=zs(0,n);break;case"select":Qs(e,n),s=Js(0,n),fo("topInvalid","invalid",e),_c(r,"onChange");break;case"textarea":tl(e,n),s=el(e,n),fo("topInvalid","invalid",e),_c(r,"onChange");break;default:s=n}switch(Nl(t,s,cc),function(e,t,n,r,o){for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];if(i===ac)a&&Object.freeze(a),Cl(t,a,cc);else if(i===tc){var s=a?a[sc]:void 0;null!=s&&pl(t,s)}else i===ic?"string"==typeof a?("textarea"!==e||""!==a)&&fl(t,a):"number"==typeof a&&fl(t,""+a):i===nc||i===rc||i===oc||(x.hasOwnProperty(i)?null!=a&&("function"!=typeof a&&gc(i,a),_c(n,i)):null!=a&&On(t,i,a,o))}}(t,e,r,s,o),t){case"input":Ft(e),Kn(e,n);break;case"textarea":Ft(e),rl(e);break;case"option":i=e,null!=(a=n).value&&i.setAttribute("value",a.value);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?Gs(n,!!t.multiple,r,!1):null!=t.defaultValue&&Gs(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof s.onClick&&kc(e)}}function Sc(e,t,n,r,o){pc(t,r);var i=null,a=void 0,s=void 0;switch(t){case"input":a=qn(e,n),s=qn(e,r),i=[];break;case"option":a=zs(0,n),s=zs(0,r),i=[];break;case"select":a=Js(0,n),s=Js(0,r),i=[];break;case"textarea":a=el(e,n),s=el(e,r),i=[];break;default:s=r,"function"!=typeof(a=n).onClick&&"function"==typeof s.onClick&&kc(e)}Nl(t,s,cc);var l=void 0,c=void 0,u=null;for(l in a)if(!s.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if(l===ac){var d=a[l];for(c in d)d.hasOwnProperty(c)&&(u||(u={}),u[c]="")}else l===tc||l===ic||l===nc||l===rc||l===oc||(x.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in s){var p=s[l],f=null!=a?a[l]:void 0;if(s.hasOwnProperty(l)&&p!==f&&(null!=p||null!=f))if(l===ac)if(p&&Object.freeze(p),f){for(c in f)!f.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(u||(u={}),u[c]="");for(c in p)p.hasOwnProperty(c)&&f[c]!==p[c]&&(u||(u={}),u[c]=p[c])}else u||(i||(i=[]),i.push(l,u)),u=p;else if(l===tc){var h=p?p[sc]:void 0,m=f?f[sc]:void 0;null!=h&&m!==h&&(i=i||[]).push(l,""+h)}else l===ic?f===p||"string"!=typeof p&&"number"!=typeof p||(i=i||[]).push(l,""+p):l===nc||l===rc||(x.hasOwnProperty(l)?(null!=p&&("function"!=typeof p&&gc(l,p),_c(o,l)),i||f===p||(i=[])):(i=i||[]).push(l,p))}return u&&(i=i||[]).push(ac,u),i}function Tc(e,t,n,r,o){"input"===n&&"radio"===o.type&&null!=o.name&&Wn(e,o);Al(n,r);switch(function(e,t,n,r){for(var o=0;o<t.length;o+=2){var i=t[o],a=t[o+1];i===ac?Cl(e,a,cc):i===tc?pl(e,a):i===ic?fl(e,a):On(e,i,a,r)}}(e,t,0,Al(n,o)),n){case"input":Vn(e,o);break;case"textarea":nl(e,o);break;case"select":!function(e,t){var n=e;n._wrapperState.initialValue=void 0;var r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var o=t.value;null!=o?Gs(n,!!t.multiple,o,!1):r!==!!t.multiple&&(null!=t.defaultValue?Gs(n,!!t.multiple,t.defaultValue,!0):Gs(n,!!t.multiple,t.multiple?[]:"",!1))}(e,o)}}function Nc(e,t,n,r,o){var i,a=void 0;switch(dc=!0===n[rc],i=Al(t,n),pc(t,n),i&&!ec&&e.shadyRoot&&(lt(!1,"%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",Ql()||"A component"),ec=!0),t){case"iframe":case"object":fo("topLoad","load",e);break;case"video":case"audio":for(var s in Eo)Eo.hasOwnProperty(s)&&fo(s,Eo[s],e);break;case"source":fo("topError","error",e);break;case"img":case"image":case"link":fo("topError","error",e),fo("topLoad","load",e);break;case"form":fo("topReset","reset",e),fo("topSubmit","submit",e);break;case"details":fo("topToggle","toggle",e);break;case"input":zn(e,n),fo("topInvalid","invalid",e),_c(o,"onChange");break;case"option":qs(0,n);break;case"select":Qs(e,n),fo("topInvalid","invalid",e),_c(o,"onChange");break;case"textarea":tl(e,n),fo("topInvalid","invalid",e),_c(o,"onChange")}Nl(t,n,cc),a=new Set;for(var l=e.attributes,c=0;c<l.length;c++){switch(l[c].name.toLowerCase()){case"data-reactroot":case"value":case"checked":case"selected":break;default:a.add(l[c].name)}}var u,d=null;for(var p in n)if(n.hasOwnProperty(p)){var f=n[p];if(p===ic)"string"==typeof f?e.textContent!==f&&(dc||fc(e.textContent,f),d=[ic,f]):"number"==typeof f&&e.textContent!==""+f&&(dc||fc(e.textContent,f),d=[ic,""+f]);else if(x.hasOwnProperty(p))null!=f&&("function"!=typeof f&&gc(p,f),_c(o,p));else if("boolean"==typeof i){var h=void 0,m=En(p);if(dc);else if(p===nc||p===rc||"value"===p||"checked"===p||"selected"===p);else if(p===tc){var g=f&&f[sc]||"",v=e.innerHTML,y=vc(e,g);y!==v&&hc(p,v,y)}else if(p===ac){a.delete(p);var b=El(f);b!==(h=e.getAttribute("style"))&&hc(p,h,b)}else if(i)a.delete(p.toLowerCase()),f!==(h=Pn(e,p,f))&&hc(p,h,f);else if(!wn(p,m,i)&&!xn(p,f,m,i)){var _=!1;if(null!==m)a.delete(m.attributeName),h=An(e,p,f,m);else{var w=r;if(w===lc&&(w=ll(t)),w===lc)a.delete(p.toLowerCase());else{var k=(void 0,u=p.toLowerCase(),Pl.hasOwnProperty(u)&&Pl[u]||null);null!==k&&k!==p&&(_=!0,a.delete(k)),a.delete(p)}h=Pn(e,p,f)}f===h||_||hc(p,h,f)}}}switch(0<a.size&&!dc&&mc(a),t){case"input":Ft(e),Kn(e,n);break;case"textarea":Ft(e),rl(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&kc(e)}return d}function Ac(e,t){return e.nodeValue!==t}function Pc(e,t){fc(e.nodeValue,t)}function Oc(e,t){Zl||lt(!(Zl=!0),"Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase())}function Ic(e,t){Zl||lt(!(Zl=!0),'Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase())}function Rc(e,t,n){Zl||lt(!(Zl=!0),"Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase())}function Dc(e,t){""!==t&&(Zl||lt(!(Zl=!0),'Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase()))}Jl=function(e){return("string"==typeof e?e:""+e).replace(yc,"\n").replace(bc,"")},fc=function(e,t){if(!Zl){var n=Jl(t),r=Jl(e);r!==n&&lt(!(Zl=!0),'Text content did not match. Server: "%s" Client: "%s"',r,n)}},hc=function(e,t,n){if(!Zl){var r=Jl(n),o=Jl(t);o!==r&&lt(!(Zl=!0),"Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(o),JSON.stringify(r))}},mc=function(e){if(!Zl){Zl=!0;var t=[];e.forEach(function(e){t.push(e)}),lt(!1,"Extra attributes from the server: %s",t)}},gc=function(e,t){!1===t?lt(!1,"Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.%s",e,e,e,Yl()):lt(!1,"Expected `%s` listener to be a function, instead got a value of `%s` type.%s",e,typeof t,Yl())},vc=function(e,t){var n=e.namespaceURI===lc?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var jc,Fc=Object.freeze({createElement:xc,createTextNode:Ec,setInitialProperties:Cc,diffProperties:Sc,updateProperties:Tc,diffHydratedProperties:Nc,diffHydratedText:Ac,warnForUnmatchedText:Pc,warnForDeletedHydratableElement:Oc,warnForDeletedHydratableText:Ic,warnForInsertedHydratedElement:Rc,warnForInsertedHydratedText:Dc,restoreControlledState:function(e,t,n){switch(t){case"input":return void $n(e,n);case"textarea":return void nl(e,n);case"select":return o=e,void(null!=(i=(r=n).value)&&Gs(o,!!r.multiple,i,!1))}var r,o,i}}),Mc=sn.getCurrentFiberStackAddendum,Lc=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],Uc=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Bc=Uc.concat(["button"]),Hc=["dd","dt","li","option","optgroup","p","rp","rt"],qc={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},zc={};(jc=function(e,t,n){var r=(n=n||qc).current,o=r&&r.tag;null!=t&&(lt(null==e,"validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var i=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===Hc.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,o)?null:r,a=i?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),s=i||a;if(s){var l=s.tag,c=Mc(),u=!!i+"|"+e+"|"+l+"|"+c;if(!zc[u]){zc[u]=!0;var d=e,p="";if("#text"===e?/\S/.test(t)?d="Text nodes":(d="Whitespace text nodes",p=" Make sure you don't have any extra whitespace between tags on each line of your source code."):d="<"+e+">",i){var f="";"table"===l&&"tr"===e&&(f+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),lt(!1,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s%s",d,l,p,f,c)}else lt(!1,"validateDOMNesting(...): %s cannot appear as a descendant of <%s>.%s",d,l,c)}}}).updatedAncestorInfo=function(e,t,n){var r=ct({},e||qc),o={tag:t,instance:n};return-1!==Uc.indexOf(t)&&(r.aTagInScope=null,r.buttonTagInScope=null,r.nobrTagInScope=null),-1!==Bc.indexOf(t)&&(r.pTagInButtonScope=null),-1!==Lc.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(r.listItemTagAutoclosing=null,r.dlItemTagAutoclosing=null),r.current=o,"form"===t&&(r.formTag=o),"a"===t&&(r.aTagInScope=o),"button"===t&&(r.buttonTagInScope=o),"nobr"===t&&(r.nobrTagInScope=o),"p"===t&&(r.pTagInButtonScope=o),"li"===t&&(r.listItemTagAutoclosing=o),"dd"!==t&&"dt"!==t||(r.dlItemTagAutoclosing=o),r};var Wc,Vc,Kc=jc,$c=xc,Xc=Ec,Gc=Cc,Jc=Sc,Qc=Tc,Yc=Nc,Zc=Ac,eu=Pc,tu=Oc,nu=Ic,ru=Rc,ou=Dc,iu=Kc.updatedAncestorInfo,au=ne,su=se,lu=void 0,cu=!1;Wc="suppressHydrationWarning","function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||lt(!1,"React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),lu=function(e){if(e._reactRootContainer&&e.nodeType!==At){var t=yu.findHostInstanceWithNoPortals(e._reactRootContainer._internalRoot.current);t&&lt(t.parentNode===e,"render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=gu(e),o=!(!r||!oe(r));lt(!o||n,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),lt(e.nodeType!==Tt||!e.tagName||"BODY"!==e.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")},Vc=function(e,t){lt(null===e||"function"==typeof e,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e)},ot.injectFiberControlledHostComponent(Fc);var uu=null,du=null;function pu(e){var t=yu.computeUniqueAsyncExpiration();this._expirationTime=t,this._root=e,this._next=null,this._callbacks=null,this._didComplete=!1,this._hasChildren=!1,this._children=null,this._defer=!0}function fu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function hu(e,t,n){var r=yu.createContainer(e,t,n);this._internalRoot=r}function mu(e){return!(!e||e.nodeType!==Tt&&e.nodeType!==Pt&&e.nodeType!==Ot&&(e.nodeType!==At||" react-mount-point-unstable "!==e.nodeValue))}function gu(e){return e?e.nodeType===Pt?e.documentElement:e.firstChild:null}function vu(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}pu.prototype.render=function(e){this._defer||st(!1,"batch.render: Cannot render a batch that already committed."),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new fu;return yu.updateContainerAtExpirationTime(e,t,null,n,r._onCommit),r},pu.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},pu.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||st(!1,"batch.commit: Cannot commit a batch multiple times."),!this._hasChildren)return this._next=null,void(this._defer=!1);var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)o=(r=o)._next;null===r&&st(!1,"batch.commit: Cannot commit a batch multiple times."),r._next=o._next,this._next=t,t=e.firstBatch=this}this._defer=!1,yu.flushRoot(e,n);var i=this._next;(this._next=null)!==(t=e.firstBatch=i)&&t._hasChildren&&t.render(t._children)},pu.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){(0,e[t])()}}},fu.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},fu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&st(!1,"Invalid argument passed as callback. Expected a function. Instead received: %s",n),n()}}},hu.prototype.render=function(e,t){var n=this._internalRoot,r=new fu;return Vc(t=void 0===t?null:t,"render"),null!==t&&r.then(t),yu.updateContainer(e,n,null,r._onCommit),r},hu.prototype.unmount=function(e){var t=this._internalRoot,n=new fu;return Vc(e=void 0===e?null:e,"render"),null!==e&&n.then(e),yu.updateContainer(null,t,null,n._onCommit),n},hu.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,o=new fu;return Vc(n=void 0===n?null:n,"render"),null!==n&&o.then(n),yu.updateContainer(t,r,e,o._onCommit),o},hu.prototype.createBatch=function(){var e=new pu(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)(n.firstBatch=e)._next=null;else{for(var o=null,i=r;null!==i&&i._expirationTime<=t;)i=(o=i)._next;e._next=i,null!==o&&(o._next=e)}return e};var yu=Ss({getRootHostContext:function(e){var t=void 0,n=void 0,r=e.nodeType;switch(r){case Pt:case Ot:t=r===Pt?"#document":"#fragment";var o=e.documentElement;n=o?o.namespaceURI:cl(null,"");break;default:var i=r===At?e.parentNode:e;n=cl(i.namespaceURI||null,t=i.tagName)}var a=t.toLowerCase();return{namespace:n,ancestorInfo:iu(null,a,null)}},getChildHostContext:function(e,t){var n=e;return{namespace:cl(n.namespace,t),ancestorInfo:iu(n.ancestorInfo,t,null)}},getPublicInstance:function(e){return e},prepareForCommit:function(){uu=po(),du=Do(),uo(!1)},resetAfterCommit:function(){jo(du),du=null,uo(uu),uu=null},createInstance:function(e,t,n,r,o){var i,a=r;if(Kc(e,null,a.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var s=""+t.children,l=iu(a.ancestorInfo,e,null);Kc(null,s,l)}i=a.namespace;var c=$c(e,t,n,i);return au(o,c),su(c,t),c},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){return Gc(e,t,n,r),vu(t,n)},prepareUpdate:function(e,t,n,r,o,i){var a=i;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var s=""+r.children,l=iu(a.ancestorInfo,t,null);Kc(null,s,l)}return Jc(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){Kc(null,e,n.ancestorInfo);var o=Xc(e,t);return au(r,o),o},now:Ns,mutation:{commitMount:function(e,t,n,r){vu(t,n)&&e.focus()},commitUpdate:function(e,t,n,r,o,i){su(e,o),Qc(e,t,n,r,o)},resetTextContent:function(e){fl(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){e.nodeType===At?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){e.nodeType===At?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){e.nodeType===At?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t,n){return e.nodeType!==Tt||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||e.nodeType!==Nt?null:e},getNextHydratableSibling:function(e){for(var t=e.nextSibling;t&&t.nodeType!==Tt&&t.nodeType!==Nt;)t=t.nextSibling;return t},getFirstHydratableChild:function(e){for(var t=e.firstChild;t&&t.nodeType!==Tt&&t.nodeType!==Nt;)t=t.nextSibling;return t},hydrateInstance:function(e,t,n,r,o,i){au(i,e),su(e,n);var a;return a=o.namespace,Yc(e,t,n,a,r)},hydrateTextInstance:function(e,t,n){return au(n,e),Zc(e,t)},didNotMatchHydratedContainerTextInstance:function(e,t,n){eu(t,n)},didNotMatchHydratedTextInstance:function(e,t,n,r,o){!0!==t[Wc]&&eu(r,o)},didNotHydrateContainerInstance:function(e,t){1===t.nodeType?tu(e,t):nu(e,t)},didNotHydrateInstance:function(e,t,n,r){!0!==t[Wc]&&(1===r.nodeType?tu(n,r):nu(n,r))},didNotFindHydratableContainerInstance:function(e,t,n){ru(e,t,n)},didNotFindHydratableContainerTextInstance:function(e,t){ou(e,t)},didNotFindHydratableInstance:function(e,t,n,r,o){!0!==t[Wc]&&ru(n,r,o)},didNotFindHydratableTextInstance:function(e,t,n,r){!0!==t[Wc]&&ou(n,r)}},scheduleDeferredCallback:As,cancelDeferredCallback:Ps});Et(yu);var bu=!1;function _u(e,t){var n,r=t||!(!(n=gu(e))||n.nodeType!==Tt||!n.hasAttribute(gn));if(!r)for(var o=!1,i=void 0;i=e.lastChild;)!o&&i.nodeType===Tt&&i.hasAttribute(gn)&&lt(!(o=!0),"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup."),e.removeChild(i);!r||t||bu||xi(!(bu=!0),"render(): Calling ReactDOM.render() to hydrate server-rendered markup will stop working in React v17. Replace the ReactDOM.render() call with ReactDOM.hydrate() if you want React to attach to the server HTML.");return new hu(e,!1,r)}function wu(e,t,n,r,o){mu(n)||st(!1,"Target container is not a DOM element."),lu(n);var i=n._reactRootContainer;if(i){if("function"==typeof o){var a=o;o=function(){var e=yu.getPublicRootInstance(i._internalRoot);a.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)}else{if(i=n._reactRootContainer=_u(n,r),"function"==typeof o){var s=o;o=function(){var e=yu.getPublicRootInstance(i._internalRoot);s.call(e)}}yu.unbatchedUpdates(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)})}return yu.getPublicRootInstance(i._internalRoot)}function ku(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return mu(t)||st(!1,"Target container is not a DOM element."),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Kt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}var xu={createPortal:ku,findDOMNode:function(e){var t=Ut.current;if(null!==t&&null!==t.stateNode){var n=t.stateNode._warnedAboutRefsInRender;lt(n,"%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",nn(t)||"A component"),t.stateNode._warnedAboutRefsInRender=!0}if(null==e)return null;if(e.nodeType===Tt)return e;var r=yr(e);if(r)return yu.findHostInstance(r);"function"==typeof e.render?st(!1,"Unable to find node on an unmounted component."):st(!1,"Element appears to be neither ReactComponent nor DOMNode. Keys: %s",Object.keys(e))},hydrate:function(e,t,n){return wu(null,e,t,!0,n)},render:function(e,t,n){return wu(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&st(!1,"parentComponent must be a valid React Component"),wu(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(mu(e)||st(!1,"unmountComponentAtNode(...): Target container is not a DOM element."),e._reactRootContainer){var t=gu(e),n=t&&!oe(t);return lt(!n,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),yu.unbatchedUpdates(function(){wu(null,null,e,!1,function(){e._reactRootContainer=null})}),!0}var r=gu(e),o=!(!r||!oe(r)),i=1===e.nodeType&&mu(e.parentNode)&&!!e.parentNode._reactRootContainer;return lt(!o,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},unstable_createPortal:function(){return cu||xi(!(cu=!0),'The ReactDOM.unstable_createPortal() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactDOM.createPortal() instead. It has the exact same API, but without the "unstable_" prefix.'),ku.apply(void 0,arguments)},unstable_batchedUpdates:yu.batchedUpdates,unstable_deferredUpdates:yu.deferredUpdates,flushSync:yu.flushSync,unstable_flushControlled:yu.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:q,EventPluginRegistry:C,EventPropagators:be,ReactControlledComponent:yt,ReactDOMComponentTree:le,ReactDOMEventListener:vo},unstable_createRoot:function(e,t){return new hu(e,!0,null!=t&&!0===t.hydrate)}};if(!yu.injectIntoDevTools({findFiberByHostInstance:re,bundleType:1,version:"16.3.1",rendererPackageName:"react-dom"})&&i.canUseDOM&&window.top===window.self&&(-1<navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Edge")||-1<navigator.userAgent.indexOf("Firefox"))){var Eu=window.location.protocol;/^(https?|file):$/.test(Eu)&&console.info("%cDownload the React DevTools for a better development experience: https://fb.me/react-devtools"+("file:"===Eu?"\nYou might need to use a local HTTP server (instead of file://): https://fb.me/react-devtools-faq":""),"font-weight:bold")}var Cu=Object.freeze({default:xu}),Su=Cu&&xu||Cu,Tu=Su.default?Su.default:Su;Au.exports=Tu}()}).call(this,Nu("_process"))},{_process:136,"fbjs/lib/ExecutionEnvironment":72,"fbjs/lib/camelizeStyleName":74,"fbjs/lib/containsNode":75,"fbjs/lib/emptyFunction":76,"fbjs/lib/emptyObject":77,"fbjs/lib/getActiveElement":78,"fbjs/lib/hyphenateStyleName":80,"fbjs/lib/invariant":81,"fbjs/lib/shallowEqual":84,"fbjs/lib/warning":85,"object-assign":117,"prop-types/checkPropTypes":137,react:157}],144:[function(e,t,n){"use strict";var o=e("react"),r=e("fbjs/lib/ExecutionEnvironment"),He=e("object-assign"),c=e("fbjs/lib/emptyFunction"),f=e("fbjs/lib/getActiveElement"),D=e("fbjs/lib/shallowEqual"),s=e("fbjs/lib/containsNode"),qe=e("fbjs/lib/emptyObject");function ze(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}o||ze("227");var u={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,o,i,a,s,l){(function(e,t,n,r,o,i,a,s,l){this._hasCaughtError=!1,this._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}).apply(u,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,i,a,s,l){if(u.invokeGuardedCallback.apply(this,arguments),u.hasCaughtError()){var c=u.clearCaughtError();u._hasRethrowError||(u._hasRethrowError=!0,u._rethrowError=c)}},rethrowCaughtError:function(){return function(){if(u._hasRethrowError){var e=u._rethrowError;throw u._rethrowError=null,u._hasRethrowError=!1,e}}.apply(u,arguments)},hasCaughtError:function(){return u._hasCaughtError},clearCaughtError:function(){if(u._hasCaughtError){var e=u._caughtError;return u._caughtError=null,u._hasCaughtError=!1,e}ze("198")}};var d=null,p={};function i(){if(d)for(var e in p){var t=p[e],n=d.indexOf(e);if(-1<n||ze("96",e),!m[n])for(var r in t.extractEvents||ze("97",e),n=(m[n]=t).eventTypes){var o=void 0,i=n[r],a=t,s=r;g.hasOwnProperty(s)&&ze("99",s);var l=(g[s]=i).phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&h(l[o],a,s);o=!0}else i.registrationName?(h(i.registrationName,a,s),o=!0):o=!1;o||ze("98",r,e)}}}function h(e,t,n){v[e]&&ze("100",e),v[e]=t,l[e]=t.eventTypes[n].dependencies}var m=[],g={},v={},l={};function a(e){d&&ze("101"),d=Array.prototype.slice.call(e),i()}function y(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];p.hasOwnProperty(t)&&p[t]===r||(p[t]&&ze("102",t),p[t]=r,n=!0)}n&&i()}var b=Object.freeze({plugins:m,eventNameDispatchConfigs:g,registrationNameModules:v,registrationNameDependencies:l,possibleRegistrationNames:null,injectEventPluginOrder:a,injectEventPluginsByName:y}),_=null,w=null,k=null;function x(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=k(r),u.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function E(e,t){return null==t&&ze("30"),null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var S=null;function T(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)x(e,t,n[o],r[o]);else n&&x(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function N(e){return T(e,!0)}function A(e){return T(e,!1)}var P={injectEventPluginOrder:a,injectEventPluginsByName:y};function O(e,t){var n=e.stateNode;if(!n)return null;var r=_(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&ze("231",t,typeof n),n)}function I(e,t){null!==e&&(S=E(S,e)),e=S,S=null,e&&(C(e,t?N:A),S&&ze("95"),u.rethrowCaughtError())}function R(e,t,n,r){for(var o=null,i=0;i<m.length;i++){var a=m[i];a&&(a=a.extractEvents(e,t,n,r))&&(o=E(o,a))}I(o,!1)}var j=Object.freeze({injection:P,getListener:O,runEventsInBatch:I,runExtractedEventsInBatch:R}),F=Math.random().toString(36).slice(2),M="__reactInternalInstance$"+F,L="__reactEventHandlers$"+F;function U(e){if(e[M])return e[M];for(;!e[M];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[M]).tag||6===e.tag?e:null}function B(e){if(5===e.tag||6===e.tag)return e.stateNode;ze("33")}function H(e){return e[L]||null}var q=Object.freeze({precacheFiberNode:function(e,t){t[M]=e},getClosestInstanceFromNode:U,getInstanceFromNode:function(e){return!(e=e[M])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:B,getFiberCurrentPropsFromNode:H,updateFiberProps:function(e,t){e[L]=t}});function z(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function W(e,t,n){for(var r=[];e;)r.push(e),e=z(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function V(e,t,n){(t=O(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=E(n._dispatchListeners,t),n._dispatchInstances=E(n._dispatchInstances,e))}function K(e){e&&e.dispatchConfig.phasedRegistrationNames&&W(e._targetInst,V,e)}function $(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;W(t=t?z(t):null,V,e)}}function X(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=O(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=E(n._dispatchListeners,t),n._dispatchInstances=E(n._dispatchInstances,e))}function G(e){e&&e.dispatchConfig.registrationName&&X(e._targetInst,null,e)}function J(e){C(e,K)}function Q(e,t,n,r){if(n&&r)e:{for(var o=n,i=r,a=0,s=o;s;s=z(s))a++;s=0;for(var l=i;l;l=z(l))s++;for(;0<a-s;)o=z(o),a--;for(;0<s-a;)i=z(i),s--;for(;a--;){if(o===i||o===i.alternate)break e;o=z(o),i=z(i)}o=null}else o=null;for(i=o,o=[];n&&n!==i&&(null===(a=n.alternate)||a!==i);)o.push(n),n=z(n);for(n=[];r&&r!==i&&(null===(a=r.alternate)||a!==i);)n.push(r),r=z(r);for(r=0;r<o.length;r++)X(o[r],"bubbled",e);for(e=n.length;0<e--;)X(n[e],"captured",t)}var Y=Object.freeze({accumulateTwoPhaseDispatches:J,accumulateTwoPhaseDispatchesSkipTarget:function(e){C(e,$)},accumulateEnterLeaveDispatches:Q,accumulateDirectDispatches:function(e){C(e,G)}}),Z=null;function ee(){return!Z&&r.canUseDOM&&(Z="textContent"in document.documentElement?"textContent":"innerText"),Z}var te={_root:null,_startText:null,_fallbackText:null};function ne(){if(te._fallbackText)return te._fallbackText;var e,t,n=te._startText,r=n.length,o=re(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return te._fallbackText=o.slice(e,1<t?1-t:void 0),te._fallbackText}function re(){return"value"in te._root?te._root.value:te._root[ee()]}var oe="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ie={type:null,target:null,currentTarget:c.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function ae(e,t,n,r){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?c.thatReturnsTrue:c.thatReturnsFalse,this.isPropagationStopped=c.thatReturnsFalse,this}function se(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function le(e){e instanceof this||ze("223"),e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function ce(e){e.eventPool=[],e.getPooled=se,e.release=le}He(ae.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=c.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=c.thatReturnsTrue)},persist:function(){this.isPersistent=c.thatReturnsTrue},isPersistent:c.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<oe.length;t++)this[oe[t]]=null}}),ae.Interface=ie,ae.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return He(o,n.prototype),((n.prototype=o).constructor=n).Interface=He({},r.Interface,e),n.extend=r.extend,ce(n),n},ce(ae);var ue=ae.extend({data:null}),de=ae.extend({data:null}),pe=[9,13,27,32],fe=r.canUseDOM&&"CompositionEvent"in window,he=null;r.canUseDOM&&"documentMode"in document&&(he=document.documentMode);var me=r.canUseDOM&&"TextEvent"in window&&!he,ge=r.canUseDOM&&(!fe||he&&8<he&&he<=11),ve=String.fromCharCode(32),ye={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},be=!1;function _e(e,t){switch(e){case"topKeyUp":return-1!==pe.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function we(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ke=!1;var xe={eventTypes:ye,extractEvents:function(e,t,n,r){var o=void 0,i=void 0;if(fe)e:{switch(e){case"topCompositionStart":o=ye.compositionStart;break e;case"topCompositionEnd":o=ye.compositionEnd;break e;case"topCompositionUpdate":o=ye.compositionUpdate;break e}o=void 0}else ke?_e(e,n)&&(o=ye.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(o=ye.compositionStart);return o?(ge&&(ke||o!==ye.compositionStart?o===ye.compositionEnd&&ke&&(i=ne()):(te._root=r,te._startText=re(),ke=!0)),o=ue.getPooled(o,t,n,r),i?o.data=i:null!==(i=we(n))&&(o.data=i),J(o),i=o):i=null,(e=me?function(e,t){switch(e){case"topCompositionEnd":return we(t);case"topKeyPress":return 32!==t.which?null:(be=!0,ve);case"topTextInput":return(e=t.data)===ve&&be?null:e;default:return null}}(e,n):function(e,t){if(ke)return"topCompositionEnd"===e||!fe&&_e(e,t)?(e=ne(),te._root=null,te._startText=null,te._fallbackText=null,ke=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return ge?null:t.data;default:return null}}(e,n))?((t=de.getPooled(ye.beforeInput,t,n,r)).data=e,J(t)):t=null,null===i?t:null===t?i:[i,t]}},Ee=null,Ce=null,Se=null;function Te(e){if(e=w(e)){Ee&&"function"==typeof Ee.restoreControlledState||ze("194");var t=_(e.stateNode);Ee.restoreControlledState(e.stateNode,e.type,t)}}var Ne={injectFiberControlledHostComponent:function(e){Ee=e}};function Ae(e){Ce?Se?Se.push(e):Se=[e]:Ce=e}function Pe(){return null!==Ce||null!==Se}function Oe(){if(Ce){var e=Ce,t=Se;if(Se=Ce=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}var Ie=Object.freeze({injection:Ne,enqueueStateRestore:Ae,needsStateRestore:Pe,restoreStateIfNeeded:Oe});function Re(e,t){return e(t)}function De(e,t,n){return e(t,n)}function je(){}var Fe=!1;function Me(e,t){if(Fe)return e(t);Fe=!0;try{return Re(e,t)}finally{Fe=!1,Pe()&&(je(),Oe())}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Le[e.type]:"textarea"===t}function Be(e){return(e=e.target||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function We(e,t){return!(!r.canUseDOM||t&&!("addEventListener"in document))&&((t=(e="on"+e)in document)||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t)}function Ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ke(e){e._valueTracker||(e._valueTracker=function(e){var t=Ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}(e))}function $e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ve(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Xe=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ge="function"==typeof Symbol&&Symbol.for,Je=Ge?Symbol.for("react.element"):60103,Qe=Ge?Symbol.for("react.call"):60104,Ye=Ge?Symbol.for("react.return"):60105,Ze=Ge?Symbol.for("react.portal"):60106,et=Ge?Symbol.for("react.fragment"):60107,tt=Ge?Symbol.for("react.strict_mode"):60108,nt=Ge?Symbol.for("react.provider"):60109,rt=Ge?Symbol.for("react.context"):60110,ot=Ge?Symbol.for("react.async_mode"):60111,it=Ge?Symbol.for("react.forward_ref"):60112,at="function"==typeof Symbol&&Symbol.iterator;function st(e){return null==e?null:"function"==typeof(e=at&&e[at]||e["@@iterator"])?e:null}function lt(e){if("function"==typeof(e=e.type))return e.displayName||e.name;if("string"==typeof e)return e;switch(e){case et:return"ReactFragment";case Ze:return"ReactPortal";case Qe:return"ReactCall";case Ye:return"ReactReturn"}return null}function ct(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,o=lt(e),i=null;n&&(i=lt(n)),o="\n    in "+(o||"Unknown")+((n=r)?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":i?" (created by "+i+")":"");break e;default:o=""}t+=o,e=e.return}while(e);return t}var ut=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dt={},pt={};function ft(e,t,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new ft(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new ft(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new ft(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){ht[e]=new ft(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new ft(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new ft(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){ht[e]=new ft(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){ht[e]=new ft(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){ht[e]=new ft(e,5,!1,e.toLowerCase(),null)});var mt=/[\-\:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function vt(e,t,n,r){var o,i=ht.hasOwnProperty(t)?ht[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}(t,n,i,r)&&(n=null),r||null===i?(o=t,(pt.hasOwnProperty(o)||!dt.hasOwnProperty(o)&&(ut.test(o)?pt[o]=!0:!(dt[o]=!0)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function yt(e,t){var n=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function bt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Et(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function _t(e,t){null!=(t=t.checked)&&vt(e,"checked",t,!1)}function wt(e,t){_t(e,t);var n=Et(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?xt(e,t.type,n):t.hasOwnProperty("defaultValue")&&xt(e,t.type,Et(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function kt(e,t){(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===e.value&&(e.value=""+e._wrapperState.initialValue),e.defaultValue=""+e._wrapperState.initialValue),""!==(t=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function xt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Et(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,gt);ht[t]=new ft(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,gt);ht[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,gt);ht[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),ht.tabIndex=new ft("tabIndex",1,!1,"tabindex",null);var Ct={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function St(e,t,n){return(e=ae.getPooled(Ct.change,e,t,n)).type="change",Ae(n),J(e),e}var Tt=null,Nt=null;function At(e){I(e,!1)}function Pt(e){if($e(B(e)))return e}function Ot(e,t){if("topChange"===e)return t}var It=!1;function Rt(){Tt&&(Tt.detachEvent("onpropertychange",Dt),Nt=Tt=null)}function Dt(e){"value"===e.propertyName&&Pt(Nt)&&Me(At,e=St(Nt,e,Be(e)))}function jt(e,t,n){"topFocus"===e?(Rt(),Nt=n,(Tt=t).attachEvent("onpropertychange",Dt)):"topBlur"===e&&Rt()}function Ft(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return Pt(Nt)}function Mt(e,t){if("topClick"===e)return Pt(t)}function Lt(e,t){if("topInput"===e||"topChange"===e)return Pt(t)}r.canUseDOM&&(It=We("input")&&(!document.documentMode||9<document.documentMode));var Ut={eventTypes:Ct,_isInputEventSupported:It,extractEvents:function(e,t,n,r){var o=t?B(t):window,i=void 0,a=void 0,s=o.nodeName&&o.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===o.type?i=Ot:Ue(o)?It?i=Lt:(i=Ft,a=jt):!(s=o.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type||(i=Mt),i&&(i=i(e,t)))return St(i,n,r);a&&a(e,o,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||o._wrapperState)&&e.controlled&&"number"===o.type&&xt(o,"number",o.value)}},Bt=ae.extend({view:null,detail:null}),Ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ht[e])&&!!t[e]}function zt(){return qt}var Wt=Bt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:zt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),Vt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Kt={eventTypes:Vt,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?U(t):null):e=null,e===t)return null;var i=null==e?o:B(e);o=null==t?o:B(t);var a=Wt.getPooled(Vt.mouseLeave,e,n,r);return a.type="mouseleave",a.target=i,a.relatedTarget=o,(n=Wt.getPooled(Vt.mouseEnter,t,n,r)).type="mouseenter",n.target=o,n.relatedTarget=i,Q(a,n,e,t),[a,n]}};function $t(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function Xt(e){return!!(e=e._reactInternalFiber)&&2===$t(e)}function Gt(e){2!==$t(e)&&ze("188")}function Jt(e){var t=e.alternate;if(!t)return 3===(t=$t(e))&&ze("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,i=o?o.alternate:null;if(!o||!i)break;if(o.child===i.child){for(var a=o.child;a;){if(a===n)return Gt(o),e;if(a===r)return Gt(o),t;a=a.sibling}ze("188")}if(n.return!==r.return)n=o,r=i;else{a=!1;for(var s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}a||ze("189")}}n.alternate!==r&&ze("190")}return 3!==n.tag&&ze("188"),n.stateNode.current===n?e:t}var Qt=ae.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yt=ae.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zt=Bt.extend({relatedTarget:null});function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rn=Bt.extend({key:function(e){if(e.key){var t=tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?nn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:zt,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),on=Wt.extend({dataTransfer:null}),an=Bt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:zt}),sn=ae.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ln=Wt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),cn={},un={};function dn(e,t){var n=e[0].toUpperCase()+e.slice(1),r="on"+n;t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n="top"+n],isInteractive:t},cn[e]=t,un[n]=t}"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(e){dn(e,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(e){dn(e,!1)});var pn={eventTypes:cn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=un[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var o=un[e];if(!o)return null;switch(e){case"topKeyPress":if(0===en(n))return null;case"topKeyDown":case"topKeyUp":e=rn;break;case"topBlur":case"topFocus":e=Zt;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=Wt;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=on;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=an;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Qt;break;case"topTransitionEnd":e=sn;break;case"topScroll":e=Bt;break;case"topWheel":e=ln;break;case"topCopy":case"topCut":case"topPaste":e=Yt;break;default:e=ae}return J(t=e.getPooled(o,t,n,r)),t}},fn=pn.isInteractiveTopLevelEventType,hn=[];function mn(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=U(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],R(e.topLevelType,t,e.nativeEvent,Be(e.nativeEvent))}var gn=!0;function vn(e){gn=!!e}function yn(e,t,n){if(!n)return null;e=(fn(e)?_n:wn).bind(null,e),n.addEventListener(t,e,!1)}function bn(e,t,n){if(!n)return null;e=(fn(e)?_n:wn).bind(null,e),n.addEventListener(t,e,!0)}function _n(e,t){De(wn,e,t)}function wn(e,t){if(gn){var n=Be(t);if(null!==(n=U(n))&&"number"==typeof n.tag&&2!==$t(n)&&(n=null),hn.length){var r=hn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Me(mn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,hn.length<10&&hn.push(e)}}}var kn=Object.freeze({get _enabled(){return gn},setEnabled:vn,isEnabled:function(){return gn},trapBubbledEvent:yn,trapCapturedEvent:bn,dispatchEvent:wn});function xn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var En={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},Cn={},Sn={};function Tn(e){if(Cn[e])return Cn[e];if(!En[e])return e;var t,n=En[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sn)return Cn[e]=n[t];return e}r.canUseDOM&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete En.animationend.animation,delete En.animationiteration.animation,delete En.animationstart.animation),"TransitionEvent"in window||delete En.transitionend.transition);var Nn={topAnimationEnd:Tn("animationend"),topAnimationIteration:Tn("animationiteration"),topAnimationStart:Tn("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Tn("transitionend"),topWheel:"wheel"},An={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Pn={},On=0,In="_reactListenersID"+(""+Math.random()).slice(2);function Rn(e){return Object.prototype.hasOwnProperty.call(e,In)||(e[In]=On++,Pn[e[In]]={}),Pn[e[In]]}function Dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jn(e,t){var n,r=Dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Dn(r)}}function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}var Mn=r.canUseDOM&&"documentMode"in document&&document.documentMode<=11,Ln={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},Un=null,Bn=null,Hn=null,qn=!1;function zn(e,t){if(qn||null==Un||Un!==f())return null;var n=Un;return"selectionStart"in n&&Fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,Hn&&D(Hn,n)?null:(Hn=n,(e=ae.getPooled(Ln.select,Bn,e,t)).type="select",e.target=Un,J(e),e)}var Wn={eventTypes:Ln,extractEvents:function(e,t,n,r){var o,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(o=!i)){e:{i=Rn(i),o=l.onSelect;for(var a=0;a<o.length;a++){var s=o[a];if(!i.hasOwnProperty(s)||!i[s]){i=!1;break e}}i=!0}o=!i}if(o)return null;switch(i=t?B(t):window,e){case"topFocus":(Ue(i)||"true"===i.contentEditable)&&(Un=i,Bn=t,Hn=null);break;case"topBlur":Hn=Bn=Un=null;break;case"topMouseDown":qn=!0;break;case"topContextMenu":case"topMouseUp":return qn=!1,zn(n,r);case"topSelectionChange":if(Mn)break;case"topKeyDown":case"topKeyUp":return zn(n,r)}return null}};function Vn(e,t,n,r){this.tag=e,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Kn(e,t,n){var r=e.alternate;return null===r?((r=new Vn(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,(r.alternate=e).alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function $n(e,t,n){var r=e.type,o=e.key;e=e.props;var i=void 0;if("function"==typeof r)i=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"==typeof r)i=5;else switch(r){case et:return Xn(e.children,t,n,o);case ot:i=11,t|=3;break;case tt:i=11,t|=2;break;case Qe:i=7;break;case Ye:i=9;break;default:if("object"==typeof r&&null!==r)switch(r.$$typeof){case nt:i=13;break;case rt:i=12;break;case it:i=14;break;default:if("number"==typeof r.tag)return(t=r).pendingProps=e,t.expirationTime=n,t;ze("130",null==r?r:typeof r,"")}else ze("130",null==r?r:typeof r,"")}return(t=new Vn(i,e,o,t)).type=r,t.expirationTime=n,t}function Xn(e,t,n,r){return(e=new Vn(10,e,r,t)).expirationTime=n,e}function Gn(e,t,n){return(e=new Vn(6,e,null,t)).expirationTime=n,e}function Jn(e,t,n){return(t=new Vn(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_=q.getFiberCurrentPropsFromNode,w=q.getInstanceFromNode,k=q.getNodeFromInstance,P.injectEventPluginsByName({SimpleEventPlugin:pn,EnterLeaveEventPlugin:Kt,ChangeEventPlugin:Ut,SelectEventPlugin:Wn,BeforeInputEventPlugin:xe});var Qn=null,Yn=null;function Zn(t){return function(e){try{return t(e)}catch(e){}}}function er(e){"function"==typeof Qn&&Qn(e)}function tr(e){"function"==typeof Yn&&Yn(e)}function nr(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function rr(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}new Set;var or=void 0,ir=void 0;function ar(e){or=ir=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=nr(null)),null!==t?null===(e=t.updateQueue)&&(e=t.updateQueue=nr(null)):e=null,ir=e!==(or=n)?e:null}function sr(e,t){ar(e),e=or;var n=ir;null===n?rr(e,t):null===e.last||null===n.last?(rr(e,t),rr(n,t)):(rr(e,t),n.last=t)}function lr(e,t,n,r){return"function"==typeof(e=e.partialState)?e.call(t,n,r):e}function cr(e,t,n,r,o,i){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var a=!0,s=n.first,l=!1;null!==s;){var c=s.expirationTime;if(i<c){var u=n.expirationTime;(0===u||c<u)&&(n.expirationTime=c),l||(l=!0,n.baseState=e)}else l||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(e=lr(s,r,e,o),a=!0):(c=lr(s,r,e,o))&&(e=a?He({},e,c):He(e,c),a=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(null===(c=n.callbackList)&&(c=n.callbackList=[]),c.push(s)),null!==s.capturedValue&&(null===(c=n.capturedValues)?n.capturedValues=[s.capturedValue]:c.push(s.capturedValue));s=s.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),l||(n.baseState=e),e}function ur(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var r=n[e],o=r.callback;r.callback=null,"function"!=typeof o&&ze("191",o),o.call(t)}}var dr=Array.isArray;function pr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(2!==n.tag&&ze("110"),r=n.stateNode),r||ze("147",e);var o=""+e;return null!==t&&null!==t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs===qe?r.refs={}:r.refs;null===e?delete t[o]:t[o]=e})._stringRef=o,t)}"string"!=typeof e&&ze("148"),n._owner||ze("254",e)}return e}function fr(e,t){"textarea"!==e.type&&ze("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function hr(d){function p(e,t){if(d){var n=e.lastEffect;null!==n?(n.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function f(e,t){if(!d)return null;for(;null!==t;)p(e,t),t=t.sibling;return null}function h(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t,n){return(e=Kn(e,t,n)).index=0,e.sibling=null,e}function m(e,t,n){return e.index=n,d?null!==(n=e.alternate)?(n=n.index)<t?(e.effectTag=2,t):n:(e.effectTag=2,t):t}function s(e){return d&&null===e.alternate&&(e.effectTag=2),e}function i(e,t,n,r){return null===t||6!==t.tag?(t=Gn(n,e.mode,r)).return=e:(t=a(t,n,r)).return=e,t}function l(e,t,n,r){return null!==t&&t.type===n.type?(r=a(t,n.props,r)).ref=pr(e,t,n):(r=$n(n,e.mode,r)).ref=pr(e,t,n),r.return=e,r}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Jn(n,e.mode,r)).return=e:(t=a(t,n.children||[],r)).return=e,t}function u(e,t,n,r,o){return null===t||10!==t.tag?(t=Xn(n,e.mode,r,o)).return=e:(t=a(t,n,r)).return=e,t}function g(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Gn(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Je:return(n=$n(t,e.mode,n)).ref=pr(e,null,t),n.return=e,n;case Ze:return(t=Jn(t,e.mode,n)).return=e,t}if(dr(t)||st(t))return(t=Xn(t,e.mode,n,null)).return=e,t;fr(e,t)}return null}function v(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:i(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Je:return n.key===o?n.type===et?u(e,t,n.props.children,r,o):l(e,t,n,r):null;case Ze:return n.key===o?c(e,t,n,r):null}if(dr(n)||st(n))return null!==o?null:u(e,t,n,r,null);fr(e,n)}return null}function y(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return i(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Je:return e=e.get(null===r.key?n:r.key)||null,r.type===et?u(t,e,r.props.children,o,r.key):l(t,e,r,o);case Ze:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(dr(r)||st(r))return u(t,e=e.get(n)||null,r,o,null);fr(t,r)}return null}return function(e,t,n,r){"object"==typeof n&&null!==n&&n.type===et&&null===n.key&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case Je:e:{var i=n.key;for(o=t;null!==o;){if(o.key===i){if(10===o.tag?n.type===et:o.type===n.type){f(e,o.sibling),(t=a(o,n.type===et?n.props.children:n.props,r)).ref=pr(e,o,n),t.return=e,e=t;break e}f(e,o);break}p(e,o),o=o.sibling}n.type===et?((t=Xn(n.props.children,e.mode,r,n.key)).return=e,e=t):((r=$n(n,e.mode,r)).ref=pr(e,t,n),r.return=e,e=r)}return s(e);case Ze:e:{for(o=n.key;null!==t;){if(t.key===o){if(4===t.tag&&t.stateNode.containerInfo===n.containerInfo&&t.stateNode.implementation===n.implementation){f(e,t.sibling),(t=a(t,n.children||[],r)).return=e,e=t;break e}f(e,t);break}p(e,t),t=t.sibling}(t=Jn(n,e.mode,r)).return=e,e=t}return s(e)}if("string"==typeof n||"number"==typeof n)return n=""+n,null!==t&&6===t.tag?(f(e,t.sibling),t=a(t,n,r)):(f(e,t),t=Gn(n,e.mode,r)),t.return=e,s(e=t);if(dr(n))return function(t,e,n,r){for(var o=null,i=null,a=e,s=e=0,l=null;null!==a&&s<n.length;s++){a.index>s?(l=a,a=null):l=a.sibling;var c=v(t,a,n[s],r);if(null===c){null===a&&(a=l);break}d&&a&&null===c.alternate&&p(t,a),e=m(c,e,s),null===i?o=c:i.sibling=c,i=c,a=l}if(s===n.length)return f(t,a),o;if(null===a){for(;s<n.length;s++)(a=g(t,n[s],r))&&(e=m(a,e,s),null===i?o=a:i.sibling=a,i=a);return o}for(a=h(t,a);s<n.length;s++)(l=y(a,t,s,n[s],r))&&(d&&null!==l.alternate&&a.delete(null===l.key?s:l.key),e=m(l,e,s),null===i?o=l:i.sibling=l,i=l);return d&&a.forEach(function(e){return p(t,e)}),o}(e,t,n,r);if(st(n))return function(t,e,n,r){var o=st(n);"function"!=typeof o&&ze("150"),null==(n=o.call(n))&&ze("151");for(var i=o=null,a=e,s=e=0,l=null,c=n.next();null!==a&&!c.done;s++,c=n.next()){a.index>s?(l=a,a=null):l=a.sibling;var u=v(t,a,c.value,r);if(null===u){a||(a=l);break}d&&a&&null===u.alternate&&p(t,a),e=m(u,e,s),null===i?o=u:i.sibling=u,i=u,a=l}if(c.done)return f(t,a),o;if(null===a){for(;!c.done;s++,c=n.next())null!==(c=g(t,c.value,r))&&(e=m(c,e,s),null===i?o=c:i.sibling=c,i=c);return o}for(a=h(t,a);!c.done;s++,c=n.next())null!==(c=y(a,t,s,c.value,r))&&(d&&null!==c.alternate&&a.delete(null===c.key?s:c.key),e=m(c,e,s),null===i?o=c:i.sibling=c,i=c);return d&&a.forEach(function(e){return p(t,e)}),o}(e,t,n,r);if(o&&fr(e,n),void 0===n)switch(e.tag){case 2:case 1:ze("152",(r=e.type).displayName||r.name||"Component")}return f(e,t)}}var mr=hr(!0),gr=hr(!1);function vr(e,t,n,r,o,i,a){function l(e,t,n){s(e,t,n,t.expirationTime)}function s(e,t,n,r){t.child=null===e?gr(t,null,n,r):mr(t,e.child,n,r)}function c(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function u(e,t,n,r,o,i){if(c(e,t),!n&&!o)return r&&E(t,!1),f(e,t);n=t.stateNode,Xe.current=t;var a=o?null:n.render();return t.effectTag|=1,o&&(s(e,t,null,i),t.child=null),s(e,t,a,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&E(t,!0),t.child}function d(e){var t=e.stateNode;t.pendingContext?x(e,t.pendingContext,t.pendingContext!==t.context):t.context&&x(e,t.context,!1),v(e,t.containerInfo)}function p(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){switch(o.tag){case 12:var i=0|o.stateNode;if(o.type===t&&0!=(i&n)){for(i=o;null!==i;){var a=i.alternate;if(0===i.expirationTime||i.expirationTime>r)i.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}i=i.return}i=null}else i=o.child;break;case 13:i=o.type===e.type?null:o.child;break;default:i=o.child}if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===e){i=null;break}if(null!==(o=i.sibling)){i=o;break}i=i.return}o=i}}function f(e,t){if(null!==e&&t.child!==e.child&&ze("153"),null!==t.child){var n=Kn(e=t.child,e.pendingProps,e.expirationTime);for((t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kn(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}var h=e.shouldSetTextContent,m=e.shouldDeprioritizeSubtree,g=t.pushHostContext,v=t.pushHostContainer,y=r.pushProvider,b=n.getMaskedContext,_=n.getUnmaskedContext,w=n.hasContextChanged,k=n.pushContextProvider,x=n.pushTopLevelContextObject,E=n.invalidateContextProvider,C=o.enterHydrationState,S=o.resetHydrationState,T=o.tryToClaimNextHydratableInstance,N=(e=function(e,o,i,d,p){function f(e,t,n,r,o,i){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var a=e.stateNode;return e=e.type,"function"==typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,o,i):!(e.prototype&&e.prototype.isPureReactComponent&&D(t,n)&&D(r,o))}function s(e,t){t.updater=u,(e.stateNode=t)._reactInternalFiber=e}function h(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&u.enqueueReplaceState(t,t.state,null)}function m(e,t,n,r){if("function"==typeof(e=e.type).getDerivedStateFromProps)return e.getDerivedStateFromProps.call(null,n,r)}var l=e.cacheContext,g=e.getMaskedContext,v=e.getUnmaskedContext,c=e.isContextConsumer,y=e.hasContextChanged,u={isMounted:Xt,enqueueSetState:function(e,t,n){e=e._reactInternalFiber,n=void 0===n?null:n;var r=i(e);sr(e,{expirationTime:r,partialState:t,callback:n,isReplace:!1,isForced:!1,capturedValue:null,next:null}),o(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber,n=void 0===n?null:n;var r=i(e);sr(e,{expirationTime:r,partialState:t,callback:n,isReplace:!0,isForced:!1,capturedValue:null,next:null}),o(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber,t=void 0===t?null:t;var n=i(e);sr(e,{expirationTime:n,partialState:null,callback:t,isReplace:!1,isForced:!0,capturedValue:null,next:null}),o(e,n)}};return{adoptClassInstance:s,callGetDerivedStateFromProps:m,constructClassInstance:function(e,t){var n=e.type,r=v(e),o=c(e),i=o?g(e,r):qe,a=null!==(n=new n(t,i)).state&&void 0!==n.state?n.state:null;return s(e,n),e.memoizedState=a,null!=(t=m(e,0,t,a))&&(e.memoizedState=He({},e.memoizedState,t)),o&&l(e,r,i),n},mountClassInstance:function(e,t){var n=e.type,r=e.alternate,o=e.stateNode,i=e.pendingProps,a=v(e);o.props=i,o.state=e.memoizedState,o.refs=qe,o.context=g(e,a),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(n=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),n!==o.state&&u.enqueueReplaceState(o,o.state,null),null!==(n=e.updateQueue)&&(o.state=cr(r,e,n,o,i,t))),"function"==typeof o.componentDidMount&&(e.effectTag|=4)},resumeMountClassInstance:function(e,t){var n=e.type,r=e.stateNode;r.props=e.memoizedProps,r.state=e.memoizedState;var o=e.memoizedProps,i=e.pendingProps,a=r.context,s=v(e);s=g(e,s),(n="function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==i||a!==s)&&h(e,r,i,s),a=e.memoizedState,t=null!==e.updateQueue?cr(null,e,e.updateQueue,r,i,t):a;var l=void 0;if(o!==i&&(l=m(e,0,i,t)),null!=l){t=null==t?l:He({},t,l);var c=e.updateQueue;null!==c&&(c.baseState=He({},c.baseState,l))}return o!==i||a!==t||y()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((o=f(e,o,i,a,t,s))?(n||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(e.effectTag|=4)):("function"==typeof r.componentDidMount&&(e.effectTag|=4),d(e,i),p(e,t)),r.props=i,r.state=t,r.context=s,o):("function"==typeof r.componentDidMount&&(e.effectTag|=4),!1)},updateClassInstance:function(e,t,n){var r=t.type,o=t.stateNode;o.props=t.memoizedProps,o.state=t.memoizedState;var i=t.memoizedProps,a=t.pendingProps,s=o.context,l=v(t);l=g(t,l),(r="function"==typeof r.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(i!==a||s!==l)&&h(t,o,a,l),s=t.memoizedState,n=null!==t.updateQueue?cr(e,t,t.updateQueue,o,a,n):s;var c=void 0;if(i!==a&&(c=m(t,0,a,n)),null!=c){n=null==n?c:He({},n,c);var u=t.updateQueue;null!==u&&(u.baseState=He({},u.baseState,c))}return i!==a||s!==n||y()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((c=f(t,i,a,s,n,l))?(r||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(a,n,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(a,n,l)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=2048)):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=2048),d(t,a),p(t,n)),o.props=a,o.state=n,o.context=l,c):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=2048),!1)}}}(n,i,a,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t})).adoptClassInstance,A=e.callGetDerivedStateFromProps,P=e.constructClassInstance,O=e.mountClassInstance,I=e.resumeMountClassInstance,R=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:d(t);break;case 2:k(t);break;case 4:v(t,t.stateNode.containerInfo);break;case 13:y(t)}return null}switch(t.tag){case 0:null!==e&&ze("155");var r=t.type,o=t.pendingProps,i=_(t);return r=r(o,i=b(t,i)),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(i=t.type,t.tag=2,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"==typeof i.getDerivedStateFromProps&&(null!=(o=A(t,r,o,t.memoizedState))&&(t.memoizedState=He({},t.memoizedState,o))),o=k(t),N(t,r),O(t,n),e=u(e,t,!0,o,!1,n)):(t.tag=1,l(e,t,r),t.memoizedProps=o,e=t.child),e;case 1:return o=t.type,n=t.pendingProps,w()||t.memoizedProps!==n?(r=_(t),o=o(n,r=b(t,r)),t.effectTag|=1,l(e,t,o),t.memoizedProps=n,e=t.child):e=f(e,t),e;case 2:o=k(t),null===e?null===t.stateNode?(P(t,t.pendingProps),O(t,n),r=!0):r=I(t,n):r=R(e,t,n),i=!1;var a=t.updateQueue;return null!==a&&null!==a.capturedValues&&(i=r=!0),u(e,t,r,o,i,n);case 3:e:if(d(t),r=t.updateQueue,null!==r){if(i=t.memoizedState,o=cr(e,t,r,null,null,n),t.memoizedState=o,null!==(r=t.updateQueue)&&null!==r.capturedValues)r=null;else{if(i===o){S(),e=f(e,t);break e}r=o.element}i=t.stateNode,(null===e||null===e.child)&&i.hydrate&&C(t)?(t.effectTag|=2,t.child=gr(t,null,r,n)):(S(),l(e,t,r)),t.memoizedState=o,e=t.child}else S(),e=f(e,t);return e;case 5:return g(t),null===e&&T(t),o=t.type,a=t.memoizedProps,r=t.pendingProps,i=null!==e?e.memoizedProps:null,w()||a!==r||((a=1&t.mode&&m(o,r))&&(t.expirationTime=1073741823),a&&1073741823===n)?(a=r.children,h(o,r)?a=null:i&&h(o,i)&&(t.effectTag|=16),c(e,t),1073741823!==n&&1&t.mode&&m(o,r)?(t.expirationTime=1073741823,t.memoizedProps=r,e=null):(l(e,t,a),t.memoizedProps=r,e=t.child)):e=f(e,t),e;case 6:return null===e&&T(t),t.memoizedProps=t.pendingProps,null;case 8:t.tag=7;case 7:return o=t.pendingProps,w()||t.memoizedProps!==o||(o=t.memoizedProps),r=o.children,t.stateNode=null===e?gr(t,t.stateNode,r,n):mr(t,e.stateNode,r,n),t.memoizedProps=o,t.stateNode;case 9:return null;case 4:return v(t,t.stateNode.containerInfo),o=t.pendingProps,w()||t.memoizedProps!==o?(null===e?t.child=mr(t,null,o,n):l(e,t,o),t.memoizedProps=o,e=t.child):e=f(e,t),e;case 14:return l(e,t,n=(n=t.type.render)(t.pendingProps,t.ref)),t.memoizedProps=n,t.child;case 10:return n=t.pendingProps,w()||t.memoizedProps!==n?(l(e,t,n),t.memoizedProps=n,e=t.child):e=f(e,t),e;case 11:return n=t.pendingProps.children,w()||null!==n&&t.memoizedProps!==n?(l(e,t,n),t.memoizedProps=n,e=t.child):e=f(e,t),e;case 13:return function(e,t,n){var r=t.type._context,o=t.pendingProps,i=t.memoizedProps;if(!w()&&i===o)return t.stateNode=0,y(t),f(e,t);var a=o.value;if(t.memoizedProps=o,null===i)a=1073741823;else if(i.value===o.value){if(i.children===o.children)return t.stateNode=0,y(t),f(e,t);a=0}else{var s=i.value;if(s===a&&(0!==s||1/s==1/a)||s!=s&&a!=a){if(i.children===o.children)return t.stateNode=0,y(t),f(e,t);a=0}else if(a="function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823,0==(a|=0)){if(i.children===o.children)return t.stateNode=0,y(t),f(e,t)}else p(t,r,a,n)}return t.stateNode=a,y(t),l(e,t,o.children),t.child}(e,t,n);case 12:r=t.type,i=t.pendingProps;var s=t.memoizedProps;return o=r._currentValue,a=r._changedBits,w()||0!==a||s!==i?(null==(s=(t.memoizedProps=i).unstable_observedBits)&&(s=1073741823),0!=(a&(t.stateNode=s))&&p(t,r,a,n),l(e,t,n=(n=i.children)(o)),e=t.child):e=f(e,t),e;default:ze("156")}}}}function yr(e,t){var n=t.source;null===t.stack&&ct(n),null!==n&&lt(n),t=t.value,null!==e&&2===e.tag&&lt(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}var br={};function _r(e){function i(){if(null!==me)for(var e=me.return;null!==e;)G(e),e=e.return;ve=0,me=ge=null,_e=!1}function o(e){return null!==we&&we.has(e)}function a(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(512&e.effectTag)){t=K(t,e,ve);var o=e;if(1073741823===ve||1073741823!==o.expirationTime){e:switch(o.tag){case 3:case 2:var i=o.updateQueue;i=null===i?0:i.expirationTime;break e;default:i=0}for(var a=o.child;null!==a;)0!==a.expirationTime&&(0===i||i>a.expirationTime)&&(i=a.expirationTime),a=a.sibling;o.expirationTime=i}if(null!==t)return t;if(null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){_e=!0;break}e=n}else{if(null!==(e=X(e)))return e.effectTag&=2559,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function s(e){var t=V(e.alternate,e,ve);return null===t&&(t=a(e)),Xe.current=null,t}function r(e,t,n){he&&ze("243"),he=!0,t===ve&&e===ge&&null!==me||(i(),ve=t,me=Kn((ge=e).current,null,ve),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(n)for(;null!==me&&!w();)me=s(me);else for(;null!==me;)me=s(me)}catch(e){if(null===me){r=!0,k(e);break}var o=(n=me).return;if(null===o){r=!0,k(e);break}$(o,n,e),me=a(n)}break}return he=!1,r||null!==me?null:_e?(e.pendingCommitExpirationTime=t,e.current.alternate):void ze("262")}function l(e,t,n,r){sr(t,{expirationTime:r,partialState:null,callback:null,isReplace:!(e={value:n,source:e,stack:ct(e)}),isForced:!1,capturedValue:e,next:null}),c(t,r)}function p(e,t){e:{he&&!be&&ze("263");for(var n=e.return;null!==n;){switch(n.tag){case 2:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromCatch||"function"==typeof r.componentDidCatch&&!o(r)){l(e,n,t,1),e=void 0;break e}break;case 3:l(e,n,t,1),e=void 0;break e}n=n.return}3===e.tag&&l(e,e,t,1),e=void 0}return e}function t(e){return e=0!==fe?fe:he?be?1:ve:1&e.mode?Fe?10*(1+((f()+50)/10|0)):25*(1+((f()+500)/25|0)):1,Fe&&(0===Ae||Ae<e)&&(Ae=e),e}function c(e,t){e:{for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag){t=void 0;break e}var n=e.stateNode;!he&&0!==ve&&t<ve&&i(),he&&!be&&ge===n||h(n,t),Le<Ue&&ze("185")}e=e.return}t=void 0}return t}function f(){return de=ie()-ue,2+(de/10|0)}function u(e,t,n,r,o){var i=fe;fe=1;try{return e(t,n,r,o)}finally{fe=i}}function d(e){if(0!==Ee){if(Ee<e)return;se(Ce)}var t=ie()-ue;Ce=ae(n,{timeout:10*((Ee=e)-2)-t})}function h(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===xe?(ke=xe=e,e.nextScheduledRoot=e):(xe=xe.nextScheduledRoot=e).nextScheduledRoot=ke;else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}Se||(De?je&&b(Te=e,Ne=1,!1):1===t?g():d(t))}function m(){var e=0,t=null;if(null!==xe)for(var n=xe,r=ke;null!==r;){var o=r.remainingExpirationTime;if(0===o){if((null===n||null===xe)&&ze("244"),r===r.nextScheduledRoot){ke=xe=r.nextScheduledRoot=null;break}if(r===ke)ke=o=r.nextScheduledRoot,xe.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===xe){(xe=n).nextScheduledRoot=ke,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=r),r===xe)break;r=(n=r).nextScheduledRoot}}null!==(n=Te)&&n===t&&1===e?Ue++:Ue=0,Te=t,Ne=e}function n(e){v(0,!0,e)}function g(){v(1,!1,null)}function v(e,t,n){if(Re=n,m(),t)for(;null!==Te&&0!==Ne&&(0===e||Ne<=e)&&(!Pe||f()>=Ne);)b(Te,Ne,!Pe),m();else for(;null!==Te&&0!==Ne&&(0===e||Ne<=e);)b(Te,Ne,!1),m();null!==Re&&(Ee=0,Ce=-1),0!==Ne&&d(Ne),Re=null,Pe=!1,y()}function y(){if(Ue=0,null!==Me){var e=Me;Me=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){Oe||(Oe=!0,Ie=e)}}}if(Oe)throw e=Ie,Ie=null,Oe=!1,e}function b(e,t,n){Se&&ze("245"),Se=!0,n?null!==(n=e.finishedWork)?_(e,n,t):(e.finishedWork=null)!==(n=r(e,t,!0))&&(w()?e.finishedWork=n:_(e,n,t)):null!==(n=e.finishedWork)?_(e,n,t):(e.finishedWork=null)!==(n=r(e,t,!1))&&_(e,n,t),Se=!1}function _(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Me?Me=[r]:Me.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);e.finishedWork=null,be=he=!0,(n=t.stateNode).current===t&&ze("177"),0===(r=n.pendingCommitExpirationTime)&&ze("261"),n.pendingCommitExpirationTime=0;var o=f();if(Xe.current=null,1<t.effectTag)if(null!==t.lastEffect)var i=(t.lastEffect.nextEffect=t).firstEffect;else i=t;else i=t.firstEffect;for(le(n.containerInfo),ye=i;null!==ye;){var a=!1,s=void 0;try{for(;null!==ye;)2048&ye.effectTag&&J(ye.alternate,ye),ye=ye.nextEffect}catch(e){a=!0,s=e}a&&(null===ye&&ze("178"),p(ye,s),null!==ye&&(ye=ye.nextEffect))}for(ye=i;null!==ye;){a=!1,s=void 0;try{for(;null!==ye;){var l=ye.effectTag;if(16&l&&Q(ye),128&l){var c=ye.alternate;null!==c&&oe(c)}switch(14&l){case 2:Y(ye),ye.effectTag&=-3;break;case 6:Y(ye),ye.effectTag&=-3,ee(ye.alternate,ye);break;case 4:ee(ye.alternate,ye);break;case 8:Z(ye)}ye=ye.nextEffect}}catch(e){a=!0,s=e}a&&(null===ye&&ze("178"),p(ye,s),null!==ye&&(ye=ye.nextEffect))}for(ce(n.containerInfo),n.current=t,ye=i;null!==ye;){l=!1,c=void 0;try{for(i=n,a=o,s=r;null!==ye;){var u=ye.effectTag;36&u&&te(i,ye.alternate,ye,a,s),256&u&&ne(ye,k),128&u&&re(ye);var d=ye.nextEffect;ye.nextEffect=null,ye=d}}catch(e){l=!0,c=e}l&&(null===ye&&ze("178"),p(ye,c),null!==ye&&(ye=ye.nextEffect))}he=be=!1,er(t.stateNode),0===(t=n.current.expirationTime)&&(we=null),e.remainingExpirationTime=t}function w(){return!(null===Re||Re.timeRemaining()>Be)&&(Pe=!0)}function k(e){null===Te&&ze("246"),Te.remainingExpirationTime=0,Oe||(Oe=!0,Ie=e)}var x,E,C,S,T,N,A,P,O,I=(x=[],E=-1,{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===E},pop:function(e){E<0||(e.current=x[E],x[E]=null,E--)},push:function(e,t){x[++E]=e.current,e.current=t},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}),R=function(e,t){function r(e){return e===br&&ze("174"),e}var o=e.getChildHostContext,n=e.getRootHostContext;e=t.createCursor;var i=t.push,a=t.pop,s=e(br),l=e(br),c=e(br);return{getHostContext:function(){return r(s.current)},getRootHostContainer:function(){return r(c.current)},popHostContainer:function(e){a(s,e),a(l,e),a(c,e)},popHostContext:function(e){l.current===e&&(a(s,e),a(l,e))},pushHostContainer:function(e,t){i(c,t,e),i(l,e,e),i(s,br,e),t=n(t),a(s,e),i(s,t,e)},pushHostContext:function(e){var t=r(c.current),n=r(s.current);n!==(t=o(n,e.type,t))&&(i(l,e,e),i(s,t,e))}}}(e,I),D=function(e){function a(e,t,n){(e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function n(e){return 2===e.tag&&null!=e.type.childContextTypes}function o(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var o in n=n.getChildContext())o in r||ze("108",lt(e)||"Unknown",o);return He({},t,n)}var t=e.createCursor,i=e.push,s=e.pop,l=t(qe),c=t(!1),u=qe;return{getUnmaskedContext:function(e){return n(e)?u:l.current},cacheContext:a,getMaskedContext:function(e,t){var n=e.type.contextTypes;if(!n)return qe;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&a(e,t,i),i},hasContextChanged:function(){return c.current},isContextConsumer:function(e){return 2===e.tag&&null!=e.type.contextTypes},isContextProvider:n,popContextProvider:function(e){n(e)&&(s(c,e),s(l,e))},popTopLevelContextObject:function(e){s(c,e),s(l,e)},pushTopLevelContextObject:function(e,t,n){null!=l.cursor&&ze("168"),i(l,t,e),i(c,n,e)},processChildContext:o,pushContextProvider:function(e){if(!n(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||qe,u=l.current,i(l,t,e),i(c,c.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||ze("169"),t){var r=o(e,u);n.__reactInternalMemoizedMergedChildContext=r,s(c,e),s(l,e),i(l,r,e)}else s(c,e);i(c,t,e)},findCurrentUnmaskedContext:function(e){for((2!==$t(e)||2!==e.tag)&&ze("170");3!==e.tag;){if(n(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||ze("171")}return e.stateNode.context}}}(I);S=(C=I).createCursor,T=C.push,N=C.pop,A=S(null),P=S(null),O=S(0),I={pushProvider:function(e){var t=e.type._context;T(O,t._changedBits,e),T(P,t._currentValue,e),T(A,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode},popProvider:function(e){var t=O.current,n=P.current;N(A,e),N(P,e),N(O,e),(e=e.type._context)._currentValue=n,e._changedBits=t}};var j,F,M,L,U,B,H,q,z,W=function(e){function n(e,t){var n=new Vn(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function r(e,t){switch(e.tag){case 5:return null!==(t=a(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=s(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function o(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;d=e}var i=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){ze("175")},prepareToHydrateHostTextInstance:function(){ze("176")},popHydrationState:function(){return!1}};var a=e.canHydrateInstance,s=e.canHydrateTextInstance,l=e.getNextHydratableSibling,c=e.getFirstHydratableChild,u=e.hydrateInstance,t=e.hydrateTextInstance,d=null,p=null,f=!1;return{enterHydrationState:function(e){return p=c(e.stateNode.containerInfo),d=e,f=!0},resetHydrationState:function(){p=d=null,f=!1},tryToClaimNextHydratableInstance:function(e){if(f){var t=p;if(t){if(!r(e,t)){if(!(t=l(t))||!r(e,t))return e.effectTag|=2,f=!1,void(d=e);n(d,p)}d=e,p=c(t)}else e.effectTag|=2,f=!1,d=e}},prepareToHydrateHostInstance:function(e,t,n){return t=u(e.stateNode,e.type,e.memoizedProps,t,n,e),null!==(e.updateQueue=t)},prepareToHydrateHostTextInstance:function(e){return t(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==d)return!1;if(!f)return o(e),!(f=!0);var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!i(t,e.memoizedProps))for(t=p;t;)n(e,t),t=l(t);return o(e),p=d?l(e.stateNode):null,!0}}}(e),V=vr(e,R,D,I,W,c,t).beginWork,K=function(e,t,n,r,o){function l(e){e.effectTag|=4}var c=e.createInstance,u=e.createTextInstance,d=e.appendInitialChild,p=e.finalizeInitialChildren,f=e.prepareUpdate,i=e.persistence,h=t.getRootHostContainer,m=t.popHostContext,g=t.getHostContext,v=t.popHostContainer,y=n.popContextProvider,b=n.popTopLevelContextObject,_=r.popProvider,w=o.prepareToHydrateHostInstance,k=o.prepareToHydrateHostTextInstance,x=o.popHydrationState,E=void 0,C=void 0,S=void 0;return e.mutation?(E=function(){},C=function(e,t,n){(t.updateQueue=n)&&l(t)},S=function(e,t,n,r){n!==r&&l(t)}):ze(i?"235":"236"),{completeWork:function(e,t,n){var r=t.pendingProps;switch(t.tag){case 1:return null;case 2:return y(t),e=t.stateNode,null!==(r=t.updateQueue)&&null!==r.capturedValues&&(t.effectTag&=-65,"function"==typeof e.componentDidCatch?t.effectTag|=256:r.capturedValues=null),null;case 3:return v(t),b(t),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(x(t),t.effectTag&=-3),E(t),null!==(e=t.updateQueue)&&null!==e.capturedValues&&(t.effectTag|=256),null;case 5:m(t),n=h();var o=t.type;if(null!==e&&null!=t.stateNode){var i=e.memoizedProps,a=t.stateNode,s=g();a=f(a,o,i,r,n,s),C(e,t,a,o,i,r,n,s),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!r)return null===t.stateNode&&ze("166"),null;if(e=g(),x(t))w(t,n,e)&&l(t);else{i=c(o,r,n,e,t);e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)d(i,s.stateNode);else if(4!==s.tag&&null!==s.child){s=(s.child.return=s).child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p(i,o,r,n,e)&&l(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)S(e,t,e.memoizedProps,r);else{if("string"!=typeof r)return null===t.stateNode&&ze("166"),null;e=h(),n=g(),x(t)?k(t)&&l(t):t.stateNode=u(r,e,n,t)}return null;case 7:(r=t.memoizedProps)||ze("165"),t.tag=8,o=[];e:for((i=t.stateNode)&&(i.return=t);null!==i;){if(5===i.tag||6===i.tag||4===i.tag)ze("247");else if(9===i.tag)o.push(i.pendingProps.value);else if(null!==i.child){i=(i.child.return=i).child;continue}for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}return r=(i=r.handler)(r.props,o),t.child=mr(t,null!==e?e.child:null,r,n),t.child;case 8:return t.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return v(t),E(t),null;case 13:return _(t),null;case 12:return null;case 0:ze("167");default:ze("156")}}}}(e,R,D,I,W).completeWork;F=D,M=I,L=o,U=(j=R).popHostContainer,B=j.popHostContext,H=F.popContextProvider,q=F.popTopLevelContextObject,z=M.popProvider;var $=(R={throwException:function(e,t,n){t.effectTag|=512,t.firstEffect=t.lastEffect=null,t={value:n,source:t,stack:ct(t)};do{switch(e.tag){case 3:return ar(e),e.updateQueue.capturedValues=[t],void(e.effectTag|=1024);case 2:if(n=e.stateNode,0==(64&e.effectTag)&&null!==n&&"function"==typeof n.componentDidCatch&&!L(n)){ar(e);var r=(n=e.updateQueue).capturedValues;return null===r?n.capturedValues=[t]:r.push(t),void(e.effectTag|=1024)}}e=e.return}while(null!==e)},unwindWork:function(e){switch(e.tag){case 2:H(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return U(e),q(e),1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 5:return B(e),null;case 4:return U(e),null;case 13:return z(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case 2:H(e);break;case 3:U(e),q(e);break;case 5:B(e);break;case 4:U(e);break;case 13:z(e)}}}).throwException,X=R.unwindWork,G=R.unwindInterruptedWork,J=(R=function(e,n,t,r,s){function o(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){n(t,e)}else e.current=null}function i(t){switch(tr(t),t.tag){case 2:o(t);var e=t.stateNode;if("function"==typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){n(t,e)}break;case 5:o(t);break;case 7:a(t.stateNode);break;case 4:d&&c(t)}}function a(e){for(var t=e;;)if(i(t),null===t.child||d&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t=(t.child.return=t).child}function l(e){return 5===e.tag||3===e.tag||4===e.tag}function c(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&ze("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)a(t),o?w(r,t.stateNode):_(r,t.stateNode);else if(4===t.tag?r=t.stateNode.containerInfo:i(t),null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var u=e.getPublicInstance,d=e.mutation;e=e.persistence,d||ze(e?"235":"236");var p=d.commitMount,f=d.commitUpdate,h=d.resetTextContent,m=d.commitTextUpdate,g=d.appendChild,v=d.appendChildToContainer,y=d.insertBefore,b=d.insertInContainerBefore,_=d.removeChild,w=d.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(e,t){switch(t.tag){case 2:if(2048&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;(e=t.stateNode).props=t.memoizedProps,e.state=t.memoizedState,t=e.getSnapshotBeforeUpdate(n,r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:break;default:ze("163")}},commitResetTextContent:function(e){h(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(l(t)){var n=t;break e}t=t.return}ze("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:ze("161")}16&n.effectTag&&(h(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||l(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)n?r?b(t,o.stateNode,n):y(t,o.stateNode,n):r?v(t,o.stateNode):g(t,o.stateNode);else if(4!==o.tag&&null!==o.child){o=(o.child.return=o).child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(e){c(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,i=t.updateQueue;(t.updateQueue=null)!==i&&f(n,i,o,e,r,t)}break;case 6:null===t.stateNode&&ze("162"),n=t.memoizedProps,m(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:ze("163")}},commitLifeCycles:function(e,t,n){switch(n.tag){case 2:if(e=n.stateNode,4&n.effectTag)if(null===t)e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidMount();else{var r=t.memoizedProps;t=t.memoizedState,e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}null!==(n=n.updateQueue)&&ur(n,e);break;case 3:if(null!==(t=n.updateQueue)){if((e=null)!==n.child)switch(n.child.tag){case 5:e=u(n.child.stateNode);break;case 2:e=n.child.stateNode}ur(t,e)}break;case 5:e=n.stateNode,null===t&&4&n.effectTag&&p(e,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:ze("163")}},commitErrorLogging:function(e,t){switch(e.tag){case 2:var n=e.type;t=e.stateNode;var r=e.updateQueue;(null===r||null===r.capturedValues)&&ze("264");var o=r.capturedValues;for(r.capturedValues=null,"function"!=typeof n.getDerivedStateFromCatch&&s(t),t.props=e.memoizedProps,t.state=e.memoizedState,n=0;n<o.length;n++){var i=(r=o[n]).value,a=r.stack;yr(e,r),t.componentDidCatch(i,{componentStack:null!==a?a:""})}break;case 3:for((null===(n=e.updateQueue)||null===n.capturedValues)&&ze("264"),o=n.capturedValues,n.capturedValues=null,n=0;n<o.length;n++)yr(e,r=o[n]),t(r.value);break;default:ze("265")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=u(n);break;default:e=n}"function"==typeof t?t(e):t.current=e}},commitDetachRef:function(e){null!==(e=e.ref)&&("function"==typeof e?e(null):e.current=null)}}}(e,p,0,0,function(e){null===we?we=new Set([e]):we.add(e)})).commitBeforeMutationLifeCycles,Q=R.commitResetTextContent,Y=R.commitPlacement,Z=R.commitDeletion,ee=R.commitWork,te=R.commitLifeCycles,ne=R.commitErrorLogging,re=R.commitAttachRef,oe=R.commitDetachRef,ie=e.now,ae=e.scheduleDeferredCallback,se=e.cancelDeferredCallback,le=e.prepareForCommit,ce=e.resetAfterCommit,ue=ie(),de=ue,pe=0,fe=0,he=!1,me=null,ge=null,ve=0,ye=null,be=!1,_e=!1,we=null,ke=null,xe=null,Ee=0,Ce=-1,Se=!1,Te=null,Ne=0,Ae=0,Pe=!1,Oe=!1,Ie=null,Re=null,De=!1,je=!1,Fe=!1,Me=null,Le=1e3,Ue=0,Be=1;return{recalculateCurrentTime:f,computeExpirationForFiber:t,scheduleWork:c,requestWork:h,flushRoot:function(e,t){Se&&ze("253"),b(Te=e,Ne=t,!1),g(),y()},batchedUpdates:function(e,t){var n=De;De=!0;try{return e(t)}finally{(De=n)||Se||g()}},unbatchedUpdates:function(e,t){if(De&&!je){je=!0;try{return e(t)}finally{je=!1}}return e(t)},flushSync:function(e,t){Se&&ze("187");var n=De;De=!0;try{return u(e,t)}finally{De=n,g()}},flushControlled:function(e){var t=De;De=!0;try{u(e)}finally{(De=t)||Se||v(1,!1,null)}},deferredUpdates:function(e){var t=fe;fe=25*(1+((f()+500)/25|0));try{return e()}finally{fe=t}},syncUpdates:u,interactiveUpdates:function(e,t,n){if(Fe)return e(t,n);De||Se||0===Ae||(v(Ae,!1,null),Ae=0);var r=Fe,o=De;De=Fe=!0;try{return e(t,n)}finally{Fe=r,(De=o)||Se||g()}},flushInteractiveUpdates:function(){Se||0===Ae||(v(Ae,!1,null),Ae=0)},computeUniqueAsyncExpiration:function(){var e=25*(1+((f()+500)/25|0));return e<=pe&&(e=pe+1),pe=e},legacyContext:D}}function wr(e){function i(e,t,n,r,o,i){if(r=t.current,n){n=n._reactInternalFiber;var a=c(n);n=u(n)?d(n,a):a}else n=qe;return null===t.context?t.context=n:t.pendingContext=n,sr(r,{expirationTime:o,partialState:{element:e},callback:void 0===(t=i)?null:t,isReplace:!1,isForced:!1,capturedValue:null,next:null}),l(r,o),o}function n(e){return null===(e=function(e){if(!(e=Jt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode}var t=e.getPublicInstance,a=(e=_r(e)).recalculateCurrentTime,s=e.computeExpirationForFiber,l=e.scheduleWork,r=e.legacyContext,c=r.findCurrentUnmaskedContext,u=r.isContextProvider,d=r.processChildContext;return{createContainer:function(e,t,n){return e={current:t=new Vn(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e},updateContainer:function(e,t,n,r){var o=t.current;return i(e,t,n,a(),o=s(o),r)},updateContainerAtExpirationTime:function(e,t,n,r,o){return i(e,t,n,a(),r,o)},flushRoot:e.flushRoot,requestWork:e.requestWork,computeUniqueAsyncExpiration:e.computeUniqueAsyncExpiration,batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,syncUpdates:e.syncUpdates,interactiveUpdates:e.interactiveUpdates,flushInteractiveUpdates:e.flushInteractiveUpdates,flushControlled:e.flushControlled,flushSync:e.flushSync,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return t(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:n,findHostInstanceWithNoPortals:function(e){return null===(e=function(e){if(!(e=Jt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Qn=Zn(function(e){return t.onCommitFiberRoot(n,e)}),Yn=Zn(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}(He({},e,{findHostInstanceByFiber:function(e){return n(e)},findFiberByHostInstance:function(e){return t?t(e):null}}))}}}var kr=Object.freeze({default:wr}),xr=kr&&wr||kr,Er=xr.default?xr.default:xr;var Cr="object"==typeof performance&&"function"==typeof performance.now,Sr=void 0;Sr=Cr?function(){return performance.now()}:function(){return Date.now()};var Tr=void 0,Nr=void 0;if(r.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Ar=null,Pr=!1,Or=-1,Ir=!1,Rr=0,Dr=33,jr=33,Fr=void 0;Fr=Cr?{didTimeout:!1,timeRemaining:function(){var e=Rr-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Rr-Date.now();return 0<e?e:0}};var Mr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Mr){if(Pr=!1,e=Sr(),Rr-e<=0){if(!(-1!==Or&&Or<=e))return void(Ir||(Ir=!0,requestAnimationFrame(Lr)));Fr.didTimeout=!0}else Fr.didTimeout=!1;Or=-1,e=Ar,(Ar=null)!==e&&e(Fr)}},!1);var Lr=function(e){Ir=!1;var t=e-Rr+jr;t<jr&&Dr<jr?(t<8&&(t=8),jr=t<Dr?Dr:t):Dr=t,Rr=e+jr,Pr||(Pr=!0,window.postMessage(Mr,"*"))};Tr=function(e,t){return Ar=e,null!=t&&"number"==typeof t.timeout&&(Or=Sr()+t.timeout),Ir||(Ir=!0,requestAnimationFrame(Lr)),0},Nr=function(){Ar=null,Pr=!1,Or=-1}}else Tr=window.requestIdleCallback,Nr=window.cancelIdleCallback;else Tr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},Nr=function(e){clearTimeout(e)};function Ur(e,t){var n,r;return e=He({children:void 0},t),n=t.children,r="",o.Children.forEach(n,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(r+=e)}),(t=r)&&(e.children=t),e}function Br(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Hr(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function qr(e,t){return null!=t.dangerouslySetInnerHTML&&ze("91"),He({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zr(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&ze("92"),Array.isArray(t)&&(t.length<=1||ze("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Wr(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Vr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var Kr="http://www.w3.org/1999/xhtml",$r="http://www.w3.org/2000/svg";function Xr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Xr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Jr,Qr=void 0,Yr=(Jr=function(e,t){if(e.namespaceURI!==$r||"innerHTML"in e)e.innerHTML=t;else{for((Qr=Qr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Qr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Jr(e,t)})}:Jr);function Zr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var eo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},to=["Webkit","ms","Moz","O"];function no(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=n,i=t[n];o=null==i||"boolean"==typeof i||""===i?"":r||"number"!=typeof i||0===i||eo.hasOwnProperty(o)&&eo[o]?(""+i).trim():i+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(eo).forEach(function(t){to.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eo[e]=eo[t]})});var ro=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(e,t,n){t&&(ro[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&ze("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&ze("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||ze("61")),null!=t.style&&"object"!=typeof t.style&&ze("62",n()))}function io(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ao=Kr,so=c.thatReturns("");function lo(e,t){var n=Rn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=l[t];for(var r=0;r<t.length;r++){var o=t[r];n.hasOwnProperty(o)&&n[o]||("topScroll"===o?bn("topScroll","scroll",e):"topFocus"===o||"topBlur"===o?(bn("topFocus","focus",e),bn("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===o?(We("cancel",!0)&&bn("topCancel","cancel",e),n.topCancel=!0):"topClose"===o?(We("close",!0)&&bn("topClose","close",e),n.topClose=!0):Nn.hasOwnProperty(o)&&yn(o,Nn[o],e),n[o]=!0)}}function co(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===ao&&(r=Xr(e)),r===ao?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function uo(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function po(e,t,n,r){var o=io(t,n);switch(t){case"iframe":case"object":yn("topLoad","load",e);var i=n;break;case"video":case"audio":for(i in An)An.hasOwnProperty(i)&&yn(i,An[i],e);i=n;break;case"source":yn("topError","error",e),i=n;break;case"img":case"image":case"link":yn("topError","error",e),yn("topLoad","load",e),i=n;break;case"form":yn("topReset","reset",e),yn("topSubmit","submit",e),i=n;break;case"details":yn("topToggle","toggle",e),i=n;break;case"input":bt(e,n),i=yt(e,n),yn("topInvalid","invalid",e),lo(r,"onChange");break;case"option":i=Ur(e,n);break;case"select":Hr(e,n),i=He({},n,{value:void 0}),yn("topInvalid","invalid",e),lo(r,"onChange");break;case"textarea":zr(e,n),i=qr(e,n),yn("topInvalid","invalid",e),lo(r,"onChange");break;default:i=n}oo(t,i,so);var a,s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];"style"===a?no(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&Yr(e,l):"children"===a?"string"==typeof l?("textarea"!==t||""!==l)&&Zr(e,l):"number"==typeof l&&Zr(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(v.hasOwnProperty(a)?null!=l&&lo(r,a):null!=l&&vt(e,a,l,o))}switch(t){case"input":Ke(e),kt(e,n);break;case"textarea":Ke(e),Vr(e);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?Br(e,!!n.multiple,t,!1):null!=n.defaultValue&&Br(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=c)}}function fo(e,t,n,r,o){var i=null;switch(t){case"input":n=yt(e,n),r=yt(e,r),i=[];break;case"option":n=Ur(e,n),r=Ur(e,r),i=[];break;case"select":n=He({},n,{value:void 0}),r=He({},r,{value:void 0}),i=[];break;case"textarea":n=qr(e,n),r=qr(e,r),i=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=c)}oo(t,r,so),t=e=void 0;var a=null;for(e in n)if(!r.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var s=n[e];for(t in s)s.hasOwnProperty(t)&&(a||(a={}),a[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(v.hasOwnProperty(e)?i||(i=[]):(i=i||[]).push(e,null));for(e in r){var l=r[e];if(s=null!=n?n[e]:void 0,r.hasOwnProperty(e)&&l!==s&&(null!=l||null!=s))if("style"===e)if(s){for(t in s)!s.hasOwnProperty(t)||l&&l.hasOwnProperty(t)||(a||(a={}),a[t]="");for(t in l)l.hasOwnProperty(t)&&s[t]!==l[t]&&(a||(a={}),a[t]=l[t])}else a||(i||(i=[]),i.push(e,a)),a=l;else"dangerouslySetInnerHTML"===e?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(i=i||[]).push(e,""+l)):"children"===e?s===l||"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(e,""+l):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(v.hasOwnProperty(e)?(null!=l&&lo(o,e),i||s===l||(i=[])):(i=i||[]).push(e,l))}return a&&(i=i||[]).push("style",a),i}function ho(e,t,n,r,o){"input"===n&&"radio"===o.type&&null!=o.name&&_t(e,o),io(n,r),r=io(n,o);for(var i=0;i<t.length;i+=2){var a=t[i],s=t[i+1];"style"===a?no(e,s):"dangerouslySetInnerHTML"===a?Yr(e,s):"children"===a?Zr(e,s):vt(e,a,s,r)}switch(n){case"input":wt(e,o);break;case"textarea":Wr(e,o);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,null!=(n=o.value)?Br(e,!!o.multiple,n,!1):t!==!!o.multiple&&(null!=o.defaultValue?Br(e,!!o.multiple,o.defaultValue,!0):Br(e,!!o.multiple,o.multiple?[]:"",!1))}}function mo(e,t,n,r,o){switch(t){case"iframe":case"object":yn("topLoad","load",e);break;case"video":case"audio":for(var i in An)An.hasOwnProperty(i)&&yn(i,An[i],e);break;case"source":yn("topError","error",e);break;case"img":case"image":case"link":yn("topError","error",e),yn("topLoad","load",e);break;case"form":yn("topReset","reset",e),yn("topSubmit","submit",e);break;case"details":yn("topToggle","toggle",e);break;case"input":bt(e,n),yn("topInvalid","invalid",e),lo(o,"onChange");break;case"select":Hr(e,n),yn("topInvalid","invalid",e),lo(o,"onChange");break;case"textarea":zr(e,n),yn("topInvalid","invalid",e),lo(o,"onChange")}for(var a in oo(t,n,so),r=null,n)n.hasOwnProperty(a)&&(i=n[a],"children"===a?"string"==typeof i?e.textContent!==i&&(r=["children",i]):"number"==typeof i&&e.textContent!==""+i&&(r=["children",""+i]):v.hasOwnProperty(a)&&null!=i&&lo(o,a));switch(t){case"input":Ke(e),kt(e,n);break;case"textarea":Ke(e),Vr(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=c)}return r}function go(e,t){return e.nodeValue!==t}var vo=Object.freeze({createElement:co,createTextNode:uo,setInitialProperties:po,diffProperties:fo,updateProperties:ho,diffHydratedProperties:mo,diffHydratedText:go,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(wt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=H(r);o||ze("90"),$e(r),wt(r,o)}}}break;case"textarea":Wr(e,n);break;case"select":null!=(t=n.value)&&Br(e,!!n.multiple,t,!1)}}});Ne.injectFiberControlledHostComponent(vo);var yo=null,bo=null;function _o(e){this._expirationTime=Co.computeUniqueAsyncExpiration(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function wo(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ko(e,t,n){this._internalRoot=Co.createContainer(e,t,n)}function xo(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Eo(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}_o.prototype.render=function(e){this._defer||ze("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new wo;return Co.updateContainerAtExpirationTime(e,t,null,n,r._onCommit),r},_o.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},_o.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||ze("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)o=(r=o)._next;null===r&&ze("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Co.flushRoot(e,n),t=this._next,(this._next=null)!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},_o.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},wo.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},wo.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&ze("191",n),n()}}},ko.prototype.render=function(e,t){var n=this._internalRoot,r=new wo;return null!==(t=void 0===t?null:t)&&r.then(t),Co.updateContainer(e,n,null,r._onCommit),r},ko.prototype.unmount=function(e){var t=this._internalRoot,n=new wo;return null!==(e=void 0===e?null:e)&&n.then(e),Co.updateContainer(null,t,null,n._onCommit),n},ko.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,o=new wo;return null!==(n=void 0===n?null:n)&&o.then(n),Co.updateContainer(t,r,e,o._onCommit),o},ko.prototype.createBatch=function(){var e=new _o(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)(n.firstBatch=e)._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)r=(n=r)._next;e._next=r,null!==n&&(n._next=e)}return e};var Co=Er({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gr(null,"");break;default:e=Gr(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}return e},getChildHostContext:function(e,t){return Gr(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){yo=gn;var e=f();if(Fn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch(e){t=null;break e}var i=0,a=-1,s=-1,l=0,c=0,u=e,d=null;t:for(;;){for(var p;u!==t||0!==r&&3!==u.nodeType||(a=i+r),u!==o||0!==n&&3!==u.nodeType||(s=i+n),3===u.nodeType&&(i+=u.nodeValue.length),null!==(p=u.firstChild);)d=u,u=p;for(;;){if(u===e)break t;if(d===t&&++l===r&&(a=i),d===o&&++c===n&&(s=i),null!==(p=u.nextSibling))break;d=(u=d).parentNode}u=p}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;vn(!(bo={focusedElem:e,selectionRange:t}))},resetAfterCommit:function(){var e=bo,t=f(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&s(document.documentElement,n)){if(Fn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var o=n[ee()].length;e=Math.min(r.start,o),r=void 0===r.end?e:Math.min(r.end,o),!t.extend&&r<e&&(o=r,r=e,e=o),o=jn(n,e);var i=jn(n,r);if(o&&i&&(1!==t.rangeCount||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)){var a=document.createRange();a.setStart(o.node,o.offset),t.removeAllRanges(),r<e?(t.addRange(a),t.extend(i.node,i.offset)):(a.setEnd(i.node,i.offset),t.addRange(a))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}bo=null,vn(yo),yo=null},createInstance:function(e,t,n,r,o){return(e=co(e,t,n,r))[M]=o,e[L]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){return po(e,t,n,r),Eo(t,n)},prepareUpdate:function(e,t,n,r,o){return fo(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return(e=uo(e,t))[M]=r,e},now:Sr,mutation:{commitMount:function(e,t,n){Eo(t,n)&&e.focus()},commitUpdate:function(e,t,n,r,o){e[L]=o,ho(e,t,n,r,o)},resetTextContent:function(e){Zr(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,o,i){return e[M]=i,e[L]=n,mo(e,t,n,o,r)},hydrateTextInstance:function(e,t,n){return e[M]=n,go(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Tr,cancelDeferredCallback:Nr}),So=Co;function To(e,t,n,r,o){xo(n)||ze("200");var i=n._reactRootContainer;if(i){if("function"==typeof o){var a=o;o=function(){var e=Co.getPublicRootInstance(i._internalRoot);a.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ko(e,!1,t)}(n,r),"function"==typeof o){var s=o;o=function(){var e=Co.getPublicRootInstance(i._internalRoot);s.call(e)}}Co.unbatchedUpdates(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)})}return Co.getPublicRootInstance(i._internalRoot)}function No(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return xo(t)||ze("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ze,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Re=So.batchedUpdates,De=So.interactiveUpdates,je=So.flushInteractiveUpdates;var Ao={createPortal:No,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return Co.findHostInstance(t);"function"==typeof e.render?ze("188"):ze("213",Object.keys(e))},hydrate:function(e,t,n){return To(null,e,t,!0,n)},render:function(e,t,n){return To(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&ze("38"),To(e,t,n,!1,r)},unmountComponentAtNode:function(e){return xo(e)||ze("40"),!!e._reactRootContainer&&(Co.unbatchedUpdates(function(){To(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return No.apply(void 0,arguments)},unstable_batchedUpdates:Co.batchedUpdates,unstable_deferredUpdates:Co.deferredUpdates,flushSync:Co.flushSync,unstable_flushControlled:Co.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:j,EventPluginRegistry:b,EventPropagators:Y,ReactControlledComponent:Ie,ReactDOMComponentTree:q,ReactDOMEventListener:kn},unstable_createRoot:function(e,t){return new ko(e,!0,null!=t&&!0===t.hydrate)}};Co.injectIntoDevTools({findFiberByHostInstance:U,bundleType:0,version:"16.3.1",rendererPackageName:"react-dom"});var Po=Object.freeze({default:Ao}),Oo=Po&&Ao||Po;t.exports=Oo.default?Oo.default:Oo},{"fbjs/lib/ExecutionEnvironment":72,"fbjs/lib/containsNode":75,"fbjs/lib/emptyFunction":76,"fbjs/lib/emptyObject":77,"fbjs/lib/getActiveElement":78,"fbjs/lib/shallowEqual":84,"object-assign":117,react:157}],145:[function(e,n,t){(function(t){"use strict";"production"===t.env.NODE_ENV?(!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){if("production"!==t.env.NODE_ENV)throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),n.exports=e("./cjs/react-dom.production.min.js")):n.exports=e("./cjs/react-dom.development.js")}).call(this,e("_process"))},{"./cjs/react-dom.development.js":143,"./cjs/react-dom.production.min.js":144,_process:136}],146:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bodyOpenClassName=n.portalClassName=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("react"),l=f(o),c=f(e("react-dom")),i=f(e("prop-types")),u=f(e("./ModalPortal")),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../helpers/ariaAppHider")),p=e("../helpers/safeHTMLElement"),a=f(p);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=n.portalClassName="ReactModalPortal",g=n.bodyOpenClassName="ReactModal__Body--open",v=void 0!==c.default.createPortal,y=v?c.default.createPortal:c.default.unstable_renderSubtreeIntoContainer;function b(e){return e()}var _=function(e){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=n=h(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).removePortal=function(){!v&&c.default.unmountComponentAtNode(n.node),b(n.props.parentSelector).removeChild(n.node)},n.portalRef=function(e){n.portal=e},n.renderPortal=function(e){var t=y(n,l.default.createElement(u.default,s({defaultStyles:a.defaultStyles},e)),n.node);n.portalRef(t)},h(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.Component),r(a,[{key:"componentDidMount",value:function(){p.canUseDOM&&(v||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,b(this.props.parentSelector).appendChild(this.node),!v&&this.renderPortal(this.props))}},{key:"componentWillReceiveProps",value:function(e){if(p.canUseDOM){var t=e.isOpen;if(this.props.isOpen||t){var n=b(this.props.parentSelector),r=b(e.parentSelector);r!==n&&(n.removeChild(this.node),r.appendChild(this.node)),!v&&this.renderPortal(e)}}}},{key:"componentWillUpdate",value:function(e){p.canUseDOM&&e.portalClassName!==this.props.portalClassName&&(this.node.className=e.portalClassName)}},{key:"componentWillUnmount",value:function(){if(p.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return p.canUseDOM&&v?(!this.node&&v&&(this.node=document.createElement("div")),y(l.default.createElement(u.default,s({ref:this.portalRef,defaultStyles:a.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){d.setElement(e)}}]),a}();_.propTypes={isOpen:i.default.bool.isRequired,style:i.default.shape({content:i.default.object,overlay:i.default.object}),portalClassName:i.default.string,bodyOpenClassName:i.default.string,htmlOpenClassName:i.default.string,className:i.default.oneOfType([i.default.string,i.default.shape({base:i.default.string.isRequired,afterOpen:i.default.string.isRequired,beforeClose:i.default.string.isRequired})]),overlayClassName:i.default.oneOfType([i.default.string,i.default.shape({base:i.default.string.isRequired,afterOpen:i.default.string.isRequired,beforeClose:i.default.string.isRequired})]),appElement:i.default.instanceOf(a.default),onAfterOpen:i.default.func,onRequestClose:i.default.func,closeTimeoutMS:i.default.number,ariaHideApp:i.default.bool,shouldFocusAfterRender:i.default.bool,shouldCloseOnOverlayClick:i.default.bool,shouldReturnFocusAfterClose:i.default.bool,parentSelector:i.default.func,aria:i.default.object,role:i.default.string,contentLabel:i.default.string,shouldCloseOnEsc:i.default.bool,overlayRef:i.default.func,contentRef:i.default.func},_.defaultProps={isOpen:!1,portalClassName:m,bodyOpenClassName:g,ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,parentSelector:function(){return document.body}},_.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},n.default=_},{"../helpers/ariaAppHider":148,"../helpers/safeHTMLElement":151,"./ModalPortal":147,"prop-types":140,react:157,"react-dom":145}],147:[function(b,_,w){(function(n){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=b("react"),s=f(i),e=f(b("prop-types")),l=p(b("../helpers/focusManager")),c=f(b("../helpers/scopeTab")),u=p(b("../helpers/ariaAppHider")),d=p(b("../helpers/classList")),t=f(b("../helpers/safeHTMLElement"));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var h={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},m=9,g=27,v=0,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.setFocusAfterRender=function(e){i.focusAfterRender=i.props.shouldFocusAfterRender&&e},i.setOverlayRef=function(e){i.overlay=e,i.props.overlayRef&&i.props.overlayRef(e)},i.setContentRef=function(e){i.content=e,i.props.contentRef&&i.props.contentRef(e)},i.afterClose=function(){var e=i.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,o=e.bodyOpenClassName;d.remove(document.body,o),r&&d.remove(document.getElementsByTagName("html")[0],r),n&&0<v&&0===(v-=1)&&u.show(t),i.props.shouldFocusAfterRender&&(i.props.shouldReturnFocusAfterClose?(l.returnFocus(),l.teardownScopedFocus()):l.popWithoutFocus())},i.open=function(){i.beforeOpen(),i.state.afterOpen&&i.state.beforeClose?(clearTimeout(i.closeTimer),i.setState({beforeClose:!1})):(i.props.shouldFocusAfterRender&&(l.setupScopedFocus(i.node),l.markForFocusLater()),i.setState({isOpen:!0},function(){i.setState({afterOpen:!0}),i.props.isOpen&&i.props.onAfterOpen&&i.props.onAfterOpen()}))},i.close=function(){0<i.props.closeTimeoutMS?i.closeWithTimeout():i.closeWithoutTimeout()},i.focusContent=function(){return i.content&&!i.contentHasFocus()&&i.content.focus()},i.closeWithTimeout=function(){var e=Date.now()+i.props.closeTimeoutMS;i.setState({beforeClose:!0,closesAt:e},function(){i.closeTimer=setTimeout(i.closeWithoutTimeout,i.state.closesAt-Date.now())})},i.closeWithoutTimeout=function(){i.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},i.afterClose)},i.handleKeyDown=function(e){e.keyCode===m&&(0,c.default)(i.content,e),i.props.shouldCloseOnEsc&&e.keyCode===g&&(e.stopPropagation(),i.requestClose(e))},i.handleOverlayOnClick=function(e){null===i.shouldClose&&(i.shouldClose=!0),i.shouldClose&&i.props.shouldCloseOnOverlayClick&&(i.ownerHandlesClose()?i.requestClose(e):i.focusContent()),i.shouldClose=null,i.moveFromContentToOverlay=null},i.handleOverlayOnMouseUp=function(){null===i.moveFromContentToOverlay&&(i.shouldClose=!1),i.props.shouldCloseOnOverlayClick&&(i.shouldClose=!0)},i.handleContentOnMouseUp=function(){i.shouldClose=!1},i.handleOverlayOnMouseDown=function(e){i.props.shouldCloseOnOverlayClick||e.target!=i.overlay||e.preventDefault(),i.moveFromContentToOverlay=!1},i.handleContentOnClick=function(){i.shouldClose=!1},i.handleContentOnMouseDown=function(){i.shouldClose=!1,i.moveFromContentToOverlay=!1},i.requestClose=function(e){return i.ownerHandlesClose()&&i.props.onRequestClose(e)},i.ownerHandlesClose=function(){return i.props.onRequestClose},i.shouldBeClosed=function(){return!i.state.isOpen&&!i.state.beforeClose},i.contentHasFocus=function(){return document.activeElement===i.content||i.content.contains(document.activeElement)},i.buildClassName=function(e,t){var n="object"===(void 0===t?"undefined":o(t))?t:{base:h[e],afterOpen:h[e]+"--after-open",beforeClose:h[e]+"--before-close"},r=n.base;return i.state.afterOpen&&(r=r+" "+n.afterOpen),i.state.beforeClose&&(r=r+" "+n.beforeClose),"string"==typeof t&&t?r+" "+t:r},i.ariaAttributes=function(n){return Object.keys(n).reduce(function(e,t){return e["aria-"+t]=n[t],e},{})},i.state={afterOpen:!1,beforeClose:!1},i.shouldClose=null,i.moveFromContentToOverlay=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())}},{key:"componentWillReceiveProps",value:function(e){"production"!==n.env.NODE_ENV&&(e.bodyOpenClassName!==this.props.bodyOpenClassName&&console.warn('React-Modal: "bodyOpenClassName" prop has been modified. This may cause unexpected behavior when multiple modals are open.'),e.htmlOpenClassName!==this.props.htmlOpenClassName&&console.warn('React-Modal: "htmlOpenClassName" prop has been modified. This may cause unexpected behavior when multiple modals are open.')),!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()}},{key:"componentDidUpdate",value:function(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))}},{key:"componentWillUnmount",value:function(){this.afterClose(),clearTimeout(this.closeTimer)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,o=e.bodyOpenClassName;d.add(document.body,o),r&&d.add(document.getElementsByTagName("html")[0],r),n&&(v+=1,u.hide(t))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.overlayClassName,r=e.defaultStyles,o=t?{}:r.content,i=n?{}:r.overlay;return this.shouldBeClosed()?null:s.default.createElement("div",{ref:this.setOverlayRef,className:this.buildClassName("overlay",n),style:a({},i,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown,onMouseUp:this.handleOverlayOnMouseUp,"aria-modal":"true"},s.default.createElement("div",a({ref:this.setContentRef,style:a({},o,this.props.style.content),className:this.buildClassName("content",t),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.ariaAttributes(this.props.aria||{})),this.props.children))}}]),t}();y.defaultProps={style:{overlay:{},content:{}}},y.propTypes={isOpen:e.default.bool.isRequired,defaultStyles:e.default.shape({content:e.default.object,overlay:e.default.object}),style:e.default.shape({content:e.default.object,overlay:e.default.object}),className:e.default.oneOfType([e.default.string,e.default.object]),overlayClassName:e.default.oneOfType([e.default.string,e.default.object]),bodyOpenClassName:e.default.string,htmlOpenClassName:e.default.string,ariaHideApp:e.default.bool,appElement:e.default.instanceOf(t.default),onAfterOpen:e.default.func,onRequestClose:e.default.func,closeTimeoutMS:e.default.number,shouldFocusAfterRender:e.default.bool,shouldCloseOnOverlayClick:e.default.bool,shouldReturnFocusAfterClose:e.default.bool,role:e.default.string,contentLabel:e.default.string,aria:e.default.object,children:e.default.node,shouldCloseOnEsc:e.default.bool,overlayRef:e.default.func,contentRef:e.default.func},w.default=y,_.exports=w.default}).call(this,b("_process"))},{"../helpers/ariaAppHider":148,"../helpers/classList":149,"../helpers/focusManager":150,"../helpers/safeHTMLElement":151,"../helpers/scopeTab":152,_process:136,"prop-types":140,react:157}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.assertNodeList=s,n.setElement=function(e){var t=e;if("string"==typeof t){var n=document.querySelectorAll(t);s(n,t),t="length"in n?n[0]:n}return a=t||a},n.validateElement=l,n.hide=function(e){l(e)&&(e||a).setAttribute("aria-hidden","true")},n.show=function(e){l(e)&&(e||a).removeAttribute("aria-hidden")},n.documentNotReadyOrSSRTesting=function(){a=null},n.resetForTesting=function(){a=null};var r,o=e("warning"),i=(r=o)&&r.__esModule?r:{default:r};var a=null;function s(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function l(e){return!(!e&&!a)||((0,i.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),!1)}},{warning:199}],149:[function(e,t,n){(function(o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.dumpClassLists=function(){if("production"!==o.env.NODE_ENV){var e=document.getElementsByTagName("html")[0].className,t="Show tracked classes:\n\n";for(var n in t+="<html /> ("+e+"):\n",i)t+="  "+n+" "+i[n]+"\n";for(var r in e=document.body.className,t+="\n\ndoc.body ("+e+"):\n",a)t+="  "+r+" "+a[r]+"\n";t+="\n",console.log(t)}};var i={},a={};n.add=function(e,t){return r=e.classList,o="html"==e.nodeName.toLowerCase()?i:a,void t.split(" ").forEach(function(e){var t,n;(t=o)[n=e]||(t[n]=0),t[n]+=1,r.add(e)});var r,o},n.remove=function(e,t){return r=e.classList,o="html"==e.nodeName.toLowerCase()?i:a,void t.split(" ").forEach(function(e){var t,n;(t=o)[n=e]&&(t[n]-=1),0===o[e]&&r.remove(e)});var r,o}}).call(this,e("_process"))},{_process:136}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.handleBlur=c,n.handleFocus=u,n.markForFocusLater=function(){a.push(document.activeElement)},n.returnFocus=function(){var t=null;try{return void(0!==a.length&&(t=a.pop()).focus())}catch(e){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},n.popWithoutFocus=function(){0<a.length&&a.pop()},n.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",u))},n.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",u))};var r,o=e("../helpers/tabbable"),i=(r=o)&&r.__esModule?r:{default:r};var a=[],s=null,l=!1;function c(){l=!0}function u(){if(l){if(l=!1,!s)return;setTimeout(function(){s.contains(document.activeElement)||((0,i.default)(s)[0]||s).focus()},0)}}},{"../helpers/tabbable":153}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.canUseDOM=void 0;var r,o=e("exenv");var i=((r=o)&&r.__esModule?r:{default:r}).default,a=i.canUseDOM?window.HTMLElement:{};n.canUseDOM=i.canUseDOM;n.default=a},{exenv:71}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,c.default)(e);if(!n.length)return void t.preventDefault();var r,o=t.shiftKey,i=n[0],a=n[n.length-1];if(e===document.activeElement){if(!o)return;r=a}a!==document.activeElement||o||(r=i);i===document.activeElement&&o&&(r=a);if(r)return t.preventDefault(),void r.focus();var s=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==s||"Chrome"==s[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var l=n.indexOf(document.activeElement);-1<l&&(l+=o?-1:1);t.preventDefault(),n[l].focus()};var r,o=e("./tabbable"),c=(r=o)&&r.__esModule?r:{default:r};t.exports=n.default},{"./tabbable":153}],153:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return[].slice.call(e.querySelectorAll("*"),0).filter(a)};var r=/input|select|textarea|button|object/;function o(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow"):"none"==n.getPropertyValue("display")}function i(e,t){var n=e.nodeName.toLowerCase();return(r.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e;t&&t!==document.body;){if(o(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||0<=t)&&i(e,!n)}t.exports=n.default},{}],154:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./components/Modal"),i=(r=o)&&r.__esModule?r:{default:r};n.default=i.default,t.exports=n.default},{"./components/Modal":146}],155:[function(ve,ye,e){(function(e){"use strict";"production"!==e.env.NODE_ENV&&function(){var h=ve("object-assign"),r=ve("fbjs/lib/emptyObject"),v=ve("fbjs/lib/invariant"),_=ve("fbjs/lib/warning"),u=ve("fbjs/lib/emptyFunction"),o=ve("prop-types/checkPropTypes"),e="function"==typeof Symbol&&Symbol.for,w=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.call"):60104,i=e?Symbol.for("react.return"):60105,y=e?Symbol.for("react.portal"):60106,d=e?Symbol.for("react.fragment"):60107,p=e?Symbol.for("react.strict_mode"):60108,f=e?Symbol.for("react.provider"):60109,m=e?Symbol.for("react.context"):60110,g=e?Symbol.for("react.async_mode"):60111,b=e?Symbol.for("react.forward_ref"):60112,a="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";function k(e){if(null==e)return null;var t=a&&e[a]||e[s];return"function"==typeof t?t:null}var l=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];(function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.warn(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(r))}},c={};function x(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",o=r+"."+t;c[o]||(_(!1,"Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),c[o]=!0)}var E={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){x(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){x(e,"replaceState")},enqueueSetState:function(e,t,n,r){x(e,"setState")}};function C(e,t,n){this.props=e,this.context=t,this.refs=r,this.updater=n||E}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&v(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var t={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},S=function(e,t){Object.defineProperty(C.prototype,e,{get:function(){l(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var T in t)t.hasOwnProperty(T)&&S(T,t[T]);function N(){}function A(e,t,n){this.props=e,this.context=t,this.refs=r,this.updater=n||E}N.prototype=C.prototype;var P=A.prototype=new N;P.constructor=A,h(P,C.prototype),P.isPureReactComponent=!0;var O={current:null},I=Object.prototype.hasOwnProperty,R={key:!0,ref:!0,__self:!0,__source:!0},D=void 0,j=void 0;function F(e){if(I.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function M(e){if(I.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}var L=function(e,t,n,r,o,i,a){var s={$$typeof:w,type:e,key:t,ref:n,props:a,_owner:i,_store:{}};return Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,"_self",{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(s,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function U(e,t,n){var r=void 0,o={},i=null,a=null,s=null,l=null;if(null!=t)for(r in F(t)&&(a=t.ref),M(t)&&(i=""+t.key),s=void 0===t.__self?null:t.__self,l=void 0===t.__source?null:t.__source,t)I.call(t,r)&&!R.hasOwnProperty(r)&&(o[r]=t[r]);var c,u,d,p,f,h,m=arguments.length-2;if(1===m)o.children=n;else if(1<m){for(var g=Array(m),v=0;v<m;v++)g[v]=arguments[v+2];Object.freeze&&Object.freeze(g),o.children=g}if(e&&e.defaultProps){var y=e.defaultProps;for(r in y)void 0===o[r]&&(o[r]=y[r])}if((i||a)&&(void 0===o.$$typeof||o.$$typeof!==w)){var b="function"==typeof e?e.displayName||e.name||"Unknown":e;i&&(p=o,f=b,(h=function(){D||_(!(D=!0),"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",f)}).isReactWarning=!0,Object.defineProperty(p,"key",{get:h,configurable:!0})),a&&(c=o,u=b,(d=function(){j||_(!(j=!0),"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",u)}).isReactWarning=!0,Object.defineProperty(c,"ref",{get:d,configurable:!0}))}return L(e,i,a,s,l,O.current,o)}function B(e){return"object"==typeof e&&null!==e&&e.$$typeof===w}var H={getCurrentStack:null,getStackAddendum:function(){var e=H.getCurrentStack;return e?e():null}},q=".",z=":";var W=!1,V=/\/+/g;function K(e){return(""+e).replace(V,"$&/")}var $=10,X=[];function G(e,t,n,r){if(X.length){var o=X.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function J(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,X.length<$&&X.push(e)}function Q(e,t,n){return null==e?0:function e(t,n,r,o){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case w:case y:a=!0}}if(a)return r(o,t,""===n?q+Y(t,0):n),1;var s=void 0,l=0,c=""===n?q:n+z;if(Array.isArray(t))for(var u=0;u<t.length;u++)l+=e(s=t[u],c+Y(s,u),r,o);else{var d=k(t);if("function"==typeof d){d===t.entries&&(_(W,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",H.getStackAddendum()),W=!0);for(var p=d.call(t),f=void 0,h=0;!(f=p.next()).done;)l+=e(s=f.value,c+Y(s,h++),r,o)}else if("object"===i){var m;m=" If you meant to render a collection of children, use an array instead."+H.getStackAddendum();var g=""+t;v(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===g?"object with keys {"+Object.keys(t).join(", ")+"}":g,m)}}return l}(e,"",t,n)}function Y(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function Z(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function ee(e,t,n){var r,o,i=e.result,a=e.keyPrefix,s=e.func,l=e.context,c=s.call(l,t,e.count++);Array.isArray(c)?te(c,i,n,u.thatReturnsArgument):null!=c&&(B(c)&&(o=a+(!(r=c).key||t&&t.key===c.key?"":K(c.key)+"/")+n,c=L(r.type,o,r.ref,r._self,r._source,r._owner,r.props)),i.push(c))}function te(e,t,n,r,o){var i="";null!=n&&(i=K(n)+"/");var a=G(t,i,r,o);Q(e,ee,a),J(a)}function ne(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case d:return"ReactFragment";case y:return"ReactPortal";case n:return"ReactCall";case i:return"ReactReturn"}return null}var re,oe=void 0,ie=void 0,ae=function(){};function se(){if(O.current){var e=ne(O.current);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}oe=null,ie=!1,re=function(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type===d?"React.Fragment":e.type.displayName||e.type.name||"Unknown"},ae=function(){var e,t,n,r="";if(oe){var o=re(oe),i=oe._owner;r+=(e=o,t=oe._source,n=i&&ne(i),"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":""))}return r+=H.getStackAddendum()||""};var le={};function ce(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=se();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!le[n]){le[n]=!0;var r="";e&&e._owner&&e._owner!==O.current&&(r=" It was passed a child from "+ne(e._owner)+"."),oe=e,_(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.%s',n,r,ae()),oe=null}}}function ue(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];B(r)&&ce(r,t)}else if(B(e))e._store&&(e._store.validated=!0);else if(e){var o=k(e);if("function"==typeof o&&o!==e.entries)for(var i=o.call(e),a=void 0;!(a=i.next()).done;)B(a.value)&&ce(a.value,t)}}function de(e){var t=e.type;if("function"==typeof t){var n=t.displayName||t.name,r=t.propTypes;r?(o(r,(oe=e).props,"prop",n,ae),oe=null):void 0===t.PropTypes||ie||_(!(ie=!0),"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",n||"Unknown"),"function"==typeof t.getDefaultProps&&_(t.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function pe(e,t,n){var r,o="string"==typeof(r=e)||"function"==typeof r||r===d||r===g||r===p||"object"==typeof r&&null!==r&&(r.$$typeof===f||r.$$typeof===m||r.$$typeof===b);if(!o){var i="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(i+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var a=function(e){if(null!=e&&void 0!==e.__source){var t=e.__source;return"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+"."}return""}(t);i+=a||se(),i+=ae()||"";var s=void 0;s=null===e?"null":Array.isArray(e)?"array":typeof e,_(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",s,i)}var l=U.apply(this,arguments);if(null==l)return l;if(o)for(var c=2;c<arguments.length;c++)ue(arguments[c],e);return e===d?function(e){oe=e;for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){_(!1,"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.%s",r,ae());break}}null!==e.ref&&_(!1,"Invalid attribute `ref` supplied to `React.Fragment`.%s",ae()),oe=null}(l):de(l),l}var fe={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return te(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;var r=G(null,null,t,n);Q(e,Z,r),J(r)},count:function(e,t){return Q(e,u.thatReturnsNull,null)},toArray:function(e){var t=[];return te(e,t,null,u.thatReturnsArgument),t},only:function(e){return B(e)||v(!1,"React.Children.only expected to receive a single React element child."),e}},createRef:function(){var e={current:null};return Object.seal(e),e},Component:C,PureComponent:A,createContext:function(e,t){void 0===t?t=null:_(null===t||"function"==typeof t,"createContext: Expected the optional second argument to be a function. Instead received: %s",t);var n={$$typeof:m,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null};return n.Provider={$$typeof:f,_context:n},(n.Consumer=n)._currentRenderer=null,n},forwardRef:function(e){return _("function"==typeof e,"forwardRef requires a render function but was given %s.",null===e?"null":typeof e),{$$typeof:b,render:e}},Fragment:d,StrictMode:p,unstable_AsyncMode:g,createElement:pe,cloneElement:function(e,t,n){for(var r=function(e,t,n){var r=void 0,o=h({},e.props),i=e.key,a=e.ref,s=e._self,l=e._source,c=e._owner;if(null!=t){F(t)&&(a=t.ref,c=O.current),M(t)&&(i=""+t.key);var u=void 0;for(r in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)I.call(t,r)&&!R.hasOwnProperty(r)&&(void 0===t[r]&&void 0!==u?o[r]=u[r]:o[r]=t[r])}var d=arguments.length-2;if(1===d)o.children=n;else if(1<d){for(var p=Array(d),f=0;f<d;f++)p[f]=arguments[f+2];o.children=p}return L(e.type,i,a,s,l,c,o)}.apply(this,arguments),o=2;o<arguments.length;o++)ue(arguments[o],r.type);return de(r),r},createFactory:function(e){var t=pe.bind(null,e);return t.type=e,Object.defineProperty(t,"type",{enumerable:!1,get:function(){return l(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},isValidElement:B,version:"16.3.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:O,assign:h}};h(fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,{ReactDebugCurrentFrame:H,ReactComponentTreeHook:{}});var he=Object.freeze({default:fe}),me=he&&fe||he,ge=me.default?me.default:me;ye.exports=ge}()}).call(this,ve("_process"))},{_process:136,"fbjs/lib/emptyFunction":76,"fbjs/lib/emptyObject":77,"fbjs/lib/invariant":81,"fbjs/lib/warning":85,"object-assign":117,"prop-types/checkPropTypes":137}],156:[function(e,t,n){"use strict";var u=e("object-assign"),r=e("fbjs/lib/emptyObject"),i=e("fbjs/lib/emptyFunction"),o="function"==typeof Symbol&&Symbol.for,d=o?Symbol.for("react.element"):60103,l=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,s=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.provider"):60109,p=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.async_mode"):60111,h=o?Symbol.for("react.forward_ref"):60112,m="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function y(e,t,n){this.props=e,this.context=t,this.refs=r,this.updater=n||v}function b(){}function _(e,t,n){this.props=e,this.context=t,this.refs=r,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&g("85"),this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=_.prototype=new b;w.constructor=_,u(w,y.prototype),w.isPureReactComponent=!0;var k={current:null},x=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r=void 0,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,r)&&!E.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:d,type:e,key:i,ref:a,props:o,_owner:k.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===d}var T=/\/+/g,N=[];function A(e,t,n,r){if(N.length){var o=N.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,N.length<10&&N.push(e)}function O(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case d:case l:i=!0}}if(i)return n(r,e,""===t?"."+I(e,0):t),1;if(i=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var s=t+I(o=e[a],a);i+=O(o,s,n,r)}else if(null==e?s=null:s="function"==typeof(s=m&&e[m]||e["@@iterator"])?s:null,"function"==typeof s)for(e=s.call(e),a=0;!(o=e.next()).done;)i+=O(o=o.value,s=t+I(o,a++),n,r);else"object"===o&&g("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return i}function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function R(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?j(e,r,n,i.thatReturnsArgument):null!=e&&(S(e)&&(t=o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+n,e={$$typeof:d,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function j(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(T,"$&/")+"/"),t=A(t,i,r,o),null==e||O(e,"",D,t),P(t)}var F={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return j(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=A(null,null,t,n),null==e||O(e,"",R,t),P(t)},count:function(e){return null==e?0:O(e,"",i.thatReturnsNull,null)},toArray:function(e){var t=[];return j(e,t,null,i.thatReturnsArgument),t},only:function(e){return S(e)||g("143"),e}},createRef:function(){return{current:null}},Component:y,PureComponent:_,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:h,render:e}},Fragment:a,StrictMode:s,unstable_AsyncMode:f,createElement:C,cloneElement:function(e,t,n){var r=void 0,o=u({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key);var l=void 0;for(r in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)x.call(t,r)&&!E.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==l?l[r]:t[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){l=Array(r);for(var c=0;c<r;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:d,type:e.type,key:i,ref:a,props:o,_owner:s}},createFactory:function(e){var t=C.bind(null,e);return t.type=e,t},isValidElement:S,version:"16.3.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:k,assign:u}},M=Object.freeze({default:F}),L=M&&F||M;t.exports=L.default?L.default:L},{"fbjs/lib/emptyFunction":76,"fbjs/lib/emptyObject":77,"object-assign":117}],157:[function(t,n,e){(function(e){"use strict";"production"===e.env.NODE_ENV?n.exports=t("./cjs/react.production.min.js"):n.exports=t("./cjs/react.development.js")}).call(this,t("_process"))},{"./cjs/react.development.js":155,"./cjs/react.production.min.js":156,_process:136}],158:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":159}],159:[function(e,t,n){"use strict";var r=e("process-nextick-args"),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=d;var i=e("core-util-is");i.inherits=e("inherits");var a=e("./_stream_readable"),s=e("./_stream_writable");i.inherits(d,a);for(var l=o(s.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":161,"./_stream_writable":163,"core-util-is":58,inherits:89,"process-nextick-args":135}],160:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform"),o=e("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=e("inherits"),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":162,"core-util-is":58,inherits:89}],161:[function(R,D,e){(function(g,e){"use strict";var v=R("process-nextick-args");D.exports=p;var a,y=R("isarray");p.ReadableState=i;R("events").EventEmitter;var b=function(e,t){return e.listeners(t).length},o=R("./internal/streams/stream"),c=R("safe-buffer").Buffer,u=e.Uint8Array||function(){};var t=R("core-util-is");t.inherits=R("inherits");var n=R("util"),_=void 0;_=n&&n.debuglog?n.debuglog("stream"):function(){};var s,l=R("./internal/streams/BufferList"),r=R("./internal/streams/destroy");t.inherits(p,o);var d=["error","close","destroy","pause","resume"];function i(e,t){e=e||{};var n=t instanceof(a=a||R("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=R("string_decoder/").StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function p(e){if(a=a||R("./_stream_duplex"),!(this instanceof p))return new p(e);this._readableState=new i(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function f(e,t,n,r,o){var i,a,s,l=e._readableState;null===t?(l.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,k(e)}(e,l)):(o||(i=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(l,t)),i?e.emit("error",i):l.objectMode||t&&0<t.length?("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===c.prototype||(a=t,t=c.from(a)),r?l.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):h(e,l,t,!0):l.ended?e.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?h(e,l,t,!1):E(e,l)):h(e,l,t,!1))):r||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function h(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),E(e,t)}Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),p.prototype.destroy=r.destroy,p.prototype._undestroy=r.undestroy,p.prototype._destroy=function(e,t){this.push(null),t(e)},p.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),f(this,e,t,!1,n)},p.prototype.unshift=function(e){return f(this,e,null,!0,!1)},p.prototype.isPaused=function(){return!1===this._readableState.flowing},p.prototype.setEncoding=function(e){return s||(s=R("string_decoder/").StringDecoder),this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var m=8388608;function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(m<=(n=e)?n=m:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function k(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?v.nextTick(x,e):x(e))}function x(e){_("emit readable"),e.emit("readable"),N(e)}function E(e,t){t.readingMore||(t.readingMore=!0,v.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){_("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(_("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(_("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(a===i.length?o+=i:o+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=i.slice(a);break}++r}return t.length-=r,o}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0===(e-=a)){a===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=i.slice(a);break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function P(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,v.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function I(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}p.prototype.read=function(e){_("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?P(this):k(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&P(this),null;var r,o=t.needReadable;return _("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&_("length less than watermark",o=!0),t.ended||t.reading?_("reading or ended",o=!1):o&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(r=0<e?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&P(this)),null!==r&&this.emit("data",r),r},p.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},p.prototype.pipe=function(n,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=n;break;case 1:o.pipes=[o.pipes,n];break;default:o.pipes.push(n)}o.pipesCount+=1,_("pipe count=%d opts=%j",o.pipesCount,e);var t=(!e||!1!==e.end)&&n!==g.stdout&&n!==g.stderr?a:m;function i(e,t){_("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,_("cleanup"),n.removeListener("close",f),n.removeListener("finish",h),n.removeListener("drain",l),n.removeListener("error",p),n.removeListener("unpipe",i),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",d),c=!0,!o.awaitDrain||n._writableState&&!n._writableState.needDrain||l())}function a(){_("onend"),n.end()}o.endEmitted?v.nextTick(t):r.once("end",t),n.on("unpipe",i);var s,l=(s=r,function(){var e=s._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b(s,"data")&&(e.flowing=!0,N(s))});n.on("drain",l);var c=!1;var u=!1;function d(e){_("ondata"),(u=!1)!==n.write(e)||u||((1===o.pipesCount&&o.pipes===n||1<o.pipesCount&&-1!==I(o.pipes,n))&&!c&&(_("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,u=!0),r.pause())}function p(e){_("onerror",e),m(),n.removeListener("error",p),0===b(n,"error")&&n.emit("error",e)}function f(){n.removeListener("finish",h),m()}function h(){_("onfinish"),n.removeListener("close",f),m()}function m(){_("unpipe"),r.unpipe(n)}return r.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?y(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",p),n.once("close",f),n.once("finish",h),n.emit("pipe",r),o.flowing||(_("pipe resume"),r.resume()),n},p.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=I(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},p.prototype.addListener=p.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&k(this):v.nextTick(S,this))}return n},p.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(_("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,v.nextTick(T,e,t))),this},p.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},p.prototype.wrap=function(t){var n=this,r=this._readableState,o=!1;for(var e in t.on("end",function(){if(_("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){(_("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e)||(r.objectMode||e&&e.length)&&(n.push(e)||(o=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var i=0;i<d.length;i++)t.on(d[i],this.emit.bind(this,d[i]));return this._read=function(e){_("wrapped _read",e),o&&(o=!1,t.resume())},this},Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),p._fromList=A}).call(this,R("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":159,"./internal/streams/BufferList":164,"./internal/streams/destroy":165,"./internal/streams/stream":166,_process:136,"core-util-is":58,events:70,inherits:89,isarray:91,"process-nextick-args":135,"safe-buffer":172,"string_decoder/":167,util:56}],162:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_duplex"),o=e("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){s(n,e,t)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=e("inherits"),o.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":159,"core-util-is":58,inherits:89}],163:[function(k,x,e){(function(e,t){"use strict";var v=k("process-nextick-args");function d(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}x.exports=c;var s,p=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?setImmediate:v.nextTick;c.WritableState=l;var n=k("core-util-is");n.inherits=k("inherits");var r={deprecate:k("util-deprecate")},o=k("./internal/streams/stream"),y=k("safe-buffer").Buffer,b=t.Uint8Array||function(){};var i,a=k("./internal/streams/destroy");function _(){}function l(e,t){s=s||k("./_stream_duplex"),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(d=n,d.writing=!1,d.writecb=null,d.length-=d.writelen,d.writelen=0,t)a=e,s=n,l=r,c=t,u=o,--s.pendingcb,l?(v.nextTick(u,c),v.nextTick(g,a,s),a._writableState.errorEmitted=!0,a.emit("error",c)):(u(c),a._writableState.errorEmitted=!0,a.emit("error",c),g(a,s));else{var i=m(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||h(e,n),r?p(f,e,n,i,o):f(e,n,i,o)}var a,s,l,c,u;var d}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function c(e){if(s=s||k("./_stream_duplex"),!(i.call(c,this)||this instanceof s))return new c(e);this._writableState=new l(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function w(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function f(e,t,n,r){var o,i;n||(o=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),t.pendingcb--,r(),g(e,t)}function h(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var a=0,s=!0;n;)(o[a]=n).isBuf||(s=!1),n=n.next,a+=1;o.allBuffers=s,w(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new d(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback;if(w(e,t,!1,t.objectMode?1:l.length,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function u(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),g(t,n)})}function g(e,t){var n,r,o=m(t);return o&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,v.nextTick(u,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),o}n.inherits(c,o),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===c&&(e&&e._writableState instanceof l)}})):i=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r,o,i,a,s,l,c,u,d,p,f,h=this._writableState,m=!1,g=!h.objectMode&&(r=e,y.isBuffer(r)||r instanceof b);return g&&!y.isBuffer(e)&&(o=e,e=y.from(o)),"function"==typeof t&&(n=t,t=null),g?t="buffer":t||(t=h.defaultEncoding),"function"!=typeof n&&(n=_),h.ended?(d=this,p=n,f=new Error("write after end"),d.emit("error",f),v.nextTick(p,f)):(g||(i=this,a=h,l=n,u=!(c=!0),null===(s=e)?u=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(i.emit("error",u),v.nextTick(l,u),c=!1),c))&&(h.pendingcb++,m=function(e,t,n,r,o,i){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=y.from(t,n));return t}(t,r,o);r!==a&&(n=!0,o="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else w(e,t,!1,s,r,o,i);return l}(this,h,g,e,t,n)),m},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||h(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,g(e,t),n&&(t.finished?v.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=a.destroy,c.prototype._undestroy=a.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,k("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":159,"./internal/streams/destroy":165,"./internal/streams/stream":166,_process:136,"core-util-is":58,inherits:89,"process-nextick-args":135,"safe-buffer":172,"util-deprecate":194}],164:[function(e,t,n){"use strict";var s=e("safe-buffer").Buffer,r=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,o=s.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,n=o,r=a,t.copy(n,r),a+=i.data.length,i=i.next;return o},e}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":172,util:56}],165:[function(e,t,n){"use strict";var i=e("process-nextick-args");function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return r||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(a,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":135}],166:[function(e,t,n){t.exports=e("events").EventEmitter},{events:70}],167:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}(n.StringDecoder=i).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=a(t[r]);if(0<=o)return 0<o&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(0<=(o=a(t[r])))return 0<o&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(0<=(o=a(t[r])))return 0<o&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":172}],168:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":169}],169:[function(e,t,n){(((n=t.exports=e("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":159,"./lib/_stream_passthrough.js":160,"./lib/_stream_readable.js":161,"./lib/_stream_transform.js":162,"./lib/_stream_writable.js":163}],170:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":169}],171:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":163}],172:[function(e,t,n){var r=e("buffer"),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=a),i(o,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:57}],173:[function(e,t,n){(function(){var a={}.hasOwnProperty,s=[].slice;t.exports=function(e,t){var n,r,o,i;for(n in r=[],i=[],t)a.call(t,n)&&(o=t[n],"this"!==n&&(r.push(n),i.push(o)));return Function.apply(null,s.call(r).concat([e])).apply(t.this,i)}}).call(this)},{}],174:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;try{t=window}catch(e){t=self}t.SparkMD5=e()}}(function(u){"use strict";var a=function(e,t){return e+t&4294967295},r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(e,t,n,r,o,i){return t=a(a(t,e),a(r,i)),a(t<<o|t>>>32-o,n)}function l(e,t,n,r,o,i,a){return s(t&n|~t&r,e,t,o,i,a)}function c(e,t,n,r,o,i,a){return s(t&r|n&~r,e,t,o,i,a)}function d(e,t,n,r,o,i,a){return s(t^n^r,e,t,o,i,a)}function p(e,t,n,r,o,i,a){return s(n^(t|~r),e,t,o,i,a)}function f(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=p(r=p(r=p(r=p(r=d(r=d(r=d(r=d(r=c(r=c(r=c(r=c(r=l(r=l(r=l(r=l(r,o=l(o,i=l(i,n=l(n,r,o,i,t[0],7,-680876936),r,o,t[1],12,-389564586),n,r,t[2],17,606105819),i,n,t[3],22,-1044525330),o=l(o,i=l(i,n=l(n,r,o,i,t[4],7,-176418897),r,o,t[5],12,1200080426),n,r,t[6],17,-1473231341),i,n,t[7],22,-45705983),o=l(o,i=l(i,n=l(n,r,o,i,t[8],7,1770035416),r,o,t[9],12,-1958414417),n,r,t[10],17,-42063),i,n,t[11],22,-1990404162),o=l(o,i=l(i,n=l(n,r,o,i,t[12],7,1804603682),r,o,t[13],12,-40341101),n,r,t[14],17,-1502002290),i,n,t[15],22,1236535329),o=c(o,i=c(i,n=c(n,r,o,i,t[1],5,-165796510),r,o,t[6],9,-1069501632),n,r,t[11],14,643717713),i,n,t[0],20,-373897302),o=c(o,i=c(i,n=c(n,r,o,i,t[5],5,-701558691),r,o,t[10],9,38016083),n,r,t[15],14,-660478335),i,n,t[4],20,-405537848),o=c(o,i=c(i,n=c(n,r,o,i,t[9],5,568446438),r,o,t[14],9,-1019803690),n,r,t[3],14,-187363961),i,n,t[8],20,1163531501),o=c(o,i=c(i,n=c(n,r,o,i,t[13],5,-1444681467),r,o,t[2],9,-51403784),n,r,t[7],14,1735328473),i,n,t[12],20,-1926607734),o=d(o,i=d(i,n=d(n,r,o,i,t[5],4,-378558),r,o,t[8],11,-2022574463),n,r,t[11],16,1839030562),i,n,t[14],23,-35309556),o=d(o,i=d(i,n=d(n,r,o,i,t[1],4,-1530992060),r,o,t[4],11,1272893353),n,r,t[7],16,-155497632),i,n,t[10],23,-1094730640),o=d(o,i=d(i,n=d(n,r,o,i,t[13],4,681279174),r,o,t[0],11,-358537222),n,r,t[3],16,-722521979),i,n,t[6],23,76029189),o=d(o,i=d(i,n=d(n,r,o,i,t[9],4,-640364487),r,o,t[12],11,-421815835),n,r,t[15],16,530742520),i,n,t[2],23,-995338651),o=p(o,i=p(i,n=p(n,r,o,i,t[0],6,-198630844),r,o,t[7],10,1126891415),n,r,t[14],15,-1416354905),i,n,t[5],21,-57434055),o=p(o,i=p(i,n=p(n,r,o,i,t[12],6,1700485571),r,o,t[3],10,-1894986606),n,r,t[10],15,-1051523),i,n,t[1],21,-2054922799),o=p(o,i=p(i,n=p(n,r,o,i,t[8],6,1873313359),r,o,t[15],10,-30611744),n,r,t[6],15,-1560198380),i,n,t[13],21,1309151649),o=p(o,i=p(i,n=p(n,r,o,i,t[4],6,-145523070),r,o,t[11],10,-1120210379),n,r,t[2],15,718787259),i,n,t[9],21,-343485551),e[0]=a(n,e[0]),e[1]=a(r,e[1]),e[2]=a(o,e[2]),e[3]=a(i,e[3])}function h(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function m(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,n,r,o,i,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)f(l,h(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(f(l,r),t=0;t<16;t+=1)r[t]=0;return o=(o=8*s).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,f(l,r),l}function n(e){var t,n="";for(t=0;t<4;t+=1)n+=r[e>>8*t+4&15]+r[e>>8*t&15];return n}function g(e){var t;for(t=0;t<e.length;t+=1)e[t]=n(e[t]);return e.join("")}function i(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function v(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function y(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==g(o("hello"))&&(a=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function c(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var n,r,o,i,a=this.byteLength,s=c(e,a),l=a;return t!==u&&(l=c(t,a)),l<s?new ArrayBuffer(0):(n=l-s,r=new ArrayBuffer(n),o=new Uint8Array(r),i=new Uint8Array(this,s,n),o.set(i),r)}}(),y.prototype.append=function(e){return this.appendBinary(i(e)),this},y.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)f(this._hash,h(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},y.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=g(this._hash),e&&(n=v(n)),this.reset(),n},y.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},y.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},y.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},y.prototype._finish=function(e,t){var n,r,o,i=t;if(e[i>>2]|=128<<(i%4<<3),55<i)for(f(this._hash,e),i=0;i<16;i+=1)e[i]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=r,e[15]=o,f(this._hash,e)},y.hash=function(e,t){return y.hashBinary(i(e),t)},y.hashBinary=function(e,t){var n=g(o(e));return t?v(n):n},(y.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n,r,o,i,a=(n=this._buff.buffer,r=e,o=!0,(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),i.set(new Uint8Array(r),n.byteLength),o?i:i.buffer),s=a.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)f(this._hash,m(a.subarray(t-64,t)));return this._buff=t-64<s?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=g(this._hash),e&&(n=v(n)),this.reset(),n},y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.getState=function(){var e,t=y.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},y.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:o}(e.buff,!0),y.prototype.setState.call(this,e)},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.hash=function(e,t){var n=g(function(e){var t,n,r,o,i,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)f(l,m(e.subarray(t-64,t)));for(n=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(f(l,r),t=0;t<16;t+=1)r[t]=0;return o=(o=8*s).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,f(l,r),l}(new Uint8Array(e)));return t?v(n):n},y})},{}],175:[function(e,t,n){t.exports=r;var u=e("events").EventEmitter;function r(){u.call(this)}e("inherits")(r,u),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",s));var i=!1;function a(){i||(i=!0,t.end())}function s(){i||(i=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(c(),0===u.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},{events:70,inherits:89,"readable-stream/duplex.js":158,"readable-stream/passthrough.js":168,"readable-stream/readable.js":169,"readable-stream/transform.js":170,"readable-stream/writable.js":171}],176:[function(e,t,n){var r=e("buffer").Buffer,o=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var i=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!o(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=a)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function a(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function l(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}i.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!(55296<=(o=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&o<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var o;r=(t+=e.toString(this.encoding,0,r)).length-1;if(55296<=(o=t.charCodeAt(r))&&o<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)}return t},i.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},i.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,n).toString(o)}return t}},{buffer:57}],177:[function(e,t,n){t.exports={encode:function(e){return"ÿ"+e[0]+"ÿ"+e[1]},decode:function(e){var t=e.toString(),n=t.indexOf("ÿ",1);return[t.substring(1,n),t.substring(n+1)]},lowerBound:"\0",upperBound:"ÿ"}},{}],178:[function(e,t,n){var r=e("errno").create,o=r("LevelUPError"),i=r("NotFoundError",o);i.prototype.notFound=!0,i.prototype.status=404,t.exports={LevelUPError:o,InitializationError:r("InitializationError",o),OpenError:r("OpenError",o),ReadError:r("ReadError",o),WriteError:r("WriteError",o),NotFoundError:i,EncodingError:r("EncodingError",o)}},{errno:184}],179:[function(e,t,n){var r=e("./nut"),o=e("./shell"),i=new(e("level-codec")),a=e("./read-stream"),s=e("./codec/legacy");t.exports=function(e){return o(r(e,s,i),[],a,e.options)}},{"./codec/legacy":177,"./nut":180,"./read-stream":181,"./shell":182,"level-codec":93}],180:[function(e,t,n){var d=e("ltgt");function p(e){return"function"==typeof e}t.exports=function(l,i,c,e){var a=[],s=!1;function u(e,t,n,r){return i.encode([e,c.encodeKey(t,n,r)])}function t(){for(s=!0;a.length;)a.shift()()}return p(l.isOpen)&&l.isOpen()?s=!0:l.open(t),{apply:function(e,t,n){for(var r=0;r<e.length;r++){var o=e[r];(s=(a=o).prefix)&&s.options&&(a.keyEncoding=a.keyEncoding||s.options.keyEncoding,a.valueEncoding=a.valueEncoding||s.options.valueEncoding),o.prefix=null==(i=o.prefix)?i:p(i.prefix)?i.prefix():i}var i,a,s;if("object"!=typeof(t=t||{}))throw new Error("opts must be object, was:"+t);"function"==typeof t&&(n=t,t={}),e.length?(l.db||l).batch(e.map(function(e){return{key:u(e.prefix,e.key,t,e),value:"del"!==e.type?c.encodeValue(e.value,t,e):void 0,type:e.type||(void 0===e.value?"del":"put")}}),t,function(e){if(e)return n(e);n()}):n()},get:function(e,t,n,r){return n.asBuffer=c.valueAsBuffer(n),(l.db||l).get(u(t,e,n),n,function(e,t){e?r(e):r(null,c.decodeValue(t,n))})},createDecoder:function(n){return function(e,t){return{key:c.decodeKey(i.decode(e)[1],n),value:c.decodeValue(t,n)}}},isOpen:function(){return l.db&&p(l.db.isOpen)?l.db.isOpen():l.isOpen()},isClosed:function(){return l.db&&p(l.db.isClosed)?l.db.isClosed():l.isClosed()},close:function(e){return l.close(e)},iterator:function(e,t){var n=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{}),r=e.prefix||[];function o(t){return{next:function(e){return t.next(e)},end:function(e){t.end(e)}}}if(d.toLtgt(e,n,function(e){return u(r,e,n,{})},i.lowerBound,i.upperBound),n.prefix=null,n.keyAsBuffer=n.valueAsBuffer=!1,"number"!=typeof n.limit&&(n.limit=-1),n.keyAsBuffer=i.buffer,n.valueAsBuffer=c.valueAsBuffer(n),s)return o((l.db||l).iterator(n));a.push(function(){t(null,o((l.db||l).iterator(n)))})}}}},{ltgt:186}],181:[function(e,t,n){var r=e("readable-stream").Readable,o=e("inherits"),i=e("./errors").EncodingError;function a(e,t){if(!(this instanceof a))return new a(e,t);r.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._waiting=!1,this._options=e,this._makeData=t}o(a,r),a.prototype.setIterator=function(e){return this._iterator=e,this._destroyed?e.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this},a.prototype._read=function(){var r=this;if(!r._destroyed)return r._iterator?void r._iterator.next(function(e,t,n){if(e||void 0===t&&void 0===n)return e||r._destroyed||r.push(null),r._cleanup(e);try{n=r._makeData(t,n)}catch(e){return r._cleanup(new i(e))}r._destroyed||r.push(n)}):this._waiting=!0},a.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;e&&t.emit("error",e),t._iterator?t._iterator.end(function(){t._iterator=null,t.emit("close")}):t.emit("close")}},a.prototype.destroy=function(){this._cleanup()},a.prototype.toString=function(){return"LevelUP.ReadStream"},t.exports=a},{"./errors":178,inherits:89,"readable-stream":193}],182:[function(r,o,e){(function(t){var e=r("events").EventEmitter,u=r("./errors"),n=o.exports=function(o,i,r,a){var s=new e;function l(e){e&&s.emit("error",e)}function c(e){var t={};if(a)for(var n in a)null!=a[n]&&(t[n]=a[n]);if(e)for(var n in e)null!=e[n]&&(t[n]=e[n]);return t}return s.sublevels={},s.options=a,s.version="6.5.4",s.methods={},i=i||[],s.put=function(t,n,e,r){"function"==typeof e&&(r=e,e={}),r||(r=l),o.apply([{key:t,value:n,prefix:i.slice(),type:"put"}],c(e),function(e){if(e||(s.emit("put",t,n),r(null)),e)return r(e)})},s.prefix=function(){return i.slice()},s.del=function(t,e,n){"function"==typeof e&&(n=e,e={}),n||(n=l),o.apply([{key:t,prefix:i.slice(),type:"del"}],c(e),function(e){if(e||(s.emit("del",t),n(null)),e)return n(e)})},s.batch=function(t,e,n){"function"==typeof e&&(n=e,e={}),n||(n=l),t=t.map(function(e){return{key:e.key,value:e.value,prefix:e.prefix||i,keyEncoding:e.keyEncoding,valueEncoding:e.valueEncoding,type:e.type}}),o.apply(t,c(e),function(e){if(e||(s.emit("batch",t),n(null)),e)return n(e)})},s.get=function(e,t,n){"function"==typeof t&&(n=t,t={}),o.get(e,i,c(t),function(e,t){e?n(new u.NotFoundError("Key not found in database",e)):n(null,t)})},s.clone=function(e){return n(o,i,r,c(e))},s.sublevel=function(e,t){return s.sublevels[e]=s.sublevels[e]||n(o,i.concat(e),r,c(t))},s.readStream=s.createReadStream=function(e){var n;(e=c(e)).prefix=i;var t=o.iterator(e,function(e,t){n.setIterator(t)});return n=r(e,o.createDecoder(e)),t&&n.setIterator(t),n},s.valueStream=s.createValueStream=function(e){return(e=e||{}).values=!0,e.keys=!1,s.createReadStream(e)},s.keyStream=s.createKeyStream=function(e){return(e=e||{}).values=!1,e.keys=!0,s.createReadStream(e)},s.close=function(e){e=e||function(){},i.length?t.nextTick(e):o.close(e)},s.isOpen=o.isOpen,s.isClosed=o.isClosed,s}}).call(this,r("_process"))},{"./errors":178,_process:136,events:70}],183:[function(e,t,n){var r=e("prr");function s(e,t,n){r(this,{type:e,name:e,cause:"string"!=typeof t?t:n,message:t&&"string"!=typeof t?t.message:t},"ewr")}function l(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),s.call(this,"CustomError",e,t)}l.prototype=new Error,t.exports=function(a){var e=function(e,t){return n=a,r=e,(i=function(e,t){s.call(this,r,e,t),"FilesystemError"==r&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(n.errno[this.cause.errno]?n.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee)}).prototype=(o=t)?new o:new l,i;var n,r,o,i};return{CustomError:l,FilesystemError:e("FilesystemError"),createError:e}}},{prr:187}],184:[function(e,t,n){arguments[4][68][0].apply(n,arguments)},{"./custom":183,dup:68}],185:[function(e,t,n){arguments[4][97][0].apply(n,arguments)},{dup:97}],186:[function(e,t,f){(function(i){function l(e,t){return Object.hasOwnProperty.call(e,t)}function a(e){return void 0!==e&&""!==e}function l(e,t){return Object.hasOwnProperty.call(e,t)}function t(e,t){return Object.hasOwnProperty.call(e,t)&&t}f.compare=function(e,t){if(i.isBuffer(e)){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=e[r]-t[r];if(o)return o}return e.length-t.length}return e<t?-1:t<e?1:0};var n=f.lowerBoundKey=function(e){return t(e,"gt")||t(e,"gte")||t(e,"min")||(e.reverse?t(e,"end"):t(e,"start"))||void 0},s=f.lowerBound=function(e){var t=n(e);return t&&e[t]};f.lowerBoundInclusive=function(e){return!l(e,"gt")},f.upperBoundInclusive=function(e){return!(l(e,"lt")||!e.minEx)};var c=f.lowerBoundExclusive=function(e){return!(!l(e,"gt")&&!e.minEx)},u=f.upperBoundExclusive=function(e){return!!l(e,"lt")},r=f.upperBoundKey=function(e){return t(e,"lt")||t(e,"lte")||t(e,"max")||(e.reverse?t(e,"start"):t(e,"end"))||void 0},d=f.upperBound=function(e){var t=r(e);return t&&e[t]};function p(e){return e}f.toLtgt=function(e,t,n,r,o){t=t||{},n=n||p;var i=3<arguments.length,a=f.lowerBoundKey(e),s=f.upperBoundKey(e);return a?"gt"===a?t.gt=n(e.gt,!1):t.gte=n(e[a],!1):i&&(t.gte=n(r,!1)),s?"lt"===s?t.lt=n(e.lt,!0):t.lte=n(e[s],!0):i&&(t.lte=n(o,!0)),null!=e.reverse&&(t.reverse=!!e.reverse),l(t,"max")&&delete t.max,l(t,"min")&&delete t.min,l(t,"start")&&delete t.start,l(t,"end")&&delete t.end,t},f.contains=function(e,t,n){n=n||f.compare;var r=s(e);if(a(r)&&((o=n(t,r))<0||0===o&&c(e)))return!1;var o,i=d(e);if(a(i)&&(0<(o=n(t,i))||0===o&&u(e)))return!1;return!0},f.filter=function(t,n){return function(e){return f.contains(t,e,n)}}}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":90}],187:[function(e,t,n){arguments[4][142][0].apply(n,arguments)},{dup:142}],188:[function(e,t,n){arguments[4][98][0].apply(n,arguments)},{"./_stream_readable":190,"./_stream_writable":192,_process:136,"core-util-is":58,dup:98,inherits:89}],189:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{"./_stream_transform":191,"core-util-is":58,dup:99,inherits:89}],190:[function(_,w,e){(function(h){w.exports=n;var m=_("isarray"),p=_("buffer").Buffer;n.ReadableState=t;var g=_("events").EventEmitter;g.listenerCount||(g.listenerCount=function(e,t){return e.listeners(t).length});var r,o=_("stream"),e=_("core-util-is");function t(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(r||(r=_("string_decoder/").StringDecoder),this.decoder=new r(e.encoding),this.encoding=e.encoding)}function n(e){if(!(this instanceof n))return new n(e);this._readableState=new t(e,this),this.readable=!0,o.call(this)}function i(e,t,n,r,o){var i,a,s,l=function(e,t){var n=null;p.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(t,n);if(l)e.emit("error",l);else if(null==n)t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,0<t.length?u(e):f(e)}(e,t);else if(t.objectMode||n&&0<n.length)if(t.ended&&!o){var c=new Error("stream.push() after EOF");e.emit("error",c)}else if(t.endEmitted&&o){c=new Error("stream.unshift() after end event");e.emit("error",c)}else!t.decoder||o||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&u(e),i=e,(a=t).readingMore||(a.readingMore=!0,h.nextTick(function(){!function(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}(i,a)}));else o||(t.reading=!1);return!(s=t).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}e.inherits=_("inherits"),e.inherits(n,o),n.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding)!==n.encoding&&(e=new p(e,t),t=""),i(this,n,e,t,!1)},n.prototype.unshift=function(e){return i(this,this._readableState,e,"",!0)},n.prototype.setEncoding=function(e){r||(r=_("string_decoder/").StringDecoder),this._readableState.decoder=new r(e),this._readableState.encoding=e};var a=8388608;function s(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(a<=e)e=a;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?h.nextTick(function(){l(e)}):l(e))}function l(e){e.emit("readable")}function v(e){var r,o=e._readableState;function t(e,t,n){!1===e.write(r)&&o.awaitDrain++}for(o.awaitDrain=0;o.pipesCount&&null!==(r=e.read());)if(1===o.pipesCount?t(o.pipes):b(o.pipes,t),e.emit("data",r),0<o.awaitDrain)return;if(0===o.pipesCount)return o.flowing=!1,void(0<g.listenerCount(e,"data")&&c(e));o.ranOut=!0}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,v(this))}function c(t,e){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=e||!1,r=!1;t.readable=!0,t.pipe=o.prototype.pipe,t.on=t.addListener=o.prototype.on,t.on("readable",function(){var e;for(r=!0;!n&&null!==(e=t.read());)t.emit("data",e);null===e&&(r=!1,t._readableState.needReadable=!0)}),t.pause=function(){n=!0,this.emit("pause")},t.resume=function(){n=!1,r?h.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function d(e,t){var n,r=t.buffer,o=t.length,i=!!t.decoder,a=!!t.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(a)n=r.shift();else if(!e||o<=e)n=i?r.join(""):p.concat(r,o),r.length=0;else{if(e<r[0].length)n=(u=r[0]).slice(0,e),r[0]=u.slice(e);else if(e===r[0].length)n=r.shift();else{n=i?"":new p(e);for(var s=0,l=0,c=r.length;l<c&&s<e;l++){var u=r[0],d=Math.min(e-s,u.length);i?n+=u.slice(0,d):u.copy(n,s,0,d),d<u.length?r[0]=u.slice(d):r.shift(),s+=d}}}return n}function f(e){var t=e._readableState;if(0<t.length)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,h.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function b(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}n.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||0<e)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return u(this),null;if(0===(e=s(e,t))&&t.ended)return n=null,0<t.length&&t.decoder&&(n=d(e,t),t.length-=n.length),0===t.length&&f(this),n;var o=t.needReadable;return t.length-e<=t.highWaterMark&&(o=!0),(t.ended||t.reading)&&(o=!1),o&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),o&&!t.reading&&(e=s(r,t)),null===(n=0<e?d(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&f(this),n},n.prototype._read=function(e){this.emit("error",new Error("not implemented"))},n.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1;var o=(!e||!1!==e.end)&&t!==h.stdout&&t!==h.stderr?a:c;function i(e){e===n&&c()}function a(){t.end()}r.endEmitted?h.nextTick(o):n.once("end",o),t.on("unpipe",i);var s,l=(s=n,function(){var e=s._readableState;e.awaitDrain--,0===e.awaitDrain&&v(s)});function c(){t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",u),t.removeListener("unpipe",i),n.removeListener("end",a),n.removeListener("end",c),t._writableState&&!t._writableState.needDrain||l()}function u(e){f(),t.removeListener("error",u),0===g.listenerCount(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",p),f()}function p(){t.removeListener("close",d),f()}function f(){n.unpipe(t)}return t.on("drain",l),t._events&&t._events.error?m(t._events.error)?t._events.error.unshift(u):t._events.error=[u,t._events.error]:t.on("error",u),t.once("close",d),t.once("finish",p),t.emit("pipe",n),r.flowing||(this.on("readable",y),r.flowing=!0,h.nextTick(function(){v(n)})),t},n.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}return-1===(o=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e))||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},n.prototype.addListener=n.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||c(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&u(this):this.read(0))}return n},n.prototype.resume=function(){c(this),this.read(0),this.emit("resume")},n.prototype.pause=function(){c(this,!0),this.emit("pause")},n.prototype.wrap=function(t){var n=this._readableState,r=!1,o=this;for(var e in t.on("end",function(){if(n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&o.push(e)}o.push(null)}),t.on("data",function(e){(n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e)||(n.objectMode||e&&e.length)&&(o.push(e)||(r=!0,t.pause()))}),t)"function"==typeof t[e]&&void 0===this[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));return b(["error","close","destroy","pause","resume"],function(e){t.on(e,o.emit.bind(o,e))}),o._read=function(e){r&&(r=!1,t.resume())},o},n._fromList=d}).call(this,_("_process"))},{_process:136,buffer:57,"core-util-is":58,events:70,inherits:89,isarray:185,stream:175,"string_decoder/":176}],191:[function(e,t,n){t.exports=a;var r=e("./_stream_duplex"),o=e("core-util-is");function i(e,n){this.afterTransform=function(e,t){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,(r.writecb=null)!=n&&e.push(n);o&&o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(n,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e);this._transformState=new i(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}o.inherits=e("inherits"),o.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":188,"core-util-is":58,inherits:89}],192:[function(i,t,e){(function(l){t.exports=o;var u=i("buffer").Buffer;o.WritableState=r;var e=i("core-util-is");e.inherits=i("inherits");var n=i("stream");function d(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1;var r=(this.finished=!1)===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(a=n,a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,t)!function(e,t,n,r,o){n?l.nextTick(function(){o(r)}):o(r);e._writableState.errorEmitted=!0,e.emit("error",r)}(e,0,r,t,o);else{var i=c(e,n);i||n.bufferProcessing||!n.buffer.length||function(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],o=r.chunk,i=r.encoding,a=r.callback,s=t.objectMode?1:o.length;if(p(e,t,s,o,i,a),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}(e,n),r?l.nextTick(function(){s(e,n,i,o)}):s(e,n,i,o)}var a}(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var t=i("./_stream_duplex");if(!(this instanceof o||this instanceof t))return new o(e);this._writableState=new r(e,this),this.writable=!0,n.call(this)}function p(e,t,n,r,o,i){t.writelen=n,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,o,t.onwrite),t.sync=!1}function s(e,t,n,r){var o,i;n||(o=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),r(),n&&a(e,t)}function c(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function a(e,t){var n=c(0,t);return n&&(t.finished=!0,e.emit("finish")),n}e.inherits(o,n),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r,o,i,a=this._writableState,s=!1;return"function"==typeof t&&(n=t,t=null),u.isBuffer(e)?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=function(){}),a.ended?(r=this,o=n,i=new Error("write after end"),r.emit("error",i),l.nextTick(function(){o(i)})):function(e,t,n,r){var o=!0;if(!u.isBuffer(n)&&"string"!=typeof n&&null!=n&&!t.objectMode){var i=new TypeError("Invalid non-string/buffer chunk");e.emit("error",i),l.nextTick(function(){r(i)}),o=!1}return o}(this,a,e,n)&&(s=function(e,t,n,r,o){i=t,a=n,s=r,i.objectMode||!1===i.decodeStrings||"string"!=typeof a||(a=new u(a,s)),n=a,u.isBuffer(n)&&(r="buffer");var i,a,s;var l=t.objectMode?1:n.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);t.writing?t.buffer.push(new d(n,r,o)):p(e,t,l,n,r,o);return c}(this,a,e,t,n)),s},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.ending||r.finished||function(e,t,n){t.ending=!0,a(e,t),n&&(t.finished?l.nextTick(n):e.once("finish",n));t.ended=!0}(this,r,n)}}).call(this,i("_process"))},{"./_stream_duplex":188,_process:136,buffer:57,"core-util-is":58,inherits:89,stream:175}],193:[function(e,t,n){var r=e("stream");(n=t.exports=e("./lib/_stream_readable.js")).Stream=r,(n.Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":188,"./lib/_stream_passthrough.js":189,"./lib/_stream_readable.js":190,"./lib/_stream_transform.js":191,"./lib/_stream_writable.js":192,stream:175}],194:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],195:[function(e,t,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],196:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],197:[function(p,e,T){(function(r,o){var s=/%[sdj%]/g;T.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(s,function(e){if("%%"===e)return"%";if(o<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<o;a=r[++n])y(a)||!u(a)?i+=" "+a:i+=" "+l(a);return i},T.deprecate=function(e,t){if(w(o.process))return function(){return T.deprecate(e,t).apply(this,arguments)};if(!0===r.noDeprecation)return e;var n=!1;return function(){if(!n){if(r.throwDeprecation)throw new Error(t);r.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,i={};function l(e,t){var n={seen:[],stylize:c};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&T._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),f(n,e,n.depth)}function a(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function c(e,t){return e}function f(t,n,r){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==T.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return _(e)||(e=f(t,e,r)),e}var o=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(t,n);if(o)return o;var i,a=Object.keys(n),s=(i={},a.forEach(function(e,t){i[e]=!0}),i);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return h(n);if(0===a.length){if(C(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(k(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return h(n)}var c,u="",d=!1,p=["{","}"];(g(n)&&(d=!0,p=["[","]"]),C(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return k(n)&&(u=" "+RegExp.prototype.toString.call(n)),x(n)&&(u=" "+Date.prototype.toUTCString.call(n)),E(n)&&(u=" "+h(n)),0!==a.length||d&&0!=n.length?r<0?k(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=d?function(t,n,r,o,e){for(var i=[],a=0,s=n.length;a<s;++a)S(n,String(a))?i.push(m(t,n,r,o,String(a),!0)):i.push("");return e.forEach(function(e){e.match(/^\d+$/)||i.push(m(t,n,r,o,e,!0))}),i}(t,n,r,s,a):a.map(function(e){return m(t,n,r,s,e,d)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,u,p)):p[0]+u+p[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,r,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),S(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(l.value)<0?-1<(s=y(n)?f(e,l.value,null):f(e,l.value,n-1)).indexOf("\n")&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function b(e){return"number"==typeof e}function _(e){return"string"==typeof e}function w(e){return void 0===e}function k(e){return u(e)&&"[object RegExp]"===t(e)}function u(e){return"object"==typeof e&&null!==e}function x(e){return u(e)&&"[object Date]"===t(e)}function E(e){return u(e)&&("[object Error]"===t(e)||e instanceof Error)}function C(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}T.debuglog=function(t){if(w(e)&&(e=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=r.pid;i[t]=function(){var e=T.format.apply(T,arguments);console.error("%s %d: %s",t,n,e)}}else i[t]=function(){};return i[t]},(T.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},T.isArray=g,T.isBoolean=v,T.isNull=y,T.isNullOrUndefined=function(e){return null==e},T.isNumber=b,T.isString=_,T.isSymbol=function(e){return"symbol"==typeof e},T.isUndefined=w,T.isRegExp=k,T.isObject=u,T.isDate=x,T.isError=E,T.isFunction=C,T.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},T.isBuffer=p("./support/isBuffer");var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}T.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),d[e.getMonth()],t].join(" ")),T.format.apply(T,arguments))},T.inherits=p("inherits"),T._extend=function(e,t){if(!t||!u(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,p("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":196,_process:136,inherits:195}],198:[function(e,t,n){"use strict";function f(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var o=r.element,i=r.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){o[t.pop()]=e}else t.push(e)}n.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,o,i,a,s,l,c,u,d,p="";n=t.pop();)if(r=n.obj,p+=n.prefix||"",o=n.val||"")p+=o;else if("object"!=typeof r)p+=void 0===r?null:JSON.stringify(r);else if(null===r)p+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),i=r.length-1;0<=i;i--)a=0===i?"":",",t.push({obj:r[i],prefix:a});t.push({val:"["})}else{for(l in s=[],r)r.hasOwnProperty(l)&&s.push(l);for(t.push({val:"}"}),i=s.length-1;0<=i;i--)u=r[c=s[i]],d=0<i?",":"",d+=JSON.stringify(c)+":",t.push({obj:u,prefix:d});t.push({val:"{"})}return p},n.parse=function(e){for(var t,n,r,o,i,a,s,l,c,u=[],d=[],p=0;;)if("}"!==(t=e[p++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,f(null,u,d);break;case"t":p+=3,f(!0,u,d);break;case"f":p+=4,f(!1,u,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(r=e[p++],!/[\d\.\-e\+]/.test(r)){p--;break}n+=r}f(parseFloat(n),u,d);break;case'"':for(o="",i=void 0,a=0;'"'!==(s=e[p++])||"\\"===i&&a%2==1;)o+=s,"\\"===(i=s)?a++:a=0;f(JSON.parse('"'+o+'"'),u,d);break;case"[":l={element:[],index:u.length},u.push(l.element),d.push(l);break;case"{":c={element:{},index:u.length},u.push(c.element),d.push(c);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===u.length)return u.pop();f(u.pop(),u,d)}}},{}],199:[function(e,n,t){(function(e){"use strict";var t=function(){};"production"!==e.env.NODE_ENV&&(t=function(e,t,n){var r=arguments.length;n=new Array(2<r?r-2:0);for(var o=2;o<r;o++)n[o-2]=arguments[o];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var i=0,a="Warning: "+t.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}}),n.exports=t}).call(this,e("_process"))},{_process:136}],200:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)o.call(n,r)&&(e[r]=n[r])}return e};var o=Object.prototype.hasOwnProperty},{}]},{},[2]);