var pxt;!function(t){var o,i,n=[],r=!1,s=function(){function t(t){this.log=t,this.q=[],n.push(this)}return t.prototype.track=function(t,e,n){r?this.log(t,e,n):(this.q.push([t,e,n]),20<this.q.length&&this.q.shift())},t.prototype.flush=function(){for(;this.q.length;){var t=this.q.shift(),e=t[0],n=t[1],o=t[2];this.log(e,n,o)}},t}();function d(t){void 0===t&&(t=!1);var e=window.loadAppInsights;e&&(e(t),r=!0,n.forEach(function(t){return t.flush()}))}function f(t){if(document.head){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e.setAttribute("type","text/css"),document.head.appendChild(e)}}function p(t,e){var n=!1;if(!document.body)throw new Error("Bad call to injectScriptAsync");var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.onload=function(t){n||(e(),n=!0)},o.onerror=function(t){n||(e(t),n=!0)},document.body.appendChild(o),o.setAttribute("src",t)}t.initAnalyticsAsync=function(){var t,e,n,o,i,r,s,c;t="undefined"!=typeof window,e="undefined"!=typeof Windows,n=t&&!!window.pxtElectron,o=t&&!!window.ipcRenderer,e||n||o?d(!0):/sandbox=1|#sandbox|#sandboxproject/i.test(window.location.href)?d(!1):(i=document.domain,c=/(live)?lang=([a-z]{2,}(-[A-Z]+)?)/i.exec(window.location.href),r=c?c[2]:navigator.userLanguage||navigator.language,s=function(t,e){if(t||e.Error)d(!1);else{if(function(t,e){var n=Date.parse(e);if(!isNaN(n)&&document&&document.cookie)for(var o=document.cookie.split(";"),i=0,r=o;i<r.length;i++){var s=r[i];if((s=s.trim()).indexOf("=")==t.length&&s.substr(0,t.length)==t){var c=parseInt(s.substr(t.length+1));return!!isNaN(c)||c<Math.floor(n/1e3)}}return!0}(e.CookieName,e.MinimumConsentDate)){var n=new Date(0).toUTCString();document.cookie="ai_user=; expires="+n,document.cookie="ai_session=; expires="+n,document.cookie=e.CookieName+"=0; expires="+n}var o,i,r,s,c,a,u=document.getElementById("cookiebanner");u||(u=document.createElement("div"),document.body.insertBefore(u,document.body.firstChild)),u.innerHTML=e.Markup,e.Css&&e.Css.length&&e.Css.forEach(f),o=e.Js||[],i=p,r=function(t){t||"undefined"==typeof mscc||(mscc.hasConsent()?d(!0):mscc.on("consent",function(){return d(!0)}))},s=0,c=[],(a=function(){s>=o.length?r(void 0,c):i(o[s++],function(t,e){t?r(t):(c.push(e),a())})})()}},function(t,e){try{var n,o=!1;(n=new XMLHttpRequest).onreadystatechange=function(){if(!o&&4==n.readyState){o=!0;var t={status:n.status,body:n.responseText};e(void 0,t)}},n.open("GET",t),n.send()}catch(t){e(t)}}("https://makecode.com/api/mscc/"+i+"/"+r,function(t,e){if(t)s(t);else{if(200===e.status)try{var n=JSON.parse(e.body);return void s(void 0,n)}catch(t){return void s(new Error("Bad response from server: "+e.body))}s(new Error("didn't get 200 response: "+e.status+" "+e.body))}}))},t.aiTrackEvent=function(t,e,n){o||(o=new s(function(t,e,n){return window.appInsights.trackEvent(t,e,n)})),o.track(t,e,n)},t.aiTrackException=function(t,e,n){i||(i=new s(function(t,e,n){return window.appInsights.trackException(t,e,n)})),i.track(t,e,n)},t.initializeAppInsightsInternal=d}(pxt||(pxt={}));